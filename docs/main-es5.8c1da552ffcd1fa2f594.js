!function(){function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),u=new E(r||[]);return i(a,"_invoke",{value:_(e,n,u)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=l;var f={};function d(){}function v(){}function p(){}var y={};c(y,a,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(S([])));m&&m!==n&&r.call(m,a)&&(y=m);var k=p.prototype=d.prototype=Object.create(y);function w(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){function n(i,o,a,u){var s=h(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,u)},function(e){n("throw",e,a,u)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,u)})}u(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t(function(t,i){n(e,r,t,i)})}return o=o?o.then(i,i):i()}})}function _(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=p,i(k,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:v,configurable:!0}),v.displayName=c(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,u,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(k),c(k,s,"Generator"),c(k,a,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function t(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||l(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){if(Array.isArray(e))return e}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=a(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},o.apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function u(e){return function(e){if(Array.isArray(e))return h(e)}(e)||s(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function g(e){var t=_();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){var t="function"==typeof Map?new Map:void 0;return w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return b(e,arguments,I(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x(r,e)},w(e)}function b(e,t,n){return b=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&x(i,n.prototype),i},b.apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}(self.webpackChunkmatrimonio_gian=self.webpackChunkmatrimonio_gian||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,t,r){"use strict";r.d(t,{deG:function(){return ln},tb:function(){return ts},AFp:function(){return Yu},ip1:function(){return Ku},CZH:function(){return Qu},hGG:function(){return Ws},z2F:function(){return Fs},sBO:function(){return ou},Sil:function(){return fs},_Vd:function(){return Aa},EJc:function(){return is},SBq:function(){return Da},qLn:function(){return Xr},vpe:function(){return Ru},gxx:function(){return co},tBr:function(){return Dn},XFs:function(){return H},OlP:function(){return cn},zs3:function(){return To},ZZ4:function(){return Xa},aQg:function(){return eu},soG:function(){return rs},YKP:function(){return vu},v3s:function(){return Us},h0i:function(){return du},PXZ:function(){return Rs},R0b:function(){return ps},FiY:function(){return Pn},Lbi:function(){return es},g9A:function(){return $u},Qsj:function(){return Ma},FYo:function(){return La},JOm:function(){return Mn},Tiy:function(){return Va},q3G:function(){return Kr},tp0:function(){return Ln},EAV:function(){return zs},Rgc:function(){return lu},dDg:function(){return _s},DyG:function(){return hn},q4F:function(){return ja},GfV:function(){return Ua},s_b:function(){return yu},ifc:function(){return Q},eFA:function(){return Ds},G48:function(){return Ns},Gpc:function(){return S},X6Q:function(){return As},_c5:function(){return Zs},VLi:function(){return Is},c2e:function(){return ns},zSh:function(){return ho},wAp:function(){return ya},vHH:function(){return N},EiD:function(){return Gr},mCW:function(){return Nr},qzn:function(){return kr},JVY:function(){return br},pB0:function(){return Tr},eBb:function(){return xr},L6k:function(){return _r},LAX:function(){return Ir},cg1:function(){return da},Tjo:function(){return Hs},kL8:function(){return va},yhl:function(){return wr},dqk:function(){return $},sIi:function(){return Po},CqO:function(){return Qo},QGY:function(){return Wo},F4k:function(){return Ko},RDi:function(){return Fe},AaK:function(){return x},z3N:function(){return mr},qOj:function(){return So},TTD:function(){return Ne},_Bn:function(){return Ea},xp6:function(){return di},uIk:function(){return Fo},ekj:function(){return ta},Suo:function(){return Zu},Xpm:function(){return le},lG2:function(){return ge},Yz7:function(){return P},cJS:function(){return L},oAB:function(){return ve},Yjl:function(){return me},Y36:function(){return Uo},_UZ:function(){return Ho},BQk:function(){return Go},ynx:function(){return Zo},qZA:function(){return Bo},TgZ:function(){return zo},n5z:function(){return rn},Ikx:function(){return ca},LFG:function(){return Cn},$8M:function(){return an},NdJ:function(){return Yo},CRH:function(){return Gu},Q6J:function(){return jo},WLB:function(){return Nu},iGM:function(){return Hu},LSH:function(){return Qr},kYT:function(){return pe},YNc:function(){return Vo},_uU:function(){return aa},Oqu:function(){return ua},hij:function(){return sa}});var i=r(9765),a=r(5319),s=r(7574),l=r(6682),h=r(2441),f=r(1307);function v(){return new i.xQ}function m(e){for(var t in e)if(e[t]===m)return t;throw Error("Could not find renamed property on target object.")}function _(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function x(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(x).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function T(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var E=m({__forward_ref__:m});function S(e){return e.__forward_ref__=S,e.toString=function(){return x(this())},e}function C(e){return A(e)?e():e}function A(e){return"function"==typeof e&&e.hasOwnProperty(E)&&e.__forward_ref__===S}var N=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),i=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,r)),i.code=e,i}return d(n)}(w(Error));function O(e){return"string"==typeof e?e:null==e?"":String(e)}function R(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():O(e)}function D(e,t){var n=t?" in ".concat(t):"";throw new N("201","No provider for ".concat(R(e)," found").concat(n))}function P(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function L(e){return{providers:e.providers||[],imports:e.imports||[]}}function M(e){return F(e,j)||F(e,z)}function F(e,t){return e.hasOwnProperty(t)?e[t]:null}function V(e){return e&&(e.hasOwnProperty(q)||e.hasOwnProperty(B))?e[q]:null}var U,j=m({"\u0275prov":m}),q=m({"\u0275inj":m}),z=m({ngInjectableDef:m}),B=m({ngInjectorDef:m}),H=((H=H||{})[H.Default=0]="Default",H[H.Host=1]="Host",H[H.Self=2]="Self",H[H.SkipSelf=4]="SkipSelf",H[H.Optional=8]="Optional",H);function Z(e){var t=U;return U=e,t}function G(e,t,n){var r=M(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&H.Optional?null:void 0!==t?t:void D(x(e),"Injector")}function W(e){return{toString:e}.toString()}var K=((K=K||{})[K.OnPush=0]="OnPush",K[K.Default=1]="Default",K),Q=((Q=Q||{})[Q.Emulated=0]="Emulated",Q[Q.None=2]="None",Q[Q.ShadowDom=3]="ShadowDom",Q),Y="undefined"!=typeof globalThis&&globalThis,J="undefined"!=typeof window&&window,X="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$=Y||"undefined"!=typeof global&&global||J||X,ee={},te=[],ne=m({"\u0275cmp":m}),re=m({"\u0275dir":m}),ie=m({"\u0275pipe":m}),oe=m({"\u0275mod":m}),ae=m({"\u0275loc":m}),ue=m({"\u0275fac":m}),se=m({__NG_ELEMENT_ID__:m}),ce=0;function le(e){return W(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||te,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Q.Emulated,id:"c",styles:e.styles||te,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,o=e.pipes;return n.id+=ce++,n.inputs=ye(e.inputs,t),n.outputs=ye(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(he)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(fe)}:null,n})}function he(e){return ke(e)||function(e){return e[re]||null}(e)}function fe(e){return function(e){return e[ie]||null}(e)}var de={};function ve(e){return W(function(){var t={type:e.type,bootstrap:e.bootstrap||te,declarations:e.declarations||te,imports:e.imports||te,exports:e.exports||te,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(de[e.id]=e.type),t})}function pe(e,t){return W(function(){var n=we(e,!0);n.declarations=t.declarations||te,n.imports=t.imports||te,n.exports=t.exports||te})}function ye(e,t){if(null==e)return ee;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}var ge=le;function me(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ke(e){return e[ne]||null}function we(e,t){var n=e[oe]||null;if(!n&&!0===t)throw new Error("Type ".concat(x(e)," does not have '\u0275mod' property."));return n}function be(e){return Array.isArray(e)&&"object"==typeof e[1]}function _e(e){return Array.isArray(e)&&!0===e[1]}function xe(e){return 0!=(8&e.flags)}function Ie(e){return 2==(2&e.flags)}function Te(e){return 1==(1&e.flags)}function Ee(e){return null!==e.template}function Se(e){return 0!=(512&e[2])}function Ce(e,t){return e.hasOwnProperty(ue)?e[ue]:null}var Ae=function(){function e(t,n,r){p(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return d(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Ne(){return Oe}function Oe(e){return e.type.prototype.ngOnChanges&&(e.setInput=De),Re}function Re(){var e=Me(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===ee)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function De(e,t,n,r){var i=Me(e)||function(e,t){return e[Le]=t}(e,{previous:ee,current:null}),o=i.current||(i.current={}),a=i.previous,u=this.declaredInputs[n],s=a[u];o[u]=new Ae(s&&s.currentValue,t,a===ee),e[r]=t}Ne.ngInherit=!0;var Pe,Le="__ngSimpleChanges__";function Me(e){return e[Le]||null}function Fe(e){Pe=e}function Ve(e){return!!e.listen}var Ue={createRenderer:function(e,t){return void 0!==Pe?Pe:"undefined"!=typeof document?document:void 0}};function je(e){for(;Array.isArray(e);)e=e[0];return e}function qe(e,t){return je(t[e])}function ze(e,t){return je(t[e.index])}function Be(e,t){return e.data[t]}function He(e,t){var n=t[e];return be(n)?n:n[0]}function Ze(e){return 4==(4&e[2])}function Ge(e){return 128==(128&e[2])}function We(e,t){return null==t?null:e[t]}function Ke(e){e[18]=0}function Qe(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var Ye={lFrame:yt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Je(){return Ye.bindingsEnabled}function Xe(){return Ye.lFrame.lView}function $e(){return Ye.lFrame.tView}function et(){for(var e=tt();null!==e&&64===e.type;)e=e.parent;return e}function tt(){return Ye.lFrame.currentTNode}function nt(e,t){var n=Ye.lFrame;n.currentTNode=e,n.isParent=t}function rt(){return Ye.lFrame.isParent}function it(){Ye.lFrame.isParent=!1}function ot(){return Ye.isInCheckNoChangesMode}function at(e){Ye.isInCheckNoChangesMode=e}function ut(){return Ye.lFrame.bindingIndex++}function st(e,t){var n=Ye.lFrame;n.bindingIndex=n.bindingRootIndex=e,ct(t)}function ct(e){Ye.lFrame.currentDirectiveIndex=e}function lt(){return Ye.lFrame.currentQueryIndex}function ht(e){Ye.lFrame.currentQueryIndex=e}function ft(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function dt(e,t,n){if(n&H.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&H.Host||(r=ft(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;t=r,e=i}var o=Ye.lFrame=pt();return o.currentTNode=t,o.lView=e,!0}function vt(e){var t=pt(),n=e[1];Ye.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function pt(){var e=Ye.lFrame,t=null===e?null:e.child;return null===t?yt(e):t}function yt(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function gt(){var e=Ye.lFrame;return Ye.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var mt=gt;function kt(){var e=gt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wt(){return Ye.lFrame.selectedIndex}function bt(e){Ye.lFrame.selectedIndex=e}function _t(){var e=Ye.lFrame;return Be(e.tView,e.selectedIndex)}function xt(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,u=i.ngAfterViewInit,s=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(e.contentHooks||(e.contentHooks=[])).push(-n,o),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),u&&(e.viewHooks||(e.viewHooks=[])).push(-n,u),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function It(e,t,n){St(e,t,3,n)}function Tt(e,t,n,r){(3&e[2])===n&&St(e,t,n,r)}function Et(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function St(e,t,n,r){for(var i=null!=r?r:-1,o=t.length-1,a=0,u=void 0!==r?65535&e[18]:0;u<o;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[18]+=65536),(a<i||-1==i)&&(Ct(e,n,t,u),e[18]=(4294901760&e[18])+u+2),u++}function Ct(e,t,n,r){var i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}var At=d(function e(t,n,r){p(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r});function Nt(e,t,n){for(var r=Ve(e),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],u=n[i++],s=n[i++];r?e.setAttribute(t,u,s,a):t.setAttributeNS(a,u,s)}else{var c=o,l=n[++i];Rt(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function Ot(e){return 3===e||4===e||6===e}function Rt(e){return 64===e.charCodeAt(0)}function Dt(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Pt(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Pt(e,t,n,r,i){var o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){var u=e[o++];if("number"==typeof u){if(u===t){a=-1;break}if(u>t){a=o-1;break}}}for(;o<e.length;){var s=e[o];if("number"==typeof s)break;if(s===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Lt(e){return-1!==e}function Mt(e){return 32767&e}function Ft(e,t){for(var n=function(e){return e>>16}(e),r=t;n>0;)r=r[15],n--;return r}var Vt=!0;function Ut(e){var t=Vt;return Vt=e,t}var jt=0;function qt(e,t){var n=Bt(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,zt(r.data,e),zt(t,null),zt(r.blueprint,null));var i=Ht(e,t),o=e.injectorIndex;if(Lt(i))for(var a=Mt(i),u=Ft(i,t),s=u[1].data,c=0;c<8;c++)t[o+c]=u[a+c]|s[a+c];return t[o+8]=i,o}function zt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Bt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ht(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var o=i[1],a=o.type;if(null===(r=2===a?o.declTNode:1===a?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Zt(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(se)&&(r=n[se]),null==r&&(r=n[se]=jt++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Gt(e,t,n){if(n&H.Optional)return e;D(t,"NodeInjector")}function Wt(e,t,n,r){if(n&H.Optional&&void 0===r&&(r=null),0==(n&(H.Self|H.Host))){var i=e[9],o=Z(void 0);try{return i?i.get(t,r,n&H.Optional):G(t,r,n&H.Optional)}finally{Z(o)}}return Gt(r,t,n)}function Kt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(se)?e[se]:void 0;return"number"==typeof t?t>=0?255&t:Yt:t}(n);if("function"==typeof o){if(!dt(t,e,r))return r&H.Host?Gt(i,n,r):Wt(t,n,r,i);try{var a=o(r);if(null!=a||r&H.Optional)return a;D(n)}finally{mt()}}else if("number"==typeof o){var u=null,s=Bt(e,t),c=-1,l=r&H.Host?t[16][6]:null;for((-1===s||r&H.SkipSelf)&&(-1!==(c=-1===s?Ht(e,t):t[s+8])&&tn(r,!1)?(u=t[1],s=Mt(c),t=Ft(c,t)):s=-1);-1!==s;){var h=t[1];if(en(o,s,h.data)){var f=Jt(s,t,n,u,r,l);if(f!==Qt)return f}-1!==(c=t[s+8])&&tn(r,t[1].data[s+8]===l)&&en(o,s,t)?(u=h,s=Mt(c),t=Ft(c,t)):s=-1}}}return Wt(t,n,r,i)}var Qt={};function Yt(){return new nn(et(),Xe())}function Jt(e,t,n,r,i,o){var a=t[1],u=a.data[e+8],s=Xt(u,a,n,null==r?Ie(u)&&Vt:r!=a&&0!=(3&u.type),i&H.Host&&o===u);return null!==s?$t(t,a,s,u):Qt}function Xt(e,t,n,r,i){for(var o=e.providerIndexes,a=t.data,u=1048575&o,s=e.directiveStart,c=o>>20,l=i?u+c:e.directiveEnd,h=r?u:u+c;h<l;h++){var f=a[h];if(h<s&&n===f||h>=s&&f.type===n)return h}if(i){var d=a[s];if(d&&Ee(d)&&d.type===n)return s}return null}function $t(e,t,n,r){var i=e[n],o=t.data;if(function(e){return e instanceof At}(i)){var a=i;a.resolving&&function(e,t){throw new N("200","Circular dependency in DI detected for ".concat(e))}(R(o[n]));var u=Ut(a.canSeeViewProviders);a.resolving=!0;var s=a.injectImpl?Z(a.injectImpl):null;dt(e,r,H.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,a=r.ngDoCheck;if(i){var u=Oe(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a))}(n,o[n],t)}finally{null!==s&&Z(s),Ut(u),a.resolving=!1,mt()}}return i}function en(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function tn(e,t){return!(e&H.Self||e&H.Host&&t)}var nn=function(){function e(t,n){p(this,e),this._tNode=t,this._lView=n}return d(e,[{key:"get",value:function(e,t,n){return Kt(this._tNode,this._lView,e,n,t)}}]),e}();function rn(e){return W(function(){for(var t=e.prototype.constructor,n=t[ue]||on(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var o=i[ue]||on(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(e){return new e}})}function on(e){return A(e)?function(){var t=on(C(e));return t&&t()}:Ce(e)}function an(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(Ot(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}return null}(et(),e)}var un="__parameters__";function sn(e,t,n){return W(function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var o=b(i,t);return a.annotation=o,a;function a(e,t,n){for(var r=e.hasOwnProperty(un)?e[un]:Object.defineProperty(e,un,{value:[]})[un];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var cn=function(){function e(t,n){p(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return d(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),ln=new cn("AnalyzeForEntryComponents"),hn=Function;function fn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),fn(r,t)):t!==e&&t.push(r)}return t}function dn(e,t){e.forEach(function(e){return Array.isArray(e)?dn(e,t):t(e)})}function vn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function pn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function yn(e,t,n){var r=mn(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function gn(e,t){var n=mn(e,t);if(n>=0)return e[1|n]}function mn(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var o=r+(i-r>>1),a=e[o<<1];if(t===a)return o<<1;a>t?i=o:r=o+1}return~(i<<1)}(e,t)}var kn,wn={},bn="__NG_DI_FLAG__",_n="ngTempTokenPath",xn=/\n/gm,In="__source",Tn=m({provide:String,useValue:m});function En(e){var t=kn;return kn=e,t}function Sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;if(void 0===kn)throw new Error("inject() must be called from an injection context");return null===kn?G(e,void 0,t):kn.get(e,t&H.Optional?null:void 0,t)}function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;return(U||Sn)(C(e),t)}function An(e){for(var t=[],n=0;n<e.length;n++){var r=C(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=H.Default,a=0;a<r.length;a++){var u=r[a],s=On(u);"number"==typeof s?-1===s?i=u.token:o|=s:i=u}t.push(Cn(i,o))}else t.push(Cn(r))}return t}function Nn(e,t){return e[bn]=t,e.prototype[bn]=t,e}function On(e){return e[bn]}function Rn(e,t,n,r){var i=e[_n];throw t[In]&&i.unshift(t[In]),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=x(t);if(Array.isArray(t))i=t.map(x).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var u=t[a];o.push(a+":"+("string"==typeof u?JSON.stringify(u):x(u)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(xn,"\n  "))}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[_n]=null,e}var Dn=Nn(sn("Inject",function(e){return{token:e}}),-1),Pn=Nn(sn("Optional"),8),Ln=Nn(sn("SkipSelf"),4),Mn=((Mn=Mn||{})[Mn.Important=1]="Important",Mn[Mn.DashCase=2]="DashCase",Mn),Fn="__ngContext__";function Vn(e,t){e[Fn]=t}function Un(e){var t=function(e){return e[Fn]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function jn(e,t){return(void 0)(e,t)}function qn(e){var t=e[3];return _e(t)?t[3]:t}function zn(e){return Hn(e[13])}function Bn(e){return Hn(e[4])}function Hn(e){for(;null!==e&&!_e(e);)e=e[4];return e}function Zn(e,t,n,r,i){if(null!=r){var o,a=!1;_e(r)?o=r:be(r)&&(a=!0,r=r[0]);var u=je(r);0===e&&null!==n?null==i?Xn(t,n,u):Jn(t,n,u,i||null,!0):1===e&&null!==n?Jn(t,n,u,i||null,!0):2===e?function(e,t,n){var r=er(e,t);r&&function(e,t,n,r){Ve(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,u,a):3===e&&t.destroyNode(u),null!=o&&function(e,t,n,r,i){var o=n[7];o!==je(n)&&Zn(t,e,r,o,i);for(var a=10;a<n.length;a++){var u=n[a];ur(u[1],u,e,t,r,o)}}(t,e,o,n,i)}}function Gn(e,t,n){return Ve(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Wn(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Qe(i,-1)),n.splice(r,1)}function Kn(e,t){if(!(e.length<=10)){var n=10+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&Wn(i,r),t>0&&(e[n-1][4]=r[4]);var o=pn(e,10+t);!function(e,t){ur(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);var a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function Qn(e,t){if(!(256&t[2])){var n=t[11];Ve(n)&&n.destroyNode&&ur(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return Yn(e[1],e);for(;t;){var n=null;if(be(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)be(t)&&Yn(t[1],t),t=t[3];null===t&&(t=e),be(t)&&Yn(t[1],t),n=t&&t[4]}t=n}}(t)}}function Yn(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof At)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2){var u=i[o[a]],s=o[a+1];try{s.call(u)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var a=n[o+1],u="function"==typeof a?a(t):je(t[a]),s=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?u.removeEventListener(n[o],s,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{var l=r[i=n[o+1]];n[o].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)r[h]();t[7]=null}}(e,t),1===t[1].type&&Ve(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&_e(t[3])){n!==t[3]&&Wn(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function Jn(e,t,n,r,i){Ve(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Xn(e,t,n){Ve(e)?e.appendChild(t,n):t.appendChild(n)}function $n(e,t,n,r,i){null!==r?Jn(e,t,n,r,i):Xn(e,t,n)}function er(e,t){return Ve(e)?e.parentNode(t):t.parentNode}var tr;function nr(e,t,n,r){var i=function(e,t,n){return function(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===Q.None||i===Q.Emulated)return null}return ze(r,n)}(e,t.parent,n)}(e,r,t),o=t[11],a=function(e,t,n){return function(e,t,n){return 40&e.type?ze(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=i)if(Array.isArray(n))for(var u=0;u<n.length;u++)$n(o,i,n[u],a,!1);else $n(o,i,n,a,!1)}function rr(e,t){if(null!==t){var n=t.type;if(3&n)return ze(t,e);if(4&n)return or(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return rr(e,r);var i=e[t.index];return _e(i)?or(-1,i):je(i)}if(32&n)return jn(t,e)()||je(e[t.index]);var o=ir(e,t);return null!==o?Array.isArray(o)?o[0]:rr(qn(e[16]),o):rr(e,t.next)}return null}function ir(e,t){return null!==t?e[16][6].projection[t.projection]:null}function or(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return rr(r,i)}return t[7]}function ar(e,t,n,r,i,o,a){for(;null!=n;){var u=r[n.index],s=n.type;if(a&&0===t&&(u&&Vn(je(u),r),n.flags|=4),64!=(64&n.flags))if(8&s)ar(e,t,n.child,r,i,o,!1),Zn(t,e,i,u,o);else if(32&s){for(var c=jn(n,r),l=void 0;l=c();)Zn(t,e,i,l,o);Zn(t,e,i,u,o)}else 16&s?sr(e,t,r,n,i,o):Zn(t,e,i,u,o);n=a?n.projectionNext:n.next}}function ur(e,t,n,r,i,o){ar(n,r,e.firstChild,t,i,o,!1)}function sr(e,t,n,r,i,o){var a=n[16],u=a[6].projection[r.projection];if(Array.isArray(u))for(var s=0;s<u.length;s++)Zn(t,e,i,u[s],o);else ar(e,t,u,a[3],i,o,!0)}function cr(e,t,n){Ve(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function lr(e,t,n){Ve(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function hr(e){var t;return(null===(t=function(){if(void 0===tr&&(tr=null,$.trustedTypes))try{tr=$.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return tr}())||void 0===t?void 0:t.createHTML(e))||e}var fr=function(){function e(t){p(this,e),this.changingThisBreaksApplicationSecurity=t}return d(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),dr=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(fr),vr=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(fr),pr=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(fr),yr=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(fr),gr=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(fr);function mr(e){return e instanceof fr?e.changingThisBreaksApplicationSecurity:e}function kr(e,t){var n=wr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function wr(e){return e instanceof fr&&e.getTypeName()||null}function br(e){return new dr(e)}function _r(e){return new vr(e)}function xr(e){return new pr(e)}function Ir(e){return new yr(e)}function Tr(e){return new gr(e)}var Er=function(){function e(t){p(this,e),this.inertDocumentHelper=t}return d(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(hr(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}]),e}(),Sr=function(){function e(t){if(p(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return d(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=hr(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=hr(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;("xmlns:ns1"===r||0===r.indexOf("ns1:"))&&e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),Cr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ar=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Nr(e){return(e=String(e)).match(Cr)||e.match(Ar)?e:"unsafe:"+e}function Or(e){var t,n={},r=c(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function Rr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var u in a)a.hasOwnProperty(u)&&(e[u]=!0)}return e}var Dr,Pr=Or("area,br,col,hr,img,wbr"),Lr=Or("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Mr=Or("rp,rt"),Fr=Rr(Pr,Rr(Lr,Or("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rr(Mr,Or("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rr(Mr,Lr)),Vr=Or("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ur=Or("srcset"),jr=Rr(Vr,Ur,Or("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Or("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qr=Or("script,style,template"),zr=function(){function e(){p(this,e),this.sanitizedSomething=!1,this.buf=[]}return d(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!Fr.hasOwnProperty(t))return this.sanitizedSomething=!0,!qr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,u=a.toLowerCase();if(jr.hasOwnProperty(u)){var s=o.value;Vr[u]&&(s=Nr(s)),Ur[u]&&(n=s,s=(n=String(n)).split(",").map(function(e){return Nr(e.trim())}).join(", ")),this.buf.push(" ",a,'="',Zr(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();Fr.hasOwnProperty(t)&&!Pr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Zr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),Br=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hr=/([^\#-~ |!])/g;function Zr(e){return e.replace(/&/g,"&amp;").replace(Br,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Hr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Gr(e,t){var n=null;try{Dr=Dr||function(e){var t=new Sr(e);return function(){try{return!!(new window.DOMParser).parseFromString(hr(""),"text/html")}catch(e){return!1}}()?new Er(t):t}(e);var r=t?String(t):"";n=Dr.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Dr.getInertBodyElement(r)}while(r!==o);return hr((new zr).sanitizeChildren(Wr(n)||n))}finally{if(n)for(var a=Wr(n)||n;a.firstChild;)a.removeChild(a.firstChild)}}function Wr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Kr=((Kr=Kr||{})[Kr.NONE=0]="NONE",Kr[Kr.HTML=1]="HTML",Kr[Kr.STYLE=2]="STYLE",Kr[Kr.SCRIPT=3]="SCRIPT",Kr[Kr.URL=4]="URL",Kr[Kr.RESOURCE_URL=5]="RESOURCE_URL",Kr);function Qr(e){var t=function(){var e=Xe();return e&&e[12]}();return t?t.sanitize(Kr.URL,e)||"":kr(e,"URL")?mr(e):Nr(O(e))}function Yr(e){return e.ngOriginalError}function Jr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Xr=function(){function e(){p(this,e),this._console=console}return d(e,[{key:"handleError",value:function(e){var t,n=this._findOriginalError(e),r=this._findContext(e),i=(t=e)&&t.ngErrorLogger||Jr;i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}},{key:"_findContext",value:function(e){return e?e.ngDebugContext||this._findContext(Yr(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=e&&Yr(e);t&&Yr(t);)t=Yr(t);return t||null}}]),e}(),$r=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($);function ei(e){return e instanceof Function?e():e}function ti(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var ni="ng-template";function ri(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==ti((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ii(e){return 4===e.type&&e.value!==ni}function oi(e,t,n){return t===(4!==e.type||n?e.value:ni)}function ai(e,t,n){for(var r=4,i=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(Ot(e[t]))return t;return e.length}(i),a=!1,u=0;u<t.length;u++){var s=t[u];if("number"!=typeof s){if(!a)if(4&r){if(r=2|1&r,""!==s&&!oi(e,s,n)||""===s&&1===t.length){if(ui(r))return!1;a=!0}}else{var c=8&r?s:t[++u];if(8&r&&null!==e.attrs){if(!ri(e.attrs,c,n)){if(ui(r))return!1;a=!0}continue}var l=si(8&r?"class":s,i,ii(e),n);if(-1===l){if(ui(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==ti(f,c,0)||2&r&&c!==h){if(ui(r))return!1;a=!0}}}}else{if(!a&&!ui(r)&&!ui(s))return!1;if(a&&ui(s))continue;a=!1,r=s|1&r}}return ui(r)||a}function ui(e){return 0==(1&e)}function si(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var o=!1;i<t.length;){var a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var u=t[++i];"string"==typeof u;)u=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ci(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(ai(e,t[r],n))return!0;return!1}function li(e,t){return e?":not("+t.trim()+")":t}function hi(e){for(var t=e[0],n=1,r=2,i="",o=!1;n<e.length;){var a=e[n];if("string"==typeof a)if(2&r){var u=e[++n];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!ui(a)&&(t+=li(o,i),i=""),r=a,o=o||!ui(r);n++}return""!==i&&(t+=li(o,i)),t}var fi={};function di(e){vi($e(),Xe(),wt()+e,ot())}function vi(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&It(t,i,n)}else{var o=e.preOrderHooks;null!==o&&Tt(t,o,0,n)}bt(n)}function pi(e,t){return e<<17|t<<2}function yi(e){return e>>17&32767}function gi(e){return 2|e}function mi(e){return(131068&e)>>2}function ki(e,t){return-131069&e|t<<2}function wi(e){return 1|e}function bi(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=e.data[o];ht(i),a.contentQueries(2,t[o],o)}}}function _i(e,t,n,r,i,o,a,u,s,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Ke(l),l[3]=l[15]=e,l[8]=n,l[10]=a||e&&e[10],l[11]=u||e&&e[11],l[12]=s||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=o,l[16]=2==t.type?e[16]:l,l}function xi(e,t,n,r,i){var o=e.data[t];if(null===o)o=function(e,t,n,r,i){var o=tt(),a=rt(),u=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==o&&(a?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}(e,t,n,r,i),Ye.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;var a=function(){var e=Ye.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return nt(o,!0),o}function Ii(e,t,n,r){if(0===n)return-1;for(var i=t.length,o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Ti(e,t,n){vt(t);try{var r=e.viewQuery;null!==r&&to(1,r,n);var i=e.template;null!==i&&Ci(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&bi(e,t),e.staticViewQueries&&to(2,e.viewQuery,n);var o=e.components;null!==o&&function(e,t){for(var n=0;n<t.length;n++)Yi(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,kt()}}function Ei(e,t,n,r){var i=t[2];if(256!=(256&i)){vt(t);var o=ot();try{Ke(t),function(e){Ye.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Ci(e,t,n,2,r);var a=3==(3&i);if(!o)if(a){var u=e.preOrderCheckHooks;null!==u&&It(t,u,null)}else{var s=e.preOrderHooks;null!==s&&Tt(t,s,0,null),Et(t,0)}if(function(e){for(var t=zn(e);null!==t;t=Bn(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&Qe(o,1),i[2]|=1024}}(t),function(e){for(var t=zn(e);null!==t;t=Bn(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];Ge(r)&&Ei(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&bi(e,t),!o)if(a){var c=e.contentCheckHooks;null!==c&&It(t,c)}else{var l=e.contentHooks;null!==l&&Tt(t,l,1),Et(t,1)}!function(e,t){var n=e.hostBindingOpCodes;if(null!==n)try{for(var r=0;r<n.length;r++){var i=n[r];if(i<0)bt(~i);else{var o=i,a=n[++r],u=n[++r];st(a,o),u(2,t[o])}}}finally{bt(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Ki(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&to(2,f,r),!o)if(a){var d=e.viewCheckHooks;null!==d&&It(t,d)}else{var v=e.viewHooks;null!==v&&Tt(t,v,2),Et(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Qe(t[3],-1))}finally{kt()}}}function Si(e,t,n,r){var i=t[10],o=!ot(),a=Ze(t);try{o&&!a&&i.begin&&i.begin(),a&&Ti(e,t,r),Ei(e,t,n,r)}finally{o&&!a&&i.end&&i.end()}}function Ci(e,t,n,r,i){var o=wt(),a=2&r;try{bt(-1),a&&t.length>20&&vi(e,t,20,ot()),n(r,i)}finally{bt(o)}}function Ai(e,t,n){if(xe(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var o=e.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}function Ni(e,t,n){!Je()||(function(e,t,n,r){var i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||qt(n,t),Vn(r,t);for(var a=n.initialInputs,u=i;u<o;u++){var s=e.data[u],c=Ee(s);c&&Hi(t,n,s);var l=$t(t,e,u,n);Vn(l,t),null!==a&&Zi(0,u-i,l,s,0,a),c&&(He(n.index,t)[8]=l)}}(e,t,n,ze(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,a=Ye.lFrame.currentDirectiveIndex;try{bt(o);for(var u=r;u<i;u++){var s=e.data[u],c=t[u];ct(u),(null!==s.hostBindings||0!==s.hostVars||null!==s.hostAttrs)&&Ui(s,c)}}finally{bt(-1),ct(a)}}(e,t,n))}function Oi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ze,r=t.localNames;if(null!==r)for(var i=t.index+1,o=0;o<r.length;o+=2){var a=r[o+1],u=-1===a?n(t,e):e[a];e[i++]=u}}function Ri(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Di(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Di(e,t,n,r,i,o,a,u,s,c){var l=20+r,h=l+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:fi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:u,declTNode:t,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:s,consts:d,incompleteFirstPass:!1}}function Pi(e,t,n,r){var i=ro(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&io(e).push(r,i.length-1))}function Li(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Mi(e,t,n,r,i,o,a,u){var s,c=ze(t,n),l=t.inputs;!u&&null!=l&&(s=l[r])?(ao(e,n,s,r,i),Ie(t)&&function(e,t){var n=He(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=a?a(i,t.value||"",r):i,Ve(o)?o.setProperty(c,r,i):Rt(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Fi(e,t,n,r){var i=!1;if(Je()){var o=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];ci(n,a.selectors,!1)&&(i||(i=[]),Zt(qt(n,t),e,a.type),Ee(a)?(ji(e,n),i.unshift(a)):i.push(a))}return i}(e,t,n),a=null===r?null:{"":-1};if(null!==o){i=!0,zi(n,e.data.length,o.length);for(var u=0;u<o.length;u++){var s=o[u];s.providersResolver&&s.providersResolver(s)}for(var c=!1,l=!1,h=Ii(e,t,o.length,null),f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=Dt(n.mergedAttrs,d.hostAttrs),Bi(e,n,t,h,d),qi(h,d,a),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);var v=d.type.prototype;!c&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,o=[],a=null,u=null,s=t.directiveStart;s<n;s++){var c=r[s],l=c.inputs,h=null===i||ii(t)?null:Gi(l,i);o.push(h),a=Li(l,s,a),u=Li(c.outputs,s,u)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=u}(e,n)}a&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var o=n[t[i+1]];if(null==o)throw new N("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],o)}}(n,r,a)}return n.mergedAttrs=Dt(n.mergedAttrs,n.attrs),i}function Vi(e,t,n,r,i,o){var a=o.hostBindings;if(a){var u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);var s=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=s&&u.push(s),u.push(r,i,a)}}function Ui(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ji(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function qi(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ee(t)&&(n[""]=e)}}function zi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Bi(e,t,n,r,i){e.data[r]=i;var o=i.factory||(i.factory=Ce(i.type)),a=new At(o,Ee(i),null);e.blueprint[r]=a,n[r]=a,Vi(e,t,0,r,Ii(e,n,i.hostVars,fi),i)}function Hi(e,t,n){var r=ze(t,e),i=Ri(n),o=e[10],a=Ji(e,_i(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=a}function Zi(e,t,n,r,i,o){var a=o[t];if(null!==a)for(var u=r.setInput,s=0;s<a.length;){var c=a[s++],l=a[s++],h=a[s++];null!==u?r.setInput(n,h,c,l):n[l]=h}}function Gi(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Wi(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Ki(e,t){var n=He(t,e);if(Ge(n)){var r=n[1];80&n[2]?Ei(r,n,r.template,n[8]):n[5]>0&&Qi(n)}}function Qi(e){for(var t=zn(e);null!==t;t=Bn(t))for(var n=10;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];Ei(i,r,i.template,r[8])}else r[5]>0&&Qi(r)}var o=e[1].components;if(null!==o)for(var a=0;a<o.length;a++){var u=He(o[a],e);Ge(u)&&u[5]>0&&Qi(u)}}function Yi(e,t){var n=He(t,e),r=n[1];(function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Ti(r,n,n[8])}function Ji(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Xi(e){for(;e;){e[2]|=64;var t=qn(e);if(Se(e)&&!t)return e;e=t}return null}function $i(e,t,n){var r=t[10];r.begin&&r.begin();try{Ei(e,t,e.template,n)}catch(i){throw oo(t,i),i}finally{r.end&&r.end()}}function eo(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Un(n),i=r[1];Si(i,r,i.template,n)}}(e[8])}function to(e,t,n){ht(0),t(e,n)}var no=Promise.resolve(null);function ro(e){return e[7]||(e[7]=[])}function io(e){return e.cleanup||(e.cleanup=[])}function oo(e,t){var n=e[9],r=n?n.get(Xr,null):null;r&&r.handleError(t)}function ao(e,t,n,r,i){for(var o=0;o<n.length;){var a=n[o++],u=n[o++],s=t[a],c=e.data[a];null!==c.setInput?c.setInput(s,i,r,u):s[u]=i}}function uo(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(var a=0;a<t.length;a++){var u=t[a];"number"==typeof u?o=u:1==o?i=T(i,u):2==o&&(r=T(r,u+": "+t[++a]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var so,co=new cn("INJECTOR",-1),lo=function(){function e(){p(this,e)}return d(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn;if(t===wn){var n=new Error("NullInjectorError: No provider for ".concat(x(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),ho=new cn("Set Injector scope."),fo={},vo={};function po(){return void 0===so&&(so=new lo),so}function yo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new go(e,n,t||po(),r)}var go=function(){function e(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&dn(n,function(e){return i.processProvider(e,t,n)}),dn([t],function(e){return i.processInjectorType(e,[],a)}),this.records.set(co,wo(void 0,this));var u=this.records.get(ho);this.scope=null!=u?u.value:null,this.source=o||("object"==typeof t?null:x(t))}return d(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;this.assertNotDestroyed();var r,i=En(this),o=Z(void 0);try{if(!(n&H.SkipSelf)){var a=this.records.get(e);if(void 0===a){var u=("function"==typeof(r=e)||"object"==typeof r&&r instanceof cn)&&M(e);a=u&&this.injectableDefInScope(u)?wo(mo(e),fo):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&H.Self?po():this.parent).get(e,t=n&H.Optional&&t===wn?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[_n]=s[_n]||[]).unshift(x(e)),i)throw s;return Rn(s,e,"R3InjectorError",this.source)}throw s}finally{Z(o),En(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(x(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=C(e)))return!1;var i=V(e),o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,u=-1!==n.indexOf(a);if(void 0!==o&&(i=V(o)),null==i)return!1;if(null!=i.imports&&!u){var s;n.push(a);try{dn(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===s&&(s=[]),s.push(e))})}finally{}if(void 0!==s)for(var c=function(){var e=s[l],t=e.ngModule,n=e.providers;dn(n,function(e){return r.processProvider(e,t,n||te)})},l=0;l<s.length;l++)c()}this.injectorDefTypes.add(a);var h=Ce(a)||function(){return new a};this.records.set(a,wo(h,fo));var f=i.providers;if(null!=f&&!u){var d=e;dn(f,function(e){return r.processProvider(e,d,f)})}return void 0!==o&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r,i=_o(e=C(e))?e:C(e&&e.provide),o=bo(r=e)?wo(void 0,r.useValue):wo(ko(r),fo);if(_o(e)||!0!==e.multi)this.records.get(i);else{var a=this.records.get(i);a||((a=wo(void 0,fo,!0)).factory=function(){return An(a.multi)},this.records.set(i,a)),i=e,a.multi.push(e)}this.records.set(i,o)}},{key:"hydrate",value:function(e,t){return t.value===fo&&(t.value=vo,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=C(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function mo(e){var t=M(e),n=null!==t?t.factory:Ce(e);if(null!==n)return n;if(e instanceof cn)throw new Error("Token ".concat(x(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(x(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[j]||e[z]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function ko(e,t,n){var r;if(_o(e)){var i=C(e);return Ce(i)||mo(i)}if(bo(e))r=function(){return C(e.useValue)};else if(function(e){return!(!e||!e.useFactory)}(e))r=function(){return e.useFactory.apply(e,u(An(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return Cn(C(e.useExisting))};else{var o=C(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ce(o)||mo(o);r=function(){return b(o,u(An(e.deps)))}}return r}function wo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function bo(e){return null!==e&&"object"==typeof e&&Tn in e}function _o(e){return"function"==typeof e}var xo,Io=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=yo(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},To=((xo=function(){function e(){p(this,e)}return d(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Io(e,t,""):Io(e.providers,e.parent,e.name||"")}}]),e}()).THROW_IF_NOT_FOUND=wn,xo.NULL=new lo,xo.\u0275prov=P({token:xo,providedIn:"any",factory:function(){return Cn(co)}}),xo.__NG_ELEMENT_ID__=-1,xo);function Eo(e,t){xt(Un(e)[1],et())}function So(e){for(var t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0,r=[e];t;){var i=void 0;if(Ee(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var o=e;o.inputs=Co(e.inputs),o.declaredInputs=Co(e.declaredInputs),o.outputs=Co(e.outputs);var a=i.hostBindings;a&&Oo(e,a);var u=i.viewQuery,s=i.contentQueries;if(u&&Ao(e,u),s&&No(e,s),_(e.inputs,i.inputs),_(e.declaredInputs,i.declaredInputs),_(e.outputs,i.outputs),Ee(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===So&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Dt(i.hostAttrs,n=Dt(n,i.hostAttrs))}}(r)}function Co(e){return e===ee?{}:e===te?[]:e}function Ao(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function No(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function Oo(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var Ro=null;function Do(){if(!Ro){var e=$.Symbol;if(e&&e.iterator)Ro=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ro=r)}}return Ro}function Po(e){return!!Lo(e)&&(Array.isArray(e)||!(e instanceof Map)&&Do()in e)}function Lo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Mo(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Fo(e,t,n,r){var i=Xe();return Mo(i,ut(),t)&&($e(),function(e,t,n,r,i,o){var a=ze(e,t);!function(e,t,n,r,i,o,a){if(null==o)Ve(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var u=null==a?O(o):a(o,r||"",i);Ve(e)?e.setAttribute(t,i,u,n):n?t.setAttributeNS(n,i,u):t.setAttribute(i,u)}}(t[11],a,o,e.value,n,r,i)}(_t(),i,e,t,n,r)),Fo}function Vo(e,t,n,r,i,o,a,u){var s=Xe(),c=$e(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,o,a,u,s){var c=t.consts,l=xi(t,e,4,a||null,We(c,u));Fi(t,n,l,We(c,s)),xt(t,l);var h=l.tViews=Di(2,l,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,s,t,n,r,i,o,a):c.data[l];nt(h,!1);var f=s[11].createComment("");nr(c,s,f,h),Vn(f,s),Ji(s,s[l]=Wi(f,s,f,h)),Te(h)&&Ni(c,s,h),null!=a&&Oi(s,h,u)}function Uo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default,n=Xe();return null===n?Cn(e,t):Kt(et(),n,C(e),t)}function jo(e,t,n){var r=Xe();return Mo(r,ut(),t)&&Mi($e(),_t(),r,e,t,r[11],n,!1),jo}function qo(e,t,n,r,i){var o=i?"class":"style";ao(e,n,t.inputs[o],o,r)}function zo(e,t,n,r){var i=Xe(),o=$e(),a=20+e,u=i[11],s=i[a]=Gn(u,t,Ye.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,r,i,o,a){var u=t.consts,s=xi(t,e,2,i,We(u,o));return Fi(t,n,s,We(u,a)),null!==s.attrs&&uo(s,s.attrs,!1),null!==s.mergedAttrs&&uo(s,s.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,s),s}(a,o,i,0,t,n,r):o.data[a];nt(c,!0);var l=c.mergedAttrs;null!==l&&Nt(u,s,l);var h=c.classes;null!==h&&lr(u,s,h);var f=c.styles;null!==f&&cr(u,s,f),64!=(64&c.flags)&&nr(o,i,s,c),0===Ye.lFrame.elementDepthCount&&Vn(s,i),Ye.lFrame.elementDepthCount++,Te(c)&&(Ni(o,i,c),Ai(o,c,i)),null!==r&&Oi(i,c)}function Bo(){var e=et();rt()?it():nt(e=e.parent,!1);var t=e;Ye.lFrame.elementDepthCount--;var n=$e();n.firstCreatePass&&(xt(n,e),xe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&qo(n,t,Xe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&qo(n,t,Xe(),t.stylesWithoutHost,!1)}function Ho(e,t,n,r){zo(e,t,n,r),Bo()}function Zo(e,t,n){var r=Xe(),i=$e(),o=e+20,a=i.firstCreatePass?function(e,t,n,r,i){var o=t.consts,a=We(o,r),u=xi(t,e,8,"ng-container",a);return null!==a&&uo(u,a,!0),Fi(t,n,u,We(o,i)),null!==t.queries&&t.queries.elementStart(t,u),u}(o,i,r,t,n):i.data[o];nt(a,!0);var u=r[o]=r[11].createComment("");nr(i,r,u,a),Vn(u,r),Te(a)&&(Ni(i,r,a),Ai(i,a,r)),null!=n&&Oi(r,a)}function Go(){var e=et(),t=$e();rt()?it():nt(e=e.parent,!1),t.firstCreatePass&&(xt(t,e),xe(e)&&t.queries.elementEnd(e))}function Wo(e){return!!e&&"function"==typeof e.then}function Ko(e){return!!e&&"function"==typeof e.subscribe}var Qo=Ko;function Yo(e,t,n,r){var i=Xe(),o=$e(),a=et();return function(e,t,n,r,i,o,a,u){var s=Te(r),c=e.firstCreatePass&&io(e),l=t[8],h=ro(t),f=!0;if(3&r.type||u){var d=ze(r,t),v=u?u(d):d,p=h.length,y=u?function(e){return u(je(e[r.index]))}:r.index;if(Ve(n)){var g=null;if(!u&&s&&(g=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var u=t[7],s=i[o+2];return u.length>s?u[s]:null}"string"==typeof a&&(o+=2)}return null}(e,t,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,f=!1;else{o=Xo(r,t,l,o,!1);var m=n.listen(v,i,o);h.push(o,m),c&&c.push(i,y,p,p+1)}}else o=Xo(r,t,l,o,!0),v.addEventListener(i,o,a),h.push(o),c&&c.push(i,y,p,a)}else o=Xo(r,t,l,o,!1);var k,w=r.outputs;if(f&&null!==w&&(k=w[i])){var b=k.length;if(b)for(var _=0;_<b;_+=2){var x=t[k[_]][k[_+1]].subscribe(o),I=h.length;h.push(o,x),c&&c.push(i,r.index,I,-(I+1))}}}(o,i,i[11],a,e,t,!!n,r),Yo}function Jo(e,t,n,r){try{return!1!==n(r)}catch(i){return oo(e,i),!1}}function Xo(e,t,n,r,i){return function n(o){if(o===Function)return r;var a=2&e.flags?He(e.index,t):t;0==(32&t[2])&&Xi(a);for(var u=Jo(t,0,r,o),s=n.__ngNextListenerFn__;s;)u=Jo(t,0,s,o)&&u,s=s.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function $o(e,t,n,r,i){for(var o=e[n+1],a=null===t,u=r?yi(o):mi(o),s=!1;0!==u&&(!1===s||a);){var c=e[u+1];ea(e[u],t)&&(s=!0,e[u+1]=r?wi(c):gi(c)),u=r?yi(c):mi(c)}s&&(e[n+1]=r?gi(o):wi(o))}function ea(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&mn(e,t)>=0}function ta(e,t){return function(e,t,n,r){var i=Xe(),o=$e(),a=function(e){var t=Ye.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+2,n}();o.firstUpdatePass&&function(e,t,n,r){var i=e.data;if(null===i[n+1]){var o=i[wt()],a=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(o)&&null===t&&!a&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=Ye.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),o=t.residualClasses;if(null===i)0===t.classBindings&&(n=ra(n=na(null,e,t,n,r),t.attrs,r),o=null);else{var a=t.directiveStylingLast;if(-1===a||e[a]!==i)if(n=na(i,e,t,n,r),null===o){var u=function(e,t,n){var r=t.classBindings;if(0!==mi(r))return e[yi(r)]}(e,t);void 0!==u&&Array.isArray(u)&&function(e,t,n,r){e[yi(t.classBindings)]=r}(e,t,0,u=ra(u=na(null,e,t,u[1],r),t.attrs,r))}else o=function(e,t,n){for(var r,i=t.directiveEnd,o=1+t.directiveStylingLast;o<i;o++)r=ra(r,e[o].hostAttrs,true);return ra(r,t.attrs,true)}(e,t)}return void 0!==o&&(t.residualClasses=o),n}(i,o,t,r),function(e,t,n,r,i,o){var a=t.classBindings,u=yi(a),s=mi(a);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||mn(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==s){var f=yi(e[u+1]);e[r+1]=pi(f,u),0!==f&&(e[f+1]=ki(e[f+1],r)),e[u+1]=function(e,t){return 131071&e|t<<17}(e[u+1],r)}else e[r+1]=pi(u,0),0!==u&&(e[u+1]=ki(e[u+1],r)),u=r;else e[r+1]=pi(s,0),0===u?u=r:e[s+1]=ki(e[s+1],r),s=r;l&&(e[r+1]=gi(e[r+1])),$o(e,c,r,!0),$o(e,c,r,!1),function(e,t,n,r,i){var o=e.residualClasses;null!=o&&"string"==typeof t&&mn(o,t)>=0&&(n[r+1]=wi(n[r+1]))}(t,c,e,r),a=pi(u,s),t.classBindings=a}(i,o,t,n,a)}}(o,e,a,true),t!==fi&&Mo(i,a,t)&&function(e,t,n,r,i,o,a,u){if(3&t.type){var s=e.data,c=s[u+1];oa(function(e){return 1==(1&e)}(c)?ia(s,t,n,i,mi(c),a):void 0)||(oa(o)||function(e){return 2==(2&e)}(c)&&(o=ia(s,null,n,i,u,a)),function(e,t,n,r,i){var o=Ve(e);i?o?e.addClass(n,r):n.classList.add(r):o?e.removeClass(n,r):n.classList.remove(r)}(r,0,qe(wt(),n),i,o))}}(o,o.data[wt()],i,i[11],e,i[a+1]=function(e,t){return null==e||"object"==typeof e&&(e=x(mr(e))),e}(t),true,a)}(e,t),ta}function na(e,t,n,r,i){var o=null,a=n.directiveEnd,u=n.directiveStylingLast;for(-1===u?u=n.directiveStart:u++;u<a&&(r=ra(r,(o=t[u]).hostAttrs,i),o!==e);)u++;return null!==e&&(n.directiveStylingLast=u),r}function ra(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var o=0;o<t.length;o++){var a=t[o];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),yn(e,a,!!n||t[++o]))}return void 0===e?null:e}function ia(e,t,n,r,i,o){for(var a,u=null===t;i>0;){var s=e[i],c=Array.isArray(s),l=c?s[1]:s,h=null===l,f=n[i+1];f===fi&&(f=h?te:void 0);var d=h?gn(f,r):l===r?f:void 0;if(c&&!oa(d)&&(d=gn(s,r)),oa(d)&&(a=d,u))return a;var v=e[i+1];i=u?yi(v):mi(v)}if(null!==t){var p=o?t.residualClasses:t.residualStyles;null!=p&&(a=gn(p,r))}return a}function oa(e){return void 0!==e}function aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Xe(),r=$e(),i=e+20,o=r.firstCreatePass?xi(r,i,1,t,null):r.data[i],a=n[i]=function(e,t){return Ve(e)?e.createText(t):e.createTextNode(t)}(n[11],t);nr(r,n,a,o),nt(o,!1)}function ua(e){return sa("",e,""),ua}function sa(e,t,n){var r=Xe(),i=function(e,t,n,r){return Mo(e,ut(),n)?t+O(n)+r:fi}(r,e,t,n);return i!==fi&&function(e,t,n){var r=qe(t,e);!function(e,t,n){Ve(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}(r,wt(),i),sa}function ca(e,t,n){var r=Xe();return Mo(r,ut(),t)&&Mi($e(),_t(),r,e,t,r[11],n,!0),ca}var la=void 0,ha=["en",[["a","p"],["AM","PM"],la],[["AM","PM"],la,la],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],la,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],la,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",la,"{1} 'at' {0}",la],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],fa={};function da(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=pa(t);if(n)return n;var r=t.split("-")[0];if(n=pa(r))return n;if("en"===r)return ha;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function va(e){return da(e)[ya.PluralCase]}function pa(e){return e in fa||(fa[e]=$.ng&&$.ng.common&&$.ng.common.locales&&$.ng.common.locales[e]),fa[e]}var ya=((ya=ya||{})[ya.LocaleId=0]="LocaleId",ya[ya.DayPeriodsFormat=1]="DayPeriodsFormat",ya[ya.DayPeriodsStandalone=2]="DayPeriodsStandalone",ya[ya.DaysFormat=3]="DaysFormat",ya[ya.DaysStandalone=4]="DaysStandalone",ya[ya.MonthsFormat=5]="MonthsFormat",ya[ya.MonthsStandalone=6]="MonthsStandalone",ya[ya.Eras=7]="Eras",ya[ya.FirstDayOfWeek=8]="FirstDayOfWeek",ya[ya.WeekendRange=9]="WeekendRange",ya[ya.DateFormat=10]="DateFormat",ya[ya.TimeFormat=11]="TimeFormat",ya[ya.DateTimeFormat=12]="DateTimeFormat",ya[ya.NumberSymbols=13]="NumberSymbols",ya[ya.NumberFormats=14]="NumberFormats",ya[ya.CurrencyCode=15]="CurrencyCode",ya[ya.CurrencySymbol=16]="CurrencySymbol",ya[ya.CurrencyName=17]="CurrencyName",ya[ya.Currencies=18]="Currencies",ya[ya.Directionality=19]="Directionality",ya[ya.PluralCase=20]="PluralCase",ya[ya.ExtraData=21]="ExtraData",ya),ga="en-US";function ma(e){(function(e,t){null==e&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+" [Expected=> ".concat(null," ").concat("!="," ").concat(t," <=Actual]"))}(t,e)})(e,"Expected localeId to be defined"),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function ka(e,t,n,r,i){if(e=C(e),Array.isArray(e))for(var o=0;o<e.length;o++)ka(e[o],t,n,r,i);else{var a=$e(),u=Xe(),s=_o(e)?e:C(e.provide),c=ko(e),l=et(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(_o(e)||!e.multi){var v=new At(c,i,Uo),p=_a(s,t,i?h:h+d,f);-1===p?(Zt(qt(l,u),a,s),wa(a,e,t.length),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(v),u.push(v)):(n[p]=v,u[p]=v)}else{var y=_a(s,t,h+d,f),g=_a(s,t,h,h+d),m=y>=0&&n[y],k=g>=0&&n[g];if(i&&!k||!i&&!m){Zt(qt(l,u),a,s);var w=function(e,t,n,r,i){var o=new At(e,n,Uo);return o.multi=[],o.index=t,o.componentProviders=0,ba(o,i,r&&!n),o}(i?Ia:xa,n.length,i,r,c);!i&&k&&(n[g].providerFactory=w),wa(a,e,t.length,0),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(w),u.push(w)}else wa(a,e,y>-1?y:g,ba(n[i?g:y],c,!i&&r));!i&&r&&k&&n[g].componentProviders++}}}function wa(e,t,n,r){var i=_o(t);if(i||function(e){return!!e.useClass}(t)){var o=(t.useClass||t).prototype.ngOnDestroy;if(o){var a=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var u=a.indexOf(n);-1===u?a.push(n,[r,o]):a[u+1].push(r,o)}else a.push(n,o)}}}function ba(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function _a(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function xa(e,t,n,r){return Ta(this.multi,[])}function Ia(e,t,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,u=$t(n,n[1],this.providerFactory.index,r);Ta(o,i=u.slice(0,a));for(var s=a;s<u.length;s++)i.push(u[s])}else Ta(o,i=[]);return i}function Ta(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function Ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=$e();if(r.firstCreatePass){var i=Ee(e);ka(n,r.data,r.blueprint,i,!0),ka(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var Sa=d(function e(){p(this,e)}),Ca=function(){function e(){p(this,e)}return d(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(x(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Aa=function(){var e=d(function e(){p(this,e)});return e.NULL=new Ca,e}();function Na(){}function Oa(e,t){return new Da(ze(e,t))}var Ra=function(){return Oa(et(),Xe())},Da=function(){var e=d(function e(t){p(this,e),this.nativeElement=t});return e.__NG_ELEMENT_ID__=Ra,e}();function Pa(e){return e instanceof Da?e.nativeElement:e}var La=d(function e(){p(this,e)}),Ma=function(){var e=d(function e(){p(this,e)});return e.__NG_ELEMENT_ID__=function(){return Fa()},e}(),Fa=function(){var e=Xe(),t=He(et().index,e);return function(e){return e[11]}(be(t)?t:e)},Va=function(){var e=d(function e(){p(this,e)});return e.\u0275prov=P({token:e,providedIn:"root",factory:function(){return null}}),e}(),Ua=d(function e(t){p(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}),ja=new Ua("12.2.17"),qa=function(){function e(){p(this,e)}return d(e,[{key:"supports",value:function(e){return Po(e)}},{key:"create",value:function(e){return new Ba(e)}}]),e}(),za=function(e,t){return t},Ba=function(){function e(t){p(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||za}return d(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<Wa(n,r,i)?t:n,a=Wa(o,r,i),u=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var s=a-r,c=u-r;if(s!=c){for(var l=0;l<s;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<s&&(i[l]=h+1)}i[o.previousIndex]=c-s}}a!==u&&e(o,a,u)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Po(e))throw new Error("Error trying to diff '".concat(x(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var u=0;u<this.length;u++)r=e[u],i=this._trackByFn(u,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,u)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,u),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Do()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==o&&Object.is(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),Object.is(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Ha(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ga),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ga),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),Ha=d(function e(t,n){p(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}),Za=function(){function e(){p(this,e),this._head=null,this._tail=null}return d(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Ga=function(){function e(){p(this,e),this.map=new Map}return d(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Za,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function Wa(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Ka=function(){function e(){p(this,e)}return d(e,[{key:"supports",value:function(e){return e instanceof Map||Lo(e)}},{key:"create",value:function(){return new Qa}}]),e}(),Qa=function(){function e(){p(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return d(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Lo(e)))throw new Error("Error trying to diff '".concat(x(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Ya(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),Ya=d(function e(t){p(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null});function Ja(){return new Xa([new qa])}var Xa=function(){var e=function(){function e(t){p(this,e),this.factories=t}return d(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(null!=t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat(function(e){return e.name||typeof e}(e),"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Ja())},deps:[[e,new Ln,new Pn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:Ja}),e}();function $a(){return new eu([new Ka])}var eu=function(){var e=function(){function e(t){p(this,e),this.factories=t}return d(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||$a())},deps:[[e,new Ln,new Pn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:$a}),e}();function tu(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var o=t[n.index];if(null!==o&&r.push(je(o)),_e(o))for(var a=10;a<o.length;a++){var s=o[a],c=s[1].firstChild;null!==c&&tu(s[1],s,c,r)}var l=n.type;if(8&l)tu(e,t,n.child,r);else if(32&l)for(var h=jn(n,t),f=void 0;f=h();)r.push(f);else if(16&l){var d=ir(t,n);if(Array.isArray(d))r.push.apply(r,u(d));else{var v=qn(t[16]);tu(v[1],v,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var nu=function(){function e(t,n){p(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return d(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return tu(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(_e(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Kn(e,n),pn(t,n))}this._attachedToViewContainer=!1}Qn(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){Pi(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){Xi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){$i(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){at(!0);try{$i(e,t,n)}finally{at(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,ur(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),ru=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,e))._view=e,r}return d(n,[{key:"detectChanges",value:function(){eo(this._view)}},{key:"checkNoChanges",value:function(){!function(e){at(!0);try{eo(e)}finally{at(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(nu),iu=function(e){return function(e,t,n){if(Ie(e)&&!n){var r=He(e.index,t);return new nu(r,r)}return 47&e.type?new nu(t[16],t):null}(et(),Xe(),16==(16&e))},ou=function(){var e=d(function e(){p(this,e)});return e.__NG_ELEMENT_ID__=iu,e}(),au=[new Ka],uu=new Xa([new qa]),su=new eu(au),cu=function(){return fu(et(),Xe())},lu=function(){var e=d(function e(){p(this,e)});return e.__NG_ELEMENT_ID__=cu,e}(),hu=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this))._declarationLView=e,o._declarationTContainer=r,o.elementRef=i,o}return d(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=_i(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ti(t,n,e),new nu(n)}}]),n}(lu);function fu(e,t){return 4&e.type?new hu(t,e,Oa(e,t)):null}var du=d(function e(){p(this,e)}),vu=d(function e(){p(this,e)}),pu=function(){return wu(et(),Xe())},yu=function(){var e=d(function e(){p(this,e)});return e.__NG_ELEMENT_ID__=pu,e}(),gu=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this))._lContainer=e,o._hostTNode=r,o._hostLView=i,o}return d(n,[{key:"element",get:function(){return Oa(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new nn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=Ht(this._hostTNode,this._hostLView);if(Lt(e)){var t=Ft(e,this._hostLView),n=Mt(e);return new nn(t[1].data[n+8],t)}return new nn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=mu(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var o=n||this.parentInjector;if(!i&&null==e.ngModule&&o){var a=o.get(du,null);a&&(i=a)}var u=e.create(o,r,void 0,i);return this.insert(u.hostView,t),u}},{key:"insert",value:function(e,t){var r=e._lView,i=r[1];if(_e(r[3])){var o=this.indexOf(e);if(-1!==o)this.detach(o);else{var a=r[3],u=new n(a,a[6],a[3]);u.detach(u.indexOf(e))}}var s=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],vn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var a=t[17];null!==a&&n!==a&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(a,t);var u=t[19];null!==u&&u.insertView(e),t[2]|=128}(i,r,c,s);var l=or(s,c),h=r[11],f=er(h,c[7]);return null!==f&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,ur(e,r,n,1,i,o)}(i,c[6],h,r,f,l),e.attachToViewContainerRef(),vn(ku(c),s,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=mu(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=Kn(this._lContainer,t);n&&(pn(ku(this._lContainer),t),Qn(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=Kn(this._lContainer,t);return n&&null!=pn(ku(this._lContainer),t)?new nu(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(yu);function mu(e){return e[8]}function ku(e){return e[8]||(e[8]=[])}function wu(e,t){var n,r=t[e.index];if(_e(r))n=r;else{var i;if(8&e.type)i=je(r);else{var o=t[11];i=o.createComment("");var a=ze(e,t);Jn(o,er(o,a),i,function(e,t){return Ve(e)?e.nextSibling(t):t.nextSibling}(o,a),!1)}t[e.index]=n=Wi(r,t,i,e),Ji(t,n)}return new gu(n,e,t)}var bu={},_u=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).ngModule=e,r}return d(n,[{key:"resolveComponentFactory",value:function(e){var t=ke(e);return new Tu(t,this.ngModule)}}]),n}(Aa);function xu(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var Iu=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return $r}}),Tu=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(hi).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return d(n,[{key:"inputs",get:function(){return xu(this.componentDef.inputs)}},{key:"outputs",get:function(){return xu(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,o,a=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var o=e.get(n,bu,i);return o!==bu||r===bu?o:t.get(n,r,i)}}}(e,r.injector):e,u=a.get(La,Ue),s=a.get(Va,null),c=u.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(Ve(e))return e.selectRootElement(t,n===Q.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Gn(u.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:$r,clean:no,playerHandler:null,flags:0},v=Di(0,null,null,1,0,null,null,null,null,null),p=_i(null,v,d,f,null,null,u,c,s,a);vt(p);try{var y=function(e,t,n,r,i,o){var a=n[1];n[20]=e;var u=xi(a,20,2,"#host",null),s=u.mergedAttrs=t.hostAttrs;null!==s&&(uo(u,s,!0),null!==e&&(Nt(i,e,s),null!==u.classes&&lr(i,e,u.classes),null!==u.styles&&cr(i,e,u.styles)));var c=r.createRenderer(e,t),l=_i(n,Ri(t),null,t.onPush?64:16,n[20],u,r,c,null,null);return a.firstCreatePass&&(Zt(qt(u,n),a,t.type),ji(a,u),zi(u,n.length,1)),Ji(n,l),n[20]=l}(h,this.componentDef,p,u,c);if(h)if(n)Nt(c,h,["ng-version",ja.full]);else{var g=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!ui(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),m=g.attrs,k=g.classes;m&&Nt(c,h,m),k&&k.length>0&&lr(c,h,k.join(" "))}if(o=Be(v,20),void 0!==t)for(var w=o.projection=[],b=0;b<this.ngContentSelectors.length;b++){var _=t[b];w.push(null!=_?Array.from(_):null)}i=function(e,t,n,r,i){var o=n[1],a=function(e,t,n){var r=et();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Bi(e,r,t,Ii(e,t,1,null),n));var i=$t(t,e,r.directiveStart,r);Vn(i,t);var o=ze(r,t);return o&&Vn(o,t),i}(o,n,t);if(r.components.push(a),e[8]=a,i&&i.forEach(function(e){return e(a,t)}),t.contentQueries){var u=et();t.contentQueries(1,a,u.directiveStart)}var s=et();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(bt(s.index),Vi(n[1],s,0,s.directiveStart,s.directiveEnd,t),Ui(t,a)),a}(y,this.componentDef,p,d,[Eo]),Ti(v,p,null)}finally{kt()}return new Eu(this.componentType,i,Oa(o,p),p,o)}}]),n}(Sa),Eu=function(e){y(n,e);var t=g(n);function n(e,r,i,o,a){var u;return p(this,n),(u=t.call(this)).location=i,u._rootLView=o,u._tNode=a,u.instance=r,u.hostView=u.changeDetectorRef=new ru(o),u.componentType=e,u}return d(n,[{key:"injector",get:function(){return new nn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return d(function e(){p(this,e)})}()),Su=new Map,Cu=function(e){y(n,e);var t=g(n);function n(e,r){var i;p(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=k(i),i.destroyCbs=[],i.componentFactoryResolver=new _u(k(i));var o=we(e),a=e[ae]||null;return a&&ma(a),i._bootstrapComponents=ei(o.bootstrap),i._r3Injector=yo(e,r,[{provide:du,useValue:k(i)},{provide:Aa,useValue:i.componentFactoryResolver}],x(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return d(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:To.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;return e===To||e===du||e===co?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(du),Au=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).moduleType=e,null!==we(e)&&function(e){var t=new Set;!function e(n){var r=we(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(x(t)," vs ").concat(x(t.name)))}(i,Su.get(i),n),Su.set(i,n));var o,a=c(ei(r.imports));try{for(a.s();!(o=a.n()).done;){var u=o.value;t.has(u)||(t.add(u),e(u))}}catch(s){a.e(s)}finally{a.f()}}(e)}(e),r}return d(n,[{key:"create",value:function(e){return new Cu(this.moduleType,e)}}]),n}(vu);function Nu(e,t,n,r,i){return function(e,t,n,r,i,o,a){var u=t+n;return function(e,t,n,r){var i=Mo(e,t,n);return Mo(e,t+1,r)||i}(e,u,i,o)?function(e,t,n){return e[t]=n}(e,u+2,a?r.call(a,i,o):r(i,o)):function(e,t){var n=e[t];return n===fi?void 0:n}(e,u+2)}(Xe(),function(){var e=Ye.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),e,t,n,r,i)}function Ou(e){return function(t){setTimeout(e,void 0,t)}}var Ru=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p(this,n),(e=t.call(this)).__isAsync=r,e}return d(n,[{key:"emit",value:function(e){o(I(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var i,u,s,c=e,l=t||function(){return null},h=r;if(e&&"object"==typeof e){var f=e;c=null===(i=f.next)||void 0===i?void 0:i.bind(f),l=null===(u=f.error)||void 0===u?void 0:u.bind(f),h=null===(s=f.complete)||void 0===s?void 0:s.bind(f)}this.__isAsync&&(l=Ou(l),c&&(c=Ou(c)),h&&(h=Ou(h)));var d=o(I(n.prototype),"subscribe",this).call(this,{next:c,error:l,complete:h});return e instanceof a.w&&e.add(d),d}}]),n}(i.xQ);function Du(){return this._results[Do()]()}var Pu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];p(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=Do(),r=e.prototype;r[n]||(r[n]=Du)}return d(e,[{key:"changes",get:function(){return this._changes||(this._changes=new Ru)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){var n=this;n.dirty=!1;var r=fn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}();Symbol;var Lu=function(){function e(t){p(this,e),this.queryList=t,this.matches=null}return d(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),Mu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,e),this.queries=t}return d(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Wu(e,t).matches&&this.queries[t].setDirty()}}]),e}(),Fu=d(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p(this,e),this.predicate=t,this.flags=n,this.read=r}),Vu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,e),this.queries=t}return d(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),Uu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;p(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return d(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,ju(t,i)),this.matchTNodeWithReadOption(e,t,Xt(t,e,i,!1,!1))}else n===lu?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xt(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Da||r===yu||r===lu&&4&t.type)this.addMatch(t.index,-2);else{var i=Xt(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function ju(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function qu(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Oa(e,t):4&e.type?fu(e,t):null}(t,e):-2===n?function(e,t,n){return n===Da?Oa(t,e):n===lu?fu(t,e):n===yu?wu(t,e):void 0}(e,t,r):$t(e,e[1],n,t)}function zu(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var o=e.data,a=n.matches,u=[],s=0;s<a.length;s+=2){var c=a[s];u.push(c<0?null:qu(t,o[c],a[s+1],n.metadata.read))}i.matches=u}return i.matches}function Bu(e,t,n,r){var i=e.queries.getByIndex(n),o=i.matches;if(null!==o)for(var a=zu(e,t,i,n),u=0;u<o.length;u+=2){var s=o[u];if(s>0)r.push(a[u/2]);else{for(var c=o[u+1],l=t[-s],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&Bu(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],v=0;v<d.length;v++){var p=d[v];Bu(p[1],p,c,r)}}}return r}function Hu(e){var t=Xe(),n=$e(),r=lt();ht(r+1);var i=Wu(n,r);if(e.dirty&&Ze(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var o=i.crossesNgTemplate?Bu(n,t,r,[]):zu(n,t,i,r);e.reset(o,Pa),e.notifyOnChanges()}return!0}return!1}function Zu(e,t,n,r){var i=$e();if(i.firstCreatePass){var o=et();(function(e,t,n){null===e.queries&&(e.queries=new Vu),e.queries.track(new Uu(t,n))})(i,new Fu(t,n,r),o.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function(e,t,n){var r=new Pu(4==(4&n));Pi(e,t,r,r.destroy),null===t[19]&&(t[19]=new Mu),t[19].queries.push(new Lu(r))}(i,Xe(),n)}function Gu(){return e=Xe(),t=lt(),e[19].queries[t].queryList;var e,t}function Wu(e,t){return e.queries.getByIndex(t)}var Ku=new cn("Application Initializer"),Qu=function(){var e=function(){function e(t){var n=this;p(this,e),this.appInits=t,this.resolve=Na,this.reject=Na,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return d(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=function(){var n=e.appInits[i]();if(Wo(n))t.push(n);else if(Qo(n)){var r=new Promise(function(e,t){n.subscribe({complete:e,error:t})});t.push(r)}},i=0;i<this.appInits.length;i++)r();Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Cn(Ku,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),Yu=new cn("AppId"),Ju={provide:Yu,useFactory:function(){return"".concat(Xu()).concat(Xu()).concat(Xu())},deps:[]};function Xu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var $u=new cn("Platform Initializer"),es=new cn("Platform ID"),ts=new cn("appBootstrapListener"),ns=function(){var e=function(){function e(){p(this,e)}return d(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),rs=new cn("LocaleId"),is=new cn("DefaultCurrencyCode"),os=d(function e(t,n){p(this,e),this.ngModuleFactory=t,this.componentFactories=n}),as=function(e){return new Au(e)},us=as,ss=function(e){return Promise.resolve(as(e))},cs=function(e){var t=as(e),n=ei(we(e).declarations).reduce(function(e,t){var n=ke(t);return n&&e.push(new Tu(n)),e},[]);return new os(t,n)},ls=cs,hs=function(e){return Promise.resolve(cs(e))},fs=function(){var e=function(){function e(){p(this,e),this.compileModuleSync=us,this.compileModuleAsync=ss,this.compileModuleAndAllComponentsSync=ls,this.compileModuleAndAllComponentsAsync=hs}return d(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),ds=Promise.resolve(0);function vs(e){"undefined"==typeof Zone?ds.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var ps=function(){function e(t){var n=t.enableLongStackTrace,r=void 0!==n&&n,i=t.shouldCoalesceEventChangeDetection,o=void 0!==i&&i,a=t.shouldCoalesceRunChangeDetection,u=void 0!==a&&a;if(p(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ru(!1),this.onMicrotaskEmpty=new Ru(!1),this.onStable=new Ru(!1),this.onError=new Ru(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!u&&o,s.shouldCoalesceRunChangeDetection=u,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function(){var e=$.requestAnimationFrame,t=$.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){var t=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call($,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,ms(e),e.isCheckStableRunning=!0,gs(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),ms(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(n,r,i,o,a,u){try{return ks(e),n.invokeTask(i,o,a,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),ws(e)}},onInvoke:function(n,r,i,o,a,u,s){try{return ks(e),n.invoke(i,o,a,u,s)}finally{e.shouldCoalesceRunChangeDetection&&t(),ws(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,ms(e),gs(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}(s)}return d(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,ys,Na,Na);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),ys={};function gs(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function ms(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function ks(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ws(e){e._nesting--,gs(e)}var bs=function(){function e(){p(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ru,this.onMicrotaskEmpty=new Ru,this.onStable=new Ru,this.onError=new Ru}return d(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),_s=function(){var e=function(){function e(t){var n=this;p(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return d(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){ps.assertNotInAngularZone(),vs(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())vs(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Cn(ps))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),xs=function(){var e=function(){function e(){p(this,e),this._applications=new Map,Es.addToWindow(this)}return d(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Es.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Is(e){Es=e}var Ts,Es=new(function(){function e(){p(this,e)}return d(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Ss=!0,Cs=!1;function As(){return Cs=!0,Ss}function Ns(){if(Cs)throw new Error("Cannot enable prod mode after platform setup.");Ss=!1}var Os=new cn("AllowMultipleToken"),Rs=d(function e(t,n){p(this,e),this.name=t,this.token=n});function Ds(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new cn(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Ps();if(!o||o.injector.get(Os,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0},{provide:ho,useValue:"platform"});!function(e){if(Ts&&!Ts.destroyed&&!Ts.injector.get(Os,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ts=e.get(Ls);var t=e.get($u,null);t&&t.forEach(function(e){return e()})}(To.create({providers:a,name:r}))}return function(e){var t=Ps();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Ps(){return Ts&&!Ts.destroyed?Ts:null}var Ls=function(){var e=function(){function e(t){p(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return d(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n=this,r=function(e,t){return"noop"===e?new bs:("zone.js"===e?void 0:e)||new ps({enableLongStackTrace:As(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)})}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),i=[{provide:ps,useValue:r}];return r.run(function(){var o=To.create({providers:i,parent:n.injector,name:e.moduleType.name}),a=e.create(o),u=a.injector.get(Xr,null);if(!u)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.runOutsideAngular(function(){var e=r.onError.subscribe({next:function(e){u.handleError(e)}});a.onDestroy(function(){Vs(n._modules,a),e.unsubscribe()})}),function(e,r,i){try{var o=((u=a.injector.get(Qu)).runInitializers(),u.donePromise.then(function(){return ma(a.injector.get(rs,ga)||ga),n._moduleDoBootstrap(a),a}));return Wo(o)?o.catch(function(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}):o}catch(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}var u}(u,r)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Ms({},n);return function(e,t,n){var r=new Au(n);return Promise.resolve(r)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Fs);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(x(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Cn(To))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Ms(e,t){return Array.isArray(t)?t.reduce(Ms,e):Object.assign(Object.assign({},e),t)}var Fs=function(){var e=function(){function e(t,n,r,i,o){var a=this;p(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var u=new s.y(function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){e.next(a._stable),e.complete()})}),c=new s.y(function(e){var t;a._zone.runOutsideAngular(function(){t=a._zone.onStable.subscribe(function(){ps.assertNotInAngularZone(),vs(function(){!a._stable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks&&(a._stable=!0,e.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){ps.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,l.T)(u,c.pipe(function(e){return(0,f.x)()(function(e,t){return function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,h.N);return r.source=t,r.subjectFactory=n,r}}(v)(e))}))}return d(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Sa?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(du),o=n.create(To.NULL,[],t||n.selector,i),a=o.location.nativeElement,u=o.injector.get(_s,null),s=u&&o.injector.get(xs);return u&&s&&s.registerApplication(a,u),o.onDestroy(function(){r.detachView(o.hostView),Vs(r.components,o),s&&s.unregisterApplication(a)}),this._loadComponent(o),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=c(this._views);try{for(n.s();!(t=n.n()).done;){var r;t.value.detectChanges()}}catch(i){n.e(i)}finally{n.f()}}catch(r){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(r)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;Vs(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ts,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Cn(ps),Cn(To),Cn(Xr),Cn(Aa),Cn(Qu))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Vs(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Us=d(function e(){p(this,e)}),js=d(function e(){p(this,e)}),qs={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},zs=function(){var e=function(){function e(t,n){p(this,e),this._compiler=t,this._config=n||qs}return d(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,i=n(e.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),r(8255)(o).then(function(e){return e[a]}).then(function(e){return Bs(e,o,a)}).then(function(e){return t._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var t=n(e.split("#"),2),i=t[0],o=t[1],a="NgFactory";return void 0===o&&(o="default",a=""),r(8255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[o+a]}).then(function(e){return Bs(e,i,o)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Cn(fs),Cn(js,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Bs(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Hs=function(e){return null},Zs=Ds(null,"core",[{provide:es,useValue:"unknown"},{provide:Ls,deps:[To]},{provide:xs,deps:[]},{provide:ns,deps:[]}]),Gs=[{provide:Fs,useClass:Fs,deps:[ps,To,Xr,Aa,Qu]},{provide:Iu,deps:[ps],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Qu,useClass:Qu,deps:[[new Pn,Ku]]},{provide:fs,useClass:fs,deps:[]},Ju,{provide:Xa,useFactory:function(){return uu},deps:[]},{provide:eu,useFactory:function(){return su},deps:[]},{provide:rs,useFactory:function(e){return ma(e=e||"undefined"!=typeof $localize&&$localize.locale||ga),e},deps:[[new Dn(rs),new Pn,new Ln]]},{provide:is,useValue:"USD"}],Ws=function(){var e=d(function e(t){p(this,e)});return e.\u0275fac=function(t){return new(t||e)(Cn(Fs))},e.\u0275mod=ve({type:e}),e.\u0275inj=L({providers:Gs}),e}()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return k},xv:function(){return f},Dh:function(){return h},GT:function(){return c},on:function(){return v},pX:function(){return s}});var r=n(3018),i=n(7841),o=n(7667);e=n.hmd(e);var a=["ngOnDestroy"],s=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(e,{get:function(i,o){return n.runOutsideAngular(function(){var i;if(e[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,e[o]),e[o];if(a.indexOf(o)>-1)return function(){};var s=t.toPromise().then(function(e){var t=e&&e[o];return"function"==typeof t?t.bind(e):t&&t.then?t.then(function(e){return n.run(function(){return e})}):n.run(function(){return t})});return new Proxy(function(){},{get:function(e,t){return s[t]},apply:function(e,t,n){return s.then(function(e){var t,i=e&&e.apply(void 0,u(n));return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(o,n,i),i})}})})}})},c=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype||t).forEach(function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})},l=d(function e(t){return p(this,e),t}),h=new r.OlP("angularfire2.app.options"),f=new r.OlP("angularfire2.app.name");function v(t,n,r){var o="object"==typeof r&&r||{};o.name=o.name||"string"==typeof r&&r||"[DEFAULT]";var a=i.Z.apps.filter(function(e){return e&&e.name===o.name})[0]||n.runOutsideAngular(function(){return i.Z.initializeApp(t,o)});try{JSON.stringify(t)!==JSON.stringify(a.options)&&g("error","".concat(a.name," Firebase App already initialized with different options").concat(e.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(u){}return new l(a)}var y,g=function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(0,r.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,i)},m={provide:l,useFactory:v,deps:[h,r.R0b,[new r.FiY,f]]},k=((y=function(){function e(t){p(this,e),i.Z.registerVersion("angularfire",o.q4.full,"core"),i.Z.registerVersion("angularfire",o.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,t.toString())}return d(e,null,[{key:"initializeApp",value:function(t,n){return{ngModule:e,providers:[{provide:h,useValue:t},{provide:f,useValue:n}]}}}]),e}()).\u0275fac=function(e){return new(e||y)(r.LFG(r.Lbi))},y.\u0275mod=r.oAB({type:y}),y.\u0275inj=r.cJS({providers:[m]}),y)},7667:function(e,t,r){"use strict";r.d(t,{q4:function(){return l},iC:function(){return _},HU:function(){return w},cc:function(){return v}});var i=r(3018),o=(r(2329),r(7771)),a=r(3637),u=r(3342),s=r(3101),c=r(309);e=r.hmd(e);var l=new i.GfV("7.0.4"),h=!!e.hot,f=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)};function v(e,t,r,i,o){var a=globalThis.\u0275AngularfireInstanceCache.find(function(t){return t[0]===e})||[],u=n(a,3),s=u[1],c=u[2];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(r){return e===t}}(o,c)||(f("error","".concat(t," was already initialized on the ").concat(r," Firebase App with different settings.").concat(h?" You may need to reload as Firebase is not HMR aware.":"")),f("warn",{is:o,was:c})),s;var l=i();return globalThis.\u0275AngularfireInstanceCache.push([e,l,o]),l}function y(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);var g,m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.N;p(this,e),this.zone=t,this.delegate=n}return d(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule(function(t){var n=this;r.runGuarded(function(){e.apply(n,[t])})},t,n)}}]),e}(),k=function(){function e(t){p(this,e),this.zone=t,this.task=null}return d(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",y,{},y,y)}),t.pipe((0,u.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout(function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)},10)}}]),e}(),w=((g=d(function e(t){p(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(function(){return new m(Zone.current)}),this.insideAngular=t.run(function(){return new m(Zone.current,a.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)})).\u0275fac=function(e){return new(e||g)(i.LFG(i.R0b))},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g);function b(){var e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("AngularFireModule has not been provided");return e}function _(e){return b(),function(e){return function(t){return(t=t.lift(new k(e.ngZone))).pipe((0,s.R)(e.outsideAngular),(0,c.QV)(e.insideAngular))}}(b())(e)}},4486:function(e,t,n){"use strict";var r=n(4685),i=n(6034),o=n(5452),a=n(300),u=function(){function e(t,n){var r=this;p(this,e),this._delegate=t,this.firebase=n,(0,o._addComponent)(t,new i.wA("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return d(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),(0,o.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)&&r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,o._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,o._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),s=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.initializeApp(i,a);if((0,r.r3)(t,u.name))return t[u.name];var s=new e(u,n);return t[u.name]=s,s},app:i,registerVersion:o.registerVersion,setLogLevel:o.setLogLevel,onLog:o.onLog,apps:null,SDK_VERSION:o.SDK_VERSION,INTERNAL:{registerComponent:function(t){var a=t.name,u=a.replace("-compat","");if(o._registerComponent(t)&&"PUBLIC"===t.type){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[u])throw s.create("invalid-app-argument",{appName:a});return e[u]()};void 0!==t.serviceProps&&(0,r.ZB)(c,t.serviceProps),n[u]=c,e.prototype[u]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,a).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[u]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:o}};function i(e){if(!(0,r.r3)(t,e=e||o._DEFAULT_ENTRY_NAME))throw s.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,n}(u);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new a.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var h=self.firebase.SDK_VERSION;h&&h.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=c;(0,o.registerVersion)("@firebase/app-compat","0.1.1",void 0),t.Z=f},5452:function(n,r,i){"use strict";var o;i.r(r),i.d(r,{FirebaseError:function(){return l.ZR},SDK_VERSION:function(){return C},_DEFAULT_ENTRY_NAME:function(){return y},_addComponent:function(){return w},_addOrOverwriteComponent:function(){return b},_apps:function(){return m},_clearComponents:function(){return T},_components:function(){return k},_getProvider:function(){return x},_registerComponent:function(){return _},_removeServiceInstance:function(){return I},deleteApp:function(){return R},getApp:function(){return N},getApps:function(){return O},initializeApp:function(){return A},onLog:function(){return L},registerVersion:function(){return P},setLogLevel:function(){return M}});var a=i(8239),u=i(6034),s=i(300),l=i(4685),h=function(){function e(t){p(this,e),this.container=t}return d(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if("VERSION"===(null==(n=e.getComponent())?void 0:n.type)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}var n;return null}).filter(function(e){return e}).join(" ")}}]),e}(),f="@firebase/app",v=new s.Yd("@firebase/app"),y="[DEFAULT]",g=(t(o={},f,"fire-core"),t(o,"@firebase/app-compat","fire-core-compat"),t(o,"@firebase/analytics","fire-analytics"),t(o,"@firebase/analytics-compat","fire-analytics-compat"),t(o,"@firebase/app-check","fire-app-check"),t(o,"@firebase/app-check-compat","fire-app-check-compat"),t(o,"@firebase/auth","fire-auth"),t(o,"@firebase/auth-compat","fire-auth-compat"),t(o,"@firebase/database","fire-rtdb"),t(o,"@firebase/database-compat","fire-rtdb-compat"),t(o,"@firebase/functions","fire-fn"),t(o,"@firebase/functions-compat","fire-fn-compat"),t(o,"@firebase/installations","fire-iid"),t(o,"@firebase/installations-compat","fire-iid-compat"),t(o,"@firebase/messaging","fire-fcm"),t(o,"@firebase/messaging-compat","fire-fcm-compat"),t(o,"@firebase/performance","fire-perf"),t(o,"@firebase/performance-compat","fire-perf-compat"),t(o,"@firebase/remote-config","fire-rc"),t(o,"@firebase/remote-config-compat","fire-rc-compat"),t(o,"@firebase/storage","fire-gcs"),t(o,"@firebase/storage-compat","fire-gcs-compat"),t(o,"@firebase/firestore","fire-fst"),t(o,"@firebase/firestore-compat","fire-fst-compat"),t(o,"fire-js","fire-js"),t(o,"firebase","fire-js-all"),o),m=new Map,k=new Map;function w(e,t){try{e.container.addComponent(t)}catch(n){v.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function b(e,t){e.container.addOrOverwriteComponent(t)}function _(e){var t=e.name;if(k.has(t))return v.debug("There were multiple attempts to register component ".concat(t,".")),!1;k.set(t,e);var n,r=c(m.values());try{for(r.s();!(n=r.n()).done;){w(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function x(e,t){return e.container.getProvider(t)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;x(e,t).clearInstance(n)}function T(){k.clear()}var E=new l.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."}),S=function(){function e(t,n,r){var i=this;p(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new u.wA("app",function(){return i},"PUBLIC"))}return d(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw E.create("app-deleted",{appName:this._name})}}]),e}(),C="9.0.0";function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:y,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw E.create("bad-app-name",{appName:String(r)});var i=m.get(r);if(i){if((0,l.vZ)(e,i.options)&&(0,l.vZ)(n,i.config))return i;throw E.create("duplicate-app",{appName:r})}var o,a=new u.H0(r),s=c(k.values());try{for(s.s();!(o=s.n()).done;){var h=o.value;a.addComponent(h)}}catch(d){s.e(d)}finally{s.f()}var f=new S(e,n,a);return m.set(r,f),f}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=m.get(e);if(!t)throw E.create("no-app",{appName:e});return t}function O(){return Array.from(m.values())}function R(e){return D.apply(this,arguments)}function D(){return(D=(0,a.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.name,e.t0=m.has(r),!e.t0){e.next=7;break}return m.delete(r),e.next=6,Promise.all(n.container.getProviders().map(function(e){return e.delete()}));case 6:n.isDeleted=!0;case 7:case"end":return e.stop()}},t)}))).apply(this,arguments)}function P(e,t,n){var r,i=null!==(r=g[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void v.warn(s.join(" "))}_(new u.wA("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function L(e,t){if(null!==e&&"function"!=typeof e)throw E.create("invalid-log-argument");(0,s.Am)(e,t)}function M(e){(0,s.Ub)(e)}_(new u.wA("platform-logger",function(e){return new h(e)},"PRIVATE")),P(f,"0.7.0",void 0),P("fire-js","")},6034:function(e,t,n){"use strict";n.d(t,{wA:function(){return o},H0:function(){return c}});var r=n(4762),i=n(4685),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),a="[DEFAULT]",u=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:a})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var u=(0,r.CR)(o.value,2),s=u[1],c=this.normalizeInstanceIdentifier(u[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});s.resolve(l)}catch(h){}}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=a),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,o=void 0===i?{}:i,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:o});try{for(var s=(0,r.XA)(this.instancesDeferred.entries()),c=s.next();!c.done;c=s.next()){var l=(0,r.CR)(c.value,2),h=l[1];a===this.normalizeInstanceIdentifier(l[0])&&h.resolve(u)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return u},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,o=this.onInitCallbacks.get(t);if(o)try{for(var a=(0,r.XA)(o),u=a.next();!u.done;u=a.next()){var s=u.value;try{s(e,t)}catch(c){}}}catch(c){n={error:c}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:s(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(o){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=a),this.component?this.component.multipleInstances?e:a:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function s(e){return e===a?void 0:e}var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new u(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},300:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r}n.d(t,{in:function(){return u},Yd:function(){return f},Ub:function(){return d},Am:function(){return v}});var i,o,a=[],u=((o=u||(u={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT",u),s={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},c=u.INFO,l=((i={})[u.DEBUG]="log",i[u.VERBOSE]="log",i[u.INFO]="info",i[u.WARN]="warn",i[u.ERROR]="error",i),h=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=l[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},f=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=h,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in u))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,u.DEBUG],e)),this._logHandler.apply(this,r([this,u.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,u.VERBOSE],e)),this._logHandler.apply(this,r([this,u.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,u.INFO],e)),this._logHandler.apply(this,r([this,u.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,u.WARN],e)),this._logHandler.apply(this,r([this,u.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,u.ERROR],e)),this._logHandler.apply(this,r([this,u.ERROR],e))},e}();function d(e){a.forEach(function(t){t.setLogLevel(e)})}function v(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:u[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},4685:function(e,t,n){"use strict";n.d(t,{BH:function(){return l},LL:function(){return I},ZR:function(){return x},tV:function(){return u},r3:function(){return S},Sg:function(){return h},ne:function(){return P},vZ:function(){return A},ZB:function(){return s},pd:function(){return D},m9:function(){return F},z$:function(){return f},jU:function(){return p},ru:function(){return y},d:function(){return m},xb:function(){return C},w1:function(){return k},hl:function(){return _},uI:function(){return d},UG:function(){return v},b$:function(){return g},G6:function(){return b},Mn:function(){return w},xO:function(){return O},zd:function(){return R}});var r=n(4762),i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,u=a?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=(15&u)<<2|c>>6,h=63&c;s||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|u>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(u=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==s)throw Error();r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==s&&r.push(u<<6&192|s))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){return function(e){var t=i(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function s(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)!t.hasOwnProperty(n)||!c(n)||(e[n]=s(e[n],t[n]));return e}function c(e){return"__proto__"!==e}var l=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function h(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var u=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(u)),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function v(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function p(){return"object"==typeof self&&self.self===self}function y(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return f().indexOf("Electron/")>=0}function k(){var e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function b(){return!v()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){return"indexedDB"in self&&null!=indexedDB}var x=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return(0,r.ZT)(t,e),t}(Error),I=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?T(o,r):"Error",u=this.serviceName+": "+a+" ("+i+").",s=new x(i,u,r);return s},e}();function T(e,t){return e.replace(E,function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"})}var E=/\{\$([^}]+)}/g;function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){if(!r.includes(l=o[i]))return!1;var a=e[l],u=t[l];if(N(a)&&N(u)){if(!A(a,u))return!1}else if(a!==u)return!1}for(var s=0,c=r;s<c.length;s++){var l;if(!n.includes(l=c[s]))return!1}return!0}function N(e){return null!==e&&"object"==typeof e}function O(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}function R(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[1];t[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),t}function D(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function P(e,t){var n=new L(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],u=this.chain_[1],s=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^u&(s^c),o=1518500249):(i=u^s^c,o=1859775393):r<60?(i=u&s|c&(u|s),o=2400959708):(i=u^s^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=s,s=4294967295&(u<<30|u>>>2),u=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var L=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function M(){}function F(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{ZF:function(){return r.initializeApp}});var r=n(5452);(0,r.registerVersion)("firebase","9.0.2","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(4486);r.Z.registerVersion("firebase","9.0.2","app-compat")},6780:function(a,h,f){"use strict";f.r(h);var v=f(8239),m=f(4486),w=f(4685),b=f(5452),_=f(4762),x=f(300),T=f(6034),E=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},S=new w.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),C=new x.Yd("@firebase/auth");function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];C.logLevel<=x.in.ERROR&&C.error.apply(C,["Auth (".concat(b.SDK_VERSION,"): ").concat(e)].concat(n))}function N(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw P.apply(void 0,[e].concat(n))}function O(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return P.apply(void 0,[e].concat(n))}function R(e,n,r){var i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),t({},n,r));return new w.LL("auth","Firebase",i).create(n,{appName:e.name})}function D(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&N(e,"argument-error"),R(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function P(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,o=n[0],a=u(n.slice(1));return a[0]&&(a[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(u(a)))}return S.create.apply(S,[e].concat(n))}function L(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw P.apply(void 0,[t].concat(r))}function M(e){var t="INTERNAL ASSERTION FAILED: "+e;throw A(t),new Error(t)}function F(e,t){e||M(t)}var V=new Map;function U(e){F(e instanceof Function,"Expected a class definition");var t=V.get(e);return t?(F(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,V.set(e,t),t)}function j(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function q(){return"http:"===z()||"https:"===z()}function z(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var B=function(){function e(t,n){p(this,e),this.shortDelay=t,this.longDelay=n,F(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,w.uI)()||(0,w.b$)()}return d(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(q()||(0,w.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function H(e,t){F(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Z=function(){function e(){p(this,e)}return d(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void M("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void M("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void M("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),G={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},W=new B(3e4,6e4);function K(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Q(e,t,n,r){return Y.apply(this,arguments)}function Y(){return(Y=(0,v.Z)(function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e().mark(function a(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J(t,o,function(){var e={},o={};i&&("GET"===n?o=i:e={body:JSON.stringify(i)});var a=(0,w.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),u=new(Z.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&u.set("X-Firebase-Locale",t.languageCode),Z.fetch()(te(t,t.config.apiHost,r,a),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},e))}));case 1:case"end":return e.stop()}},a)})()})).apply(this,arguments)}function J(e,t,n){return X.apply(this,arguments)}function X(){return(X=(0,v.Z)(e().mark(function t(r,i,o){var a,u,s,c,l,h,f,d,v,p;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r._canInitEmulator=!1,a=Object.assign(Object.assign({},G),i),e.prev=2,u=new ne(r),e.next=6,Promise.race([o(),u.promise]);case 6:return s=e.sent,u.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(c=e.sent))){e.next=13;break}throw re(r,"account-exists-with-different-credential",c);case 13:if(!s.ok||"errorMessage"in c){e.next=15;break}return e.abrupt("return",c);case 15:if(l=s.ok?c.errorMessage:c.error.message,h=l.split(" : "),f=n(h,2),d=f[0],v=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=18;break}throw re(r,"credential-already-in-use",c);case 18:if("EMAIL_EXISTS"!==d){e.next=20;break}throw re(r,"email-already-in-use",c);case 20:if(p=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!v){e.next=23;break}throw R(r,p,v);case 23:N(r,p),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof w.ZR)){e.next=30;break}throw e.t0;case 30:N(r,"network-request-failed");case 31:case"end":return e.stop()}},t,null,[[2,26]])}))).apply(this,arguments)}function $(e,t,n,r){return ee.apply(this,arguments)}function ee(){return(ee=(0,v.Z)(function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e().mark(function a(){var u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,n,r,i,o);case 2:return u=e.sent,e.abrupt("return",("mfaPendingCredential"in u&&N(t,"multi-factor-auth-required",{serverResponse:u}),u));case 4:case"end":return e.stop()}},a)})()})).apply(this,arguments)}function te(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?H(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ne=function(){function e(t){var n=this;p(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(O(n.auth,"timeout"))},W.get())})}return d(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function re(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=O(e,t,r);return i.customData._tokenResponse=n,i}function ie(){return(ie=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:delete",r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function oe(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function ue(e,t){return se.apply(this,arguments)}function se(){return(se=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:lookup",r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function ce(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function le(){return(le=(0,v.Z)(function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e().mark(function r(){var i,o,a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,w.m9)(t),e.next=3,i.getIdToken(n);case 3:return o=e.sent,L((a=fe(o))&&a.exp&&a.auth_time&&a.iat,i.auth,"internal-error"),u="object"==typeof a.firebase?a.firebase:void 0,s=null==u?void 0:u.sign_in_provider,e.abrupt("return",{claims:a,token:o,authTime:ce(he(a.auth_time)),issuedAtTime:ce(he(a.iat)),expirationTime:ce(he(a.exp)),signInProvider:s||null,signInSecondFactor:(null==u?void 0:u.sign_in_second_factor)||null});case 8:case"end":return e.stop()}},r)})()})).apply(this,arguments)}function he(e){return 1e3*Number(e)}function fe(e){var t=n(e.split("."),3),r=t[0],i=t[1],o=t[2];if(void 0===r||void 0===i||void 0===o)return A("JWT malformed, contained fewer than 3 sections"),null;try{var a=(0,w.tV)(i);return a?JSON.parse(a):(A("Failed to decode base64 JWT payload"),null)}catch(a){return A("Caught error parsing JWT payload as JSON",a),null}}function de(e,t){return ve.apply(this,arguments)}function ve(){return(ve=(0,v.Z)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",n);case 2:return e.prev=2,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),e.t1=e.t0 instanceof w.ZR&&pe(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=14;break}return e.next=14,t.auth.signOut();case 14:throw e.t0;case 15:case"end":return e.stop()}},i,null,[[2,8]])})()})).apply(this,arguments)}function pe(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}var ye=function(){function t(e){p(this,t),this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return d(t,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this;if(this.isRunning){var r=this.getInterval(t);this.timerId=setTimeout((0,v.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iteration();case 2:case"end":return e.stop()}},t)})),r)}}},{key:"iteration",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.user.getIdToken(!0);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",void("auth/network-request-failed"===e.t0.code&&t.schedule(!0)));case 8:t.schedule();case 9:case"end":return e.stop()}},n,null,[[0,5]])}))()}}]),t}(),ge=function(){function e(t,n){p(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return d(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ce(this.lastLoginAt),this.creationTime=ce(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function me(e){return ke.apply(this,arguments)}function ke(){return(ke=(0,v.Z)(e().mark(function t(n){var r,i,o,a,u,s,c,l,h;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.auth,e.next=3,n.getIdToken();case 3:return o=e.sent,e.next=6,de(n,ue(i,{idToken:o}));case 6:L(null==(a=e.sent)?void 0:a.users.length,i,"internal-error"),u=a.users[0],n._notifyReloadListener(u),s=(null===(r=u.providerUserInfo)||void 0===r?void 0:r.length)?_e(u.providerUserInfo):[],c=be(n.providerData,s),l=!!n.isAnonymous&&!(n.email&&u.passwordHash||(null==c?void 0:c.length)),h={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new ge(u.createdAt,u.lastLoginAt),isAnonymous:l},Object.assign(n,h);case 12:case"end":return e.stop()}},t)}))).apply(this,arguments)}function we(){return(we=(0,v.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,w.m9)(n),e.next=3,me(r);case 3:return e.next=5,r.auth._persistUserIfCurrent(r);case 5:r.auth._notifyListenersIfCurrent(r);case 6:case"end":return e.stop()}},t)}))).apply(this,arguments)}function be(e,t){return[].concat(u(e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})})),u(t))}function _e(e){return e.map(function(e){var t=e.providerId,n=(0,_._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function xe(){return(xe=(0,v.Z)(e().mark(function t(n,r){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(n,{},function(){var e=(0,w.xO)({grant_type:"refresh_token",refresh_token:r}).slice(1),t=n.config,i=t.tokenApiHost,o=t.apiKey,a=te(n,i,"/v1/token","key=".concat(o));return Z.fetch()(a,{method:"POST",headers:{"X-Client-Version":n._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})});case 2:return i=e.sent,e.abrupt("return",{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token});case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}var Ie=function(){function t(){p(this,t),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return d(t,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){L(e.idToken,"internal-error"),L(void 0!==e.idToken,"internal-error"),L(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){var t=fe(e);return L(t,"internal-error"),L(void 0!==t.exp,"internal-error"),L(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,v.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!r.accessToken||r.refreshToken,t,"user-token-expired"),!n&&r.accessToken&&!r.isExpired){e.next=12;break}if(!r.refreshToken){e.next=8;break}return e.next=5,r.refresh(t,r.refreshToken);case 5:e.t1=r.accessToken,e.next=9;break;case 8:e.t1=null;case 9:e.t0=e.t1,e.next=13;break;case 12:e.t0=r.accessToken;case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},i)}))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){var o,a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return xe.apply(this,arguments)}(t,n);case 2:o=e.sent,a=o.accessToken,u=o.refreshToken,s=o.expiresIn,r.updateTokensAndExpiration(a,u,Number(s));case 7:case"end":return e.stop()}},i)}))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new t,this.toJSON())}},{key:"_performRefresh",value:function(){return M("not implemented")}}],[{key:"fromJSON",value:function(e,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,a=new t;return r&&(L("string"==typeof r,"internal-error",{appName:e}),a.refreshToken=r),i&&(L("string"==typeof i,"internal-error",{appName:e}),a.accessToken=i),o&&(L("number"==typeof o,"internal-error",{appName:e}),a.expirationTime=o),a}}]),t}();function Te(e,t){L("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Ee=function(){function t(e){p(this,t);var n=e.uid,r=e.auth,i=e.stsTokenManager,o=(0,_._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ye(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.metadata=new ge(o.createdAt||void 0,o.lastLoginAt||void 0)}return d(t,[{key:"getIdToken",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(n,n.stsTokenManager.getToken(n.auth,t));case 2:if(L(i=e.sent,n.auth,"internal-error"),e.t0=n.accessToken!==i,!e.t0){e.next=10;break}return n.accessToken=i,e.next=9,n.auth._persistUserIfCurrent(n);case 9:n.auth._notifyListenersIfCurrent(n);case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}},r)}))()}},{key:"getIdTokenResult",value:function(e){return function(e){return le.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return we.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(e){return new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this;return(0,v.Z)(e().mark(function i(){var o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,t.idToken&&t.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(t),o=!0),e.t0=n,!e.t0){e.next=6;break}return e.next=6,me(r);case 6:return e.next=8,r.auth._persistUserIfCurrent(r);case 8:o&&r.auth._notifyListenersIfCurrent(r);case 9:case"end":return e.stop()}},i)}))()}},{key:"delete",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getIdToken();case 2:return r=e.sent,e.next=5,de(t,function(e,t){return ie.apply(this,arguments)}(t.auth,{idToken:r}));case 5:return t.stsTokenManager.clearRefreshToken(),e.abrupt("return",t.auth.signOut());case 7:case"end":return e.stop()}},n)}))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(e,n){var r,i,o,a,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,v=null!==(a=n.photoURL)&&void 0!==a?a:void 0,p=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,m=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;L(k&&x,e,"internal-error");var I=Ie.fromJSON(this.name,x);L("string"==typeof k,e,"internal-error"),Te(h,e.name),Te(f,e.name),L("boolean"==typeof w,e,"internal-error"),L("boolean"==typeof b,e,"internal-error"),Te(d,e.name),Te(v,e.name),Te(p,e.name),Te(y,e.name),Te(g,e.name),Te(m,e.name);var T=new t({uid:k,auth:e,email:f,emailVerified:w,displayName:h,isAnonymous:b,photoURL:v,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:m});return _&&Array.isArray(_)&&(T.providerData=_.map(function(e){return Object.assign({},e)})),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,v.Z)(e().mark(function o(){var a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Ie).updateFromServerResponse(r),u=new t({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),e.next=5,me(u);case 5:return e.abrupt("return",u);case 6:case"end":return e.stop()}},o)}))()}}]),t}(),Se=function(){var t=function(){function t(){p(this,t),this.type="NONE",this.storage={}}return d(t,[{key:"_isAvailable",value:function(){return(0,v.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},t)}))()}},{key:"_set",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.storage[t]=n;case 1:case"end":return e.stop()}},i)}))()}},{key:"_get",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.storage[t],e.abrupt("return",void 0===i?null:i);case 2:case"end":return e.stop()}},r)}))()}},{key:"_remove",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:delete n.storage[t];case 1:case"end":return e.stop()}},r)}))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),t}();return t.type="NONE",t}();function Ce(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Ae=function(){function t(e,n,r){p(this,t),this.persistence=e,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,a=i.name;this.fullUserKey=Ce(this.userKey,o.apiKey,a),this.fullPersistenceKey=Ce("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return d(t,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.persistence._get(t.fullUserKey);case 2:return r=e.sent,e.abrupt("return",r?Ee._fromJSON(t.auth,r):null);case 4:case"end":return e.stop()}},n)}))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.getCurrentUser();case 4:return i=e.sent,e.next=7,n.removeCurrentUser();case 7:return n.persistence=t,e.abrupt("return",i?n.setCurrentUser(i):void 0);case 9:case"end":return e.stop()}},r)}))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return(0,v.Z)(e().mark(function o(){var a,u,s,l,h,f,d,p,y,g;return e().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r.length){o.next=2;break}return o.abrupt("return",new t(U(Se),n,i));case 2:return o.next=4,Promise.all(r.map(function(){var t=(0,v.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",n);case 4:case"end":return e.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 4:a=o.sent.filter(function(e){return e}),u=a[0]||U(Se),s=Ce(i,n.config.apiKey,n.name),l=null,h=c(r),o.prev=9,h.s();case 11:if((f=h.n()).done){o.next=27;break}return d=f.value,o.prev=13,o.next=16,d._get(s);case 16:if(!(p=o.sent)){o.next=21;break}return y=Ee._fromJSON(n,p),d!==u&&(l=y),u=d,o.abrupt("break",27);case 21:o.next=25;break;case 23:o.prev=23,o.t0=o.catch(13);case 25:o.next=11;break;case 27:o.next=32;break;case 29:o.prev=29,o.t1=o.catch(9),h.e(o.t1);case 32:return o.prev=32,h.f(),o.finish(32);case 35:if(g=a.filter(function(e){return e._shouldAllowMigration}),!u._shouldAllowMigration||!g.length){o.next=47;break}if(u=g[0],o.t3=l,!o.t3){o.next=42;break}return o.next=42,u._set(s,l.toJSON());case 42:return o.next=44,Promise.all(r.map(function(){var t=(0,v.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n===u){e.next=8;break}return e.prev=1,e.next=4,n._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},t,null,[[1,6]])}));return function(e){return t.apply(this,arguments)}}()));case 44:o.t2=new t(u,n,i),o.next=48;break;case 47:o.t2=new t(u,n,i);case 48:return o.abrupt("return",o.t2);case 49:case"end":return o.stop()}},o,null,[[9,29,32,35],[13,23]])}))()}}]),t}();function Ne(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Pe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Oe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Me(t))return"Blackberry";if(Fe(t))return"Webos";if(Re(t))return"Safari";if((t.includes("chrome/")||De(t))&&!t.includes("edge/"))return"Chrome";if(Le(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/firefox\//i.test(e)}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/crios\//i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/iemobile/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/android/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/blackberry/i.test(e)}function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/webos/i.test(e)}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/iphone|ipad|ipod/i.test(e)}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return Ve(e)||Le(e)||Fe(e)||Me(e)||/windows phone/i.test(e)||Pe(e)}function je(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ne((0,w.z$)());break;case"Worker":t="".concat(Ne((0,w.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(b.SDK_VERSION,"/").concat(r)}var qe=function(){function t(e,n){p(this,t),this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Be(this),this.idTokenSubscription=new Be(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}return d(t,[{key:"_initializeWithPersistence",value:function(t,n){var r=this;return n&&(this._popupRedirectResolver=U(n)),this._initializationPromise=this.queue((0,v.Z)(e().mark(function i(){var o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r._deleted,e.t0){e.next=14;break}return e.next=4,Ae.create(r,t);case 4:if(r.persistenceManager=e.sent,e.t1=!r._deleted,!e.t1){e.next=14;break}if(e.t2=null===(o=r._popupRedirectResolver)||void 0===o?void 0:o._shouldInitProactively,!e.t2){e.next=11;break}return e.next=11,r._popupRedirectResolver._initialize(r);case 11:return e.next=13,r.initializeCurrentUser(n);case 13:!r._deleted&&(r._isInitialized=!0);case 14:case"end":return e.stop()}},i)}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.assertedPersistence.getCurrentUser();case 4:if(r=e.sent,!t.currentUser&&!r){e.next=13;break}if(!t.currentUser||!r||t.currentUser.uid!==r.uid){e.next=11;break}return t._currentUser._assign(r),e.next=10,t.currentUser.getIdToken();case 10:return e.abrupt("return",void e.sent);case 11:return e.next=13,t._updateCurrentUser(r);case 13:case"end":return e.stop()}},n)}))()}},{key:"initializeCurrentUser",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o,a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.assertedPersistence.getCurrentUser();case 2:if(o=e.sent,!t||!n.config.authDomain){e.next=12;break}return e.next=6,n.getOrInitRedirectPersistenceManager();case 6:return a=null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId,u=null==o?void 0:o._redirectEventId,e.next=10,n.tryRedirectSignIn(t);case 10:s=e.sent,(!a||a===u)&&(null==s?void 0:s.user)&&(o=s.user);case 12:if(!o){e.next=24;break}if(!o._redirectEventId){e.next=20;break}return L(n._popupRedirectResolver,n,"argument-error"),e.next=17,n.getOrInitRedirectPersistenceManager();case 17:e.t1=n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o),e.next=21;break;case 20:e.t1=n.reloadAndSetCurrentUserOrClear(o);case 21:e.t0=e.t1,e.next=25;break;case 24:e.t0=n.directlySetCurrentUser(null);case 25:return e.abrupt("return",e.t0);case 26:case"end":return e.stop()}},r)}))()}},{key:"tryRedirectSignIn",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,n._popupRedirectResolver._completeRedirectFn(n,t,!0);case 4:i=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,n._setRedirectUser(null);case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}},r,null,[[1,7]])}))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===e.t0.code){e.next=9;break}return e.abrupt("return",n.directlySetCurrentUser(null));case 9:return e.abrupt("return",n.directlySetCurrentUser(t));case 10:case"end":return e.stop()}},r,null,[[0,5]])}))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t._deleted=!0;case 1:case"end":return e.stop()}},n)}))()}},{key:"updateCurrentUser",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t?(0,w.m9)(t):null,e.abrupt("return",(i&&L(i.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(i&&i._clone(n))));case 2:case"end":return e.stop()}},r)}))()}},{key:"_updateCurrentUser",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n._deleted){r.next=2;break}return r.abrupt("return",(t&&L(n.tenantId===t.tenantId,n,"tenant-id-mismatch"),n.queue((0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}},r)})))));case 2:case"end":return r.stop()}},r)}))()}},{key:"signOut",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.redirectPersistenceManager||t._popupRedirectResolver,!e.t0){e.next=4;break}return e.next=4,t._setRedirectUser(null);case 4:return e.abrupt("return",t._updateCurrentUser(null));case 5:case"end":return e.stop()}},n)}))()}},{key:"setPersistence",value:function(t){var n=this;return this.queue((0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.assertedPersistence.setPersistence(U(t));case 2:case"end":return e.stop()}},r)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new w.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){var o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getOrInitRedirectPersistenceManager(n);case 2:return o=e.sent,e.abrupt("return",null===t?o.removeCurrentUser():o.setCurrentUser(t));case 4:case"end":return e.stop()}},i)}))()}},{key:"getOrInitRedirectPersistenceManager",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.redirectPersistenceManager){e.next=9;break}return L(i=t&&U(t)||n._popupRedirectResolver,n,"argument-error"),e.next=5,Ae.create(n,[U(i._redirectPersistence)],"redirectUser");case 5:return n.redirectPersistenceManager=e.sent,e.next=8,n.redirectPersistenceManager.getCurrentUser();case 8:n.redirectUser=e.sent;case 9:return e.abrupt("return",n.redirectPersistenceManager);case 10:case"end":return e.stop()}},r)}))()}},{key:"_redirectUserForId",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n._isInitialized,!r.t0){r.next=4;break}return r.next=4,n.queue((0,v.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t)})));case 4:return r.abrupt("return",(null===(i=n._currentUser)||void 0===i?void 0:i._redirectEventId)===t?n._currentUser:(null===(o=n.redirectUser)||void 0===o?void 0:o._redirectEventId)===t?n.redirectUser:null);case 5:case"end":return r.stop()}},r)}))()}},{key:"_persistUserIfCurrent",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t!==n.currentUser){r.next=2;break}return r.abrupt("return",n.queue((0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}},r)}))));case 2:case"end":return r.stop()}},r)}))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var o="function"==typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return L(a,this,"internal-error"),a.then(function(){return o(i.currentUser)}),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.currentUser&&n.currentUser!==t&&(n._currentUser._stopProactiveRefresh(),t&&n.isProactiveRefreshEnabled&&t._startProactiveRefresh()),n.currentUser=t,!t){e.next=7;break}return e.next=5,n.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,n.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}},r)}))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=je(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),t}();function ze(e){return(0,w.m9)(e)}var Be=function(){function e(t){var n=this;p(this,e),this.auth=t,this.observer=null,this.addObserver=(0,w.ne)(function(e){return n.observer=e})}return d(e,[{key:"next",get:function(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function He(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ze(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ge=function(){function e(t,n){p(this,e),this.providerId=t,this.signInMethod=n}return d(e,[{key:"toJSON",value:function(){return M("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return M("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return M("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return M("not implemented")}}]),e}();function We(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:resetPassword",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Qe(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Je(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:update",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function $e(){return($e=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signInWithPassword",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:sendOobCode",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(n,r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function it(e,t){return ot.apply(this,arguments)}function ot(){return(ot=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(n,r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function at(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(n,r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function st(e,t){return ct.apply(this,arguments)}function ct(){return(ct=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",et(n,r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function lt(){return(lt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signInWithEmailLink",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function ht(){return(ht=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signInWithEmailLink",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}var ft=function(t){y(r,t);var n=g(r);function r(e,t,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return p(this,r),(o=n.call(this,"password",i))._email=e,o._password=t,o._tenantId=a,o}return d(r,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",function(e,t){return $e.apply(this,arguments)}(t,{returnSecureToken:!0,email:n._email,password:n._password}));case 4:return e.abrupt("return",function(e,t){return lt.apply(this,arguments)}(t,{email:n._email,oobCode:n._password}));case 5:N(t,"internal-error");case 6:case"end":return e.stop()}},r)}))()}},{key:"_linkToIdToken",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Qe(t,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password}));case 4:return e.abrupt("return",function(e,t){return ht.apply(this,arguments)}(t,{idToken:n,email:r._email,oobCode:r._password}));case 5:N(t,"internal-error");case 6:case"end":return e.stop()}},i)}))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new r(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new r(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),r}(Ge);function dt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signInWithIdp",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}var pt=function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return d(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,w.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):N("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=(0,_._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;var a=new n(r,i);return Object.assign(a,o),a}}]),n}(Ge);function yt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:sendVerificationCode",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function mt(){return(mt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signInWithPhoneNumber",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function kt(){return(kt=(0,v.Z)(e().mark(function t(n,r){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$(n,"POST","/v1/accounts:signInWithPhoneNumber",K(n,r));case 2:if(!(i=e.sent).temporaryProof){e.next=5;break}throw re(n,"account-exists-with-different-credential",i);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}},t)}))).apply(this,arguments)}var wt={USER_NOT_FOUND:"user-not-found"};function bt(){return(bt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signInWithPhoneNumber",K(n,Object.assign(Object.assign({},r),{operation:"REAUTH"})),wt));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}var _t=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,"phone","phone")).params=e,r}return d(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return mt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return kt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return bt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,o=t.phoneNumber,a=t.temporaryProof;return i||r||o||a?new n({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:a}):null}}]),n}(Ge),xt=function(){function e(t){var n,r,i,o,a,u;p(this,e);var s=(0,w.zd)((0,w.pd)(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);L(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(o=s.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=s.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return d(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,w.zd)((0,w.pd)(e)).link,n=t?(0,w.zd)((0,w.pd)(t)).deep_link_id:null,r=(0,w.zd)((0,w.pd)(e)).deep_link_id;return(r?(0,w.zd)((0,w.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}(),It=function(){var e=function(){function e(){p(this,e),this.providerId=e.PROVIDER_ID}return d(e,null,[{key:"credential",value:function(e,t){return ft._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xt.parseLink(t);return L(n,"argument-error"),ft._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),Tt=function(){function e(t){p(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return d(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Et=function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).scopes=[],e}return d(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return u(this.scopes)}}]),n}(Tt),St=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"credential",value:function(e){return this._credential(e)}},{key:"_credential",value:function(e){return L(e.idToken||e.accessToken,"argument-error"),pt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return L("providerId"in t&&"signInMethod"in t,"argument-error"),pt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,a=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!o&&!r&&!a||!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,rawNonce:u,pendingToken:a})}catch(c){return null}}}]),n}(Et),Ct=function(){var e=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.call(this,"facebook.com")}return d(n,null,[{key:"credential",value:function(e){return pt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Et);return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e}(),At=function(){var e=function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return d(n,null,[{key:"credential",value:function(e,t){return pt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(Et);return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e}(),Nt=function(){var e=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.call(this,"github.com")}return d(n,null,[{key:"credential",value:function(e){return pt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Et);return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e}(),Ot=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return d(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,dt(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,dt(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=t.pendingToken;return r&&i&&o&&r===i?new n(r,o):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ge),Rt=function(){var e=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.call(this,"twitter.com")}return d(n,null,[{key:"credential",value:function(e,t){return pt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(Et);return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e}();function Dt(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signUp",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}var Lt=function(){function t(e){p(this,t),this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}return d(t,null,[{key:"_fromIdTokenResponse",value:function(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,v.Z)(e().mark(function a(){var u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee._fromIdTokenResponse(n,i,o);case 2:return u=e.sent,s=Mt(i),e.abrupt("return",new t({user:u,providerId:s,_tokenResponse:i,operationType:r}));case 5:case"end":return e.stop()}},a)}))()}},{key:"_forOperation",value:function(n,r,i){return(0,v.Z)(e().mark(function o(){var a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Mt(i),e.abrupt("return",new t({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return e.stop()}},o)}))()}}]),t}();function Mt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ft(){return(Ft=(0,v.Z)(e().mark(function t(n){var r,i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(n),e.next=3,i._initializationPromise;case 3:if(!(null===(r=i.currentUser)||void 0===r?void 0:r.isAnonymous)){e.next=5;break}return e.abrupt("return",new Lt({user:i.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Dt(i,{returnSecureToken:!0});case 7:return o=e.sent,e.next=10,Lt._fromIdTokenResponse(i,"signIn",o,!0);case 10:return a=e.sent,e.next=13,i._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},t)}))).apply(this,arguments)}var Vt=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a,u;return p(this,n),(a=t.call(this,r.code,r.message)).operationType=i,a.user=o,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),a.appName=e.name,a.code=r.code,a.tenantId=null!==(u=e.tenantId)&&void 0!==u?u:void 0,a.serverResponse=r.customData.serverResponse,a}return d(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(w.ZR);function Ut(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){throw"auth/multi-factor-auth-required"===n.code?Vt._fromErrorAndOperation(e,n,t,r):n})}function jt(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function qt(){return(qt=(0,v.Z)(e().mark(function t(n,r){var i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,w.m9)(n),e.next=3,Ht(!0,i,r);case 3:return e.t0=oe,e.t1=i.auth,e.next=7,i.getIdToken();case 7:return e.t2=e.sent,e.t3=[r],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return o=e.sent,a=o.providerUserInfo,u=jt(a||[]),i.providerData=i.providerData.filter(function(e){return u.has(e.providerId)}),u.has("phone")||(i.phoneNumber=null),e.next=19,i.auth._persistUserIfCurrent(i);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}},t)}))).apply(this,arguments)}function zt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,v.Z)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e().mark(function i(){var o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=de,e.t1=t,e.t2=n,e.t3=t.auth,e.next=6,t.getIdToken();case 6:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=11,(0,e.t0)(e.t1,e.t5,e.t6);case 11:return o=e.sent,e.abrupt("return",Lt._forOperation(t,"link",o));case 13:case"end":return e.stop()}},i)})()})).apply(this,arguments)}function Ht(e,t,n){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,v.Z)(e().mark(function t(n,r,i){var o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(r);case 2:o=!1===n?"provider-already-linked":"no-such-provider",L(jt(r.providerData).has(i)===n,r.auth,o);case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Gt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,v.Z)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e().mark(function i(){var o,a,u,s,c;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.auth,a="reauthenticate",e.prev=1,e.next=4,de(t,Ut(o,a,n,t),r);case 4:return L((u=e.sent).idToken,o,"internal-error"),L(s=fe(u.idToken),o,"internal-error"),c=s.sub,e.abrupt("return",(L(t.uid===c,o,"user-mismatch"),Lt._forOperation(t,a,u)));case 12:throw e.prev=12,e.t0=e.catch(1),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&N(o,"user-mismatch"),e.t0;case 15:case"end":return e.stop()}},i,null,[[1,12]])})()})).apply(this,arguments)}function Kt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,v.Z)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e().mark(function i(){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="signIn",e.next=3,Ut(t,o,n);case 3:return a=e.sent,e.next=6,Lt._fromIdTokenResponse(t,o,a);case 6:if(u=e.sent,e.t0=r,e.t0){e.next=11;break}return e.next=11,t._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}},i)})()})).apply(this,arguments)}function Yt(e,t){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(ze(n),r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Xt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,v.Z)(e().mark(function t(n,r){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,w.m9)(n),e.next=3,Ht(!1,i,r.providerId);case 3:return e.abrupt("return",zt(i,r));case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}function en(e,t){return tn.apply(this,arguments)}function tn(){return(tn=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gt((0,w.m9)(n),r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function nn(e,t){return rn.apply(this,arguments)}function rn(){return(rn=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$(n,"POST","/v1/accounts:signInWithCustomToken",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function on(){return(on=(0,v.Z)(e().mark(function t(n,r){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=ze(n),e.next=3,nn(i,{token:r,returnSecureToken:!0});case 3:return o=e.sent,e.next=6,Lt._fromIdTokenResponse(i,"signIn",o);case 6:return a=e.sent,e.next=9,i._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},t)}))).apply(this,arguments)}var an=function(){function e(t,n){p(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return d(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?un._fromServerResponse(e,t):N(e,"internal-error")}}]),e}(),un=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return d(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(an);function sn(e,t,n){var r;L((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),L(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(L(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(L(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function cn(){return(cn=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,w.m9)(n),a={requestType:"PASSWORD_RESET",email:r},i&&sn(o,a,i),e.next=4,it(o,a);case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}function ln(){return(ln=(0,v.Z)(e().mark(function t(n,r,i){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We((0,w.m9)(n),{oobCode:r,newPassword:i});case 2:case"end":return e.stop()}},t)}))).apply(this,arguments)}function hn(){return(hn=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je((0,w.m9)(n),{oobCode:r});case 2:case"end":return e.stop()}},t)}))).apply(this,arguments)}function fn(e,t){return dn.apply(this,arguments)}function dn(){return(dn=(0,v.Z)(e().mark(function t(n,r){var i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,w.m9)(n),e.next=3,We(i,{oobCode:r});case 3:o=e.sent,a=o.requestType,e.t0=(L(a,i,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return L(o.newEmail,i,"internal-error"),e.abrupt("break",13);case 11:L(o.mfaInfo,i,"internal-error");case 12:L(o.email,i,"internal-error");case 13:return u=null,e.abrupt("return",(o.mfaInfo&&(u=an._fromServerResponse(ze(i),o.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===o.requestType?o.newEmail:o.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===o.requestType?o.email:o.newEmail)||null,multiFactorInfo:u},operation:a}));case 15:case"end":return e.stop()}},t)}))).apply(this,arguments)}function vn(){return(vn=(0,v.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn((0,w.m9)(n),r);case 2:return i=e.sent,o=i.data,e.abrupt("return",o.email);case 5:case"end":return e.stop()}},t)}))).apply(this,arguments)}function pn(){return(pn=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=ze(n),e.next=3,Dt(o,{returnSecureToken:!0,email:r,password:i});case 3:return a=e.sent,e.next=6,Lt._fromIdTokenResponse(o,"signIn",a);case 6:return u=e.sent,e.next=9,o._updateCurrentUser(u.user);case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}},t)}))).apply(this,arguments)}function yn(){return(yn=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,w.m9)(n),a={requestType:"EMAIL_SIGNIN",email:r},L(i.handleCodeInApp,o,"argument-error"),i&&sn(o,a,i),e.next=5,at(o,a);case 5:case"end":return e.stop()}},t)}))).apply(this,arguments)}function gn(){return(gn=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,w.m9)(n),a=It.credentialWithLink(r,i||j()),e.abrupt("return",(L(a._tenantId===(o.tenantId||null),o,"tenant-id-mismatch"),Yt(o,a)));case 2:case"end":return e.stop()}},t)}))).apply(this,arguments)}function mn(e,t){return kn.apply(this,arguments)}function kn(){return(kn=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:createAuthUri",K(n,r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function wn(){return(wn=(0,v.Z)(e().mark(function t(n,r){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={identifier:r,continueUri:q()?j():"http://localhost"},e.next=3,mn((0,w.m9)(n),i);case 3:return o=e.sent,a=o.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}},t)}))).apply(this,arguments)}function bn(){return(bn=(0,v.Z)(e().mark(function t(n,r){var i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,w.m9)(n),e.next=3,n.getIdToken();case 3:return e.t0=e.sent,o={requestType:"VERIFY_EMAIL",idToken:e.t0},r&&sn(i.auth,o,r),e.next=8,nt(i.auth,o);case 8:if(a=e.sent,u=a.email,e.t1=u!==n.email,!e.t1){e.next=14;break}return e.next=14,n.reload();case 14:case"end":return e.stop()}},t)}))).apply(this,arguments)}function _n(){return(_n=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,w.m9)(n),e.next=3,n.getIdToken();case 3:return e.t0=e.sent,e.t1=r,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},i&&sn(o.auth,a,i),e.next=9,st(o.auth,a);case 9:if(u=e.sent,s=u.email,e.t2=s!==n.email,!e.t2){e.next=15;break}return e.next=15,n.reload();case 15:case"end":return e.stop()}},t)}))).apply(this,arguments)}function xn(e,t){return In.apply(this,arguments)}function In(){return(In=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(n,"POST","/v1/accounts:update",r));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Tn(){return(Tn=(0,v.Z)(function(t,n){var r=n.displayName,i=n.photoURL;return e().mark(function n(){var o,a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r||void 0!==i){e.next=2;break}return e.abrupt("return");case 2:return o=(0,w.m9)(t),e.next=5,o.getIdToken();case 5:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,a={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=12,de(o,xn(o.auth,a));case 12:return u=e.sent,o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null,(s=o.providerData.find(function(e){return"password"===e.providerId}))&&(s.displayName=o.displayName,s.photoURL=o.photoURL),e.next=18,o._updateTokensIfNecessary(u);case 18:case"end":return e.stop()}},n)})()})).apply(this,arguments)}function En(e,t,n){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.auth,e.next=3,n.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},r&&(a.email=r),i&&(a.password=i),e.next=9,de(n,Qe(o,a));case 9:return u=e.sent,e.next=12,n._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}},t)}))).apply(this,arguments)}var Cn=d(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p(this,e),this.isNewUser=t,this.providerId=n,this.profile=r}),An=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;return p(this,n),(a=t.call(this,e,r,i)).username=o,a}return d(n)}(Cn),Nn=function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this,e,"facebook.com",r)}return d(n)}(Cn),On=function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return d(n)}(An),Rn=function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this,e,"google.com",r)}return d(n)}(Cn),Dn=function(e){y(n,e);var t=g(n);function n(e,r,i){return p(this,n),t.call(this,e,"twitter.com",r,i)}return d(n)}(An);function Pn(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var a=null===(n=null===(t=fe(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(a)return new Cn(o,"anonymous"!==a&&"custom"!==a?a:null)}if(!r)return null;switch(r){case"facebook.com":return new Nn(o,i);case"github.com":return new On(o,i);case"google.com":return new Rn(o,i);case"twitter.com":return new Dn(o,i,e.screenName||null);case"custom":case"anonymous":return new Cn(o,null);default:return new Cn(o,r,i)}}(n)}var Ln=function(){function e(t,n){p(this,e),this.type=t,this.credential=n}return d(e,[{key:"toJSON",value:function(){return{multiFactorSession:t({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Mn=function(){function t(e,n,r){p(this,t),this.session=e,this.hints=n,this.signInResolver=r}return d(t,[{key:"resolveSignIn",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.signInResolver(t));case 1:case"end":return e.stop()}},r)}))()}}],[{key:"_fromError",value:function(n,r){var i=ze(n),o=(r.serverResponse.mfaInfo||[]).map(function(e){return an._fromServerResponse(i,e)});L(r.serverResponse.mfaPendingCredential,i,"internal-error");var a,u=Ln._fromMfaPendingCredential(r.serverResponse.mfaPendingCredential);return new t(u,o,(a=(0,v.Z)(e().mark(function t(n){var o,a,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._process(i,u);case 2:o=e.sent,delete r.serverResponse.mfaInfo,delete r.serverResponse.mfaPendingCredential,a=Object.assign(Object.assign({},r.serverResponse),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=r.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,Lt._fromIdTokenResponse(i,r.operationType,a);case 10:return s=e.sent,e.next=13,i._updateCurrentUser(s.user);case 13:return e.abrupt("return",s);case 14:return e.abrupt("return",(L(r.user,i,"internal-error"),Lt._forOperation(r.user,r.operationType,a)));case 15:N(i,"internal-error");case 16:case"end":return e.stop()}},t)})),function(e){return a.apply(this,arguments)}))}}]),t}();function Fn(e,t){return Q(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}var Vn=function(){function t(e){var n=this;p(this,t),this.user=e,this.enrolledFactors=[],e._onReload(function(t){t.mfaInfo&&(n.enrolledFactors=t.mfaInfo.map(function(t){return an._fromServerResponse(e.auth,t)}))})}return d(t,[{key:"getSession",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ln,e.next=3,t.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}},n)}))()}},{key:"enroll",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t,e.next=3,r.getSession();case 3:return a=e.sent,e.next=6,de(r.user,o._process(r.user.auth,a,n));case 6:return u=e.sent,e.next=9,r.user._updateTokensIfNecessary(u);case 9:return e.abrupt("return",r.user.reload());case 10:case"end":return e.stop()}},i)}))()}},{key:"unenroll",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="string"==typeof t?t:t.uid,e.next=3,n.user.getIdToken();case 3:return o=e.sent,e.next=6,de(n.user,function(e,t){return Q(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:e.tenantId},t))}(n.user.auth,{idToken:o,mfaEnrollmentId:i}));case 6:return a=e.sent,n.enrolledFactors=n.enrolledFactors.filter(function(e){return e.uid!==i}),e.next=10,n.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,n.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),"auth/user-token-expired"===e.t0.code){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}},r,null,[[10,15]])}))()}}],[{key:"_fromUser",value:function(e){return new t(e)}}]),t}(),Un=new WeakMap,jn="__sak",qn=function(){function e(t,n){p(this,e),this.storage=t,this.type=n}return d(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(jn,"1"),this.storage.removeItem(jn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}}]),e}(),zn=function(){var t=function(t){y(r,t);var n=g(r);function r(){var e;return p(this,r),(e=n.call(this,window.localStorage,"LOCAL")).listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=(0,w.z$)();return Re(e)||Ve(e)}()&&function(){try{return!(!window||window===window.top)}catch(r){return!1}}(),e.fallbackToPolling=Ue(),e._shouldAllowMigration=!0,e.boundEventHandler=e.onStorageEvent.bind(k(e)),e}return d(r,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var o=function(){var e=t.storage.getItem(r);!n&&t.localCache[r]===e||t.notifyListeners(r,e)},a=this.storage.getItem(r);(0,w.w1)()&&10===document.documentMode&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t&&JSON.parse(t))}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(t,n){var i=this,a=this;return(0,v.Z)(e().mark(function u(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(I(r.prototype),"_set",i).call(a,t,n);case 2:a.localCache[t]=JSON.stringify(n);case 3:case"end":return e.stop()}},u)}))()}},{key:"_get",value:function(t){var n=this,i=this;return(0,v.Z)(e().mark(function a(){var u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(I(r.prototype),"_get",n).call(i,t);case 2:return u=e.sent,e.abrupt("return",(i.localCache[t]=JSON.stringify(u),u));case 4:case"end":return e.stop()}},a)}))()}},{key:"_remove",value:function(t){var n=this,i=this;return(0,v.Z)(e().mark(function a(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(I(r.prototype),"_remove",n).call(i,t);case 2:delete i.localCache[t];case 3:case"end":return e.stop()}},a)}))()}}]),r}(qn);return t.type="LOCAL",t}(),Bn=function(){var e=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.call(this,window.sessionStorage,"SESSION")}return d(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(qn);return e.type="SESSION",e}(),Hn=function(){var t=function(){function t(e){p(this,t),this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return d(t,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o,a,u,s,c,l,h;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=(i=t).data,a=o.eventId,u=o.eventType,s=o.data,null==(c=n.handlersMap[u])?void 0:c.size){r.next=3;break}return r.abrupt("return");case 3:return i.ports[0].postMessage({status:"ack",eventId:a,eventType:u}),l=Array.from(c).map(function(){var t=(0,v.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(i.origin,s));case 1:case"end":return e.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),r.next=7,function(t){return Promise.all(t.map((n=(0,v.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,n;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}},t,null,[[0,8]])})),function(e){return n.apply(this,arguments)})));var n}(l);case 7:h=r.sent,i.ports[0].postMessage({status:"done",eventId:a,eventType:u,response:h});case 9:case"end":return r.stop()}},r)}))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||0===this.handlersMap[e].size)&&delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(e){var n=this.receivers.find(function(t){return t.isListeningto(e)});if(n)return n;var r=new t(e);return this.receivers.push(r),r}}]),t}();return t.receivers=[],t}();function Zn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}var Gn=function(){function t(e){p(this,t),this.target=e,this.handlers=new Set}return d(t,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=this;return(0,v.Z)(e().mark(function o(){var a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=3;break}throw new Error("connection_unavailable");case 3:return e.abrupt("return",new Promise(function(e,o){var c=Zn("",20);a.port1.start();var l=setTimeout(function(){o(new Error("unsupported_event"))},r);s={messageChannel:a,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),u=setTimeout(function(){o(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),e(n.data.response);break;default:clearTimeout(l),clearTimeout(u),o(new Error("invalid_response"))}}},i.handlers.add(s),a.port1.addEventListener("message",s.onMessage),i.target.postMessage({eventType:t,eventId:c,data:n},[a.port2])}).finally(function(){s&&i.removeMessageHandler(s)}));case 4:case"end":return e.stop()}},o)}))()}}]),t}();function Wn(){return window}function Kn(){return void 0!==Wn().WorkerGlobalScope&&"function"==typeof Wn().importScripts}function Qn(){return(Qn=(0,v.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},t,null,[[2,8]])}))).apply(this,arguments)}var Yn="firebaseLocalStorageDb",Jn="firebaseLocalStorage",Xn="fbase_key",$n=function(){function e(t){p(this,e),this.request=t}return d(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function er(e,t){return e.transaction([Jn],t?"readwrite":"readonly").objectStore(Jn)}function tr(){var t=indexedDB.open(Yn,1);return new Promise(function(n,r){t.addEventListener("error",function(){r(t.error)}),t.addEventListener("upgradeneeded",function(){var e=t.result;try{e.createObjectStore(Jn,{keyPath:Xn})}catch(n){r(n)}}),t.addEventListener("success",(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=t.result).objectStoreNames.contains(Jn)){e.next=5;break}n(i),e.next=13;break;case 5:return i.close(),e.next=8,function(){var e=indexedDB.deleteDatabase(Yn);return new $n(e).toPromise()}();case 8:return e.t0=n,e.next=11,tr();case 11:e.t1=e.sent,(0,e.t0)(e.t1);case 13:case"end":return e.stop()}},r)})))})}function nr(e,t,n){return rr.apply(this,arguments)}function rr(){return(rr=(0,v.Z)(e().mark(function n(r,i,o){var a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=er(r,!0).put((t(a={},Xn,i),t(a,"value",o),a)),e.abrupt("return",new $n(u).toPromise());case 2:case"end":return e.stop()}},n)}))).apply(this,arguments)}function ir(){return(ir=(0,v.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=er(n,!1).get(r),e.next=3,new $n(i).toPromise();case 3:return o=e.sent,e.abrupt("return",void 0===o?null:o.value);case 5:case"end":return e.stop()}},t)}))).apply(this,arguments)}function or(e,t){var n=er(e,!0).delete(t);return new $n(n).toPromise()}var ar=function(){var t=function(){function t(){p(this,t),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return d(t,[{key:"_openDb",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.db,e.t0){e.next=5;break}return e.next=4,tr();case 4:t.db=e.sent;case 5:return e.abrupt("return",t.db);case 6:case"end":return e.stop()}},n)}))()}},{key:"_withRetries",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:return e.prev=1,e.next=4,n._openDb();case 4:return o=e.sent,e.next=7,t(o);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(1),!(i++>3)){e.next=14;break}throw e.t0;case 14:n.db&&(n.db.close(),n.db=void 0);case 15:e.next=1;break;case 17:case"end":return e.stop()}},r,null,[[1,10]])}))()}},{key:"initializeServiceWorkerMessaging",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn()?t.initializeReceiver():t.initializeSender());case 1:case"end":return e.stop()}},n)}))()}},{key:"initializeReceiver",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.receiver=Hn._getInstance(Kn()?self:null),t.receiver._subscribe("keyChanged",function(){var n=(0,v.Z)(e().mark(function n(r,i){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return e.t0=e.sent.includes(i.key),e.abrupt("return",{keyProcessed:e.t0});case 4:case"end":return e.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var t=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}());case 1:case"end":return n.stop()}},n)}))()}},{key:"initializeSender",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r,i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){return Qn.apply(this,arguments)}();case 2:if(t.activeServiceWorker=e.sent,t.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return t.sender=new Gn(t.activeServiceWorker),e.next=8,t.sender._send("ping",{},800);case 8:!(o=e.sent)||(null===(r=o[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=o[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0);case 10:case"end":return e.stop()}},n)}))()}},{key:"notifyServiceWorker",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.sender||!n.activeServiceWorker||function(){var e;return(null===(e=null==navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()!==n.activeServiceWorker){e.next=8;break}return e.prev=1,e.next=4,n.sender._send("keyChanged",{key:t},n.serviceWorkerReceiverAvailable?800:50);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},r,null,[[1,6]])}))()}},{key:"_isAvailable",value:function(){return(0,v.Z)(e().mark(function t(){var n;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,tr();case 5:return n=e.sent,e.next=8,nr(n,jn,"1");case 8:return e.next=10,or(n,jn);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},t,null,[[0,13]])}))()}},{key:"_withPendingWrite",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,n.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}},r,null,[[1,,4,7]])}))()}},{key:"_set",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){return e().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r._withPendingWrite((0,v.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries(function(e){return nr(e,t,n)});case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}},i)}))));case 1:case"end":return i.stop()}},i)}))()}},{key:"_get",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries(function(e){return function(e,t){return ir.apply(this,arguments)}(e,t)});case 2:return i=e.sent,e.abrupt("return",(n.localCache[t]=i,i));case 4:case"end":return e.stop()}},r)}))()}},{key:"_remove",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite((0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries(function(e){return or(e,t)});case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}},r)}))));case 1:case"end":return r.stop()}},r)}))()}},{key:"_poll",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r,i,o,a,u,s,l,h,f,d,v;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._withRetries(function(e){var t=er(e,!1).getAll();return new $n(t).toPromise()});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===t.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:i=[],o=new Set,a=c(r);try{for(a.s();!(u=a.n()).done;)s=u.value,l=s.fbase_key,h=s.value,o.add(l),JSON.stringify(t.localCache[l])!==JSON.stringify(h)&&(t.notifyListeners(l,h),i.push(l))}catch(n){a.e(n)}finally{a.f()}for(f=0,d=Object.keys(t.localCache);f<d.length;f++)v=d[f],t.localCache[v]&&!o.has(v)&&(t.notifyListeners(v,null),i.push(v));return e.abrupt("return",i);case 12:case"end":return e.stop()}},n)}))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._poll());case 1:case"end":return e.stop()}},n)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),t}();return t.type="LOCAL",t}();function ur(e,t){return Q(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}function sr(){return(sr=(0,v.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(n,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},t)}))).apply(this,arguments)}function cr(e){return new Promise(function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=O("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function lr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var hr=1e12,fr=function(){function t(e){p(this,t),this.auth=e,this.counter=hr,this._widgets=new Map}return d(t,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new dr(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||hr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t;return(null===(t=this._widgets.get(e||hr))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null===(i=n._widgets.get(t||hr))||void 0===i||i.execute(),""));case 1:case"end":return e.stop()}},r)}))()}}]),t}(),dr=function(){function e(t,n,r){var i=this;p(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"==typeof t?document.getElementById(t):t;L(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return d(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),vr=lr("rcb"),pr=new B(3e4,6e4),yr=function(){function e(){p(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wn().grecaptcha}return d(e,[{key:"load",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return L((t=r).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(r)?Promise.resolve(Wn().grecaptcha):new Promise(function(t,i){var o=Wn().setTimeout(function(){i(O(e,"network-request-failed"))},pr.get());Wn()[vr]=function(){Wn().clearTimeout(o),delete Wn()[vr];var a=Wn().grecaptcha;if(a){var u=a.render;a.render=function(e,t){var r=u(e,t);return n.counter++,r},n.hostLanguage=r,t(a)}else i(O(e,"internal-error"))},cr("https://www.google.com/recaptcha/api.js??".concat((0,w.xO)({onload:vr,render:"explicit",hl:r}))).catch(function(){clearTimeout(o),i(O(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Wn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),gr=function(){function t(){p(this,t)}return d(t,[{key:"load",value:function(t){return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new fr(t));case 1:case"end":return e.stop()}},n)}))()}},{key:"clearedOneInstance",value:function(){}}]),t}(),mr="recaptcha",kr={theme:"light",type:"image"},wr=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},kr),r=arguments.length>2?arguments[2]:void 0;p(this,t),this.parameters=n,this.type=mr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ze(r),this.isInvisible="invisible"===this.parameters.size,L("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof e?document.getElementById(e):e;L(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gr:new yr,this.validateStartingState()}return d(t,[{key:"verify",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.assertNotDestroyed(),e.next=3,t.render();case 3:return r=e.sent,i=t.getAssertedRecaptcha(),e.abrupt("return",i.getResponse(r)||new Promise(function(e){t.tokenChangeListeners.add(function n(r){!r||(t.tokenChangeListeners.delete(n),e(r))}),t.isInvisible&&i.execute(r)}));case 6:case"end":return e.stop()}},n)}))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){L(!this.parameters.sitekey,this.auth,"argument-error"),L(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),L("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"==typeof e)e(n);else if("string"==typeof e){var r=Wn()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){L(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:if(t.widgetId){e.next=6;break}r=t.container,t.isInvisible||(i=document.createElement("div"),r.appendChild(i),r=i),t.widgetId=t.getAssertedRecaptcha().render(r,t.parameters);case 6:return e.abrupt("return",t.widgetId);case 7:case"end":return e.stop()}},n)}))()}},{key:"init",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L(q()&&!Kn(),t.auth,"internal-error"),e.next=3,function(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}();case 3:return e.next=5,t._recaptchaLoader.load(t.auth,t.auth.languageCode||void 0);case 5:return t.recaptcha=e.sent,e.next=8,function(e){return sr.apply(this,arguments)}(t.auth);case 8:L(r=e.sent,t.auth,"internal-error"),t.parameters.sitekey=r;case 10:case"end":return e.stop()}},n)}))()}},{key:"getAssertedRecaptcha",value:function(){return L(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),t}(),br=function(){function e(t,n){p(this,e),this.verificationId=t,this.onConfirmation=n}return d(e,[{key:"confirm",value:function(e){var t=_t._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function _r(){return(_r=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=ze(n),e.next=3,Tr(o,r,(0,w.m9)(i));case 3:return a=e.sent,e.abrupt("return",new br(a,function(e){return Yt(o,e)}));case 5:case"end":return e.stop()}},t)}))).apply(this,arguments)}function xr(){return(xr=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,w.m9)(n),e.next=3,Ht(!1,o,"phone");case 3:return e.next=5,Tr(o.auth,r,(0,w.m9)(i));case 5:return a=e.sent,e.abrupt("return",new br(a,function(e){return Xt(o,e)}));case 7:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Ir(){return(Ir=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,w.m9)(n),e.next=3,Tr(o.auth,r,(0,w.m9)(i));case 3:return a=e.sent,e.abrupt("return",new br(a,function(e){return en(o,e)}));case 5:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Tr(e,t,n){return Er.apply(this,arguments)}function Er(){return(Er=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u,s,c,l,h;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.verify();case 2:if(a=e.sent,e.prev=3,L("string"==typeof a,n,"argument-error"),L(i.type===mr,n,"argument-error"),!("session"in(u="string"==typeof r?{phoneNumber:r}:r))){e.next=17;break}if(s=u.session,!("phoneNumber"in u)){e.next=11;break}return L("enroll"===s.type,n,"internal-error"),e.next=10,Fn(n,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:a}});case 10:return e.abrupt("return",e.sent.phoneSessionInfo.sessionInfo);case 11:return L("signin"===s.type,n,"internal-error"),L(c=(null===(o=u.multiFactorHint)||void 0===o?void 0:o.uid)||u.multiFactorUid,n,"missing-multi-factor-info"),e.next=16,ur(n,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 16:return e.abrupt("return",e.sent.phoneResponseInfo.sessionInfo);case 17:return e.next=19,yt(n,{phoneNumber:u.phoneNumber,recaptchaToken:a});case 19:return l=e.sent,h=l.sessionInfo,e.abrupt("return",h);case 22:return e.prev=22,i._reset(),e.finish(22);case 25:case"end":return e.stop()}},t,null,[[3,,22,25]])}))).apply(this,arguments)}function Sr(){return(Sr=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt((0,w.m9)(n),r);case 2:case"end":return e.stop()}},t)}))).apply(this,arguments)}var Cr=function(){var e=function(){function e(t){p(this,e),this.providerId=e.PROVIDER_ID,this.auth=ze(t)}return d(e,[{key:"verifyPhoneNumber",value:function(e,t){return Tr(this.auth,e,(0,w.m9)(t))}}],[{key:"credential",value:function(e,t){return _t._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){return e.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_t._fromTokenResponse(n,r):null}}]),e}();return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e}();function Ar(e,t){return t?U(t):(L(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var Nr=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,"custom","custom")).params=e,r}return d(n,[{key:"_getIdTokenResponse",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return dt(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return dt(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ge);function Or(e){return Kt(e.auth,new Nr(e),e.bypassAuthState)}function Rr(e){var t=e.auth,n=e.user;return L(n,t,"internal-error"),Gt(n,new Nr(e),e.bypassAuthState)}function Dr(e){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,v.Z)(e().mark(function t(n){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.auth,i=n.user,e.abrupt("return",(L(i,r,"internal-error"),zt(i,new Nr(n),n.bypassAuthState)));case 2:case"end":return e.stop()}},t)}))).apply(this,arguments)}var Lr=function(){function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];p(this,t),this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return d(t,[{key:"execute",value:function(){var t,n=this;return new Promise((t=(0,v.Z)(e().mark(function t(r,i){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.pendingPromise={resolve:r,reject:i},e.prev=1,e.next=4,n.resolver._initialize(n.auth);case 4:return n.eventManager=e.sent,e.next=7,n.onExecution();case 7:n.eventManager.registerConsumer(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n.reject(e.t0);case 13:case"end":return e.stop()}},t,null,[[1,10]])})),function(e,n){return t.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o,a,u,s,c,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.urlResponse,o=t.sessionId,a=t.postBody,u=t.tenantId,s=t.error,c=t.type,!s){e.next=3;break}return e.abrupt("return",void n.reject(s));case 3:return l={auth:n.auth,requestUri:i,sessionId:o,tenantId:u||void 0,postBody:a||void 0,user:n.user,bypassAuthState:n.bypassAuthState},e.prev=4,e.t0=n,e.next=8,n.getIdpTask(c)(l);case 8:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(4),n.reject(e.t2);case 15:case"end":return e.stop()}},r,null,[[4,12]])}))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Or;case"linkViaPopup":case"linkViaRedirect":return Dr;case"reauthViaPopup":case"reauthViaRedirect":return Rr;default:N(this.auth,"internal-error")}}},{key:"resolve",value:function(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){F(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),t}(),Mr=new B(2e3,1e4);function Fr(){return(Fr=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=ze(n),D(n,r,Tt),a=Ar(o,i),e.abrupt("return",new jr(o,"signInViaPopup",r,a).executeNotNull());case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Vr(){return(Vr=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D((o=(0,w.m9)(n)).auth,r,Tt),a=Ar(o.auth,i),e.abrupt("return",new jr(o.auth,"reauthViaPopup",r,a,o).executeNotNull());case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Ur(){return(Ur=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D((o=(0,w.m9)(n)).auth,r,Tt),a=Ar(o.auth,i),e.abrupt("return",new jr(o.auth,"linkViaPopup",r,a,o).executeNotNull());case 4:case"end":return e.stop()}},t)}))).apply(this,arguments)}var jr=function(){var t=function(t){y(r,t);var n=g(r);function r(e,t,i,o,a){var u;return p(this,r),(u=n.call(this,e,t,o,a)).provider=i,u.authWindow=null,u.pollId=null,r.currentPopupAction&&r.currentPopupAction.cancel(),r.currentPopupAction=k(u),u}return d(r,[{key:"executeNotNull",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.execute();case 2:return r=e.sent,e.abrupt("return",(L(r,t.auth,"internal-error"),r));case 4:case"end":return e.stop()}},n)}))()}},{key:"onExecution",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(1===t.filter.length,"Popup operations only handle one event"),r=Zn(),e.next=4,t.resolver._openPopup(t.auth,t.provider,t.filter[0],r);case 4:t.authWindow=e.sent,t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(function(e){t.reject(e)}),t.resolver._isIframeWebStorageSupported(t.auth,function(e){e||t.reject(O(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation();case 9:case"end":return e.stop()}},n)}))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(O(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,r.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;e.pollId=(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?window.setTimeout(function(){e.pollId=null,e.reject(O(e.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,Mr.get())}()}}]),r}(Lr);return t.currentPopupAction=null,t}(),qr=new Map,zr=function(t){y(r,t);var n=g(r);function r(e,t){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return p(this,r),(i=n.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o)).eventId=null,i}return d(r,[{key:"execute",value:function(){var t=this,n=this;return(0,v.Z)(e().mark(function i(){var a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=qr.get(n.auth._key())){e.next=20;break}return e.prev=2,e.next=5,function(e,t){return Br.apply(this,arguments)}(n.resolver,n.auth);case 5:if(!e.sent){e.next=11;break}return e.next=8,o(I(r.prototype),"execute",t).call(n);case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=null;case 12:u=e.t0,a=function(){return Promise.resolve(u)},e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a=function(){return Promise.reject(e.t1)};case 19:qr.set(n.auth._key(),a);case 20:return e.abrupt("return",a());case 21:case"end":return e.stop()}},i,null,[[2,16]])}))()}},{key:"onAuthEvent",value:function(t){var n=this,i=function(){return o(I(r.prototype),"onAuthEvent",n)},a=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=2;break}return e.abrupt("return",i().call(a,t));case 2:if("unknown"===t.type){e.next=12;break}if(!t.eventId){e.next=10;break}return e.next=6,a.auth._redirectUserForId(t.eventId);case 6:if(!(r=e.sent)){e.next=9;break}return e.abrupt("return",(a.user=r,i().call(a,t)));case 9:a.resolve(null);case 10:e.next=13;break;case 12:a.resolve(null);case 13:case"end":return e.stop()}},n)}))()}},{key:"onExecution",value:function(){return(0,v.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t)}))()}},{key:"cleanUp",value:function(){}}]),r}(Lr);function Br(){return(Br=(0,v.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wr(r),e.next=3,Gr(n)._get(i);case 3:return e.t0=e.sent,o="true"===e.t0,e.next=7,Gr(n)._remove(i);case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Hr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(n)._set(Wr(r),"true"));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Gr(e){return U(e._redirectPersistence)}function Wr(e){return Ce("pendingRedirect",e.config.apiKey,e.name)}function Kr(){return(Kr=(0,v.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=ze(n),D(n,r,Tt),a=Ar(o,i),e.next=5,Hr(a,o);case 5:return e.abrupt("return",a._openRedirect(o,r,"signInViaRedirect"));case 6:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Qr(){return(Qr=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D((o=(0,w.m9)(n)).auth,r,Tt),a=Ar(o.auth,i),e.next=5,Hr(a,o.auth);case 5:return e.next=7,ei(o);case 7:return u=e.sent,e.abrupt("return",a._openRedirect(o.auth,r,"reauthViaRedirect",u));case 9:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Yr(){return(Yr=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D((o=(0,w.m9)(n)).auth,r,Tt),a=Ar(o.auth,i),e.next=5,Ht(!1,o,r.providerId);case 5:return e.next=7,Hr(a,o.auth);case 7:return e.next=9,ei(o);case 9:return u=e.sent,e.abrupt("return",a._openRedirect(o.auth,r,"linkViaRedirect",u));case 11:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Jr(){return(Jr=(0,v.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(n)._initializationPromise;case 2:return e.abrupt("return",Xr(n,r,!1));case 3:case"end":return e.stop()}},t)}))).apply(this,arguments)}function Xr(e,t){return $r.apply(this,arguments)}function $r(){return($r=(0,v.Z)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e().mark(function i(){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=ze(t),a=Ar(o,n),e.next=4,new zr(o,a,r).execute();case 4:if(u=e.sent,e.t0=u&&!r,!e.t0){e.next=12;break}return delete u.user._redirectEventId,e.next=10,o._persistUserIfCurrent(u.user);case 10:return e.next=12,o._setRedirectUser(null,n);case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}},i)})()})).apply(this,arguments)}function ei(e){return ti.apply(this,arguments)}function ti(){return(ti=(0,v.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zn("".concat(n.uid,":::")),n._redirectEventId=r,e.next=4,n.auth._setRedirectUser(n);case 4:return e.next=6,n.auth._persistUserIfCurrent(n);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}},t)}))).apply(this,arguments)}var ni=function(){function e(t){p(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return d(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ii(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ii(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(O(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ri(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(ri(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function ri(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function ii(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function oi(e){return ai.apply(this,arguments)}function ai(){return(ai=(0,v.Z)(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(t,"GET","/v1/projects",n));case 1:case"end":return e.stop()}},r)})()})).apply(this,arguments)}var ui=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,si=/^https?/;function ci(){return(ci=(0,v.Z)(e().mark(function t(n){var r,i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,oi(n);case 4:r=e.sent,i=r.authorizedDomains,o=c(i),e.prev=7,o.s();case 9:if((a=o.n()).done){e.next=20;break}if(u=a.value,e.prev=11,!li(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),o.e(e.t1);case 25:return e.prev=25,o.f(),e.finish(25);case 28:N(n,"unauthorized-domain");case 29:case"end":return e.stop()}},t,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function li(e){var t=j(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var o=new URL(e);return""===o.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===i}if(!si.test(r))return!1;if(ui.test(e))return i===e;var a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}var hi=new B(3e4,6e4);function fi(){var e=Wn().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=u(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var di=null;function vi(e){return di=di||function(e){return new Promise(function(t,n){var r,i,o;function a(){fi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){fi(),n(O(e,"network-request-failed"))},timeout:hi.get()})}if(null===(i=null===(r=Wn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Wn().gapi)||void 0===o?void 0:o.load)){var u=lr("iframefcb");return Wn()[u]=function(){gapi.load?a():n(O(e,"network-request-failed"))},cr("https://apis.google.com/js/api.js?onload=".concat(u))}a()}}).catch(function(e){throw di=null,e})}(e),di}var pi=new B(5e3,15e3),yi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},gi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mi(e){var t=e.config;L(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?H(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:b.SDK_VERSION},i=gi.get(e.config.apiHost);i&&(r.eid=i);var o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat((0,w.xO)(r).slice(1))}function ki(){return ki=(0,v.Z)(e().mark(function t(n){var r,i;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vi(n);case 2:return r=t.sent,i=Wn().gapi,t.abrupt("return",(L(i,n,"internal-error"),r.open({where:document.body,url:mi(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yi,dontclear:!0},function(t){return new Promise((r=(0,v.Z)(e().mark(function r(i,o){var a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){Wn().clearTimeout(u),i(t)},e.next=3,t.restyle({setHideOnLeave:!1});case 3:a=O(n,"network-request-failed"),u=Wn().setTimeout(function(){o(a)},pi.get()),t.ping(s).then(s,function(){o(a)});case 5:case"end":return e.stop()}},r)})),function(e,t){return r.apply(this,arguments)}));var r})));case 5:case"end":return t.stop()}},t)})),ki.apply(this,arguments)}var wi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bi=function(){function e(t){p(this,e),this.window=t,this.associatedEvent=null}return d(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function _i(e,t,r,i,o,a){L(e.config.authDomain,e,"auth-domain-config-required"),L(e.config.apiKey,e,"invalid-api-key");var u={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:i,v:b.SDK_VERSION,eventId:o};if(t instanceof Tt){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,w.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,c=Object.entries(a||{});s<c.length;s++){var l=n(c[s],2),h=l[0],f=l[1];u[h]=f}}if(t instanceof Et){var d=t.getScopes().filter(function(e){return""!==e});d.length>0&&(u.scopes=d.join(","))}e.tenantId&&(u.tid=e.tenantId);for(var v=u,p=0,y=Object.keys(v);p<y.length;p++){var g=y[p];void 0===v[g]&&delete v[g]}return"".concat(function(e){var t=e.config;return t.emulator?H(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/__/auth/handler")}(e),"?").concat((0,w.xO)(v).slice(1))}var xi,Ii="webStorageSupport",Ti=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,"phone")).credential=e,r}return d(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Q(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Q(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){p(this,e),this.factorId=t}return d(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return M("unexpected MultiFactorSessionType")}}}]),e}()),Ei=function(){function e(){p(this,e)}return d(e,null,[{key:"assertion",value:function(e){return Ti._fromCredential(e)}}]),e}(),Si=function(){function t(e){p(this,t),this.auth=e,this.internalListeners=new Map}return d(t,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.assertAuthConfigured(),e.next=3,n.auth._initializationPromise;case 3:if(!n.auth.currentUser){e.next=10;break}return e.next=6,n.auth.currentUser.getIdToken(t);case 6:e.t1=e.sent,e.t0={accessToken:e.t1},e.next=11;break;case 10:e.t0=null;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},r)}))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),t}();function Ci(){return window}function Ai(){return Ai=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u,s,c;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ci(),u=a.BuildInfo,F(r.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ri(r.sessionId);case 4:return s=e.sent,c={},e.abrupt("return",(Ve()?c.ibi=u.packageName:Le()?c.apn=u.packageName:N(n,"operation-not-supported-in-this-environment"),u.displayName&&(c.appDisplayName=u.displayName),c.sessionId=s,_i(n,i,r.type,void 0,null!==(o=r.eventId)&&void 0!==o?o:void 0,c)));case 7:case"end":return e.stop()}},t)})),Ai.apply(this,arguments)}function Ni(){return Ni=(0,v.Z)(e().mark(function t(n){var r,i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ci(),i=r.BuildInfo,o={},Ve()?o.iosBundleId=i.packageName:Le()?o.androidPackageName=i.packageName:N(n,"operation-not-supported-in-this-environment"),e.next=4,oi(n,o);case 4:case"end":return e.stop()}},t)})),Ni.apply(this,arguments)}function Oi(){return Oi=(0,v.Z)(e().mark(function t(n,r,i){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ci(),a=o.cordova,u=function(){},e.prev=2,e.next=5,new Promise(function(e,t){var o=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==i?void 0:i.close)&&i.close()}function c(){o||(o=window.setTimeout(function(){t(O(n,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null==document?void 0:document.visibilityState)&&c()}r.addPassiveListener(s),document.addEventListener("resume",c,!1),Le()&&document.addEventListener("visibilitychange",l,!1),u=function(){r.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}});case 5:return e.prev=5,u(),e.finish(5);case 8:case"end":return e.stop()}},t,null,[[2,,5,8]])})),Oi.apply(this,arguments)}function Ri(e){return Di.apply(this,arguments)}function Di(){return Di=(0,v.Z)(e().mark(function t(n){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Pi(n),e.next=3,crypto.subtle.digest("SHA-256",r);case 3:return i=e.sent,e.abrupt("return",Array.from(new Uint8Array(i)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 5:case"end":return e.stop()}},t)})),Di.apply(this,arguments)}function Pi(e){if(F(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}xi="Browser",(0,b._registerComponent)(new T.wA("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,o=i.apiKey,a=i.authDomain;return function(e){L(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),L(!(null==a?void 0:a.includes(":")),"argument-error",{appName:e.name});var t={apiKey:o,authDomain:a,clientPlatform:xi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:je(xi)},r=new qe(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(U);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,b._registerComponent)(new T.wA("auth-internal",function(e){var t=ze(e.getProvider("auth").getImmediate());return new Si(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,b.registerVersion)("@firebase/auth","0.17.2",void 0);var Li=function(t){y(r,t);var n=g(r);function r(){var e;return p(this,r),(e=n.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return d(r,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),o(I(r.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initPromise;case 2:case"end":return e.stop()}},n)}))()}}]),r}(ni);function Mi(e){return Fi.apply(this,arguments)}function Fi(){return Fi=(0,v.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ui()._get(ji(n));case 2:if(r=e.sent,e.t0=r,!e.t0){e.next=7;break}return e.next=7,Ui()._remove(ji(n));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},t)})),Fi.apply(this,arguments)}function Vi(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ui(){return U(zn)}function ji(e){return Ce("authEvent",e.config.apiKey,e.name)}function qi(e){if(!(null==e?void 0:e.includes("?")))return{};var t,n=e.split("?"),o=i(t=n)||s(t)||l(t)||r(),a=(o[0],o.slice(1));return(0,w.zd)(a.join("?"))}function zi(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:O("no-auth-event")}}function Bi(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return!("file:"!==Bi()&&"ionic:"!==Bi()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zi(){try{var e=self.localStorage,t=Zn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return(0,w.w1)()&&11===(null==document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/Edge\/\d+/.test(e)}(e)}()||(0,w.hl)()}catch(xi){return Gi()&&(0,w.hl)()}return!1}function Gi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wi(){return("http:"===Bi()||"https:"===Bi()||(0,w.ru)()||Hi())&&!((0,w.b$)()||(0,w.UG)())&&Zi()&&!Gi()}function Ki(){return Hi()&&"undefined"!=typeof document}function Qi(){return Qi=(0,v.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!Ki()&&new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 1:case"end":return e.stop()}},t)})),Qi.apply(this,arguments)}var Yi={LOCAL:"local",NONE:"none",SESSION:"session"},Ji=L,Xi="persistence";function $i(e){return eo.apply(this,arguments)}function eo(){return eo=(0,v.Z)(e().mark(function t(n){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._initializationPromise;case 2:r=to(),i=Ce(Xi,n.config.apiKey,n.name),(null==r?void 0:r.sessionStorage)&&r.sessionStorage.setItem(i,n._getPersistence());case 4:case"end":return e.stop()}},t)})),eo.apply(this,arguments)}function to(){return"undefined"!=typeof window?window:null}var no=L,ro=function(){function t(){p(this,t),this.browserResolver=U(function(){function t(){p(this,t),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bn,this._completeRedirectFn=Xr}return d(t,[{key:"_openPopup",value:function(t,r,i,o){var a=this;return(0,v.Z)(e().mark(function u(){var s,c;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(null===(s=a.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),c=_i(t,r,i,j(),o),e.abrupt("return",function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString(),s="",c=Object.assign(Object.assign({},wi),{width:i.toString(),height:o.toString(),top:a,left:u}),l=(0,w.z$)().toLowerCase();r&&(s=De(l)?"_blank":r),Oe(l)&&(t=t||"http://localhost",c.scrollbars="yes");var h=Object.entries(c).reduce(function(e,t){var r=n(t,2),i=r[0],o=r[1];return"".concat(e).concat(i,"=").concat(o,",")},"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return Ve(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new bi(null);var f=window.open(t||"",s,h);L(f,e,"popup-blocked");try{f.focus()}catch(d){}return new bi(f)}(t,c,Zn()));case 3:case"end":return e.stop()}},u)}))()}},{key:"_openRedirect",value:function(t,n,r,i){var o=this;return(0,v.Z)(e().mark(function a(){var u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o._originValidation(t);case 2:return u=_i(t,n,r,j(),i),Wn().location.href=u,e.abrupt("return",new Promise(function(){}));case 5:case"end":return e.stop()}},a)}))()}},{key:"_initialize",value:function(e){var t=e._key();if(this.eventManagers[t]){var n=this.eventManagers[t],r=n.manager,i=n.promise;return r?Promise.resolve(r):(F(i,"If manager is not set, promise should be"),i)}var o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o}},{key:"initAndGetManager",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return ki.apply(this,arguments)}(t);case 2:return i=e.sent,o=new ni(t),e.abrupt("return",(i.register("authEvent",function(e){return L(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:o.onEvent(e.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[t._key()]={manager:o},n.iframes[t._key()]=i,o));case 5:case"end":return e.stop()}},r)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ii,{type:Ii},function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ii];void 0!==i&&t(!!i),N(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ci.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ue()||Re()||Ve()}}]),t}()),this.cordovaResolver=U(function(){function t(){p(this,t),this._redirectPersistence=Bn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xr}return d(t,[{key:"_initialize",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._key(),o=n.eventManagers.get(i),e.abrupt("return",(o||(o=new Li(t),n.eventManagers.set(i,o),n.attachCallbackListeners(t,o)),o));case 3:case"end":return e.stop()}},r)}))()}},{key:"_openPopup",value:function(e){N(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(t,n,r,i){var o=this;return(0,v.Z)(e().mark(function a(){var u,s,c,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return function(e){var t,n,r,i,o,a,u,s,c,l,h=Ci();L("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),L(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),L("function"==typeof(null===(o=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(s=null===(u=null===(a=null==h?void 0:h.cordova)||void 0===a?void 0:a.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),L("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(t),e.next=3,o._initialize(t);case 3:return u=e.sent,e.next=6,u.initialized();case 6:return u.resetRedirect(),qr.clear(),e.next=10,o._originValidation(t);case 10:return s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Vi(),postBody:null,tenantId:e.tenantId,error:O(e,"no-auth-event")}}(t,r,i),e.next=13,function(e,t){return Ui()._set(ji(e),t)}(t,s);case 13:return e.next=15,function(e,t,n){return Ai.apply(this,arguments)}(t,s,n);case 15:return c=e.sent,e.next=18,function(e){var t=Ci().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,w.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(c);case 18:return l=e.sent,e.abrupt("return",function(e,t,n){return Oi.apply(this,arguments)}(t,u,l));case 20:case"end":return e.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ni.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(t,n){var r,i=Ci(),o=i.universalLinks,a=i.handleOpenURL,u=i.BuildInfo,s=setTimeout((0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(t);case 2:n.onEvent(zi());case 3:case"end":return e.stop()}},r)})),500),c=(r=(0,v.Z)(e().mark(function r(i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(s),e.next=3,Mi(t);case 3:o=e.sent,a=null,o&&(null==i?void 0:i.url)&&(a=function(e,t){var n,r,i=function(e){var t=qi(e),n=t.link?decodeURIComponent(t.link):void 0,r=qi(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return qi(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var o=qi(i),a=o.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(o.firebaseError)):null,u=null===(r=null===(n=null==a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?O(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(o,i.url)),n.onEvent(a||zi());case 6:case"end":return e.stop()}},r)})),function(e){return r.apply(this,arguments)});void 0!==o&&"function"==typeof o.subscribe&&o.subscribe(null,c);var l=a,h="".concat(u.packageName.toLowerCase(),"://");Ci().handleOpenURL=function(){var t=(0,v.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.toLowerCase().startsWith(h)&&c({url:n}),"function"==typeof l)try{l(n)}catch(t){console.error(t)}case 1:case"end":return e.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}]),t}()),this.underlyingResolver=null,this._redirectPersistence=Bn,this._completeRedirectFn=Xr}return d(t,[{key:"_initialize",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.selectUnderlyingResolver();case 2:return e.abrupt("return",n.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}},r)}))()}},{key:"_openPopup",value:function(t,n,r,i){var o=this;return(0,v.Z)(e().mark(function a(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.selectUnderlyingResolver();case 2:return e.abrupt("return",o.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}},a)}))()}},{key:"_openRedirect",value:function(t,n,r,i){var o=this;return(0,v.Z)(e().mark(function a(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.selectUnderlyingResolver();case 2:return e.abrupt("return",o.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}},a)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Ki()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return no(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,function(){return Qi.apply(this,arguments)}();case 4:r=e.sent,t.underlyingResolver=r?t.cordovaResolver:t.browserResolver;case 6:case"end":return e.stop()}},n)}))()}}]),t}();function io(e){return e.unwrap()}function oo(e){return uo(e)}function ao(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new fo(e,function(e,t){var n,r=(0,w.m9)(e),i=t;return L(t.operationType,r,"argument-error"),L(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Mn._fromError(r,i)}(e,t));else if(r){var i=uo(t),o=t;i&&(o.credential=i,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function uo(e){var t=(e instanceof w.ZR?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof w.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return Cr.credentialFromResult(e);var n,r=t.providerId;if(!r||"password"===r)return null;switch(r){case"google.com":n=At;break;case"facebook.com":n=Ct;break;case"github.com":n=Nt;break;case"twitter.com":n=Rt;break;default:var i=t.oauthIdToken,o=t.oauthAccessToken,a=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return o||a||i||u?u?r.startsWith("saml.")?Ot._create(r,u):pt._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:o}):new St(r).credential({idToken:i,accessToken:o,rawNonce:s}):null}return e instanceof w.ZR?n.credentialFromError(e):n.credentialFromResult(e)}function so(e,t){return co.apply(this,arguments)}function co(){return co=(0,v.Z)(e().mark(function t(n,r){var i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r;case 3:i=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0 instanceof w.ZR&&ao(n,e.t0),e.t0;case 9:return a=(o=i).operationType,u=o.user,e.abrupt("return",{operationType:a,credential:oo(i),additionalUserInfo:Pn(i),user:vo.getOrCreate(u)});case 11:case"end":return e.stop()}},t,null,[[0,6]])})),co.apply(this,arguments)}function lo(e,t){return ho.apply(this,arguments)}function ho(){return ho=(0,v.Z)(e().mark(function t(n,r){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return i=e.sent,e.abrupt("return",{verificationId:i.verificationId,confirm:function(e){return so(n,i.confirm(e))}});case 4:case"end":return e.stop()}},t)})),ho.apply(this,arguments)}var fo=function(){function e(t,n){p(this,e),this.resolver=n,this.auth=function(e){return e.wrapped()}(t)}return d(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return so(io(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),vo=function(){function t(e){p(this,t),this._delegate=e,this.multiFactor=function(e){var t=(0,w.m9)(e);return Un.has(t)||Un.set(t,Vn._fromUser(t)),Un.get(t)}(e)}return d(t,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",so(n.auth,Xt(n._delegate,t)));case 1:case"end":return e.stop()}},r)}))()}},{key:"linkWithPhoneNumber",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lo(r.auth,function(e,t,n){return xr.apply(this,arguments)}(r._delegate,t,n)));case 1:case"end":return e.stop()}},i)}))()}},{key:"linkWithPopup",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",so(n.auth,function(e,t,n){return Ur.apply(this,arguments)}(n._delegate,t,ro)));case 1:case"end":return e.stop()}},r)}))()}},{key:"linkWithRedirect",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(ze(n.auth));case 2:return e.abrupt("return",function(e,t,n){return function(e,t,n){return Yr.apply(this,arguments)}(e,t,n)}(n._delegate,t,ro));case 3:case"end":return e.stop()}},r)}))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",so(n.auth,en(n._delegate,t)));case 1:case"end":return e.stop()}},r)}))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return lo(this.auth,function(e,t,n){return Ir.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return so(this.auth,function(e,t,n){return Vr.apply(this,arguments)}(this._delegate,e,ro))}},{key:"reauthenticateWithRedirect",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(ze(n.auth));case 2:return e.abrupt("return",function(e,t,n){return function(e,t,n){return Qr.apply(this,arguments)}(e,t,n)}(n._delegate,t,ro));case 3:case"end":return e.stop()}},r)}))()}},{key:"sendEmailVerification",value:function(e){return function(e,t){return bn.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return qt.apply(this,arguments)}(n._delegate,t);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}},r)}))()}},{key:"updateEmail",value:function(e){return function(e,t){return En((0,w.m9)(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return En((0,w.m9)(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Sr.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Tn.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return _n.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(e){return t.USER_MAP.has(e)||t.USER_MAP.set(e,new t(e)),t.USER_MAP.get(e)}}]),t}();vo.USER_MAP=new WeakMap;var po=L,yo=function(){var t=function(){function t(e,n){if(p(this,t),this.app=e,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=e.options.apiKey;po(r,"invalid-api-key",{appName:e.name});var i=[Se];if("undefined"!=typeof window){i=function(e,t){var n=to();if(!(null==n?void 0:n.sessionStorage))return[];var r=Ce(Xi,e,t);switch(n.sessionStorage.getItem(r)){case Yi.NONE:return[Se];case Yi.LOCAL:return[ar,Bn];case Yi.SESSION:return[Bn];default:return[]}}(r,e.name);for(var o=0,a=[ar,zn,Bn];o<a.length;o++){var u=a[o];i.includes(u)||i.push(u)}}po(r,"invalid-api-key",{appName:e.name});var s="undefined"!=typeof window?ro:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(E),this.linkUnderlyingAuth()}return d(t,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?vo.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){!function(e,t,r){var i=ze(e);L(i._canInitEmulator,i,"emulator-config-failed"),L(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");var o=!!(null==r?void 0:r.disableWarnings),a=He(t),u=function(e){var t=He(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){var a=o[1];return{host:a,port:Ze(i.substr(a.length+1))}}var u=n(i.split(":"),2);return{host:u[0],port:Ze(u[1])}}(t),s=u.host,c=u.port;i.config.emulator={url:"".concat(a,"//").concat(s).concat(null===c?"":":".concat(c),"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),function(e){function t(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!e&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(o)}(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return hn.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return fn(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return ln.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(t,n){var r=this;return(0,v.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",so(r._delegate,function(e,t,n){return pn.apply(this,arguments)}(r._delegate,t,n)));case 1:case"end":return e.stop()}},i)}))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return wn.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=xt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}},{key:"getRedirectResult",value:function(){var t=this;return(0,v.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return po(Wi(),t._delegate,"operation-not-supported-in-this-environment"),e.next=3,function(e,t){return Jr.apply(this,arguments)}(t._delegate,ro);case 3:return r=e.sent,e.abrupt("return",r?so(t._delegate,Promise.resolve(r)):{credential:null,user:null});case 5:case"end":return e.stop()}},n)}))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ze(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=go(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onAuthStateChanged(i,o,a)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=go(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onIdTokenChanged(i,o,a)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return yn.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return cn.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=(function(e,t){Ji(Object.values(Yi).includes(t),e,"invalid-persistence-type"),(0,w.b$)()?Ji(t!==Yi.SESSION,e,"unsupported-persistence-type"):(0,w.UG)()?Ji(t===Yi.NONE,e,"unsupported-persistence-type"):Gi()?Ji(t===Yi.NONE||t===Yi.LOCAL&&(0,w.hl)(),e,"unsupported-persistence-type"):Ji(t===Yi.NONE||Zi(),e,"unsupported-persistence-type")}(n._delegate,t),t),e.next=e.t0===Yi.SESSION?3:e.t0===Yi.LOCAL?5:e.t0===Yi.NONE?14:16;break;case 3:return i=Bn,e.abrupt("break",17);case 5:return e.next=7,U(ar)._isAvailable();case 7:if(!e.sent){e.next=11;break}e.t1=ar,e.next=12;break;case 11:e.t1=zn;case 12:return i=e.t1,e.abrupt("break",17);case 14:return i=Se,e.abrupt("break",17);case 16:return e.abrupt("return",N("argument-error",{appName:n._delegate.name}));case 17:return e.abrupt("return",n._delegate.setPersistence(i));case 18:case"end":return e.stop()}},r)}))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return so(this._delegate,function(e){return Ft.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return so(this._delegate,Yt(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return so(this._delegate,function(e,t){return on.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return so(this._delegate,function(e,t,n){return Yt((0,w.m9)(e),It.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return so(this._delegate,function(e,t,n){return gn.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return lo(this._delegate,function(e,t,n){return _r.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(po(Wi(),n._delegate,"operation-not-supported-in-this-environment"),so(n._delegate,function(e,t,n){return Fr.apply(this,arguments)}(n._delegate,t,ro))));case 1:case"end":return e.stop()}},r)}))()}},{key:"signInWithRedirect",value:function(t){var n=this;return(0,v.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return po(Wi(),n._delegate,"operation-not-supported-in-this-environment"),e.next=3,$i(n._delegate);case 3:return e.abrupt("return",function(e,t,n){return function(e,t,n){return Kr.apply(this,arguments)}(e,t,n)}(n._delegate,t,ro));case 4:case"end":return e.stop()}},r)}))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return vn.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),t}();return t.Persistence=Yi,t}();function go(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var o=i;return{next:function(e){return o(e&&vo.getOrCreate(e))},error:t,complete:n}}var mo=function(){function e(){p(this,e),this.providerId="phone",this._delegate=new Cr(io(m.Z.auth()))}return d(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Cr.credential(e,t)}}]),e}();mo.PHONE_SIGN_IN_METHOD=Cr.PHONE_SIGN_IN_METHOD,mo.PROVIDER_ID=Cr.PROVIDER_ID;var ko=L,wo=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.Z.app();p(this,e),ko(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new wr(t,n,i.auth()),this.type=this._delegate.type}return d(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new T.wA("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new yo(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:It,FacebookAuthProvider:Ct,GithubAuthProvider:Nt,GoogleAuthProvider:At,OAuthProvider:St,PhoneAuthProvider:mo,PhoneMultiFactorGenerator:Ei,RecaptchaVerifier:wo,TwitterAuthProvider:Rt,Auth:yo,AuthCredential:Ge,Error:w.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.1.2")}(m.Z)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var r,i=n(7393),o=n(9181),a=n(6490),u=n(6554),s=n(4487),c=n(2494),l=(r=function(e){function t(e){p(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return d(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,u=function(e,t,n){if(e){if(e instanceof i.L)return e;if(e[o.b])return e[o.b]()}return e||t||n?new i.L(e,t,n):new i.L(a.c)}(e,t,n);if(u.add(r?r.call(u,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),c.v.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){c.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof i.L?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=h(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:e,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:function(e){return 0===e.length?s.y:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=h(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),t}(u.L),r.create=function(e){return new r(e)},r);function h(e){if(e||(e=c.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(2494),i=n(4449),o={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return h},xQ:function(){return f}});var r,i=n(7574),a=n(7393),u=n(5319),s=n(7971),c=n(8858),l=n(9181),h=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).destination=e,r}return d(n)}(a.L),f=((r=function(e,t){y(r,e);var n=g(r);function r(){var e;return p(this,r),(e=n.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return d(r,[{key:t,value:function(){return new h(this)}},{key:"lift",value:function(e){var t=new v(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new s.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new s.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new s.N;return o(I(r.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new s.N;return this.hasError?(e.error(this.thrownError),u.w.EMPTY):this.isStopped?(e.complete(),u.w.EMPTY):(this.observers.push(e),new c.W(this,e))}},{key:"asObservable",value:function(){var e=new i.y;return e.source=this,e}}]),r}(i.y,l.b)).create=function(e,t){return new v(e,t)},r),v=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).destination=e,i.source=r,i}return d(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):u.w.EMPTY}}]),n}(f)},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(5319),i=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return d(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(r.w)},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(9105),i=n(6490),a=n(5319),u=n(9181),s=n(2494),c=n(4449),l=function(e,t){y(r,e);var n=g(r);function r(e,t,o){var a;switch(p(this,r),(a=n.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.c;break;case 1:if(!e){a.destination=i.c;break}if("object"==typeof e){e instanceof r?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(k(a))):(a.syncErrorThrowable=!0,a.destination=new h(k(a),e));break}default:a.syncErrorThrowable=!0,a.destination=new h(k(a),e,t,o)}return a}return d(r,[{key:t,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,o(I(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var i=new r(e,t,n);return i.syncErrorThrowable=!1,i}}]),r}(a.w,u.b),h=function(e){y(n,e);var t=g(n);function n(e,o,a,u){var s;p(this,n),(s=t.call(this))._parentSubscriber=e;var c,l=k(s);return(0,r.m)(o)?c=o:o&&(c=o.next,a=o.error,u=o.complete,o!==i.c&&(l=Object.create(o),(0,r.m)(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(k(s)))),s._context=l,s._next=c,s._error=a,s._complete=u,s}return d(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!s.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(l)},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r,i=n(9796),o=n(1555),a=n(9105),u=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),s=function(){function e(t){p(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return d(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,s=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if((0,a.m)(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(h){t=h instanceof u?c(h.errors):[h]}}if((0,i.k)(l))for(var f=-1,d=l.length;++f<d;){var v=l[f];if((0,o.K)(v))try{v.unsubscribe()}catch(p){t=t||[],p instanceof u?t=t.concat(c(p.errors)):t.push(p)}}if(t)throw new u(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();function c(e){return e.reduce(function(e,t){return e.concat(t instanceof u?t.errors:t)},[])}s.EMPTY=((r=new s).closed=!0,r)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return a},Ds:function(){return u},ft:function(){return s}});var r=n(7393),i=n(7574),o=n(7444),a=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).parent=e,r}return d(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.L),u=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.L);function s(e,t){if(!t.closed){if(e instanceof i.y)return e.subscribe(t);var n;try{n=(0,o.s)(e)(t)}catch(r){t.error(r)}return n}}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return c},N:function(){return l}});var r,i=n(9765),a=n(7574),u=n(5319),s=n(1307),c=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return d(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.w).add(this.source.subscribe(new h(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.w.EMPTY)),e}},{key:"refCount",value:function(){return(0,s.x)()(this)}}]),n}(a.y),l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=c.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},h=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).connectable=r,i}return d(n,[{key:"_error",value:function(e){this._unsubscribe(),o(I(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),o(I(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(i.Yc)},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return o}});var r=n(7574),i=new r.y(function(e){return e.complete()});function o(e){return e?function(e){return new r.y(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),o=n(5319),a=n(6554),u=n(4087),s=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[a.L]}(e))return function(e,t){return new r.y(function(n){var r=new o.w;return r.add(t.schedule(function(){var i=e[a.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(function(n){var r=new o.w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if((0,l.z)(e))return(0,u.r)(e,t);if(function(e){return e&&"function"==typeof e[s.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,i=new o.w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[s.hZ](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return a}});var r=n(7574),i=n(5015),o=n(4087);function a(e,t){return t?(0,o.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(7574),i=n(4869),o=n(3282),a=n(6693);function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var u=Number.POSITIVE_INFINITY,s=null,c=t[t.length-1];return(0,i.K)(c)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(u=t.pop())):"number"==typeof c&&(u=t.pop()),null===s&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(u)((0,a.n)(t,s))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return a}});var r=n(4869),i=n(6693),o=n(4087);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[t.length-1];return(0,r.K)(a)?(t.pop(),(0,o.r)(t,a)):(0,i.n)(t)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(e,t))}}var o=function(){function e(t,n){p(this,e),this.project=t,this.thisArg=n}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))}}]),e}(),a=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e)).project=r,o.count=0,o.thisArg=i||k(o),o}return d(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.L)},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(9773),i=n(4487);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return a}});var r=n(8002),i=n(4402),o=n(5345);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(o){return o.pipe(a(function(n,o){return(0,i.D)(e(n,o)).pipe((0,r.U)(function(e,r){return t(n,e,o,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new u(e,n))})}var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;p(this,e),this.project=t,this.concurrent=n}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.project,this.concurrent))}}]),e}(),s=function(e){y(n,e);var t=g(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return p(this,n),(i=t.call(this,e)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return d(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new o.IY(this),n=this.destination;n.add(t);var r=(0,o.ft)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(o.Ds)},309:function(e,t,n){"use strict";n.d(t,{ht:function(){return l},QV:function(){return s}});var r=n(7393),i=n(9193),o=n(5917),a=n(7574),u=function(){function e(t,n,r){p(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return d(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return e=this.error,new a.y(function(t){return t.error(e)});case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new c(e,t))}}u.completeNotification=new u("C"),u.undefinedValueNotification=new u("N",void 0);var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(this,e),this.scheduler=t,this.delay=n}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}]),e}(),l=function(e){y(n,e);var t=g(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return p(this,n),(i=t.call(this,e)).scheduler=r,i.delay=o,i}return d(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new h(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(u.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(u.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(u.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(r.L),h=d(function e(t,n){p(this,e),this.notification=t,this.destination=n})},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new o(e))}}var o=function(){function e(t){p(this,e),this.connectable=t}return d(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new a(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),a=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).connectable=r,i}return d(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}else this.connection=null}}]),n}(r.L)},3101:function(e,t,n){"use strict";n.d(t,{R:function(){return k}});var r=n(7574),i=1,a=Promise.resolve(),u={};function s(e){return e in u&&(delete u[e],!0)}var c=function(e){var t=i++;return u[t]=!0,a.then(function(){return s(t)&&e()}),t},l=function(e){s(e)},h=n(6465),f=new(function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(n(6102).v))(function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return d(n,[{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?o(I(n.prototype),"requestAsyncId",this).call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=c(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return o(I(n.prototype),"recycleAsyncId",this).call(this,e,t,r);0===e.actions.length&&(l(t),e.scheduled=void 0)}}]),n}(h.o)),v=n(9796),m=function(e){y(n,e);var t=g(n);function n(e){var r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return p(this,n),(r=t.call(this)).source=e,r.delayTime=o,r.scheduler=a,(!(!(0,v.k)(i=o)&&i-parseFloat(i)+1>=0)||o<0)&&(r.delayTime=0),(!a||"function"!=typeof a.schedule)&&(r.scheduler=f),r}return d(n,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return new n(e,t,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(r.y);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new w(e,t))}}var w=function(){function e(t,n){p(this,e),this.scheduler=t,this.delay=n}return d(e,[{key:"call",value:function(e,t){return new m(t,this.delay,this.scheduler).subscribe(e)}}]),e}()},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(7393);function i(){}var o=n(9105);function a(e,t,n){return function(r){return r.lift(new u(e,t,n))}}var u=function(){function e(t,n,r){p(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),s=function(e){y(n,e);var t=g(n);function n(e,r,a,u){var s;return p(this,n),(s=t.call(this,e))._tapNext=i,s._tapError=i,s._tapComplete=i,s._tapError=a||i,s._tapComplete=u||i,(0,o.m)(r)?(s._context=k(s),s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||i,s._tapError=r.error||i,s._tapComplete=r.complete||i),s}return d(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(r.L)},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var r=n(7574),i=n(5319);function o(e,t){return new r.y(function(n){var r=new i.w,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(5319),i=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return d(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this)}return d(n,[{key:"schedule",value:function(e){return this}}]),n}(r.w))},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r,i=(r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;p(this,e),this.SchedulerAction=t,this.now=n}return d(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}(),r.now=function(){return Date.now()},r),a=function(e){y(n,e);var t=g(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.now;return p(this,n),(r=t.call(this,e,function(){return n.delegate&&n.delegate!==k(r)?n.delegate.now():o()})).actions=[],r.active=!1,r.scheduled=void 0,r}return d(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):o(I(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(i)},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(6465),i=new(n(6102).v)(r.o)},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return i}});var r=n(6465),i=new(function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n)}(n(6102).v))(function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return d(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?o(I(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?o(I(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?o(I(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(r.o)),a=i},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},4449:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),o=n(377),a=n(6554),u=n(9489),s=n(4072),c=n(1555),l=function(e){if(e&&"function"==typeof e[a.L])return function(e){return function(t){var n=e[a.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}(e);if((0,u.z)(e))return(0,r.V)(e);if((0,s.t)(e))return function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.z),t}}(e);if(e&&"function"==typeof e[o.hZ])return function(e){return function(t){for(var n=e[o.hZ]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}(e);var t="You provided ".concat((0,c.K)(e)?"an invalid object":"'".concat(e,"'")," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.");throw new TypeError(t)}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},7906:function(r,i,a){"use strict";var s=a(3018),l=null;function h(){return l}var f=new s.OlP("DocumentToken"),v=function(){var e=function(){function e(){p(this,e)}return d(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,s.Yz7)({factory:_,token:e,providedIn:"platform"}),e}();function _(){return(0,s.LFG)(T)}var x=new s.OlP("Location Initialized"),T=function(){var e=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this))._doc=e,r._init(),r}return d(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return h().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=h().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=h().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){E()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){E()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(v);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=(0,s.Yz7)({factory:S,token:e,providedIn:"platform"}),e}();function E(){return!!window.history.pushState}function S(){return new T((0,s.LFG)(f))}function C(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function A(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function N(e){return e&&"?"!==e[0]?"?"+e:e}var O=function(){var e=function(){function e(){p(this,e)}return d(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,s.Yz7)({factory:R,token:e,providedIn:"root"}),e}();function R(e){var t=(0,s.LFG)(f).location;return new P((0,s.LFG)(v),t&&t.origin||"")}var D=new s.OlP("appBaseHref"),P=function(){var e=function(e){y(n,e);var t=g(n);function n(e,r){var i;if(p(this,n),(i=t.call(this))._platformLocation=e,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,m(i)}return d(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return C(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+N(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+N(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+N(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(O);return e.\u0275fac=function(t){return new(t||e)(s.LFG(v),s.LFG(D,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),L=function(){var e=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return d(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=C(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+N(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+N(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(O);return e.\u0275fac=function(t){return new(t||e)(s.LFG(v),s.LFG(D,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),M=function(){var e=function(){function e(t,n){var r=this;p(this,e),this._subject=new s.vpe,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=A(V(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return d(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+N(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,V(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+N(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+N(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(O),s.LFG(v))},e.normalizeQueryParams=N,e.joinWithSlash=C,e.stripTrailingSlash=A,e.\u0275prov=(0,s.Yz7)({factory:F,token:e,providedIn:"root"}),e}();function F(){return new M((0,s.LFG)(O),(0,s.LFG)(v))}function V(e){return e.replace(/\/index.html$/,"")}var U=((U=U||{})[U.Zero=0]="Zero",U[U.One=1]="One",U[U.Two=2]="Two",U[U.Few=3]="Few",U[U.Many=4]="Many",U[U.Other=5]="Other",U),j=s.kL8,q=d(function e(){p(this,e)}),z=function(){var e=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).locale=e,r}return d(n,[{key:"getPluralCategory",value:function(e,t){switch(j(t||this.locale)(e)){case U.Zero:return"zero";case U.One:return"one";case U.Two:return"two";case U.Few:return"few";case U.Many:return"many";default:return"other"}}}]),n}(q);return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.soG))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),B=function(){var e=function(){function e(t,n,r,i){p(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return d(e,[{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,s.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat((0,s.AaK)(e.item)));t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!0)}):Object.keys(e).forEach(function(n){return t._toggleClass(n,!!e[n])}))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return t._toggleClass(e,!1)}))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.ZZ4),s.Y36(s.aQg),s.Y36(s.SBq),s.Y36(s.Qsj))},e.\u0275dir=s.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e}(),H=function(){function e(t,n,r,i){p(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return d(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),Z=function(){var e=function(){function e(t,n,r){p(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return d(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat(function(e){return e.name||typeof e}(e),"'. NgFor only supports binding to Iterables such as Arrays."))}}if(this._differ){var t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new H(null,t._ngForOf,-1,-1),null===i?void 0:i),a=new G(e,o);n.push(a)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var u=t._viewContainer.get(r);t._viewContainer.move(u,i);var s=new G(e,u);n.push(s)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.s_b),s.Y36(s.Rgc),s.Y36(s.ZZ4))},e.\u0275dir=s.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e}(),G=d(function e(t,n){p(this,e),this.record=t,this.view=n}),W=function(){var e=d(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[{provide:q,useClass:z}]}),e}();function K(e){return"server"===e}var Q=function(){var e=d(function e(){p(this,e)});return e.\u0275prov=(0,s.Yz7)({token:e,providedIn:"root",factory:function(){return new Y((0,s.LFG)(f),window)}}),e}(),Y=function(){function e(t,n){p(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return d(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var o=i.shadowRoot;if(o){var a=o.getElementById(t)||o.querySelector('[name="'.concat(t,'"]'));if(a)return a}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=J(this.window.history)||J(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),e}();function J(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var X,$=function(e){y(r,e);var t=g(r);function r(){return p(this,r),t.apply(this,arguments)}return d(r,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=(ee=ee||document.querySelector("base"))?ee.getAttribute("href"):null;return null==t?null:function(e){(X=X||document.createElement("a")).setAttribute("href",e);var t=X.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){ee=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var r,i=c(e.split(";"));try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.indexOf("="),u=n(-1==a?[o,""]:[o.slice(0,a),o.slice(a+1)],2),s=u[0],l=u[1];if(s.trim()===t)return decodeURIComponent(l)}}catch(h){i.e(h)}finally{i.f()}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new r,l||(l=e)}}]),r}(function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return d(n)}(function(){return d(function e(){p(this,e)})}())),ee=null,te=new s.OlP("TRANSITION_ID"),ne=[{provide:s.ip1,useFactory:function(e,t,n){return function(){n.get(s.CZH).donePromise.then(function(){for(var n=h(),r=t.querySelectorAll('style[ng-transition="'.concat(e,'"]')),i=0;i<r.length;i++)n.remove(r[i])})}},deps:[te,f,s.zs3],multi:!0}],re=function(){function e(){p(this,e)}return d(e,[{key:"addToWindow",value:function(e){s.dqk.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},s.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},s.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(function(e){var t=s.dqk.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?h().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){(0,s.VLi)(new e)}}]),e}(),ie=function(){var e=function(){function e(){p(this,e)}return d(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),oe=new s.OlP("EventManagerPlugins"),ae=function(){var e=function(){function e(t,n){var r=this;p(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return d(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(oe),s.LFG(s.R0b))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),ue=function(){function e(t){p(this,e),this._doc=t}return d(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=h().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),se=function(){var e=function(){function e(){p(this,e),this._stylesSet=new Set}return d(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),ce=function(){var e=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return d(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(le),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(le)})}}]),n}(se);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}();function le(e){h().remove(e)}var he={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fe=/%COMP%/g;function de(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?de(e,i,n):(i=i.replace(fe,e),n.push(i))}return n}function ve(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var pe=function(){var e=function(){function e(t,n,r){p(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ye(t)}return d(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case s.ifc.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new ge(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case s.ifc.ShadowDom:return new me(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=de(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(ae),s.LFG(ce),s.LFG(s.AFp))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),ye=function(){function e(t){p(this,e),this.eventManager=t,this.data=Object.create(null)}return d(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(he[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=he[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=he[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(s.JOm.DashCase|s.JOm.Important)?e.style.setProperty(t,n,r&s.JOm.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&s.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ve(n)):this.eventManager.addEventListener(e,t,ve(n))}}]),e}(),ge=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;p(this,n),(a=t.call(this,e)).component=i;var u=de(o+"-"+i.id,i.styles,[]);return r.addStyles(u),a.contentAttr="_ngcontent-%COMP%".replace(fe,o+"-"+i.id),a.hostAttr=function(e){return"_nghost-%COMP%".replace(fe,e)}(o+"-"+i.id),a}return d(n,[{key:"applyToHost",value:function(e){o(I(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=o(I(n.prototype),"createElement",this).call(this,e,t);return o(I(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(ye),me=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;p(this,n),(a=t.call(this,e)).sharedStylesHost=r,a.hostEl=i,a.shadowRoot=i.attachShadow({mode:"open"}),a.sharedStylesHost.addHost(a.shadowRoot);for(var u=de(o.id,o.styles,[]),s=0;s<u.length;s++){var c=document.createElement("style");c.textContent=u[s],a.shadowRoot.appendChild(c)}return a}return d(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return o(I(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return o(I(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return o(I(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(o(I(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(ye),ke=function(){var e=function(e){y(n,e);var t=g(n);function n(e){return p(this,n),t.call(this,e)}return d(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(ue);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),we=["alt","control","meta","shift"],be={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_e={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xe={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Ie=function(){var e=function(e){y(n,e);var t=g(n);function n(e){return p(this,n),t.call(this,e)}return d(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return h().onAndCancel(e,i.domEventName,o)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),o="";if(we.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")}),o+=i,0!=t.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&_e.hasOwnProperty(t)&&(t=_e[t]))}return be[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),we.forEach(function(r){r!=n&&xe[r](e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){return"esc"===e?"escape":e}}]),n}(ue);return e.\u0275fac=function(t){return new(t||e)(s.LFG(f))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),Te=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:"browser"},{provide:s.g9A,useValue:function(){$.makeCurrent(),re.init()},multi:!0},{provide:f,useFactory:function(){return(0,s.RDi)(document),document},deps:[]}]),Ee=[[],{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function(){return new s.qLn},deps:[]},{provide:oe,useClass:ke,multi:!0,deps:[f,s.R0b,s.Lbi]},{provide:oe,useClass:Ie,multi:!0,deps:[f]},[],{provide:pe,useClass:pe,deps:[ae,ce,s.AFp]},{provide:s.FYo,useExisting:pe},{provide:se,useExisting:ce},{provide:ce,useClass:ce,deps:[f]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b]},{provide:ae,useClass:ae,deps:[oe,s.R0b]},{provide:d(function e(){p(this,e)}),useClass:ie,deps:[]},[]],Se=function(){var e=function(){function e(t){if(p(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return d(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:s.AFp,useValue:t.appId},{provide:te,useExisting:s.AFp},ne]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(e,12))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:Ee,imports:[W,s.hGG]}),e}();"undefined"!=typeof window&&window;var Ce=a(8939),Ae=a(3637),Ne=a(7574),Oe=a(4402),Re=a(5917),De=a(7667),Pe=a(3282);function Le(){return(0,Pe.J)(1)(Re.of.apply(void 0,arguments))}var Me=a(4869);function Fe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return(0,Me.K)(r)?(t.pop(),function(e){return Le(t,e,r)}):function(e){return Le(t,e)}}var Ve=a(7393);function Ue(){return function(e){return e.lift(new je)}}var je=function(){function e(){p(this,e)}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new qe(e))}}]),e}(),qe=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).hasPrev=!1,r}return d(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}(Ve.L),ze=a(8002);function Be(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new He(e,t,n))}}var He=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new Ze(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),Ze=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;return p(this,n),(a=t.call(this,e)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return d(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(Ve.L),Ge=function(){function e(t,n){p(this,e),this.compare=t,this.keySelector=n}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new We(e,this.compare,this.keySelector))}}]),e}(),We=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return d(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(n){return this.destination.error(n)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(Ve.L);function Ke(e,t){return function(n){return n.lift(new Qe(e,t))}}var Qe=function(){function e(t,n){p(this,e),this.predicate=t,this.thisArg=n}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new Ye(e,this.predicate,this.thisArg))}}]),e}(),Ye=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e)).predicate=r,o.thisArg=i,o.count=0,o}return d(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(Ve.L);a(6780);var Je=a(4486),Xe=a(8239),$e=a(5452),et=a(6034),tt=a(300),nt=a(4685),rt=function(e,t){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function it(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var ot,at="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ut=ut||{},st=at||self;function ct(){}function lt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ht(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ft="closure_uid_"+(1e9*Math.random()>>>0),dt=0;function vt(e,t,n){return e.call.apply(e.bind,arguments)}function pt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function yt(e,t,n){return(yt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vt:pt).apply(null,arguments)}function gt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mt(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function kt(){this.s=this.s,this.o=this.o}var wt={};kt.prototype.s=!1,kt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ft)&&e[ft]||(e[ft]=++dt)}(this);delete wt[e]}},kt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var bt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},_t=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function xt(e){return Array.prototype.concat.apply([],arguments)}function It(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tt(e){return/^[\s\xa0]*$/.test(e)}var Et,St=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Ct(e,t){return-1!=e.indexOf(t)}function At(e,t){return e<t?-1:e>t?1:0}e:{var Nt=st.navigator;if(Nt){var Ot=Nt.userAgent;if(Ot){Et=Ot;break e}}Et=""}function Rt(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Dt(e){var t={};for(var n in e)t[n]=e[n];return t}var Pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lt(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Pt.length;o++)n=Pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Mt(e){return Mt[" "](e),e}Mt[" "]=ct;var Ft,Vt,Ut=Ct(Et,"Opera"),jt=Ct(Et,"Trident")||Ct(Et,"MSIE"),qt=Ct(Et,"Edge"),zt=qt||jt,Bt=Ct(Et,"Gecko")&&!(Ct(Et.toLowerCase(),"webkit")&&!Ct(Et,"Edge"))&&!(Ct(Et,"Trident")||Ct(Et,"MSIE"))&&!Ct(Et,"Edge"),Ht=Ct(Et.toLowerCase(),"webkit")&&!Ct(Et,"Edge");function Zt(){var e=st.document;return e?e.documentMode:void 0}e:{var Gt="",Wt=(Vt=Et,Bt?/rv:([^\);]+)(\)|;)/.exec(Vt):qt?/Edge\/([\d\.]+)/.exec(Vt):jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Ht?/WebKit\/(\S+)/.exec(Vt):Ut?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Wt&&(Gt=Wt?Wt[1]:""),jt){var Kt=Zt();if(null!=Kt&&Kt>parseFloat(Gt)){Ft=String(Kt);break e}}Ft=Gt}var Qt={};var Yt=st.document&&jt&&(Zt()||parseInt(Ft,10))||void 0,Jt=function(){if(!st.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{st.addEventListener("test",ct,t),st.removeEventListener("test",ct,t)}catch(n){}return e}();function Xt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function $t(e,t){if(Xt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Bt){e:{try{Mt(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:en[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$t.Z.h.call(this)}}Xt.prototype.h=function(){this.defaultPrevented=!0},mt($t,Xt);var en={2:"touch",3:"pen",4:"mouse"};$t.prototype.h=function(){$t.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++nn,this.ca=this.fa=!1}function on(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function an(e){this.src=e,this.g={},this.h=0}function un(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=bt(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(on(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}an.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=sn(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new rn(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(e,t,n,r,i){if(r&&r.once)return dn(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)hn(e,t[o],n,r,i);return null}return n=wn(n),e&&e[tn]?e.N(t,n,ht(r)?!!r.capture:!!r,i):fn(e,t,n,!1,r,i)}function fn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=ht(i)?!!i.capture:!!i,u=mn(e);if(u||(e[cn]=u=new an(e)),(n=u.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=gn;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(yn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function dn(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)dn(e,t[o],n,r,i);return null}return n=wn(n),e&&e[tn]?e.O(t,n,ht(r)?!!r.capture:!!r,i):fn(e,t,n,!0,r,i)}function vn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)vn(e,t[o],n,r,i);else r=ht(r)?!!r.capture:!!r,n=wn(n),e&&e[tn]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=sn(o=e.g[t],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--))):e&&(e=mn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sn(t,n,r,i)),(n=-1<e?t[e]:null)&&pn(n))}function pn(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[tn])un(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(yn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=mn(t))?(un(n,e),0==n.h&&(n.src=null,t[cn]=null)):on(e)}}}function yn(e){return e in ln?ln[e]:ln[e]="on"+e}function gn(e,t){if(e.ca)e=!0;else{t=new $t(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&pn(e),e=n.call(r,t)}return e}function mn(e){return(e=e[cn])instanceof an?e:null}var kn="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(e){return"function"==typeof e?e:(e[kn]||(e[kn]=function(t){return e.handleEvent(t)}),e[kn])}function bn(){kt.call(this),this.i=new an(this),this.P=this,this.I=null}function _n(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Xt(t,e);else if(t instanceof Xt)t.target=t.target||e;else{var i=t;Lt(t=new Xt(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=xn(a,r,!0,t)&&i}if(i=xn(a=t.g=e,r,!0,t)&&i,i=xn(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=xn(a=t.g=n[o],r,!1,t)&&i}function xn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var u=a.listener,s=a.ia||a.src;a.fa&&un(e.i,a),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}mt(bn,kt),bn.prototype[tn]=!0,bn.prototype.removeEventListener=function(e,t,n,r){vn(this,e,t,n,r)},bn.prototype.M=function(){if(bn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)on(n[r]);delete t.g[e],t.h--}}this.I=null},bn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},bn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var In=st.JSON.stringify;function Tn(){var e=Dn,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var En,Sn=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Cn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Cn=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},e}())(function(){return new An},function(e){return e.reset()}),An=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Nn(e){st.setTimeout(function(){throw e},0)}function On(e,t){En||function(){var e=st.Promise.resolve(void 0);En=function(){e.then(Pn)}}(),Rn||(En(),Rn=!0),Dn.add(e,t)}var Rn=!1,Dn=new Sn;function Pn(){for(var e;e=Tn();){try{e.h.call(e.g)}catch(n){Nn(n)}var t=Cn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Rn=!1}function Ln(e,t){bn.call(this),this.h=e||1,this.g=t||st,this.j=yt(this.kb,this),this.l=Date.now()}function Mn(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Fn(e,t,n){if("function"==typeof e)n&&(e=yt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=yt(e.handleEvent,e)}return 2147483647<Number(t)?-1:st.setTimeout(e,t||0)}function Vn(e){e.g=Fn(function(){e.g=null,e.i&&(e.i=!1,Vn(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}mt(Ln,bn),(ot=Ln.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_n(this,"tick"),this.da&&(Mn(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){Ln.Z.M.call(this),Mn(this),delete this.g};var Un=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}rt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Vn(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(st.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(kt);function jn(e){kt.call(this),this.h=e,this.g={}}mt(jn,kt);var qn=[];function zn(e,t,n,r){Array.isArray(n)||(n&&(qn[0]=n.toString()),n=qn);for(var i=0;i<n.length;i++){var o=hn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Bn(e){Rt(e.g,function(e,t){this.g.hasOwnProperty(t)&&pn(e)},e),e.g={}}function Hn(){this.g=!0}function Zn(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return In(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}jn.prototype.M=function(){jn.Z.M.call(this),Bn(this)},jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hn.prototype.Aa=function(){this.g=!1},Hn.prototype.info=function(){};var Gn={},Wn=null;function Kn(){return Wn=Wn||new bn}function Qn(e){Xt.call(this,Gn.Ma,e)}function Yn(e){var t=Kn();_n(t,new Qn(t,e))}function Jn(e,t){Xt.call(this,Gn.STAT_EVENT,e),this.stat=t}function Xn(e){var t=Kn();_n(t,new Jn(t,e))}function $n(e,t){Xt.call(this,Gn.Na,e),this.size=t}function er(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return st.setTimeout(function(){e()},t)}Gn.Ma="serverreachability",mt(Qn,Xt),Gn.STAT_EVENT="statevent",mt(Jn,Xt),Gn.Na="timingevent",mt($n,Xt);var tr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rr(){}function ir(){}rr.prototype.h=null;var or,ar={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ur(){Xt.call(this,"d")}function sr(){Xt.call(this,"c")}function cr(){}function lr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new jn(this),this.P=fr,this.W=new Ln(e=zt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hr}function hr(){this.i=null,this.g="",this.h=!1}mt(ur,Xt),mt(sr,Xt),mt(cr,rr),cr.prototype.g=function(){return new XMLHttpRequest},cr.prototype.i=function(){return{}},or=new cr;var fr=45e3,dr={},vr={};function pr(e,t,n){e.K=1,e.v=Vr(Rr(t)),e.s=n,e.U=!0,yr(e,null)}function yr(e,t){e.F=Date.now(),wr(e),e.A=Rr(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Jr(n.h,"t",r),e.C=0,n=e.l.H,e.h=new hr,e.g=Xi(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Un(yt(e.Ia,e,e.g),e.O)),zn(e.V,e.g,"readystatechange",e.gb),t=e.H?Dt(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Yn(1),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var a="",u=o.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.X,e.s)}function gr(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function mr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=kr(e,n))==vr){4==t&&(e.o=4,Xn(14),i=!1),Zn(e.j,e.m,null,"[Incomplete Response]");break}if(r==dr){e.o=4,Xn(15),Zn(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Zn(e.j,e.m,r,null),Tr(e,r)}gr(e)&&r!=vr&&r!=dr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Xn(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hi(t),t.L=!0,Xn(11))):(Zn(e.j,e.m,n,"[Invalid Chunked Response]"),Ir(e),xr(e))}function kr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vr:(n=Number(t.substring(n,r)),isNaN(n)?dr:(r+=1)+n>t.length?vr:(t=t.substr(r,n),e.C=r+n,t))}function wr(e){e.Y=Date.now()+e.P,br(e,e.P)}function br(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=er(yt(e.eb,e),t)}function _r(e){e.B&&(st.clearTimeout(e.B),e.B=null)}function xr(e){0==e.l.G||e.I||Wi(e.l,e)}function Ir(e){_r(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Mn(e.W),Bn(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Tr(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ii(n.i,e)))if(n.I=e.N,!e.J&&ii(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=er(yt(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;Gi(n),Li(n)}Bi(n),Xn(18)}if(1>=ri(n.i)&&n.ka){try{n.ka()}catch(y){}n.ka=void 0}}else Qi(n,11)}else if((e.J||n.g==e)&&Gi(n),!Tt(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var u=o[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=o[5];null!=s&&"number"==typeof s&&0<s&&(n.K=r=1.5*s,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Ct(l,"spdy")||Ct(l,"quic")||Ct(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(oi(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Fr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ji(r,r.H?r.la:null,r.W),d.J){ai(r.i,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(_r(v),wr(v)),r.g=d}else zi(r);0<n.l.length&&Vi(n)}else"stop"!=o[0]&&"close"!=o[0]||Qi(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Qi(n,7):Pi(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Yn(4)}catch(y){}}function Er(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(lt(e)||"string"==typeof e)_t(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(lt(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(lt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Sr(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Sr)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Cr(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ar(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ar(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ar(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ot=lr.prototype).setTimeout=function(e){this.P=e},ot.gb=function(e){e=e.target;var t=this.L;t&&3==Ai(e)?t.l():this.Ia(e)},ot.Ia=function(e){try{if(e==this.g)e:{var t=Ai(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||zt||this.g&&(this.h.h||this.g.ga()||Ni(this.g)))){this.I||4!=t||7==n||Yn(8==n||0>=r?3:2),_r(this);var i=this.g.ba();this.N=i;t:if(gr(this)){var o=Ni(this.g);e="";var a=o.length,u=4==Ai(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ir(this),xr(this);var s="";break t}this.h.i=new st.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:u&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tt(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Xn(12),Ir(this),xr(this);break e}Zn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tr(this,i)}this.U?(mr(this,t,s),zt&&this.i&&3==t&&(zn(this.V,this.W,"tick",this.fb),this.W.start())):(Zn(this.j,this.m,s,null),Tr(this,s)),4==t&&Ir(this),this.i&&!this.I&&(4==t?Wi(this.l,this):(this.i=!1,wr(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Xn(12)):(this.o=0,Xn(13)),Ir(this),xr(this)}}}catch(f){}},ot.fb=function(){if(this.g){var e=Ai(this.g),t=this.g.ga();this.C<t.length&&(_r(this),mr(this,e,t),this.i&&4!=e&&wr(this))}},ot.cancel=function(){this.I=!0,Ir(this)},ot.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Yn(3),Xn(17)),Ir(this),this.o=2,xr(this)):br(this,this.Y-e)},(ot=Sr.prototype).R=function(){Cr(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ot.T=function(){return Cr(this),this.g.concat()},ot.get=function(e,t){return Ar(this.h,e)?this.h[e]:t},ot.set=function(e,t){Ar(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ot.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Nr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Or(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Or){this.g=void 0!==t?t:e.g,Dr(this,e.j),this.s=e.s,Pr(this,e.i),Lr(this,e.m),this.l=e.l,t=e.h;var n=new Wr;n.i=t.i,t.g&&(n.g=new Sr(t.g),n.h=t.h),Mr(this,n),this.o=e.o}else e&&(n=String(e).match(Nr))?(this.g=!!t,Dr(this,n[1]||"",!0),this.s=Ur(n[2]||""),Pr(this,n[3]||"",!0),Lr(this,n[4]),this.l=Ur(n[5]||"",!0),Mr(this,n[6]||"",!0),this.o=Ur(n[7]||"")):(this.g=!!t,this.h=new Wr(null,this.g))}function Rr(e){return new Or(e)}function Dr(e,t,n){e.j=n?Ur(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Pr(e,t,n){e.i=n?Ur(t,!0):t}function Lr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Mr(e,t,n){t instanceof Wr?(e.h=t,function(e,t){t&&!e.j&&(Kr(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Qr(this,t),Jr(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=jr(t,Zr)),e.h=new Wr(t,e.g))}function Fr(e,t,n){e.h.set(t,n)}function Vr(e){return Fr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ur(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jr(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,qr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Or.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jr(t,zr,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jr(t,zr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(jr(n,"/"==n.charAt(0)?Hr:Br,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jr(n,Gr)),e.join("")};var zr=/[#\/\?@]/g,Br=/[#\?:]/g,Hr=/[#\?]/g,Zr=/[#\?@]/g,Gr=/#/g;function Wr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Kr(e){e.g||(e.g=new Sr,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Qr(e,t){Kr(e),t=Xr(e,t),Ar(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ar((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Cr(e)))}function Yr(e,t){return Kr(e),t=Xr(e,t),Ar(e.g.h,t)}function Jr(e,t,n){Qr(e,t),0<n.length&&(e.i=null,e.g.set(Xr(e,t),It(n)),e.h+=n.length)}function Xr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ot=Wr.prototype).add=function(e,t){Kr(this),this.i=null,e=Xr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ot.forEach=function(e,t){Kr(this),this.g.forEach(function(n,r){_t(n,function(n){e.call(t,n,r,this)},this)},this)},ot.T=function(){Kr(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},ot.R=function(e){Kr(this);var t=[];if("string"==typeof e)Yr(this,e)&&(t=xt(t,this.g.get(Xr(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=xt(t,e[n])}return t},ot.set=function(e,t){return Kr(this),this.i=null,Yr(this,e=Xr(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ot.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var $r=function(e,t){this.h=e,this.g=t};function ei(e){this.l=e||ti,e=st.PerformanceNavigationTiming?0<(e=st.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(st.g&&st.g.Ea&&st.g.Ea()&&st.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ti=10;function ni(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ri(e){return e.h?1:e.g?e.g.size:0}function ii(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function oi(e,t){e.g?e.g.add(t):e.h=t}function ai(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ui(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=it(e.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return It(e.i)}function si(){}function ci(){this.g=new si}function li(e,t,n){var r=n||"";try{Er(e,function(e,n){var i=e;ht(e)&&(i=In(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function hi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function fi(e){this.l=e.$b||null,this.j=e.ib||!1}function di(e,t){bn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=vi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ei.prototype.cancel=function(){var e,t;if(this.i=ui(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=it(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},si.prototype.stringify=function(e){return st.JSON.stringify(e,void 0)},si.prototype.parse=function(e){return st.JSON.parse(e,void 0)},mt(fi,rr),fi.prototype.g=function(){return new di(this.l,this.j)},fi.prototype.i=function(e){return function(){return e}}({}),mt(di,bn);var vi=0;function pi(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function yi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,gi(e)}function gi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ot=di.prototype).open=function(e,t){if(this.readyState!=vi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,gi(this)},ot.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||st).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yi(this)),this.readyState=vi},ot.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==st.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pi(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?yi(this):gi(this),3==this.readyState&&pi(this)}},ot.Ua=function(e){this.g&&(this.response=this.responseText=e,yi(this))},ot.Ta=function(e){this.g&&(this.response=e,yi(this))},ot.ha=function(){this.g&&yi(this)},ot.setRequestHeader=function(e,t){this.v.append(e,t)},ot.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(di.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var mi=st.JSON.parse;function ki(e){bn.call(this),this.headers=new Sr,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wi,this.K=this.L=!1}mt(ki,bn);var wi="",bi=/^https?$/i,_i=["POST","PUT"];function xi(e){return"content-type"==e.toLowerCase()}function Ii(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ti(e),Si(e)}function Ti(e){e.D||(e.D=!0,_n(e,"complete"),_n(e,"error"))}function Ei(e){if(e.h&&void 0!==ut&&(!e.C[1]||4!=Ai(e)||2!=e.ba()))if(e.v&&4==Ai(e))Fn(e.Fa,0,e);else if(_n(e,"readystatechange"),4==Ai(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(Nr)[1]||null;if(!o&&st.self&&st.self.location){var a=st.self.location.protocol;o=a.substr(0,a.length-1)}i=!bi.test(o?o.toLowerCase():"")}t=i}if(t)_n(e,"complete"),_n(e,"success");else{e.m=6;try{var u=2<Ai(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Ti(e)}}finally{Si(e)}}}function Si(e,t){if(e.g){Ci(e);var n=e.g,r=e.C[0]?ct:null;e.g=null,e.C=null,t||_n(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ci(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(st.clearTimeout(e.A),e.A=null)}function Ai(e){return e.g?e.g.readyState:0}function Ni(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case wi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Oi(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Rt(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Fr(e,t,n))}function Ri(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Di(e){this.za=0,this.l=[],this.h=new Hn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ri("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ri("baseRetryDelayMs",5e3,e),this.$a=Ri("retryDelaySeedMs",1e4,e),this.Ya=Ri("forwardChannelMaxRetries",2,e),this.ra=Ri("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ei(e&&e.concurrentRequestLimit),this.Ca=new ci,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Pi(e){if(Mi(e),3==e.G){var t=e.V++,n=Rr(e.F);Fr(n,"SID",e.J),Fr(n,"RID",t),Fr(n,"TYPE","terminate"),ji(e,n),(t=new lr(e,e.h,t,void 0)).K=2,t.v=Vr(Rr(n)),n=!1,st.navigator&&st.navigator.sendBeacon&&(n=st.navigator.sendBeacon(t.v.toString(),"")),!n&&st.Image&&((new Image).src=t.v,n=!0),n||(t.g=Xi(t.l,null),t.g.ea(t.v)),t.F=Date.now(),wr(t)}Yi(e)}function Li(e){e.g&&(Hi(e),e.g.cancel(),e.g=null)}function Mi(e){Li(e),e.u&&(st.clearTimeout(e.u),e.u=null),Gi(e),e.i.cancel(),e.m&&("number"==typeof e.m&&st.clearTimeout(e.m),e.m=null)}function Fi(e,t){e.l.push(new $r(e.Za++,t)),3==e.G&&Vi(e)}function Vi(e){ni(e.i)||e.m||(e.m=!0,On(e.Ha,e),e.C=0)}function Ui(e,t){var n;n=t?t.m:e.V++;var r=Rr(e.F);Fr(r,"SID",e.J),Fr(r,"RID",n),Fr(r,"AID",e.U),ji(e,r),e.o&&e.s&&Oi(r,e.o,e.s),n=new lr(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=qi(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),oi(e.i,n),pr(n,r,t)}function ji(e,t){e.j&&Er({},function(e,n){Fr(t,n,e)})}function qi(e,t,n){n=Math.min(e.l.length,n);var r=e.j?yt(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].h)):o=0:a.push("ofs="+o);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=o))o=Math.max(0,i[s].h-100),u=!1;else try{li(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(u){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function zi(e){e.g||e.u||(e.Y=1,On(e.Ga,e),e.A=0)}function Bi(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=er(yt(e.Ga,e),Ki(e,e.A)),e.A++,0))}function Hi(e){null!=e.B&&(st.clearTimeout(e.B),e.B=null)}function Zi(e){e.g=new lr(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Rr(e.oa);Fr(t,"RID","rpc"),Fr(t,"SID",e.J),Fr(t,"CI",e.N?"0":"1"),Fr(t,"AID",e.U),ji(e,t),Fr(t,"TYPE","xmlhttp"),e.o&&e.s&&Oi(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Vr(Rr(t)),n.s=null,n.U=!0,yr(n,e)}function Gi(e){null!=e.v&&(st.clearTimeout(e.v),e.v=null)}function Wi(e,t){var n=null;if(e.g==t){Gi(e),Hi(e),e.g=null;var r=2}else{if(!ii(e.i,t))return;n=t.D,ai(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;_n(r=Kn(),new $n(r,n,t,i)),Vi(e)}else zi(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ri(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=er(yt(e.Ha,e,t),Ki(e,e.C)),e.C++,0)))}(e,t)||2==r&&Bi(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qi(e,5);break;case 4:Qi(e,10);break;case 3:Qi(e,6);break;default:Qi(e,2)}}function Ki(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Qi(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=yt(e.jb,e);n||(n=new Or("//www.google.com/images/cleardot.gif"),st.location&&"http"==st.location.protocol||Dr(n,"https"),Vr(n)),function(e,t){var n=new Hn;if(st.Image){var r=new Image;r.onload=gt(hi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=gt(hi,n,r,"TestLoadImage: error",!1,t),r.onabort=gt(hi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=gt(hi,n,r,"TestLoadImage: timeout",!1,t),st.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Xn(2);e.G=0,e.j&&e.j.va(t),Yi(e),Mi(e)}function Yi(e){e.G=0,e.I=-1,e.j&&((0!=ui(e.i).length||0!=e.l.length)&&(e.i.i.length=0,It(e.l),e.l.length=0),e.j.ua())}function Ji(e,t,n){var r=function(e){return e instanceof Or?Rr(e):new Or(e,void 0)}(n);if(""!=r.i)t&&Pr(r,t+"."+r.i),Lr(r,r.m);else{var i=st.location;r=function(e,t,n,r){var i=new Or(null,void 0);return e&&Dr(i,e),t&&Pr(i,t),n&&Lr(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Rt(e.aa,function(e,t){Fr(r,t,e)}),n=e.sa,(t=e.D)&&n&&Fr(r,t,n),Fr(r,"VER",e.ma),ji(e,r),r}function Xi(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ki(n&&e.Ba&&!e.qa?new fi({ib:!0}):e.qa)).L=e.H,t}function $i(){}function eo(){if(jt&&!(10<=Number(Yt)))throw Error("Environmental error: no available transport.")}function to(e,t){bn.call(this),this.g=new Di(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Tt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Tt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new io(this)}function no(e){ur.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ro(){sr.call(this),this.status=1}function io(e){this.g=e}(ot=ki.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():or.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:or),this.g.onreadystatechange=yt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void Ii(this,o)}e=n||"";var i=new Sr(this.headers);r&&Er(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=xi,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=st.FormData&&e instanceof st.FormData,!(0<=bt(_i,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ci(this),0<this.B&&((this.K=function(e){return jt&&function(){return e=Qt,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=St(String(Ft)).split("."),n=St("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=At(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||At(0==o[2].length,0==a[2].length)||At(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yt(this.pa,this)):this.A=Fn(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Ii(this,o)}},ot.pa=function(){void 0!==ut&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_n(this,"timeout"),this.abort(8))},ot.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_n(this,"complete"),_n(this,"abort"),Si(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Si(this,!0)),ki.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?Ei(this):this.cb())},ot.cb=function(){Ei(this)},ot.ba=function(){try{return 2<Ai(this)?this.g.status:-1}catch(Vt){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(Vt){return""}},ot.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mi(t)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=Di.prototype).ma=8,ot.G=1,ot.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},ot.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new lr(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Lt(n=Dt(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=qi(this,t,r),Fr(i=Rr(this.F),"RID",e),Fr(i,"CVER",22),this.D&&Fr(i,"X-HTTP-Session-Id",this.D),ji(this,i),this.o&&n&&Oi(i,this.o,n),oi(this.i,t),this.Ra&&Fr(i,"TYPE","init"),this.ja?(Fr(i,"$req",r),Fr(i,"SID","null"),t.$=!0,pr(t,i,null)):pr(t,i,r),this.G=2}}else 3==this.G&&(e?Ui(this,e):0==this.l.length||ni(this.i)||Ui(this))},ot.Ga=function(){if(this.u=null,Zi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=er(yt(this.bb,this),e)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xn(10),Li(this),Zi(this))},ot.ab=function(){null!=this.v&&(this.v=null,Li(this),Bi(this),Xn(19))},ot.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Xn(2)):(this.h.info("Failed to ping google.com"),Xn(1))},(ot=$i.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},eo.prototype.g=function(e,t){return new to(e,t)},mt(to,bn),to.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),On(yt(e.hb,e,t))),Xn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ji(e,null,e.W),Vi(e)},to.prototype.close=function(){Pi(this.g)},to.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Fi(this.g,t)}else this.v?((t={}).__data__=In(e),Fi(this.g,t)):Fi(this.g,e)},to.prototype.M=function(){this.g.j=null,delete this.j,Pi(this.g),delete this.g,to.Z.M.call(this)},mt(no,ur),mt(ro,sr),mt(io,$i),io.prototype.xa=function(){_n(this.g,"a")},io.prototype.wa=function(e){_n(this.g,new no(e))},io.prototype.va=function(e){_n(this.g,new ro(e))},io.prototype.ua=function(){_n(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,to.prototype.send=to.prototype.u,to.prototype.open=to.prototype.m,to.prototype.close=to.prototype.close,tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,nr.COMPLETE="complete",ir.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",bn.prototype.listen=bn.prototype.N,ki.prototype.listenOnce=ki.prototype.O,ki.prototype.getLastError=ki.prototype.La,ki.prototype.getLastErrorCode=ki.prototype.Da,ki.prototype.getStatus=ki.prototype.ba,ki.prototype.getResponseJson=ki.prototype.Qa,ki.prototype.getResponseText=ki.prototype.ga,ki.prototype.send=ki.prototype.ea;var oo=tr,ao=nr,uo=Gn,so=fi,co=ir,lo=ki,ho=function(){function e(t){p(this,e),this.uid=t}return d(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ho.UNAUTHENTICATED=new ho(null),ho.GOOGLE_CREDENTIALS=new ho("google-credentials-uid"),ho.FIRST_PARTY=new ho("first-party-uid"),ho.MOCK_USER=new ho("mock-user");var fo="9.0.2",vo=new tt.Yd("@firebase/firestore");function po(){return vo.logLevel}function yo(e){if(vo.logLevel<=tt.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ko);vo.debug.apply(vo,["Firestore (".concat(fo,"): ").concat(e)].concat(u(i)))}}function go(e){if(vo.logLevel<=tt.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ko);vo.error.apply(vo,["Firestore (".concat(fo,"): ").concat(e)].concat(u(i)))}}function mo(e){if(vo.logLevel<=tt.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ko);vo.warn.apply(vo,["Firestore (".concat(fo,"): ").concat(e)].concat(u(i)))}}function ko(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(fo,") INTERNAL ASSERTION FAILED: ")+e;throw go(t),new Error(t)}function bo(e,t){e||wo()}function _o(e,t){return e}var xo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Io=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return d(n)}(w(Error)),To=d(function e(){var t=this;p(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}),Eo=d(function e(t,n){p(this,e),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(t)}),So=function(){function e(){p(this,e)}return d(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(ho.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),Co=function(){function e(t){p(this,e),this.token=t,this.changeListener=null}return d(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ao=function(){function t(e){p(this,t),this.t=e,this.currentUser=ho.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return d(t,[{key:"start",value:function(t,n){var r=this,i=this,o=this.i,a=function(e){return r.i!==o?(o=r.i,n(e)):Promise.resolve()},u=new To;this.o=function(){r.i++,r.currentUser=r.u(),u.resolve(),u=new To,t.enqueueRetryable(function(){return a(r.currentUser)})};var s=function(){var n=u;t.enqueueRetryable((0,Xe.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.promise;case 2:return e.next=4,a(i.currentUser);case 4:case"end":return e.stop()}},t)})))},c=function(e){yo("FirebaseCredentialsProvider","Auth detected"),r.auth=e,r.auth.addAuthTokenListener(r.o),s()};this.t.onInit(function(e){return c(e)}),setTimeout(function(){if(!r.auth){var e=r.t.getImmediate({optional:!0});e?c(e):(yo("FirebaseCredentialsProvider","Auth not yet detected"),u.resolve(),u=new To)}},0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(yo("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(bo("string"==typeof n.accessToken),new Eo(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return bo(null===e||"string"==typeof e),new ho(e)}}]),t}(),No=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=ho.FIRST_PARTY}return d(e,[{key:"authHeaders",get:function(){var e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}]),e}(),Oo=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r}return d(e,[{key:"getToken",value:function(){return Promise.resolve(new No(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(ho.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ro=function(){function e(t,n){var r=this;p(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.g(e)},this.p=function(e){return n.writeSequenceNumber(e)})}return d(e,[{key:"g",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.p&&this.p(e),e}}]),e}();function Do(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ro.T=-1;var Po=function(){function e(){p(this,e)}return d(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Do(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Lo(e,t){return e<t?-1:e>t?1:0}function Mo(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function Fo(e){return e+"\0"}var Vo=function(){function e(t,n){if(p(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Io(xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Io(xo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Io(xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Io(xo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return d(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Lo(this.nanoseconds,e.nanoseconds):Lo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Uo=function(){function e(t){p(this,e),this.timestamp=t}return d(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Vo(0,0))}}]),e}();function jo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Bo=function(){function e(t,n,r){p(this,e),void 0===n?n=0:n>t.length&&wo(),void 0===r?r=t.length-n:r>t.length-n&&wo(),this.segments=t,this.offset=n,this.len=r}return d(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ho=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];if(s.indexOf("//")>=0)throw new Io(xo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,u(s.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Bo),Zo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Go=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Zo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,o=function(){if(0===r.length)throw new Io(xo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Io(xo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Io(xo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(a=!a,i++):"."!==u||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new Io(xo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Bo),Wo=function(){function e(t){p(this,e),this.fields=t,t.sort(Go.comparator)}return d(e,[{key:"covers",value:function(e){var t,n=c(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Mo(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}(),Ko=function(){function e(t){p(this,e),this.binaryString=t}return d(e,[{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Lo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();Ko.EMPTY_BYTE_STRING=new Ko("");var Qo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yo(e){if(bo(!!e),"string"==typeof e){var t=0,n=Qo.exec(e);if(bo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Jo(e.seconds),nanos:Jo(e.nanos)}}function Jo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xo(e){return"string"==typeof e?Ko.fromBase64String(e):Ko.fromUint8Array(e)}function $o(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ea(e){var t=e.mapValue.fields.__previous_value__;return $o(t)?ea(t):t}function ta(e){var t=Yo(e.mapValue.fields.__local_write_time__.timestampValue);return new Vo(t.seconds,t.nanos)}function na(e){return null==e}function ra(e){return 0===e&&1/e==-1/0}function ia(e){return"number"==typeof e&&Number.isInteger(e)&&!ra(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var oa=function(){function e(t){p(this,e),this.path=t}return d(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Ho.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ho.fromString(t))}},{key:"fromName",value:function(t){return new e(Ho.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Ho.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ho(t.slice()))}}]),e}();function aa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$o(e)?4:10:wo()}function ua(e,t){var n,r=aa(e);if(r!==aa(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ta(e).isEqual(ta(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Yo(e.timestampValue),r=Yo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,Xo(e.bytesValue).isEqual(Xo(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jo(e.geoPointValue.latitude)===Jo(t.geoPointValue.latitude)&&Jo(e.geoPointValue.longitude)===Jo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jo(e.integerValue)===Jo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Jo(e.doubleValue),r=Jo(t.doubleValue);return n===r?ra(n)===ra(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Mo(e.arrayValue.values||[],t.arrayValue.values||[],ua);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jo(n)!==jo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ua(n[i],r[i])))return!1;return!0}(e,t);default:return wo()}}function sa(e,t){return void 0!==(e.values||[]).find(function(e){return ua(e,t)})}function ca(e,t){var n,r,i,o,a=aa(e),u=aa(t);if(a!==u)return Lo(a,u);switch(a){case 0:return 0;case 1:return Lo(e.booleanValue,t.booleanValue);case 2:return r=t,i=Jo((n=e).integerValue||n.doubleValue),o=Jo(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return la(e.timestampValue,t.timestampValue);case 4:return la(ta(e),ta(t));case 5:return Lo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Xo(e),r=Xo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Lo(n[i],r[i]);if(0!==o)return o}return Lo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Lo(Jo(e.latitude),Jo(t.latitude));return 0!==n?n:Lo(Jo(e.longitude),Jo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=ca(n[i],r[i]);if(o)return o}return Lo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var u=Lo(r[a],o[a]);if(0!==u)return u;var s=ca(n[r[a]],i[o[a]]);if(0!==s)return s}return Lo(r.length,o.length)}(e.mapValue,t.mapValue);default:throw wo()}}function la(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Lo(e,t);var n=Yo(e),r=Yo(t),i=Lo(n.seconds,r.seconds);return 0!==i?i:Lo(n.nanos,r.nanos)}function ha(e){return fa(e)}function fa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,n=Yo(t),"time(".concat(n.seconds,",").concat(n.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?Xo(e.bytesValue).toBase64():"referenceValue"in e?oa.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo(".concat((r=e.geoPointValue).latitude,",").concat(r.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=c(e.values||[]);try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+=fa(o)}}catch(a){i.e(a)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=c(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+="".concat(o,":").concat(fa(e.fields[o]))}}catch(a){i.e(a)}finally{i.f()}return n+"}"}(e.mapValue):wo();var t,n,r}function da(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function va(e){return!!e&&"integerValue"in e}function pa(e){return!!e&&"arrayValue"in e}function ya(e){return!!e&&"nullValue"in e}function ga(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ma(e){return!!e&&"mapValue"in e}function ka(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return qo(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=ka(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ka(e.arrayValue.values[r]);return n}return Object.assign({},e)}var wa=function(){function e(t){p(this,e),this.value=t}return d(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ma(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(t)}},{key:"setAll",value:function(e){var t=this,n=Go.emptyPath(),r={},i=[];e.forEach(function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=ka(e):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ma(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ua(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ma(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){qo(t,function(t,n){return e[t]=n});var r,i=c(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete e[o]}}catch(a){i.e(a)}finally{i.f()}}},{key:"clone",value:function(){return new e(ka(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ba(e){var t=[];return qo(e.fields,function(e,n){var r=new Go([e]);if(ma(n)){var i=ba(n.mapValue).fields;if(0===i.length)t.push(r);else{var o,a=c(i);try{for(a.s();!(o=a.n()).done;){var u=o.value;t.push(r.child(u))}}catch(s){a.e(s)}finally{a.f()}}}else t.push(r)}),new Wo(t)}var _a=function(){function e(t,n,r,i,o){p(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return d(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=wa.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=wa.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Uo.min(),wa.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,wa.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,wa.empty(),2)}}]),e}(),xa=d(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;p(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.A=null});function Ia(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new xa(e,t,n,r,i,o,a)}function Ta(e){var t=_o(e);if(null===t.A){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function(e){return e.field.canonicalString()+e.op.toString()+ha(e.value)}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return(t=e).field.canonicalString()+t.dir;var t}).join(","),na(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Va(t.startAt)),t.endAt&&(n+="|ub:",n+=Va(t.endAt)),t.A=n}return t.A}function Ea(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ja(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(o=t.filters[r]).op||!i.field.isEqual(o.field)||!ua(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!za(e.startAt,t.startAt)&&za(e.endAt,t.endAt)}function Sa(e){return oa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ca=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return d(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(ca(t,this.value)):null!==t&&aa(this.value)===aa(t)&&this.P(ca(t,this.value))}},{key:"P",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wo()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new Aa(e,t,r):"array-contains"===t?new Da(e,r):"in"===t?new Pa(e,r):"not-in"===t?new La(e,r):"array-contains-any"===t?new Ma(e,r):new n(e,t,r)}},{key:"R",value:function(e,t,n){return"in"===t?new Na(e,n):new Oa(e,n)}}]),n}(function(){return d(function e(){p(this,e)})}()),Aa=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e,r,i)).key=oa.fromName(i.referenceValue),o}return d(n,[{key:"matches",value:function(e){var t=oa.comparator(e.key,this.key);return this.P(t)}}]),n}(Ca),Na=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"in",r)).keys=Ra(0,r),i}return d(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Ca),Oa=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"not-in",r)).keys=Ra(0,r),i}return d(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(Ca);function Ra(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return oa.fromName(e.referenceValue)})}var Da=function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains",r)}return d(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return pa(t)&&sa(t.arrayValue,this.value)}}]),n}(Ca),Pa=function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this,e,"in",r)}return d(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&sa(this.value.arrayValue,t)}}]),n}(Ca),La=function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this,e,"not-in",r)}return d(n,[{key:"matches",value:function(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!sa(this.value.arrayValue,t)}}]),n}(Ca),Ma=function(e){y(n,e);var t=g(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains-any",r)}return d(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!pa(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return sa(t.value.arrayValue,e)})}}]),n}(Ca),Fa=d(function e(t,n){p(this,e),this.position=t,this.before=n});function Va(e){return"".concat(e.before?"b":"a",":").concat(e.position.map(function(e){return ha(e)}).join(","))}var Ua=d(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";p(this,e),this.field=t,this.dir=n});function ja(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function qa(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?oa.comparator(oa.fromName(a.referenceValue),n.key):ca(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function za(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ua(e.position[n],t.position[n]))return!1;return!0}var Ba=d(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=s,this.V=null,this.S=null});function Ha(e,t,n,r,i,o,a,u){return new Ba(e,t,n,r,i,o,a,u)}function Za(e){return new Ba(e)}function Ga(e){return!na(e.limit)&&"F"===e.limitType}function Wa(e){return!na(e.limit)&&"L"===e.limitType}function Ka(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Qa(e){var t,n=c(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.v())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ya(e){return null!==e.collectionGroup}function Ja(e){var t=_o(e);if(null===t.V){t.V=[];var n=Qa(t),r=Ka(t);if(null!==n&&null===r)n.isKeyField()||t.V.push(new Ua(n)),t.V.push(new Ua(Go.keyField(),"asc"));else{var i,o=!1,a=c(t.explicitOrderBy);try{for(a.s();!(i=a.n()).done;){var u=i.value;t.V.push(u),u.field.isKeyField()&&(o=!0)}}catch(l){a.e(l)}finally{a.f()}if(!o){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Ua(Go.keyField(),s))}}}return t.V}function Xa(e){var t=_o(e);if(!t.S)if("F"===t.limitType)t.S=Ia(t.path,t.collectionGroup,Ja(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=c(Ja(t));try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(new Ua(o.field,"desc"===o.dir?"asc":"desc"))}}catch(s){i.e(s)}finally{i.f()}var a=t.endAt?new Fa(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Fa(t.startAt.position,!t.startAt.before):null;t.S=Ia(t.path,t.collectionGroup,r,t.filters,t.limit,a,u)}return t.S}function $a(e,t,n){return new Ba(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function eu(e,t){return Ea(Xa(e),Xa(t))&&e.limitType===t.limitType}function tu(e){return"".concat(Ta(Xa(e)),"|lt:").concat(e.limitType)}function nu(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ha(t.value));var t}).join(", "),"]")),na(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t}).join(", "),"]")),e.startAt&&(t+=", startAt: "+Va(e.startAt)),e.endAt&&(t+=", endAt: "+Va(e.endAt)),"Target(".concat(t,")")}(Xa(e)),"; limitType=").concat(e.limitType,")")}function ru(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):oa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=c(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=c(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&(r=t,!((n=e).startAt&&!qa(n.startAt,Ja(n),r)||n.endAt&&qa(n.endAt,Ja(n),r)));var n,r}function iu(e){return function(t,n){var r,i=!1,o=c(Ja(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,u=ou(a,t,n);if(0!==u)return u;i=i||a.field.isKeyField()}}catch(s){o.e(s)}finally{o.f()}return 0}}function ou(e,t,n){var r,i,o,a,u=e.field.isKeyField()?oa.comparator(t.key,n.key):(r=e.field,i=n,o=t.data.field(r),a=i.data.field(r),null!==o&&null!==a?ca(o,a):wo());switch(e.dir){case"asc":return u;case"desc":return-1*u;default:return wo()}}function au(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(t)?"-0":t}}function uu(e){return{integerValue:""+e}}function su(e,t){return ia(t)?uu(t):au(e,t)}var cu=d(function e(){p(this,e),this._=void 0});function lu(e,t,n){return e instanceof du?(i=t,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):e instanceof vu?pu(e,t):e instanceof yu?gu(e,t):function(e,t){var n=fu(e,t),r=ku(n)+ku(e.C);return va(n)&&va(e.C)?uu(r):au(e.N,r)}(e,t);var r,i,o}function hu(e,t,n){return e instanceof vu?pu(e,t):e instanceof yu?gu(e,t):n}function fu(e,t){return e instanceof mu?va(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}var du=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n)}(cu),vu=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return d(n)}(cu);function pu(e,t){var n,r=wu(t),i=c(e.elements);try{var o=function(){var e=n.value;r.some(function(t){return ua(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var yu=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return d(n)}(cu);function gu(e,t){var n,r=wu(t),i=c(e.elements);try{var o=function(){var e=n.value;r=r.filter(function(t){return!ua(t,e)})};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var mu=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).N=e,i.C=r,i}return d(n)}(cu);function ku(e){return Jo(e.integerValue||e.doubleValue)}function wu(e){return pa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var bu=d(function e(t,n){p(this,e),this.field=t,this.transform=n}),_u=d(function e(t,n){p(this,e),this.version=t,this.transformResults=n}),xu=function(){function e(t,n){p(this,e),this.updateTime=t,this.exists=n}return d(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Iu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Tu=d(function e(){p(this,e)});function Eu(e,t,n){var r,i,o,a,u;e instanceof Ou?(i=t,o=n,a=(r=e).value.clone(),u=Pu(r.fieldTransforms,i,o.transformResults),a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):e instanceof Ru?function(e,t,n){if(Iu(e.precondition,t)){var r=Pu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Du(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}function Su(e,t,n){var r;e instanceof Ou?function(e,t,n){if(Iu(e.precondition,t)){var r=e.value.clone(),i=Lu(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Nu(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Ru?function(e,t,n){if(Iu(e.precondition,t)){var r=Lu(e.fieldTransforms,n,t),i=t.data;i.setAll(Du(e)),i.setAll(r),t.convertToFoundDocument(Nu(t),i).setHasLocalMutations()}}(e,t,n):Iu(e.precondition,r=t)&&r.convertToNoDocument(Uo.min())}function Cu(e,t){var n,r=null,i=c(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.field),u=fu(o.transform,a||null);null!=u&&(null==r&&(r=wa.empty()),r.set(o.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Au(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&Mo(n,r,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(r=t.transform,(n=e.transform)instanceof vu&&r instanceof vu||n instanceof yu&&r instanceof yu?Mo(n.elements,r.elements,ua):n instanceof mu&&r instanceof mu?ua(n.C,r.C):n instanceof du&&r instanceof du);var n,r}(e,t)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function Nu(e){return e.isFoundDocument()?e.version:Uo.min()}var Ou=function(e){y(n,e);var t=g(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return p(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=a,o.type=0,o}return d(n)}(Tu),Ru=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return p(this,n),(a=t.call(this)).key=e,a.data=r,a.fieldMask=i,a.precondition=o,a.fieldTransforms=u,a.type=1,a}return d(n)}(Tu);function Du(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function Pu(e,t,n){var r=new Map;bo(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,u=t.data.field(o.field);r.set(o.field,hu(a,u,n[i]))}return r}function Lu(e,t,n){var r,i=new Map,o=c(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,u=a.transform,s=n.data.field(a.field);i.set(a.field,lu(u,s,t))}}catch(l){o.e(l)}finally{o.f()}return i}var Mu,Fu,Vu=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return d(n)}(Tu),Uu=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return d(n)}(Tu),ju=d(function e(t){p(this,e),this.count=t});function qu(e){switch(e){case xo.OK:return wo();case xo.CANCELLED:case xo.UNKNOWN:case xo.DEADLINE_EXCEEDED:case xo.RESOURCE_EXHAUSTED:case xo.INTERNAL:case xo.UNAVAILABLE:case xo.UNAUTHENTICATED:return!1;case xo.INVALID_ARGUMENT:case xo.NOT_FOUND:case xo.ALREADY_EXISTS:case xo.PERMISSION_DENIED:case xo.FAILED_PRECONDITION:case xo.ABORTED:case xo.OUT_OF_RANGE:case xo.UNIMPLEMENTED:case xo.DATA_LOSS:return!0;default:return wo()}}function zu(e){if(void 0===e)return go("GRPC error has no .code"),xo.UNKNOWN;switch(e){case Mu.OK:return xo.OK;case Mu.CANCELLED:return xo.CANCELLED;case Mu.UNKNOWN:return xo.UNKNOWN;case Mu.DEADLINE_EXCEEDED:return xo.DEADLINE_EXCEEDED;case Mu.RESOURCE_EXHAUSTED:return xo.RESOURCE_EXHAUSTED;case Mu.INTERNAL:return xo.INTERNAL;case Mu.UNAVAILABLE:return xo.UNAVAILABLE;case Mu.UNAUTHENTICATED:return xo.UNAUTHENTICATED;case Mu.INVALID_ARGUMENT:return xo.INVALID_ARGUMENT;case Mu.NOT_FOUND:return xo.NOT_FOUND;case Mu.ALREADY_EXISTS:return xo.ALREADY_EXISTS;case Mu.PERMISSION_DENIED:return xo.PERMISSION_DENIED;case Mu.FAILED_PRECONDITION:return xo.FAILED_PRECONDITION;case Mu.ABORTED:return xo.ABORTED;case Mu.OUT_OF_RANGE:return xo.OUT_OF_RANGE;case Mu.UNIMPLEMENTED:return xo.UNIMPLEMENTED;case Mu.DATA_LOSS:return xo.DATA_LOSS;default:return wo()}}(Fu=Mu||(Mu={}))[Fu.OK=0]="OK",Fu[Fu.CANCELLED=1]="CANCELLED",Fu[Fu.UNKNOWN=2]="UNKNOWN",Fu[Fu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fu[Fu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fu[Fu.NOT_FOUND=5]="NOT_FOUND",Fu[Fu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fu[Fu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fu[Fu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fu[Fu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fu[Fu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fu[Fu.ABORTED=10]="ABORTED",Fu[Fu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fu[Fu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fu[Fu.INTERNAL=13]="INTERNAL",Fu[Fu.UNAVAILABLE=14]="UNAVAILABLE",Fu[Fu.DATA_LOSS=15]="DATA_LOSS";var Bu=function(){function e(t,n){p(this,e),this.comparator=t,this.root=n||Zu.EMPTY}return d(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Zu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Hu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Hu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Hu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Hu(this.root,e,this.comparator,!0)}}]),e}(),Hu=function(){function e(t,n,r,i){p(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return d(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Zu=function(){function e(t,n,r,i,o){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return d(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wo();var e=this.left.check();if(e!==this.right.check())throw wo();return e+(this.isRed()?0:1)}}]),e}();Zu.EMPTY=null,Zu.RED=!0,Zu.BLACK=!1,Zu.EMPTY=new(function(){function e(){p(this,e),this.size=0}return d(e,[{key:"key",get:function(){throw wo()}},{key:"value",get:function(){throw wo()}},{key:"color",get:function(){throw wo()}},{key:"left",get:function(){throw wo()}},{key:"right",get:function(){throw wo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Zu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Gu=function(){function e(t){p(this,e),this.comparator=t,this.data=new Bu(this.comparator)}return d(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wu=function(){function e(t){p(this,e),this.iter=t}return d(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Ku=new Bu(oa.comparator);function Qu(){return Ku}var Yu=new Bu(oa.comparator);function Ju(){return Yu}var Xu=new Bu(oa.comparator);function $u(){return Xu}var es=new Gu(oa.comparator);function ts(){for(var e=es,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.add(a)}return e}var ns=new Gu(Lo);function rs(){return ns}var is=function(){function e(t,n,r,i,o){p(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return d(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,os.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Uo.min(),r,rs(),Qu(),ts())}}]),e}(),os=function(){function e(t,n,r,i,o){p(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return d(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Ko.EMPTY_BYTE_STRING,n,ts(),ts(),ts())}}]),e}(),as=d(function e(t,n,r,i){p(this,e),this.k=t,this.removedTargetIds=n,this.key=r,this.$=i}),us=d(function e(t,n){p(this,e),this.targetId=t,this.O=n}),ss=d(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ko.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}),cs=function(){function e(){p(this,e),this.F=0,this.M=fs(),this.L=Ko.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return d(e,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}},{key:"W",value:function(){var e=ts(),t=ts(),n=ts();return this.M.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:wo()}}),new os(this.L,this.B,e,t,n)}},{key:"G",value:function(){this.U=!1,this.M=fs()}},{key:"H",value:function(e,t){this.U=!0,this.M=this.M.insert(e,t)}},{key:"J",value:function(e){this.U=!0,this.M=this.M.remove(e)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),e}(),ls=function(){function e(t){p(this,e),this.tt=t,this.et=new Map,this.nt=Qu(),this.st=hs(),this.it=new Gu(Lo)}return d(e,[{key:"rt",value:function(e){var t,n=c(e.k);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ot(r,e.$):this.at(r,e.key,e.$)}}catch(u){n.e(u)}finally{n.f()}var i,o=c(e.removedTargetIds);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.at(a,e.key,e.$)}}catch(u){o.e(u)}finally{o.f()}}},{key:"ct",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ut(n);switch(e.state){case 0:t.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||t.removeTarget(n);break;case 3:t.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:t.ht(n)&&(t.lt(n),r.j(e.resumeToken));break;default:wo()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach(function(e,r){n.ht(r)&&t(r)})}},{key:"ft",value:function(e){var t=e.targetId,n=e.O.count,r=this.dt(t);if(r){var i=r.target;if(Sa(i))if(0===n){var o=new oa(i.path);this.at(t,o,_a.newNoDocument(o,Uo.min()))}else bo(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}},{key:"_t",value:function(e){var t=this,n=new Map;this.et.forEach(function(r,i){var o=t.dt(i);if(o){if(r.current&&Sa(o.target)){var a=new oa(o.target.path);null!==t.nt.get(a)||t.gt(i,a)||t.at(i,a,_a.newNoDocument(a,e))}r.K&&(n.set(i,r.W()),r.G())}});var r=ts();this.st.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.dt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new is(e,n,this.it,this.nt,r);return this.nt=Qu(),this.st=hs(),this.it=new Gu(Lo),i}},{key:"ot",value:function(e,t){if(this.ht(e)){var n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ht(e)){var r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.et.delete(e)}},{key:"wt",value:function(e){var t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Y",value:function(e){this.ut(e).Y()}},{key:"ut",value:function(e){var t=this.et.get(e);return t||(t=new cs,this.et.set(e,t)),t}},{key:"yt",value:function(e){var t=this.st.get(e);return t||(t=new Gu(Lo),this.st=this.st.insert(e,t)),t}},{key:"ht",value:function(e){var t=null!==this.dt(e);return t||yo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"dt",value:function(e){var t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}},{key:"lt",value:function(e){var t=this;this.et.set(e,new cs),this.tt.getRemoteKeysForTarget(e).forEach(function(n){t.at(e,n,null)})}},{key:"gt",value:function(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}]),e}();function hs(){return new Bu(oa.comparator)}function fs(){return new Bu(oa.comparator)}var ds={asc:"ASCENDING",desc:"DESCENDING"},vs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ps=d(function e(t,n){p(this,e),this.databaseId=t,this.D=n});function ys(e,t){return e.D?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gs(e,t){return e.D?t.toBase64():t.toUint8Array()}function ms(e,t){return ys(e,t.toTimestamp())}function ks(e){return bo(!!e),Uo.fromTimestamp((t=Yo(e),new Vo(t.seconds,t.nanos)));var t}function ws(e,t){return(n=e,new Ho(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function bs(e){var t=Ho.fromString(e);return bo(Zs(t)),t}function _s(e,t){return ws(e.databaseId,t.path)}function xs(e,t){var n=bs(t);if(n.get(1)!==e.databaseId.projectId)throw new Io(xo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Io(xo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new oa(Ss(n))}function Is(e,t){return ws(e.databaseId,t)}function Ts(e){var t=bs(e);return 4===t.length?Ho.emptyPath():Ss(t)}function Es(e){return new Ho(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ss(e){return bo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Cs(e,t,n){return{name:_s(e,t),fields:n.value.mapValue.fields}}function As(e,t,n){var r=xs(e,t.name),i=ks(t.updateTime),o=new wa({mapValue:{fields:t.fields}}),a=_a.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ns(e,t){var n,r;if(t instanceof Ou)n={update:Cs(e,t.key,t.value)};else if(t instanceof Vu)n={delete:_s(e,t.key)};else if(t instanceof Ru)n={update:Cs(e,t.key,t.data),updateMask:Hs(t.fieldMask)};else{if(!(t instanceof Uu))return wo();n={verify:_s(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof du)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mu)return{fieldPath:t.field.canonicalString(),increment:n.C};throw wo()}(0,e)})),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:ms(e,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:wo()),n}function Os(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?xu.updateTime(ks(n.updateTime)):void 0!==n.exists?xu.exists(n.exists):xu.none():xu.none(),i=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(bo("REQUEST_TIME"===t.setToServerValue),n=new du):"appendMissingElements"in t?n=new vu(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new yu(t.removeAllFromArray.values||[]):"increment"in t?n=new mu(e,t.increment):wo();var r=Go.fromServerFormat(t.fieldPath);return new bu(r,n)}(e,t)}):[];if(t.update){var o=xs(e,t.update.name),a=new wa({mapValue:{fields:t.update.fields}});if(t.updateMask){var u=new Wo((t.updateMask.fieldPaths||[]).map(function(e){return Go.fromServerFormat(e)}));return new Ru(o,a,u,r,i)}return new Ou(o,a,r,i)}if(t.delete){var s=xs(e,t.delete);return new Vu(s,r)}if(t.verify){var c=xs(e,t.verify);return new Uu(c,r)}return wo()}function Rs(e,t){return{documents:[Is(e,t.path)]}}function Ds(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Is(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Is(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(ga(e.value))return{unaryFilter:{field:js(e.field),op:"IS_NAN"}};if(ya(e.value))return{unaryFilter:{field:js(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ga(e.value))return{unaryFilter:{field:js(e.field),op:"IS_NOT_NAN"}};if(ya(e.value))return{unaryFilter:{field:js(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:js(e.field),op:Us(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map(function(e){return{field:js((t=e).field),direction:Vs(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,u=(a=t.limit,e.D||na(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=Ms(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Ms(t.endAt)),n}function Ps(e){var t=Ts(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Ls(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return new Ua(qs((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));var s=null;n.limit&&(s=function(e){var t;return na(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Fs(n.startAt));var l=null;return n.endAt&&(l=Fs(n.endAt)),Ha(t,i,u,a,s,"F",c,l)}function Ls(e){return e?void 0!==e.unaryFilter?[Bs(e)]:void 0!==e.fieldFilter?[zs(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return Ls(e)}).reduce(function(e,t){return e.concat(t)}):wo():[]}function Ms(e){return{before:e.before,values:e.position}}function Fs(e){return new Fa(e.values||[],!!e.before)}function Vs(e){return ds[e]}function Us(e){return vs[e]}function js(e){return{fieldPath:e.canonicalString()}}function qs(e){return Go.fromServerFormat(e.fieldPath)}function zs(e){return Ca.create(qs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wo()}}(e.fieldFilter.op),e.fieldFilter.value)}function Bs(e){switch(e.unaryFilter.op){case"IS_NAN":var t=qs(e.unaryFilter.field);return Ca.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=qs(e.unaryFilter.field);return Ca.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qs(e.unaryFilter.field);return Ca.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qs(e.unaryFilter.field);return Ca.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wo()}}function Hs(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function Zs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Gs(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ks(t)),t=Ws(e.get(n),t);return Ks(t)}function Ws(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ks(e){return e+"\x01\x01"}function Qs(e){var t=e.length;if(bo(t>=2),2===t)return bo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ho.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&wo(),e.charAt(a+1)){case"\x01":var u=e.substring(o,a),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:wo()}o=a+2}return new Ho(r)}var Ys=d(function e(t,n){p(this,e),this.seconds=t,this.nanoseconds=n}),Js=d(function e(t,n,r){p(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r});Js.store="owner",Js.key="owner";var Xs=d(function e(t,n,r){p(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r});Xs.store="mutationQueues",Xs.keyPath="userId";var $s=d(function e(t,n,r,i,o){p(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=o});$s.store="mutations",$s.keyPath="batchId",$s.userMutationsIndex="userMutationsIndex",$s.userMutationsKeyPath=["userId","batchId"];var ec=function(){function e(){p(this,e)}return d(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Gs(t)]}},{key:"key",value:function(e,t,n){return[e,Gs(t),n]}}]),e}();ec.store="documentMutations",ec.PLACEHOLDER=new ec;var tc=d(function e(t,n){p(this,e),this.path=t,this.readTime=n}),nc=d(function e(t,n){p(this,e),this.path=t,this.version=n}),rc=d(function e(t,n,r,i,o,a){p(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=o,this.parentPath=a});rc.store="remoteDocuments",rc.readTimeIndex="readTimeIndex",rc.readTimeIndexPath="readTime",rc.collectionReadTimeIndex="collectionReadTimeIndex",rc.collectionReadTimeIndexPath=["parentPath","readTime"];var ic=d(function e(t){p(this,e),this.byteSize=t});ic.store="remoteDocumentGlobal",ic.key="remoteDocumentGlobalKey";var oc=d(function e(t,n,r,i,o,a,u){p(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=a,this.query=u});oc.store="targets",oc.keyPath="targetId",oc.queryTargetsIndexName="queryTargetsIndex",oc.queryTargetsKeyPath=["canonicalId","targetId"];var ac=d(function e(t,n,r){p(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r});ac.store="targetDocuments",ac.keyPath=["targetId","path"],ac.documentTargetsIndex="documentTargetsIndex",ac.documentTargetsKeyPath=["path","targetId"];var uc=d(function e(t,n,r,i){p(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i});uc.key="targetGlobalKey",uc.store="targetGlobal";var sc=d(function e(t,n){p(this,e),this.collectionId=t,this.parent=n});sc.store="collectionParents",sc.keyPath=["collectionId","parent"];var cc=d(function e(t,n,r,i){p(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i});cc.store="clientMetadata",cc.keyPath="clientId";var lc=d(function e(t,n,r){p(this,e),this.bundleId=t,this.createTime=n,this.version=r});lc.store="bundles",lc.keyPath="bundleId";var hc=d(function e(t,n,r){p(this,e),this.name=t,this.readTime=n,this.bundledQuery=r});hc.store="namedQueries",hc.keyPath="name";var fc=[Xs.store,$s.store,ec.store,rc.store,oc.store,Js.store,uc.store,ac.store,cc.store,ic.store,sc.store,lc.store,hc.store],dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vc=function(){function e(){p(this,e),this.onCommittedListeners=[]}return d(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),pc=function(){function e(t){var n=this;p(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return d(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&wo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=c(t);try{var o=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),yc=function(){function e(t,n){var r=this;p(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.Tt=new To,this.transaction.oncomplete=function(){r.Tt.resolve()},this.transaction.onabort=function(){n.error?r.Tt.reject(new kc(t,n.error)):r.Tt.resolve()},this.transaction.onerror=function(e){var n=Ic(e.target.error);r.Tt.reject(new kc(t,n))}}return d(e,[{key:"It",get:function(){return this.Tt.promise}},{key:"abort",value:function(e){e&&this.Tt.reject(e),this.aborted||(yo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new bc(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(o){throw new kc(n,o)}}}]),e}(),gc=function(){function t(e,n,r){p(this,t),this.name=e,this.version=n,this.At=r,12.2===t.Rt((0,nt.z$)())&&go("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return d(t,[{key:"Dt",value:function(t){var n=this;return(0,Xe.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.db,e.t0){e.next=6;break}return yo("SimpleDb","Opening database:",n.name),e.next=5,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new kc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Io(xo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Io(xo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new kc(t,n))},i.onupgradeneeded=function(e){yo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion),n.At.Ct(e.target.result,i.transaction,e.oldVersion,n.version).next(function(){yo("SimpleDb","Database upgrade to version "+n.version+" complete")})}});case 5:n.db=e.sent;case 6:return n.Nt&&(n.db.onversionchange=function(e){return n.Nt(e)}),e.abrupt("return",n.db);case 8:case"end":return e.stop()}},r)}))()}},{key:"xt",value:function(e){this.Nt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(t,n,r,i){var o=this;return(0,Xe.Z)(e().mark(function a(){var u,s,c,l;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:u="readonly"===n,s=0,c=e().mark(function n(){var a,c,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return++s,e.prev=1,e.next=4,o.Dt(t);case 4:return o.db=e.sent,a=yc.open(o.db,t,u?"readonly":"readwrite",r),(c=i(a).catch(function(e){return a.abort(e),pc.reject(e)}).toPromise()).catch(function(){}),e.next=9,a.It;case 9:return e.t0=c,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),l="FirebaseError"!==e.t1.name&&s<3,yo("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",l),o.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(e.t1)});case 18:case"end":return e.stop()}},n,null,[[1,13]])});case 3:return a.delegateYield(c(),"t0",4);case 4:if("object"!=typeof(l=a.t0)){a.next=7;break}return a.abrupt("return",l.v);case 7:a.next=3;break;case 9:case"end":return a.stop()}},a)}))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return yo("SimpleDb","Removing database:",e),_c(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if("undefined"==typeof indexedDB)return!1;if(t.Pt())return!0;var e=(0,nt.z$)(),n=t.Rt(e),r=0<n&&n<10,i=t.vt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}},{key:"Pt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}},{key:"St",value:function(e,t){return e.store(t)}},{key:"Rt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),t}(),mc=function(){function e(t){p(this,e),this.kt=t,this.$t=!1,this.Ot=null}return d(e,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.kt=e}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return _c(this.kt.delete())}}]),e}(),kc=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,xo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return d(n)}(Io);function wc(e){return"IndexedDbTransactionError"===e.name}var bc=function(){function e(t){p(this,e),this.store=t}return d(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(yo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(yo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_c(n)}},{key:"add",value:function(e){return yo("SimpleDb","ADD",this.store.name,e,e),_c(this.store.add(e))}},{key:"get",value:function(e){var t=this;return _c(this.store.get(e)).next(function(n){return void 0===n&&(n=null),yo("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return yo("SimpleDb","DELETE",this.store.name,e),_c(this.store.delete(e))}},{key:"count",value:function(){return yo("SimpleDb","COUNT",this.store.name),_c(this.store.count())}},{key:"Lt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,function(e,t){r.push(t)}).next(function(){return r})}},{key:"Ut",value:function(e,t){yo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.qt=!1;var r=this.cursor(n);return this.Bt(r,function(e,t,n){return n.delete()})}},{key:"Kt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Bt(r,t)}},{key:"jt",value:function(e){var t=this.cursor({});return new pc(function(n,r){t.onerror=function(e){var t=Ic(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Bt",value:function(e,t){var n=[];return new pc(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new mc(i),a=t(i.primaryKey,i.value,o);if(a instanceof pc){var u=a.catch(function(e){return o.done(),pc.reject(e)});n.push(u)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return pc.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function _c(e){return new pc(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=Ic(e.target.error);n(t)}})}var xc=!1;function Ic(e){var t=gc.Rt((0,nt.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Io("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return xc||(xc=!0,setTimeout(function(){throw r},0)),r}}return e}var Tc=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).Qt=e,i.currentSequenceNumber=r,i}return d(n)}(vc);function Ec(e,t){var n=_o(e);return gc.St(n.Qt,t)}var Sc=function(){function e(t,n,r,i){p(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return d(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Eu(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=c(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Su(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,o=c(this.mutations);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.key.isEqual(e.key)&&Su(a,e,this.localWriteTime)}}catch(u){o.e(u)}finally{o.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Uo.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},ts())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,function(e,t){return Au(e,t)})&&Mo(this.baseMutations,e.baseMutations,function(e,t){return Au(e,t)})}}]),e}(),Cc=function(){function e(t,n,r,i){p(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return d(e,null,[{key:"from",value:function(t,n,r){bo(t.mutations.length===r.length);for(var i=$u(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)}}]),e}(),Ac=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Uo.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Uo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ko.EMPTY_BYTE_STRING;p(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u}return d(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Nc=d(function e(t){p(this,e),this.Wt=t});function Oc(e,t){if(t.document)return As(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=oa.fromSegments(t.noDocument.path),r=Mc(t.noDocument.readTime),i=_a.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=oa.fromSegments(t.unknownDocument.path),a=Mc(t.unknownDocument.version);return _a.newUnknownDocument(o,a)}return wo()}function Rc(e,t,n){var r,i,o=Dc(n),a=t.key.path.popLast().toArray();if(t.isFoundDocument()){var u={name:_s(r=e.Wt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:ys(r,i.version.toTimestamp())};return new rc(null,null,u,t.hasCommittedMutations,o,a)}if(t.isNoDocument()){var s=t.key.path.toArray(),c=Lc(t.version),l=t.hasCommittedMutations;return new rc(null,new tc(s,c),null,l,o,a)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),f=Lc(t.version);return new rc(new nc(h,f),null,null,!0,o,a)}return wo()}function Dc(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Pc(e){var t=new Vo(e[0],e[1]);return Uo.fromTimestamp(t)}function Lc(e){var t=e.toTimestamp();return new Ys(t.seconds,t.nanoseconds)}function Mc(e){var t=new Vo(e.seconds,e.nanoseconds);return Uo.fromTimestamp(t)}function Fc(e,t){for(var n=(t.baseMutations||[]).map(function(t){return Os(e.Wt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i.updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var o=t.mutations.map(function(t){return Os(e.Wt,t)}),a=Vo.fromMillis(t.localWriteTimeMs);return new Sc(t.batchId,a,n,o)}function Vc(e){var t,n,r=Mc(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Mc(e.lastLimboFreeSnapshotVersion):Uo.min();return void 0!==e.query.documents?(bo(1===(n=e.query).documents.length),t=Xa(Za(Ts(n.documents[0])))):t=Xa(Ps(e.query)),new Ac(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ko.fromBase64String(e.resumeToken))}function Uc(e,t){var n,r=Lc(t.snapshotVersion),i=Lc(t.lastLimboFreeSnapshotVersion);n=Sa(t.target)?Rs(e.Wt,t.target):Ds(e.Wt,t.target);var o=t.resumeToken.toBase64();return new oc(t.targetId,Ta(t.target),r,o,t.sequenceNumber,i,n)}function jc(e){var t=Ps({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$a(t,t.limit,"L"):t}var qc=function(){function e(){p(this,e)}return d(e,[{key:"getBundleMetadata",value:function(e,t){return zc(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:Mc(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return zc(e).put({bundleId:(n=t).id,createTime:Lc(ks(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Bc(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:jc(t.bundledQuery),readTime:Mc(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return Bc(e).put({name:(n=t).name,readTime:Lc(ks(n.readTime)),bundledQuery:n.bundledQuery});var n}}]),e}();function zc(e){return Ec(e,lc.store)}function Bc(e){return Ec(e,hc.store)}var Hc=function(){function e(){p(this,e),this.Gt=new Zc}return d(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Gt.add(t),pc.resolve()}},{key:"getCollectionParents",value:function(e,t){return pc.resolve(this.Gt.getEntries(t))}}]),e}(),Zc=function(){function e(){p(this,e),this.index={}}return d(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Gu(Ho.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Gu(Ho.comparator)).toArray()}}]),e}(),Gc=function(){function e(){p(this,e),this.zt=new Zc}return d(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.zt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.zt.add(t)});var o={collectionId:r,parent:Gs(i)};return Wc(e).put(o)}return pc.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fo(t),""],!1,!0);return Wc(e).Lt(r).next(function(e){var r,i=c(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.collectionId!==t)break;n.push(Qs(o.parent))}}catch(a){i.e(a)}finally{i.f()}return n})}}]),e}();function Wc(e){return Ec(e,sc.store)}var Kc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qc=function(){function e(t,n,r){p(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return d(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Yc(e,t,n){var r=e.store($s.store),i=e.store(ec.store),o=[],a=IDBKeyRange.only(n.batchId),u=0,s=r.Kt({range:a},function(e,t,n){return u++,n.delete()});o.push(s.next(function(){bo(1===u)}));var l,h=[],f=c(n.mutations);try{for(f.s();!(l=f.n()).done;){var d=l.value,v=ec.key(t,d.key.path,n.batchId);o.push(i.delete(v)),h.push(d.key)}}catch(p){f.e(p)}finally{f.f()}return pc.waitFor(o).next(function(){return h})}function Jc(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw wo();t=e.noDocument}return JSON.stringify(t).length}Qc.DEFAULT_COLLECTION_PERCENTILE=10,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qc.DEFAULT=new Qc(41943040,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qc.DISABLED=new Qc(-1,0,0);var Xc=function(){function e(t,n,r,i){p(this,e),this.userId=t,this.N=n,this.Ht=r,this.referenceDelegate=i,this.Jt={}}return d(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return el(e).Kt({index:$s.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,o=tl(e),a=el(e);return a.add({}).next(function(u){bo("number"==typeof u);var s,l=new Sc(u,t,n,r),h=function(e,t,n){var r=n.baseMutations.map(function(t){return Ns(e.Wt,t)}),i=n.mutations.map(function(t){return Ns(e.Wt,t)});return new $s(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.N,i.userId,l),f=[],d=new Gu(function(e,t){return Lo(e.canonicalString(),t.canonicalString())}),v=c(r);try{for(v.s();!(s=v.n()).done;){var p=s.value,y=ec.key(i.userId,p.key.path,u);d=d.add(p.key.path.popLast()),f.push(a.put(h)),f.push(o.put(y,ec.PLACEHOLDER))}}catch(g){v.e(g)}finally{v.f()}return d.forEach(function(t){f.push(i.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Jt[u]=l.keys()}),pc.waitFor(f).next(function(){return l})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return el(e).get(t).next(function(e){return e?(bo(e.userId===n.userId),Fc(n.N,e)):null})}},{key:"Xt",value:function(e,t){var n=this;return this.Jt[t]?pc.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Jt[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return el(e).Kt({index:$s.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(bo(t.batchId>=r),o=Fc(n.N,t)),i.done()}).next(function(){return o})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return el(e).Kt({index:$s.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return el(e).Lt($s.userMutationsIndex,n).next(function(e){return e.map(function(e){return Fc(t.N,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var r=this,i=ec.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(i),a=[];return tl(e).Kt({range:o},function(i,o,u){var s=n(i,3),c=s[0],l=s[1],h=s[2],f=Qs(l);if(c===r.userId&&t.path.isEqual(f))return el(e).get(h).next(function(e){if(!e)throw wo();bo(e.userId===r.userId),a.push(Fc(r.N,e))});u.done()}).next(function(){return a})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var r=this,i=new Gu(Lo),o=[];return t.forEach(function(t){var a=ec.prefixForPath(r.userId,t.path),u=IDBKeyRange.lowerBound(a),s=tl(e).Kt({range:u},function(e,o,a){var u=n(e,3),s=u[0],c=u[1],l=u[2],h=Qs(c);s===r.userId&&t.path.isEqual(h)?i=i.add(l):a.done()});o.push(s)}),pc.waitFor(o).next(function(){return r.Zt(e,i)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var r=this,i=t.path,o=i.length+1,a=ec.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(a),s=new Gu(Lo);return tl(e).Kt({range:u},function(e,t,a){var u=n(e,3),c=u[0],l=u[1],h=u[2],f=Qs(l);c===r.userId&&i.isPrefixOf(f)?f.length===o&&(s=s.add(h)):a.done()}).next(function(){return r.Zt(e,s)})}},{key:"Zt",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(el(e).get(t).next(function(e){if(null===e)throw wo();bo(e.userId===n.userId),r.push(Fc(n.N,e))}))}),pc.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Yc(e.Qt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.te(t.batchId)}),pc.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"te",value:function(e){delete this.Jt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return pc.resolve();var r=IDBKeyRange.lowerBound(ec.prefixForUser(t.userId)),i=[];return tl(e).Kt({range:r},function(e,n,r){if(e[0]===t.userId){var o=Qs(e[1]);i.push(o)}else r.done()}).next(function(){bo(0===i.length)})})}},{key:"containsKey",value:function(e,t){return $c(e,this.userId,t)}},{key:"ee",value:function(e){var t=this;return nl(e).get(this.userId).next(function(e){return e||new Xs(t.userId,-1,"")})}}],[{key:"Yt",value:function(t,n,r,i){return bo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function $c(e,t,r){var i=ec.prefixForPath(t,r.path),o=i[1],a=IDBKeyRange.lowerBound(i),u=!1;return tl(e).Kt({range:a,qt:!0},function(e,r,i){var a=n(e,3),s=a[0],c=a[1];a[2];s===t&&c===o&&(u=!0),i.done()}).next(function(){return u})}function el(e){return Ec(e,$s.store)}function tl(e){return Ec(e,ec.store)}function nl(e){return Ec(e,Xs.store)}var rl=function(){function e(t){p(this,e),this.ne=t}return d(e,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new e(0)}},{key:"ie",value:function(){return new e(-1)}}]),e}(),il=function(){function e(t,n){p(this,e),this.referenceDelegate=t,this.N=n}return d(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.re(e).next(function(n){var r=new rl(n.highestTargetId);return n.highestTargetId=r.next(),t.oe(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.re(e).next(function(e){return Uo.fromTimestamp(new Vo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.re(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.re(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.oe(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next(function(){return n.re(e).next(function(r){return r.targetCount+=1,n.ce(t,r),n.oe(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ol(e).delete(t.targetId)}).next(function(){return n.re(e)}).next(function(t){return bo(t.targetCount>0),t.targetCount-=1,n.oe(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return ol(e).Kt(function(a,u){var s=Vc(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(e,s)))}).next(function(){return pc.waitFor(o)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return ol(e).Kt(function(e,n){var r=Vc(n);t(r)})}},{key:"re",value:function(e){return al(e).get(uc.key).next(function(e){return bo(null!==e),e})}},{key:"oe",value:function(e,t){return al(e).put(uc.key,t)}},{key:"ae",value:function(e,t){return ol(e).put(Uc(this.N,t))}},{key:"ce",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.re(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=Ta(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ol(e).Kt({range:r,index:oc.queryTargetsIndexName},function(e,n,r){var o=Vc(n);Ea(t,o.target)&&(i=o,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],o=ul(e);return t.forEach(function(t){var a=Gs(t.path);i.push(o.put(new ac(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))}),pc.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ul(e);return pc.forEach(t,function(t){var o=Gs(t.path);return pc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ul(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ul(e),i=ts();return r.Kt({range:n,qt:!0},function(e,t,n){var r=Qs(e[1]),o=new oa(r);i=i.add(o)}).next(function(){return i})}},{key:"containsKey",value:function(e,t){var r=Gs(t.path),i=IDBKeyRange.bound([r],[Fo(r)],!1,!0),o=0;return ul(e).Kt({index:ac.documentTargetsIndex,qt:!0,range:i},function(e,t,r){var i=n(e,2),a=i[0];i[1];0!==a&&(o++,r.done())}).next(function(){return o>0})}},{key:"Et",value:function(e,t){return ol(e).get(t).next(function(e){return e?Vc(e):null})}}]),e}();function ol(e){return Ec(e,oc.store)}function al(e){return Ec(e,uc.store)}function ul(e){return Ec(e,ac.store)}function sl(e){return cl.apply(this,arguments)}function cl(){return cl=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code===xo.FAILED_PRECONDITION&&n.message===dc){e.next=2;break}throw n;case 2:yo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},t)})),cl.apply(this,arguments)}function ll(e,t){var r=n(e,2),i=r[0],o=r[1],a=n(t,2),u=a[0],s=a[1],c=Lo(i,u);return 0===c?Lo(o,s):c}var hl=function(){function e(t){p(this,e),this.ue=t,this.buffer=new Gu(ll),this.he=0}return d(e,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(e){var t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ll(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),fl=function(){function t(e,n){p(this,t),this.garbageCollector=e,this.asyncQueue=n,this.de=!1,this.we=null}return d(t,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(t){var n=this,r=this.de?3e5:6e4;yo("LruGarbageCollector","Garbage collection scheduled in ".concat(r,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Xe.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.we=null,n.de=!0,e.prev=1,e.next=4,t.collectGarbage(n.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!wc(e.t0)){e.next=12;break}yo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,sl(e.t0);case 14:return e.next=16,n._e(t);case 16:case"end":return e.stop()}},r,null,[[1,6]])})))}}]),t}(),dl=function(){function e(t,n){p(this,e),this.me=t,this.params=n}return d(e,[{key:"calculateTargetCount",value:function(e,t){return this.me.ge(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return pc.resolve(Ro.T);var r=new hl(t);return this.me.forEachTarget(e,function(e){return r.fe(e.sequenceNumber)}).next(function(){return n.me.ye(e,function(e){return r.fe(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.me.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.me.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(yo("LruGarbageCollector","Garbage collection skipped; disabled"),pc.resolve(Kc)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(yo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Kc):n.pe(e,t)})}},{key:"getCacheSize",value:function(e){return this.me.getCacheSize(e)}},{key:"pe",value:function(e,t){var n,r,i,o,a,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(yo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return s=Date.now(),po()<=tt.in.DEBUG&&yo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n\tRemoved ".concat(i," targets in ")+(u-a)+"ms\n\tRemoved ".concat(e," documents in ")+(s-u)+"ms\nTotal Duration: ".concat(s-l,"ms")),pc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),vl=function(){function e(t,n){p(this,e),this.db=t,this.garbageCollector=new dl(this,n)}return d(e,[{key:"ge",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Ee",value:function(e){var t=0;return this.ye(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ye",value:function(e,t){return this.Te(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return pl(e,n)}},{key:"removeReference",value:function(e,t,n){return pl(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return pl(e,t)}},{key:"Ie",value:function(e,t){return r=t,i=!1,nl(n=e).jt(function(e){return $c(n,e,r).next(function(e){return e&&(i=!0),pc.resolve(!e)})}).next(function(){return i});var n,r,i}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Te(e,function(a,u){if(u<=t){var s=n.Ie(e,a).next(function(t){if(!t)return o++,r.getEntry(e,a).next(function(){return r.removeEntry(a),ul(e).delete([0,Gs(a.path)])})});i.push(s)}}).next(function(){return pc.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return pl(e,t)}},{key:"Te",value:function(e,t){var r,i=ul(e),o=Ro.T;return i.Kt({index:ac.documentTargetsIndex},function(e,i){var a=n(e,2),u=a[0],s=(a[1],i.path),c=i.sequenceNumber;0===u?(o!==Ro.T&&t(new oa(Qs(r)),o),o=c,r=s):o=Ro.T}).next(function(){o!==Ro.T&&t(new oa(Qs(r)),o)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function pl(e,t){return ul(e).put((n=e.currentSequenceNumber,new ac(0,Gs(t.path),n)));var n}var yl=function(){function e(t,n){p(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return d(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){var i,o=c(r);try{for(o.s();!(i=o.n()).done;){var a=n(i.value,2),u=a[0],s=a[1];if(this.equalsFn(u,e))return s}}catch(l){o.e(l)}finally{o.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){qo(this.inner,function(t,r){var i,o=c(r);try{for(o.s();!(i=o.n()).done;){var a=n(i.value,2),u=a[0],s=a[1];e(u,s)}}catch(l){o.e(l)}finally{o.f()}})}},{key:"isEmpty",value:function(){return zo(this.inner)}}]),e}(),gl=function(){function e(){p(this,e),this.changes=new yl(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return d(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Uo.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:_a.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?pc.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ml=function(){function e(t,n){p(this,e),this.N=t,this.Ht=n}return d(e,[{key:"addEntry",value:function(e,t,n){return bl(e).put(_l(t),n)}},{key:"removeEntry",value:function(e,t){var n=bl(e),r=_l(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Ae(e,r)})}},{key:"getEntry",value:function(e,t){var n=this;return bl(e).get(_l(t)).next(function(e){return n.Re(t,e)})}},{key:"be",value:function(e,t){var n=this;return bl(e).get(_l(t)).next(function(e){return{document:n.Re(t,e),size:Jc(e)}})}},{key:"getEntries",value:function(e,t){var n=this,r=Qu();return this.Pe(e,t,function(e,t){var i=n.Re(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"ve",value:function(e,t){var n=this,r=Qu(),i=new Bu(oa.comparator);return this.Pe(e,t,function(e,t){var o=n.Re(e,t);r=r.insert(e,o),i=i.insert(e,Jc(t))}).next(function(){return{documents:r,Ve:i}})}},{key:"Pe",value:function(e,t,n){if(t.isEmpty())return pc.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return bl(e).Kt({range:r},function(e,t,r){for(var a=oa.fromSegments(e);o&&oa.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Mt(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Qu(),o=t.path.length+1,a={};if(n.isEqual(Uo.min())){var u=t.path.toArray();a.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=Dc(n);a.range=IDBKeyRange.lowerBound([s,c],!0),a.index=rc.collectionReadTimeIndex}return bl(e).Kt(a,function(e,n,a){if(e.length===o){var u=Oc(r.N,n);t.path.isPrefixOf(u.key.path)?ru(t,u)&&(i=i.insert(u.key,u)):a.done()}}).next(function(){return i})}},{key:"newChangeBuffer",value:function(e){return new kl(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return wl(e).get(ic.key).next(function(e){return bo(!!e),e})}},{key:"Ae",value:function(e,t){return wl(e).put(ic.key,t)}},{key:"Re",value:function(e,t){if(t){var n=Oc(this.N,t);if(!n.isNoDocument()||!n.version.isEqual(Uo.min()))return n}return _a.newInvalidDocument(e)}}]),e}(),kl=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).Se=e,i.trackRemovals=r,i.De=new yl(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return d(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Gu(function(e,t){return Lo(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(o,a){var u=t.De.get(o);if(a.document.isValidDocument()){var s=Rc(t.Se.N,a.document,t.getReadTime(o));i=i.add(o.path.popLast()),r+=Jc(s)-u,n.push(t.Se.addEntry(e,o,s))}else if(r-=u,t.trackRemovals){var c=Rc(t.Se.N,_a.newNoDocument(o,Uo.min()),t.getReadTime(o));n.push(t.Se.addEntry(e,o,c))}else n.push(t.Se.removeEntry(e,o))}),i.forEach(function(r){n.push(t.Se.Ht.addToCollectionParentIndex(e,r))}),n.push(this.Se.updateMetadata(e,r)),pc.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Se.be(e,t).next(function(e){return n.De.set(t,e.size),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Se.ve(e,t).next(function(e){var t=e.documents;return e.Ve.forEach(function(e,t){n.De.set(e,t)}),t})}}]),n}(gl);function wl(e){return Ec(e,ic.store)}function bl(e){return Ec(e,rc.store)}function _l(e){return e.path.toArray()}var xl=function(){function e(t){p(this,e),this.N=t}return d(e,[{key:"Ct",value:function(e,t,n,r){var i=this;bo(n<r&&n>=0&&r<=11);var o,a=new yc("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(Js.store),(o=e).createObjectStore(Xs.store,{keyPath:Xs.keyPath}),o.createObjectStore($s.store,{keyPath:$s.keyPath,autoIncrement:!0}).createIndex($s.userMutationsIndex,$s.userMutationsKeyPath,{unique:!0}),o.createObjectStore(ec.store),Il(e),function(e){e.createObjectStore(rc.store)}(e));var u=pc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ac.store),e.deleteObjectStore(oc.store),e.deleteObjectStore(uc.store)}(e),Il(e)),u=u.next(function(){return function(e){var t=e.store(uc.store),n=new uc(0,0,Uo.min().toTimestamp(),0);return t.put(uc.key,n)}(a)})),n<4&&r>=4&&(0!==n&&(u=u.next(function(){return function(e,t){return t.store($s.store).Lt().next(function(n){e.deleteObjectStore($s.store),e.createObjectStore($s.store,{keyPath:$s.keyPath,autoIncrement:!0}).createIndex($s.userMutationsIndex,$s.userMutationsKeyPath,{unique:!0});var r=t.store($s.store),i=n.map(function(e){return r.put(e)});return pc.waitFor(i)})}(e,a)})),u=u.next(function(){!function(e){e.createObjectStore(cc.store,{keyPath:cc.keyPath})}(e)})),n<5&&r>=5&&(u=u.next(function(){return i.Ce(a)})),n<6&&r>=6&&(u=u.next(function(){return function(e){e.createObjectStore(ic.store)}(e),i.Ne(a)})),n<7&&r>=7&&(u=u.next(function(){return i.xe(a)})),n<8&&r>=8&&(u=u.next(function(){return i.ke(e,a)})),n<9&&r>=9&&(u=u.next(function(){(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){var t=e.objectStore(rc.store);t.createIndex(rc.readTimeIndex,rc.readTimeIndexPath,{unique:!1}),t.createIndex(rc.collectionReadTimeIndex,rc.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(u=u.next(function(){return i.$e(a)})),n<11&&r>=11&&(u=u.next(function(){(function(e){e.createObjectStore(lc.store,{keyPath:lc.keyPath})})(e),function(e){e.createObjectStore(hc.store,{keyPath:hc.keyPath})}(e)})),u}},{key:"Ne",value:function(e){var t=0;return e.store(rc.store).Kt(function(e,n){t+=Jc(n)}).next(function(){var n=new ic(t);return e.store(ic.store).put(ic.key,n)})}},{key:"Ce",value:function(e){var t=this,n=e.store(Xs.store),r=e.store($s.store);return n.Lt().next(function(n){return pc.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Lt($s.userMutationsIndex,i).next(function(r){return pc.forEach(r,function(r){bo(r.userId===n.userId);var i=Fc(t.N,r);return Yc(e,n.userId,i).next(function(){})})})})})}},{key:"xe",value:function(e){var t=e.store(ac.store),n=e.store(rc.store);return e.store(uc.store).get(uc.key).next(function(e){var r=[];return n.Kt(function(n,i){var o=new Ho(n),a=[0,Gs(o)];r.push(t.get(a).next(function(n){return n?pc.resolve():t.put(new ac(0,Gs(o),e.highestListenSequenceNumber))}))}).next(function(){return pc.waitFor(r)})})}},{key:"ke",value:function(e,t){e.createObjectStore(sc.store,{keyPath:sc.keyPath});var r=t.store(sc.store),i=new Zc,o=function(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Gs(n)})}};return t.store(rc.store).Kt({qt:!0},function(e,t){var n=new Ho(e);return o(n.popLast())}).next(function(){return t.store(ec.store).Kt({qt:!0},function(e,t){var r=n(e,3),i=(r[0],r[1]),a=(r[2],Qs(i));return o(a.popLast())})})}},{key:"$e",value:function(e){var t=this,n=e.store(oc.store);return n.Kt(function(e,r){var i=Vc(r),o=Uc(t.N,i);return n.put(o)})}}]),e}();function Il(e){e.createObjectStore(ac.store,{keyPath:ac.keyPath}).createIndex(ac.documentTargetsIndex,ac.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(oc.store,{keyPath:oc.keyPath}).createIndex(oc.queryTargetsIndexName,oc.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(uc.store)}var Tl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",El=function(){function t(e,n,r,i,o,a,u,s,c,l){if(p(this,t),this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Oe=o,this.window=a,this.document=u,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(e){return Promise.resolve()},!t.bt())throw new Io(xo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vl(this,i),this.We=n+"main",this.N=new Nc(s),this.Ge=new gc(this.We,11,new xl(this.N)),this.ze=new il(this.referenceDelegate,this.N),this.Ht=new Gc,this.He=new ml(this.N,this.Ht),this.Je=new qc,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&go("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return d(t,[{key:"start",value:function(){var e=this;return this.Xe().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Io(xo.FAILED_PRECONDITION,Tl);return e.Ze(),e.tn(),e.en(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ze.getHighestSequenceNumber(t)})}).then(function(t){e.Le=new Ro(t,e.Fe)}).then(function(){e.Be=!0}).catch(function(t){return e.Ge&&e.Ge.close(),Promise.reject(t)})}},{key:"nn",value:function(t){var n,r=this;return this.Qe=(n=(0,Xe.Z)(e().mark(function n(i){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.started){e.next=2;break}return e.abrupt("return",t(i));case 2:case"end":return e.stop()}},n)})),function(e){return n.apply(this,arguments)}),t(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(t){var n;this.Ge.xt((n=(0,Xe.Z)(e().mark(function n(r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null===r.newVersion,!e.t0){e.next=4;break}return e.next=4,t();case 4:case"end":return e.stop()}},n)})),function(e){return n.apply(this,arguments)}))}},{key:"setNetworkEnabled",value:function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget((0,Xe.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.started,!e.t0){e.next=4;break}return e.next=4,n.Xe();case 4:case"end":return e.stop()}},t)}))))}},{key:"Xe",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return Cl(t).put(new cc(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.sn(t).next(function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable(function(){return e.Qe(!1)}))})}).next(function(){return e.rn(t)}).next(function(n){return e.isPrimary&&!n?e.on(t).next(function(){return!1}):!!n&&e.an(t).next(function(){return!0})})}).catch(function(t){if(wc(t))return yo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return yo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable(function(){return e.Qe(t)}),e.isPrimary=t})}},{key:"sn",value:function(e){var t=this;return Sl(e).get(Js.key).next(function(e){return pc.resolve(t.cn(e))})}},{key:"un",value:function(e){return Cl(e).delete(this.clientId)}},{key:"hn",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r,i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isPrimary||t.ln(t.je,18e5)){e.next=6;break}return t.je=Date.now(),e.next=4,t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var n=Ec(e,cc.store);return n.Lt().next(function(e){var r=t.fn(e,18e5),i=e.filter(function(e){return-1===r.indexOf(e)});return pc.forEach(i,function(e){return n.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]});case 4:if(r=e.sent,t.Ye){i=c(r);try{for(i.s();!(o=i.n()).done;)a=o.value,t.Ye.removeItem(t.dn(a.clientId))}catch(n){i.e(n)}finally{i.f()}}case 6:case"end":return e.stop()}},n)}))()}},{key:"en",value:function(){var e=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.Xe().then(function(){return e.hn()}).then(function(){return e.en()})})}},{key:"cn",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"rn",value:function(e){var t=this;return this.Me?pc.resolve(!0):Sl(e).get(Js.key).next(function(n){if(null!==n&&t.ln(n.leaseTimestampMs,5e3)&&!t.wn(n.ownerId)){if(t.cn(n)&&t.networkEnabled)return!0;if(!t.cn(n)){if(!n.allowTabSynchronization)throw new Io(xo.FAILED_PRECONDITION,Tl);return!1}}return!(!t.networkEnabled||!t.inForeground)||Cl(e).Lt().next(function(e){return void 0===t.fn(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(!t.networkEnabled&&e.networkEnabled||n&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&yo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.Be=!1,t._n(),t.Ke&&(t.Ke.cancel(),t.Ke=null),t.mn(),t.gn(),e.next=7,t.Ge.runTransaction("shutdown","readwrite",[Js.store,cc.store],function(e){var n=new Tc(e,Ro.T);return t.on(n).next(function(){return t.un(n)})});case 7:t.Ge.close(),t.yn();case 9:case"end":return e.stop()}},n)}))()}},{key:"fn",value:function(e,t){var n=this;return e.filter(function(e){return n.ln(e.updateTimeMs,t)&&!n.wn(e.clientId)})}},{key:"pn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return Cl(t).Lt().next(function(t){return e.fn(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(e){return Xc.Yt(e,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r,i=this;return yo("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",fc,function(o){return r=new Tc(o,i.Le?i.Le.next():Ro.T),"readwrite-primary"===t?i.sn(r).next(function(e){return!!e||i.rn(r)}).next(function(t){if(!t)throw go("Failed to obtain primary lease for action '".concat(e,"'.")),i.isPrimary=!1,i.Oe.enqueueRetryable(function(){return i.Qe(!1)}),new Io(xo.FAILED_PRECONDITION,dc);return n(r)}).next(function(e){return i.an(r).next(function(){return e})}):i.En(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})}},{key:"En",value:function(e){var t=this;return Sl(e).get(Js.key).next(function(e){if(null!==e&&t.ln(e.leaseTimestampMs,5e3)&&!t.wn(e.ownerId)&&!t.cn(e)&&!(t.Me||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Io(xo.FAILED_PRECONDITION,Tl)})}},{key:"an",value:function(e){var t=new Js(this.clientId,this.allowTabSynchronization,Date.now());return Sl(e).put(Js.key,t)}},{key:"on",value:function(e){var t=this,n=Sl(e);return n.get(Js.key).next(function(e){return t.cn(e)?(yo("IndexedDbPersistence","Releasing primary lease."),n.delete(Js.key)):pc.resolve()})}},{key:"ln",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(go("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"Ze",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Oe.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.Xe()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=function(){t._n(),(0,nt.G6)()&&navigator.appVersion.match("Version/14")&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(e){var t;try{var n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return yo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(n){return go("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){go("Failed to set zombie client id.",e)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}},{key:"dn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return gc.bt()}}]),t}();function Sl(e){return Ec(e,Js.store)}function Cl(e){return Ec(e,cc.store)}function Al(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Nl=d(function e(t,n){p(this,e),this.progress=t,this.Tn=n}),Ol=function(){function e(t,n,r){p(this,e),this.He=t,this.In=n,this.Ht=r}return d(e,[{key:"An",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Rn(e,t,r)})}},{key:"Rn",value:function(e,t,n){return this.He.getEntry(e,t).next(function(e){var t,r=c(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"bn",value:function(e,t){e.forEach(function(e,n){var r,i=c(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(o){i.e(o)}finally{i.f()}})}},{key:"Pn",value:function(e,t){var n=this;return this.He.getEntries(e,t).next(function(t){return n.vn(e,t).next(function(){return t})})}},{key:"vn",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.bn(t,e)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return oa.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Vn(e,t.path):Ya(t)?this.Sn(e,t,n):this.Dn(e,t,n);var r}},{key:"Vn",value:function(e,t){return this.An(e,new oa(t)).next(function(e){var t=Ju();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Sn",value:function(e,t,n){var r=this,i=t.collectionGroup,o=Ju();return this.Ht.getCollectionParents(e,i).next(function(a){return pc.forEach(a,function(a){var u,s,c=(u=t,s=a.child(i),new Ba(s,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));return r.Dn(e,c,n).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})}},{key:"Dn",value:function(e,t,n){var r,i,o=this;return this.He.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,o.In.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,o.Cn(e,i,r).next(function(e){r=e;var t,n=c(i);try{for(n.s();!(t=n.n()).done;){var o,a=t.value,u=c(a.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=s.key,h=r.get(l);null==h&&(h=_a.newInvalidDocument(l),r=r.insert(l,h)),Su(s,h,a.localWriteTime),h.isFoundDocument()||(r=r.remove(l))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}})}).next(function(){return r.forEach(function(e,n){ru(t,n)||(r=r.remove(e))}),r})}},{key:"Cn",value:function(e,t,n){var r,i=ts(),o=c(t);try{for(o.s();!(r=o.n()).done;){var a,u=c(r.value.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value;s instanceof Ru&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(h){u.e(h)}finally{u.f()}}}catch(h){o.e(h)}finally{o.f()}var l=n;return this.He.getEntries(e,i).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))}),l})}}]),e}(),Rl=function(){function e(t,n,r,i){p(this,e),this.targetId=t,this.fromCache=n,this.Nn=r,this.xn=i}return d(e,null,[{key:"kn",value:function(t,n){var r,i=ts(),o=ts(),a=c(n.docChanges);try{for(a.s();!(r=a.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}}}catch(s){a.e(s)}finally{a.f()}return new e(t,n.fromCache,i,o)}}]),e}(),Dl=function(){function e(){p(this,e)}return d(e,[{key:"$n",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i,o=this;return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Uo.min())?this.Fn(e,t):this.On.Pn(e,r).next(function(i){var a=o.Mn(t,i);return(Ga(t)||Wa(t))&&o.Ln(t.limitType,a,r,n)?o.Fn(e,t):(po()<=tt.in.DEBUG&&yo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),nu(t)),o.On.getDocumentsMatchingQuery(e,t,n).next(function(e){return a.forEach(function(t){e=e.insert(t.key,t)}),e}))})}},{key:"Mn",value:function(e,t){var n=new Gu(iu(e));return t.forEach(function(t,r){ru(e,r)&&(n=n.add(r))}),n}},{key:"Ln",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return po()<=tt.in.DEBUG&&yo("QueryEngine","Using full collection scan to execute query:",nu(t)),this.On.getDocumentsMatchingQuery(e,t,Uo.min())}}]),e}(),Pl=function(){function e(t,n,r,i){p(this,e),this.persistence=t,this.Bn=n,this.N=i,this.Un=new Bu(Lo),this.qn=new yl(function(e){return Ta(e)},Ea),this.Kn=Uo.min(),this.In=t.getMutationQueue(r),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new Ol(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}return d(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.Un)})}}]),e}();function Ll(e,t,n,r){return new Pl(e,t,n,r)}function Ml(e,t){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(n),o=i.In,a=i.Qn,e.next=4,i.persistence.runTransaction("Handle user change","readonly",function(e){var t;return i.In.getAllMutationBatches(e).next(function(n){return t=n,o=i.persistence.getMutationQueue(r),a=new Ol(i.jn,o,i.persistence.getIndexManager()),o.getAllMutationBatches(e)}).next(function(n){var r,i=[],o=[],u=ts(),s=c(t);try{for(s.s();!(r=s.n()).done;){var l=r.value;i.push(l.batchId);var h,f=c(l.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;u=u.add(d.key)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){s.e(w)}finally{s.f()}var v,p=c(n);try{for(p.s();!(v=p.n()).done;){var y=v.value;o.push(y.batchId);var g,m=c(y.mutations);try{for(m.s();!(g=m.n()).done;){var k=g.value;u=u.add(k.key)}}catch(w){m.e(w)}finally{m.f()}}}catch(w){p.e(w)}finally{p.f()}return a.Pn(e,u).next(function(e){return{Wn:e,removedBatchIds:i,addedBatchIds:o}})})});case 4:return u=e.sent,e.abrupt("return",(i.In=o,i.Qn=a,i.Bn.$n(i.Qn),u));case 6:case"end":return e.stop()}},t)})),Fl.apply(this,arguments)}function Vl(e,t){var n=_o(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r,i,o,a,u,s,c,l=t.batch.keys(),h=n.jn.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,o=t,a=h,u=o.batch,s=u.keys(),c=pc.resolve(),s.forEach(function(e){c=c.next(function(){return a.getEntry(i,e)}).next(function(t){var n=o.docVersions.get(e);bo(null!==n),t.version.compareTo(n)<0&&(u.applyToRemoteDocument(t,o),t.isValidDocument()&&a.addEntry(t,o.commitVersion))})}),c.next(function(){return r.In.removeMutationBatch(i,u)})).next(function(){return h.apply(e)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,l)})})}function Ul(e){var t=_o(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.ze.getLastRemoteSnapshotVersion(e)})}function jl(e,t){var n=_o(e),r=t.snapshotVersion,i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var o=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;var a=[];t.targetChanges.forEach(function(t,o){var u=i.get(o);if(u){a.push(n.ze.removeMatchingKeys(e,t.removedDocuments,o).next(function(){return n.ze.addMatchingKeys(e,t.addedDocuments,o)}));var s,c,l,h=t.resumeToken;if(h.approximateByteSize()>0){var f=u.withResumeToken(h,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,f),s=u,l=t,bo((c=f).resumeToken.approximateByteSize()>0),(0===s.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-s.snapshotVersion.toMicroseconds()>=3e8||l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0)&&a.push(n.ze.updateTargetData(e,f))}}});var u=Qu();if(t.documentUpdates.forEach(function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(ql(e,o,t.documentUpdates,r,void 0).next(function(e){u=e})),!r.isEqual(Uo.min())){var s=n.ze.getLastRemoteSnapshotVersion(e).next(function(t){return n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)});a.push(s)}return pc.waitFor(a).next(function(){return o.apply(e)}).next(function(){return n.Qn.vn(e,u)}).next(function(){return u})}).then(function(e){return n.Un=i,e})}function ql(e,t,n,r,i){var o=ts();return n.forEach(function(e){return o=o.add(e)}),t.getEntries(e,o).next(function(e){var o=Qu();return n.forEach(function(n,a){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Uo.min())?(t.removeEntry(n,s),o=o.insert(n,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||0===a.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(a,s),o=o.insert(n,a)):yo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",a.version)}),o})}function zl(e,t){var n=_o(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)})}function Bl(e,t){var n=_o(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.ze.getTargetData(e,t).next(function(i){return i?(r=i,pc.resolve(r)):n.ze.allocateTargetId(e).next(function(i){return r=new Ac(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function Hl(e,t,n){return Zl.apply(this,arguments)}function Zl(){return Zl=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=_o(n),a=o.Un.get(r),u=i?"readwrite":"readwrite-primary",e.prev=1,e.t0=i,e.t0){e.next=6;break}return e.next=6,o.persistence.runTransaction("Release target",u,function(e){return o.persistence.referenceDelegate.removeTarget(e,a)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),wc(e.t1)){e.next=12;break}throw e.t1;case 12:yo("LocalStore","Failed to update sequence numbers for target ".concat(r,": ").concat(e.t1));case 13:o.Un=o.Un.remove(r),o.qn.delete(a.target);case 14:case"end":return e.stop()}},t,null,[[1,8]])})),Zl.apply(this,arguments)}function Gl(e,t,n){var r=_o(e),i=Uo.min(),o=ts();return r.persistence.runTransaction("Execute query","readonly",function(e){return(a=r,u=e,s=Xa(t),c=_o(a),l=c.qn.get(s),void 0!==l?pc.resolve(c.Un.get(l)):c.ze.getTargetData(u,s)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(function(e){o=e})}).next(function(){return r.Bn.getDocumentsMatchingQuery(e,t,n?i:Uo.min(),n?o:ts())}).next(function(e){return{documents:e,Gn:o}});var a,u,s,c,l})}function Wl(e,t){var n=_o(e),r=_o(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Et(e,t).next(function(e){return e?e.target:null})})}function Kl(e){var t=_o(e);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return n=t.jn,r=e,i=t.Kn,o=_o(n),a=Qu(),u=Dc(i),s=bl(r),c=IDBKeyRange.lowerBound(u,!0),s.Kt({index:rc.readTimeIndex,range:c},function(e,t){var n=Oc(o.N,t);a=a.insert(n.key,n),u=t.readTime}).next(function(){return{Tn:a,readTime:Pc(u)}});var n,r,i,o,a,u,s,c}).then(function(e){var n=e.Tn,r=e.readTime;return t.Kn=r,n})}function Ql(){return Ql=(0,Xe.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(n),e.abrupt("return",r.persistence.runTransaction("Synchronize last document change read time","readonly",function(e){return t=bl(e),n=Uo.min(),t.Kt({index:rc.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=Pc(t.readTime)),r.done()}).next(function(){return n});var t,n}).then(function(e){r.Kn=e}));case 2:case"end":return e.stop()}},t)})),Ql.apply(this,arguments)}function Yl(){return Yl=(0,Xe.Z)(e().mark(function t(n,r,i,o){var a,u,s,l,h,f,d,v,p,y,g;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=_o(n),u=ts(),s=Qu(),l=$u(),h=c(i);try{for(h.s();!(f=h.n()).done;)d=f.value,v=r.zn(d.metadata.name),d.document&&(u=u.add(v)),s=s.insert(v,r.Hn(d)),l=l.insert(v,r.Jn(d.metadata.readTime))}catch(t){h.e(t)}finally{h.f()}return p=a.jn.newChangeBuffer({trackRemovals:!0}),e.next=7,Bl(a,(g=o,Xa(Za(Ho.fromString("__bundle__/docs/".concat(g))))));case 7:return y=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return ql(e,p,s,Uo.min(),l).next(function(t){return p.apply(e),t}).next(function(t){return a.ze.removeMatchingKeysForTargetId(e,y.targetId).next(function(){return a.ze.addMatchingKeys(e,u,y.targetId)}).next(function(){return a.Qn.vn(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},t)})),Yl.apply(this,arguments)}function Jl(e,t){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,Xe.Z)(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ts();return e().mark(function i(){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bl(t,Xa(jc(n.bundledQuery)));case 2:return o=e.sent,a=_o(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",function(e){var t=ks(n.readTime);if(o.snapshotVersion.compareTo(t)>=0)return a.Je.saveNamedQuery(e,n);var i=o.withResumeToken(Ko.EMPTY_BYTE_STRING,t);return a.Un=a.Un.insert(i.targetId,i),a.ze.updateTargetData(e,i).next(function(){return a.ze.removeMatchingKeysForTargetId(e,o.targetId)}).next(function(){return a.ze.addMatchingKeys(e,r,o.targetId)}).next(function(){return a.Je.saveNamedQuery(e,n)})}));case 5:case"end":return e.stop()}},i)})()}),Xl.apply(this,arguments)}var $l=function(){function e(t){p(this,e),this.N=t,this.Yn=new Map,this.Xn=new Map}return d(e,[{key:"getBundleMetadata",value:function(e,t){return pc.resolve(this.Yn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:ks(n.createTime)}),pc.resolve()}},{key:"getNamedQuery",value:function(e,t){return pc.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,{name:(n=t).name,query:jc(n.bundledQuery),readTime:ks(n.readTime)}),pc.resolve();var n}}]),e}(),eh=function(){function e(){p(this,e),this.Zn=new Gu(th.ts),this.es=new Gu(th.ns)}return d(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new th(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.rs(new th(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"cs",value:function(e){var t=this,n=new oa(new Ho([])),r=new th(n,e),i=new th(n,e+1),o=[];return this.es.forEachInRange([r,i],function(e){t.rs(e),o.push(e.key)}),o}},{key:"us",value:function(){var e=this;this.Zn.forEach(function(t){return e.rs(t)})}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new oa(new Ho([])),n=new th(t,e),r=new th(t,e+1),i=ts();return this.es.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new th(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),th=function(){function e(t,n){p(this,e),this.key=t,this.ls=n}return d(e,null,[{key:"ts",value:function(e,t){return oa.comparator(e.key,t.key)||Lo(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Lo(e.ls,t.ls)||oa.comparator(e.key,t.key)}}]),e}(),nh=function(){function e(t,n){p(this,e),this.Ht=t,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new Gu(th.ts)}return d(e,[{key:"checkEmpty",value:function(e){return pc.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++;var o=new Sc(i,t,n,r);this.In.push(o);var a,u=c(r);try{for(u.s();!(a=u.n()).done;){var s=a.value;this.ds=this.ds.add(new th(s.key,i)),this.Ht.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return pc.resolve(o)}},{key:"lookupMutationBatch",value:function(e,t){return pc.resolve(this.ws(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this._s(t+1),r=n<0?0:n;return pc.resolve(this.In.length>r?this.In[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return pc.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return pc.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new th(t,0),i=new th(t,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],function(e){var t=n.ws(e.ls);o.push(t)}),pc.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Gu(Lo);return t.forEach(function(e){var t=new th(e,0),i=new th(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],function(e){r=r.add(e.ls)})}),pc.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;oa.isDocumentKey(i)||(i=i.child(""));var o=new th(new oa(i),0),a=new Gu(Lo);return this.ds.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ls)),!0)},o),pc.resolve(this.gs(a))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.ws(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;bo(0===this.ys(t.batchId,"removed")),this.In.shift();var r=this.ds;return pc.forEach(t.mutations,function(i){var o=new th(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.ds=r})}},{key:"te",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new th(t,0),r=this.ds.firstAfterOrEqual(n);return pc.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return pc.resolve()}},{key:"ys",value:function(e,t){return this._s(e)}},{key:"_s",value:function(e){return 0===this.In.length?0:e-this.In[0].batchId}},{key:"ws",value:function(e){var t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}]),e}(),rh=function(){function e(t,n){p(this,e),this.Ht=t,this.ps=n,this.docs=new Bu(oa.comparator),this.size=0}return d(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return pc.resolve(n?n.document.clone():_a.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Qu();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():_a.newInvalidDocument(e))}),pc.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Qu(),i=new oa(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),u=a.key,s=a.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||ru(t,c)&&(r=r.insert(c.key,c.clone()))}return pc.resolve(r)}},{key:"Es",value:function(e,t){return pc.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new ih(this)}},{key:"getSize",value:function(e){return pc.resolve(this.size)}}]),e}(),ih=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).Se=e,r}return d(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.Se.addEntry(e,i.document,t.getReadTime(r))):t.Se.removeEntry(r)}),pc.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Se.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Se.getEntries(e,t)}}]),n}(gl),oh=function(){function e(t){p(this,e),this.persistence=t,this.Ts=new yl(function(e){return Ta(e)},Ea),this.lastRemoteSnapshotVersion=Uo.min(),this.highestTargetId=0,this.Is=0,this.As=new eh,this.targetCount=0,this.Rs=rl.se()}return d(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach(function(e,n){return t(n)}),pc.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return pc.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return pc.resolve(this.Is)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),pc.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),pc.resolve()}},{key:"ae",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,pc.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),pc.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,pc.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return this.Ts.forEach(function(a,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(a),o.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),pc.waitFor(o).next(function(){return i})}},{key:"getTargetCount",value:function(e){return pc.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return pc.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),pc.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),pc.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.cs(t),pc.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return pc.resolve(n)}},{key:"containsKey",value:function(e,t){return pc.resolve(this.As.containsKey(t))}}]),e}(),ah=function(){function e(t,n){var r=this;p(this,e),this.bs={},this.Le=new Ro(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new oh(this),this.Ht=new Hc,this.He=new rh(this.Ht,function(e){return r.referenceDelegate.Ps(e)}),this.N=new Nc(n),this.Je=new $l(this.N)}return d(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new nh(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;yo("MemoryPersistence","Starting transaction:",e);var i=new uh(this.Le.next());return this.referenceDelegate.vs(),n(i).next(function(e){return r.referenceDelegate.Vs(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Ss",value:function(e,t){return pc.or(Object.values(this.bs).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),uh=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return d(n)}(vc),sh=function(){function e(t){p(this,e),this.persistence=t,this.Ds=new eh,this.Cs=null}return d(e,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw wo()}},{key:"addReference",value:function(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),pc.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),pc.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),pc.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ds.cs(t.targetId).forEach(function(e){return n.xs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.xs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pc.forEach(this.xs,function(r){var i=oa.fromPath(r);return t.ks(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Cs=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.ks(e,t).next(function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())})}},{key:"Ps",value:function(e){return 0}},{key:"ks",value:function(e,t){var n=this;return pc.or([function(){return pc.resolve(n.Ds.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ss(e,t)}])}}],[{key:"Ns",value:function(t){return new e(t)}}]),e}();function ch(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function lh(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function hh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var fh=function(){function e(t,n,r,i){p(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return d(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&((a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Io(o.error.code,o.error.message))),a?new e(t,n,o.state,i):(go("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),dh=function(){function e(t,n,r){p(this,e),this.targetId=t,this.state=n,this.error=r}return d(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Io(i.error.code,i.error.message))),o?new e(t,i.state,r):(go("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),vh=function(){function e(t,n){p(this,e),this.clientId=t,this.activeTargetIds=n}return d(e,null,[{key:"$s",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=rs(),a=0;i&&a<r.activeTargetIds.length;++a)i=ia(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(go("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ph=function(){function e(t,n){p(this,e),this.clientId=t,this.onlineState=n}return d(e,null,[{key:"$s",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(go("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),yh=function(){function e(){p(this,e),this.activeTargetIds=rs()}return d(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),gh=function(){function t(e,n,r,i,o){p(this,t),this.window=e,this.Oe=n,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Bu(Lo),this.started=!1,this.Ks=[];var a,u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.js=ch(this.persistenceKey,this.Ls),this.Qs="firestore_sequence_number_".concat(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new yh),this.Ws=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.Hs="firestore_online_state_".concat(this.persistenceKey),this.Js=(a=this.persistenceKey,"firestore_bundle_loaded_".concat(a)),this.window.addEventListener("storage",this.Bs)}return d(t,[{key:"start",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r,i,o,a,u,s,l,h,f,d,v;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.syncEngine.pn();case 2:r=e.sent,i=c(r),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=14;break}if((a=o.value)!==t.Ls){e.next=10;break}return e.abrupt("continue",12);case 10:(u=t.getItem(ch(t.persistenceKey,a)))&&(s=vh.$s(a,u))&&(t.qs=t.qs.insert(s.clientId,s));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:t.Ys(),(l=t.storage.getItem(t.Hs))&&(h=t.Xs(l))&&t.Zs(h),f=c(t.Ks);try{for(f.s();!(d=f.n()).done;)v=d.value,t.Us(v)}catch(n){f.e(n)}finally{f.f()}t.Ks=[],t.window.addEventListener("pagehide",function(){return t.shutdown()}),t.started=!0;case 28:case"end":return e.stop()}},n,null,[[4,16,19,22]])}))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Qs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.ei(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ei(e,t,n),this.ni(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(hh(this.persistenceKey,e));if(n){var r=dh.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}},{key:"removeLocalQueryTarget",value:function(e){this.si.Ms(e),this.Ys()}},{key:"isLocalQueryTarget",value:function(e){return this.si.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(hh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ii(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.ni(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.ri(e)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return yo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){yo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){yo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Us",value:function(t){var n=this,r=t;if(r.storageArea===this.storage){if(yo("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void go("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Xe.Z)(e().mark(function t(){var i,o,a,u,s,c;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.started){e.next=41;break}if(null===r.key){e.next=39;break}if(!n.Ws.test(r.key)){e.next=11;break}if(null!=r.newValue){e.next=6;break}return i=n.ai(r.key),e.abrupt("return",n.ci(i,null));case 6:if(!(o=n.ui(r.key,r.newValue))){e.next=9;break}return e.abrupt("return",n.ci(o.clientId,o));case 9:e.next=39;break;case 11:if(!n.Gs.test(r.key)){e.next=18;break}if(null===r.newValue){e.next=16;break}if(!(a=n.hi(r.key,r.newValue))){e.next=16;break}return e.abrupt("return",n.li(a));case 16:e.next=39;break;case 18:if(!n.zs.test(r.key)){e.next=25;break}if(null===r.newValue){e.next=23;break}if(!(u=n.fi(r.key,r.newValue))){e.next=23;break}return e.abrupt("return",n.di(u));case 23:e.next=39;break;case 25:if(r.key!==n.Hs){e.next=32;break}if(null===r.newValue){e.next=30;break}if(!(s=n.Xs(r.newValue))){e.next=30;break}return e.abrupt("return",n.Zs(s));case 30:e.next=39;break;case 32:if(r.key!==n.Qs){e.next=37;break}(c=function(e){var t=Ro.T;if(null!=e)try{var n=JSON.parse(e);bo("number"==typeof n),t=n}catch(n){go("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(r.newValue))!==Ro.T&&n.sequenceNumberHandler(c),e.next=39;break;case 37:if(r.key!==n.Js){e.next=39;break}return e.abrupt("return",n.syncEngine.wi());case 39:e.next=42;break;case 41:n.Ks.push(r);case 42:case"end":return e.stop()}},t)})))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(e,t,n){var r=new fh(this.currentUser,e,t,n),i=lh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"ni",value:function(e){var t=lh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"ri",value:function(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}},{key:"ii",value:function(e,t,n){var r=hh(this.persistenceKey,e),i=new dh(e,t,n);this.setItem(r,i.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ai",value:function(e){var t=this.Ws.exec(e);return t?t[1]:null}},{key:"ui",value:function(e,t){var n=this.ai(e);return vh.$s(n,t)}},{key:"hi",value:function(e,t){var n=this.Gs.exec(e),r=Number(n[1]);return fh.$s(new ho(void 0!==n[2]?n[2]:null),r,t)}},{key:"fi",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]);return dh.$s(r,t)}},{key:"Xs",value:function(e){return ph.$s(e)}},{key:"li",value:function(t){var n=this;return(0,Xe.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==n.currentUser.uid){e.next=2;break}return e.abrupt("return",n.syncEngine._i(t.batchId,t.state,t.error));case 2:yo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}},r)}))()}},{key:"di",value:function(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}},{key:"ci",value:function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),o=this.ti(r),a=[],u=[];return o.forEach(function(e){i.has(e)||a.push(e)}),i.forEach(function(e){o.has(e)||u.push(e)}),this.syncEngine.gi(a,u).then(function(){n.qs=r})}},{key:"Zs",value:function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ti",value:function(e){var t=rs();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),t}(),mh=function(){function e(){p(this,e),this.yi=new yh,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return d(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.yi.Fs(e),this.pi[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.pi[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.yi.Ms(e)}},{key:"isLocalQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.pi[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.yi=new yh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),kh=function(){function e(){p(this,e)}return d(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),wh=function(){function e(){var t=this;p(this,e),this.Ti=function(){return t.Ii()},this.Ai=function(){return t.Ri()},this.bi=[],this.Pi()}return d(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){yo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=c(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ri",value:function(){yo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=c(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},_h=function(){function e(t){p(this,e),this.vi=t.vi,this.Vi=t.Vi}return d(e,[{key:"Si",value:function(e){this.Di=e}},{key:"Ci",value:function(e){this.Ni=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(e){this.vi(e)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(e){this.Ni(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),xh=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return d(n,[{key:"qi",value:function(e,t,n,r){return new Promise(function(i,o){var a=new lo;a.listenOnce(ao.COMPLETE,function(){try{switch(a.getLastErrorCode()){case oo.NO_ERROR:var t=a.getResponseJson();yo("Connection","XHR received:",JSON.stringify(t)),i(t);break;case oo.TIMEOUT:yo("Connection",'RPC "'+e+'" timed out'),o(new Io(xo.DEADLINE_EXCEEDED,"Request time out"));break;case oo.HTTP_ERROR:var n=a.getStatus();if(yo("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=(s=r.status,c=s.toLowerCase().replace(/_/g,"-"),Object.values(xo).indexOf(c)>=0?c:xo.UNKNOWN);o(new Io(u,r.message))}else o(new Io(xo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Io(xo.UNAVAILABLE,"Connection failed."));break;default:wo()}}finally{yo("Connection",'RPC "'+e+'" completed.')}var s,c});var u=JSON.stringify(r);a.send(t,"POST",u,n,15)})}},{key:"ji",value:function(e,t){var n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new eo,i=Kn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new so({})),this.Ui(o.initMessageHeaders,t),(0,nt.uI)()||(0,nt.b$)()||(0,nt.d)()||(0,nt.w1)()||(0,nt.Mn)()||(0,nt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");yo("Connection","Creating WebChannel: "+a,o);var u=r.createWebChannel(a,o),s=!1,c=!1,l=new _h({vi:function(e){c?yo("Connection","Not sending because WebChannel is closed:",e):(s||(yo("Connection","Opening WebChannel transport."),u.open(),s=!0),yo("Connection","WebChannel sending:",e),u.send(e))},Vi:function(){return u.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(t){setTimeout(function(){throw t},0)}})};return h(u,co.EventType.OPEN,function(){c||yo("Connection","WebChannel transport opened.")}),h(u,co.EventType.CLOSE,function(){c||(c=!0,yo("Connection","WebChannel transport closed"),l.$i())}),h(u,co.EventType.ERROR,function(e){c||(c=!0,mo("Connection","WebChannel transport errored:",e),l.$i(new Io(xo.UNAVAILABLE,"The operation could not be completed")))}),h(u,co.EventType.MESSAGE,function(e){var t;if(!c){var n=e.data[0];bo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){yo("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=Mu[e];if(void 0!==t)return zu(t)}(o),s=i.message;void 0===a&&(a=xo.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),c=!0,l.$i(new Io(a,s)),u.close()}else yo("Connection","WebChannel received:",n),l.Oi(n)}}),h(i,uo.STAT_EVENT,function(e){10===e.stat?yo("Connection","Detected buffering proxy"):11===e.stat&&yo("Connection","Detected no buffering proxy")}),setTimeout(function(){l.ki()},0),l}}]),n}(function(){function e(t){p(this,e),this.databaseInfo=t,this.databaseId=t.databaseId,this.Fi=(t.ssl?"https":"http")+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return d(e,[{key:"Li",value:function(e,t,n,r){var i=this.Bi(e,t);yo("RestConnection","Sending: ",i,n);var o={};return this.Ui(o,r),this.qi(e,i,o,n).then(function(e){return yo("RestConnection","Received: ",e),e},function(t){throw mo("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t})}},{key:"Ki",value:function(e,t,n,r){return this.Li(e,t,n,r)}},{key:"Ui",value:function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+fo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}},{key:"Bi",value:function(e,t){return"".concat(this.Fi,"/v1/").concat(t,":").concat(bh[e])}}]),e}());function Ih(){return"undefined"!=typeof window?window:null}function Th(){return"undefined"!=typeof document?document:null}function Eh(e){return new ps(e,!0)}var Sh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;p(this,e),this.Oe=t,this.timerId=n,this.Qi=r,this.Wi=i,this.Gi=o,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return d(e,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,n-r);i>0&&yo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,function(){return t.Ji=Date.now(),e()}),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),e}(),Ch=function(){function t(e,n,r,i,o,a){p(this,t),this.Oe=e,this.er=r,this.nr=i,this.credentialsProvider=o,this.listener=a,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Sh(e,n)}return d(t,[{key:"ar",value:function(){return 1===this.state||2===this.state||4===this.state}},{key:"cr",value:function(){return 2===this.state}},{key:"start",value:function(){3!==this.state?this.auth():this.ur()}},{key:"stop",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.ar(),!e.t0){e.next=4;break}return e.next=4,t.close(0);case 4:case"end":return e.stop()}},n)}))()}},{key:"hr",value:function(){this.state=0,this.rr.reset()}},{key:"lr",value:function(){var e=this;this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,function(){return e.dr()}))}},{key:"wr",value:function(e){this._r(),this.stream.send(e)}},{key:"dr",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.cr()){e.next=2;break}return e.abrupt("return",t.close(0));case 2:case"end":return e.stop()}},n)}))()}},{key:"_r",value:function(){this.ir&&(this.ir.cancel(),this.ir=null)}},{key:"close",value:function(t,n){var r=this;return(0,Xe.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r._r(),r.rr.cancel(),r.sr++,3!==t?r.rr.reset():n&&n.code===xo.RESOURCE_EXHAUSTED?(go(n.toString()),go("Using maximum backoff delay to prevent overloading the backend."),r.rr.Yi()):n&&n.code===xo.UNAUTHENTICATED&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.mr(),r.stream.close(),r.stream=null),r.state=t,e.next=8,r.listener.Ci(n);case 8:case"end":return e.stop()}},i)}))()}},{key:"mr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.gr(this.sr),n=this.sr;this.credentialsProvider.getToken().then(function(t){e.sr===n&&e.yr(t)},function(n){t(function(){var t=new Io(xo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.pr(t)})})}},{key:"yr",value:function(e){var t=this,n=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si(function(){n(function(){return t.state=2,t.listener.Si()})}),this.stream.Ci(function(e){n(function(){return t.pr(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})}},{key:"ur",value:function(){var t=this;this.state=4,this.rr.Xi((0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}},n)})))}},{key:"pr",value:function(e){return yo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(3,e)}},{key:"gr",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget(function(){return t.sr===e?n():(yo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),t}(),Ah=function(e){y(n,e);var t=g(n);function n(e,r,i,o,a){var u;return p(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)).N=o,u}return d(n,[{key:"Er",value:function(e){return this.nr.ji("Listen",e)}},{key:"onMessage",value:function(e){this.rr.reset();var t=function(e,t){var n,r;if("targetChange"in t){var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:wo(),o=t.targetChange.targetIds||[],a=function(e,t){return e.D?(bo(void 0===t||"string"==typeof t),Ko.fromBase64String(t||"")):(bo(void 0===t||t instanceof Uint8Array),Ko.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),u=t.targetChange.cause,s=u&&function(e){var t=void 0===e.code?xo.UNKNOWN:zu(e.code);return new Io(t,e.message||"")}(u);n=new ss(i,o,a,s||null)}else if("documentChange"in t){var c=t.documentChange,l=xs(e,c.document.name),h=ks(c.document.updateTime),f=new wa({mapValue:{fields:c.document.fields}}),d=_a.newFoundDocument(l,h,f);n=new as(c.targetIds||[],c.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){var v=t.documentDelete,p=xs(e,v.document),y=v.readTime?ks(v.readTime):Uo.min(),g=_a.newNoDocument(p,y);n=new as([],v.removedTargetIds||[],g.key,g)}else if("documentRemove"in t){var m=t.documentRemove,k=xs(e,m.document);n=new as([],m.removedTargetIds||[],k,null)}else{if(!("filter"in t))return wo();var w=t.filter,b=new ju(w.count||0);n=new us(w.targetId,b)}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Uo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Uo.min():t.readTime?ks(t.readTime):Uo.min()}(e);return this.listener.Tr(t,n)}},{key:"Ir",value:function(e){var t,n,r,i,o={};o.database=Es(this.N),o.addTarget=(t=this.N,i=(n=e).target,(r=Sa(i)?{documents:Rs(t,i)}:{query:Ds(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=gs(t,n.resumeToken):n.snapshotVersion.compareTo(Uo.min())>0&&(r.readTime=ys(t,n.snapshotVersion.toTimestamp())),r);var a=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);a&&(o.labels=a),this.wr(o)}},{key:"Ar",value:function(e){var t={};t.database=Es(this.N),t.removeTarget=e,this.wr(t)}}]),n}(Ch),Nh=function(e){y(n,e);var t=g(n);function n(e,r,i,o,a){var u;return p(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",r,i,a)).N=o,u.Rr=!1,u}return d(n,[{key:"br",get:function(){return this.Rr}},{key:"start",value:function(){this.Rr=!1,this.lastStreamToken=void 0,o(I(n.prototype),"start",this).call(this)}},{key:"mr",value:function(){this.Rr&&this.Pr([])}},{key:"Er",value:function(e){return this.nr.ji("Write",e)}},{key:"onMessage",value:function(e){if(bo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();var t=function(e,t){return e&&e.length>0?(bo(void 0!==t),e.map(function(e){return function(e,t){var n=ks(e.updateTime?e.updateTime:t);return n.isEqual(Uo.min())&&(n=ks(t)),new _u(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=ks(e.commitTime);return this.listener.vr(n,t)}return bo(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}},{key:"Sr",value:function(){var e={};e.database=Es(this.N),this.wr(e)}},{key:"Pr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return Ns(t.N,e)})};this.wr(n)}}]),n}(Ch),Oh=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this)).credentials=e,o.nr=r,o.N=i,o.Dr=!1,o}return d(n,[{key:"Cr",value:function(){if(this.Dr)throw new Io(xo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.nr.Li(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===xo.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Io(xo.UNKNOWN,e.toString())})}},{key:"Ki",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.nr.Ki(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===xo.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Io(xo.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.Dr=!0}}]),n}(function(){return d(function e(){p(this,e)})}()),Rh=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}return d(e,[{key:"Or",value:function(){var e=this;0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.kr=null,e.Mr("Backend didn't respond within 10 seconds."),e.Fr("Offline"),Promise.resolve()}))}},{key:"Lr",value:function(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Fr("Offline")))}},{key:"set",value:function(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}},{key:"Fr",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Mr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.$r?(go(t),this.$r=!1):yo("OnlineStateTracker",t)}},{key:"Br",value:function(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}]),e}(),Dh=d(function t(n,r,i,o,a){p(this,t);var u=this;this.localStore=n,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=a,this.Qr.Ei(function(t){i.enqueueAndForget((0,Xe.Z)(e().mark(function t(){var n;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Hh(u),!t.t0){t.next=5;break}return yo("RemoteStore","Restarting streams for network reachability change."),t.next=5,(n=(0,Xe.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_o(n)).Kr.add(4),e.next=4,Mh(r);case 4:return r.Wr.set("Unknown"),r.Kr.delete(4),e.next=8,Ph(r);case 8:case"end":return e.stop()}},t)})),function(e){return n.apply(this,arguments)})(u);case 5:case"end":return t.stop()}},t)})))}),this.Wr=new Rh(i,o)});function Ph(e){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,Xe.Z)(e().mark(function t(n){var r,i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Hh(n)){e.next=18;break}r=c(n.jr),e.prev=2,r.s();case 4:if((i=r.n()).done){e.next=10;break}return o=i.value,e.next=8,o(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}},t,null,[[2,12,15,18]])})),Lh.apply(this,arguments)}function Mh(e){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,Xe.Z)(e().mark(function t(n){var r,i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=c(n.jr),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=9;break}return o=i.value,e.next=7,o(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}},t,null,[[1,11,14,17]])})),Fh.apply(this,arguments)}function Vh(e,t){var n=_o(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),Bh(n)?zh(n):mf(n).cr()&&jh(n,t))}function Uh(e,t){var n=_o(e),r=mf(n);n.qr.delete(t),r.cr()&&qh(n,t),0===n.qr.size&&(r.cr()?r.lr():Hh(n)&&n.Wr.set("Unknown"))}function jh(e,t){e.Gr.Y(t.targetId),mf(e).Ir(t)}function qh(e,t){e.Gr.Y(t),mf(e).Ar(t)}function zh(e){e.Gr=new ls({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.qr.get(t)||null}}),mf(e).start(),e.Wr.Or()}function Bh(e){return Hh(e)&&!mf(e).ar()&&e.qr.size>0}function Hh(e){return 0===_o(e).Kr.size}function Zh(e){e.Gr=void 0}function Gh(e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.qr.forEach(function(e,t){jh(n,e)});case 1:case"end":return e.stop()}},t)})),Wh.apply(this,arguments)}function Kh(e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,Xe.Z)(e().mark(function t(n,r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Zh(n),Bh(n)?(n.Wr.Lr(r),zh(n)):n.Wr.set("Unknown");case 1:case"end":return e.stop()}},t)})),Qh.apply(this,arguments)}function Yh(e,t,n){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.Wr.set("Online"),!(r instanceof ss&&2===r.state&&r.cause)){t.next=13;break}return t.prev=1,t.next=4,(a=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.cause,o=c(r.targetIds),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=14;break}if(u=a.value,e.t0=n.qr.has(u),!e.t0){e.next=12;break}return e.next=10,n.remoteSyncer.rejectListen(u,i);case 10:n.qr.delete(u),n.Gr.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),o.e(e.t1);case 19:return e.prev=19,o.f(),e.finish(19);case 22:case"end":return e.stop()}},t,null,[[2,16,19,22]])})),function(e,t){return a.apply(this,arguments)})(n,r);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),yo("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t.t0),t.next=11,Xh(n,t.t0);case 11:case 22:t.next=29;break;case 13:if(r instanceof as?n.Gr.rt(r):r instanceof us?n.Gr.ft(r):n.Gr.ct(r),i.isEqual(Uo.min())){t.next=29;break}return t.prev=14,t.next=17,Ul(n.localStore);case 17:if(o=t.sent,t.t1=i.compareTo(o)>=0,!t.t1){t.next=22;break}return t.next=22,function(e,t){var n=e.Gr._t(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.qr.get(t);if(n){e.qr.set(t,n.withResumeToken(Ko.EMPTY_BYTE_STRING,n.snapshotVersion)),qh(e,t);var r=new Ac(n.target,t,1,n.sequenceNumber);jh(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(n,i);case 24:return t.prev=24,t.t2=t.catch(14),yo("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,Xh(n,t.t2);case 29:case"end":return t.stop()}},t,null,[[1,6],[14,24]])})),Jh.apply(this,arguments)}function Xh(e,t,n){return $h.apply(this,arguments)}function $h(){return $h=(0,Xe.Z)(e().mark(function t(n,r,i){return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(wc(r)){t.next=2;break}throw r;case 2:return n.Kr.add(1),t.next=5,Mh(n);case 5:n.Wr.set("Offline"),i||(i=function(){return Ul(n.localStore)}),n.asyncQueue.enqueueRetryable((0,Xe.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return yo("RemoteStore","Retrying IndexedDB access"),e.next=3,i();case 3:return n.Kr.delete(1),e.next=6,Ph(n);case 6:case"end":return e.stop()}},t)})));case 8:case"end":return t.stop()}},t)})),$h.apply(this,arguments)}function ef(e,t){return t().catch(function(n){return Xh(e,n,t)})}function tf(e){return nf.apply(this,arguments)}function nf(){return nf=(0,Xe.Z)(e().mark(function t(n){var r,i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=_o(n),i=kf(r),o=r.Ur.length>0?r.Ur[r.Ur.length-1].batchId:-1;case 2:if(!rf(r)){e.next=19;break}return e.prev=3,e.next=6,zl(r.localStore,o);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===r.Ur.length&&i.lr(),e.abrupt("break",19);case 10:o=a.batchId,of(r,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Xh(r,e.t0);case 17:e.next=2;break;case 19:af(r)&&uf(r);case 20:case"end":return e.stop()}},t,null,[[3,13]])})),nf.apply(this,arguments)}function rf(e){return Hh(e)&&e.Ur.length<10}function of(e,t){e.Ur.push(t);var n=kf(e);n.cr()&&n.br&&n.Pr(t.mutations)}function af(e){return Hh(e)&&!kf(e).ar()&&e.Ur.length>0}function uf(e){kf(e).start()}function sf(e){return cf.apply(this,arguments)}function cf(){return cf=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:kf(n).Sr();case 1:case"end":return e.stop()}},t)})),cf.apply(this,arguments)}function lf(e){return hf.apply(this,arguments)}function hf(){return hf=(0,Xe.Z)(e().mark(function t(n){var r,i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=kf(n),i=c(n.Ur);try{for(i.s();!(o=i.n()).done;)a=o.value,r.Pr(a.mutations)}catch(t){i.e(t)}finally{i.f()}case 3:case"end":return e.stop()}},t)})),hf.apply(this,arguments)}function ff(e,t,n){return df.apply(this,arguments)}function df(){return df=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.Ur.shift(),a=Cc.from(o,r,i),e.next=3,ef(n,function(){return n.remoteSyncer.applySuccessfulWrite(a)});case 3:return e.next=5,tf(n);case 5:case"end":return e.stop()}},t)})),df.apply(this,arguments)}function vf(e,t){return pf.apply(this,arguments)}function pf(){return pf=(0,Xe.Z)(e().mark(function t(n,r){var i;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r&&kf(n).br,!t.t0){t.next=4;break}return t.next=4,(i=(0,Xe.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!qu(o=r.code)||o===xo.ABORTED){e.next=7;break}return i=n.Ur.shift(),kf(n).hr(),e.next=5,ef(n,function(){return n.remoteSyncer.rejectFailedWrite(i.batchId,r)});case 5:return e.next=7,tf(n);case 7:case"end":return e.stop()}},t)})),function(e,t){return i.apply(this,arguments)})(n,r);case 4:af(n)&&uf(n);case 5:case"end":return t.stop()}},t)})),pf.apply(this,arguments)}function yf(e,t){return gf.apply(this,arguments)}function gf(){return gf=(0,Xe.Z)(e().mark(function t(n,r){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_o(n),!r){e.next=7;break}return i.Kr.delete(2),e.next=5,Ph(i);case 5:e.next=13;break;case 7:if(e.t0=r,e.t0){e.next=13;break}return i.Kr.add(2),e.next=12,Mh(i);case 12:i.Wr.set("Unknown");case 13:case"end":return e.stop()}},t)})),gf.apply(this,arguments)}function mf(t){return t.zr||(t.zr=(n=t.datastore,r=t.asyncQueue,i={Si:Gh.bind(null,t),Ci:Kh.bind(null,t),Tr:Yh.bind(null,t)},(o=_o(n)).Cr(),new Ah(r,o.nr,o.credentials,o.N,i)),t.jr.push(function(){var n=(0,Xe.Z)(e().mark(function n(r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}t.zr.hr(),Bh(t)?zh(t):t.Wr.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.zr.stop();case 6:Zh(t);case 7:case"end":return e.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())),t.zr;var n,r,i,o}function kf(t){return t.Hr||(t.Hr=(n=t.datastore,r=t.asyncQueue,i={Si:sf.bind(null,t),Ci:vf.bind(null,t),Vr:lf.bind(null,t),vr:ff.bind(null,t)},(o=_o(n)).Cr(),new Nh(r,o.nr,o.credentials,o.N,i)),t.jr.push(function(){var n=(0,Xe.Z)(e().mark(function n(r){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return t.Hr.hr(),e.next=4,tf(t);case 4:e.next=9;break;case 6:return e.next=8,t.Hr.stop();case 8:t.Ur.length>0&&(yo("RemoteStore","Stopping write stream with ".concat(t.Ur.length," pending writes")),t.Ur=[]);case 9:case"end":return e.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())),t.Hr;var n,r,i,o}var wf=function(){function e(t,n,r,i,o){p(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new To,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return d(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Io(xo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a}}]),e}();function bf(e,t){if(go("AsyncQueue","".concat(t,": ").concat(e)),wc(e))return new Io(xo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var _f=function(){function e(t){p(this,e),this.comparator=t?function(e,n){return t(e,n)||oa.comparator(e.key,n.key)}:function(e,t){return oa.comparator(e.key,t.key)},this.keyedMap=Ju(),this.sortedSet=new Bu(this.comparator)}return d(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),xf=function(){function e(){p(this,e),this.Jr=new Bu(oa.comparator)}return d(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):wo():this.Jr=this.Jr.insert(t,e)}},{key:"Yr",value:function(){var e=[];return this.Jr.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),If=function(){function e(t,n,r,i,o,a,u,s){p(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=s}return d(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:0,doc:e})}),new e(t,n,_f.emptySet(n),o,r,i,!0,!1)}}]),e}(),Tf=d(function e(){p(this,e),this.Xr=void 0,this.listeners=[]}),Ef=d(function e(){p(this,e),this.queries=new yl(function(e){return tu(e)},eu),this.onlineState="Unknown",this.Zr=new Set});function Sf(e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_o(n),o=r.query,a=!1,(u=i.queries.get(o))||(a=!0,u=new Tf),!a){e.next=13;break}return e.prev=3,e.next=6,i.onListen(o);case 6:u.Xr=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=bf(e.t0,"Initialization of query '".concat(nu(r.query),"' failed")),e.abrupt("return",void r.onError(s));case 13:i.queries.set(o,u),u.listeners.push(r),r.eo(i.onlineState),u.Xr&&r.no(u.Xr)&&Df(i);case 14:case"end":return e.stop()}},t,null,[[3,9]])})),Cf.apply(this,arguments)}function Af(e,t){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_o(n),o=r.query,a=!1,(u=i.queries.get(o))&&(s=u.listeners.indexOf(r))>=0&&(u.listeners.splice(s,1),a=0===u.listeners.length),!a){e.next=6;break}return e.abrupt("return",(i.queries.delete(o),i.onUnlisten(o)));case 6:case"end":return e.stop()}},t)})),Nf.apply(this,arguments)}function Of(e,t){var n,r=_o(e),i=!1,o=c(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=r.queries.get(a.query);if(u){var s,l=c(u.listeners);try{for(l.s();!(s=l.n()).done;){s.value.no(a)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Xr=a}}}catch(h){o.e(h)}finally{o.f()}i&&Df(r)}function Rf(e,t,n){var r=_o(e),i=r.queries.get(t);if(i){var o,a=c(i.listeners);try{for(a.s();!(o=a.n()).done;){o.value.onError(n)}}catch(u){a.e(u)}finally{a.f()}}r.queries.delete(t)}function Df(e){e.Zr.forEach(function(e){e.next()})}var Pf=function(){function e(t,n,r){p(this,e),this.query=t,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}return d(e,[{key:"no",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=c(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}e=new If(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.io?this.oo(e)&&(this.so.next(e),o=!0):this.ao(e,this.onlineState)&&(this.co(e),o=!0),this.ro=e,o}},{key:"onError",value:function(e){this.so.error(e)}},{key:"eo",value:function(e){this.onlineState=e;var t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}},{key:"ao",value:function(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}},{key:"oo",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"co",value:function(e){e=If.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}]),e}(),Lf=function(){function e(t,n){p(this,e),this.payload=t,this.byteLength=n}return d(e,[{key:"ho",value:function(){return"metadata"in this.payload}}]),e}(),Mf=function(){function e(t){p(this,e),this.N=t}return d(e,[{key:"zn",value:function(e){return xs(this.N,e)}},{key:"Hn",value:function(e){return e.metadata.exists?As(this.N,e.document,!1):_a.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}},{key:"Jn",value:function(e){return ks(e)}}]),e}(),Ff=function(){function t(e,n,r){p(this,t),this.lo=e,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=Vf(e)}return d(t,[{key:"fo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"wo",value:function(e){var t,n=new Map,r=new Mf(this.N),i=c(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.metadata.queries){var a,u=r.zn(o.metadata.name),s=c(o.metadata.queries);try{for(s.s();!(a=s.n()).done;){var l=a.value,h=(n.get(l)||ts()).add(u);n.set(l,h)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r,i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t,n,r){return Yl.apply(this,arguments)}(t.localStore,new Mf(t.N),t.documents,t.lo.id);case 2:r=e.sent,i=t.wo(t.documents),o=c(t.queries),e.prev=5,o.s();case 7:if((a=o.n()).done){e.next=13;break}return u=a.value,e.next=11,Jl(t.localStore,u,i.get(u.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),o.e(e.t0);case 18:return e.prev=18,o.f(),e.finish(18);case 21:return e.abrupt("return",(t.progress.taskState="Success",new Nl(Object.assign({},t.progress),r)));case 22:case"end":return e.stop()}},n,null,[[5,15,18,21]])}))()}}]),t}();function Vf(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Uf=d(function e(t){p(this,e),this.key=t}),jf=d(function e(t){p(this,e),this.key=t}),qf=function(){function e(t,n){p(this,e),this.query=t,this._o=n,this.mo=null,this.current=!1,this.yo=ts(),this.mutatedKeys=ts(),this.po=iu(t),this.Eo=new _f(this.po)}return d(e,[{key:"To",get:function(){return this._o}},{key:"Io",value:function(e,t){var n=this,r=t?t.Ao:new xf,i=t?t.Eo:this.Eo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,s=Ga(this.query)&&i.size===this.query.limit?i.last():null,c=Wa(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=ru(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),v=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),v=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),v=!0,(s&&n.po(h,s)>0||c&&n.po(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),v=!0):l&&!h&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),Ga(this.query)||Wa(this.query))for(;a.size>this.query.limit;){var l=Ga(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:a,Ao:r,Ln:u,mutatedKeys:o}}},{key:"Ro",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;var o=e.Ao.Yr();o.sort(function(e,t){return n=e.type,i=t.type,(o=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wo()}})(n)-o(i)||r.po(e.doc,t.doc);var n,i,o}),this.bo(n);var a=t?this.Po():[],u=0===this.yo.size&&this.current?1:0,s=u!==this.mo;return this.mo=u,0!==o.length||s?{snapshot:new If(this.query,e.Eo,i,o,e.mutatedKeys,0===u,s,!1),vo:a}:{vo:a}}},{key:"eo",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new xf,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}},{key:"Vo",value:function(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}},{key:"bo",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._o=t._o.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t._o=t._o.delete(e)}),this.current=e.current)}},{key:"Po",value:function(){var e=this;if(!this.current)return[];var t=this.yo;this.yo=ts(),this.Eo.forEach(function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))});var n=[];return t.forEach(function(t){e.yo.has(t)||n.push(new jf(t))}),this.yo.forEach(function(e){t.has(e)||n.push(new Uf(e))}),n}},{key:"So",value:function(e){this._o=e.Gn,this.yo=ts();var t=this.Io(e.documents);return this.applyChanges(t,!0)}},{key:"Do",value:function(){return If.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}]),e}(),zf=d(function e(t,n,r){p(this,e),this.query=t,this.targetId=n,this.view=r}),Bf=d(function e(t){p(this,e),this.key=t,this.Co=!1}),Hf=function(){function e(t,n,r,i,o,a){p(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.No={},this.xo=new yl(function(e){return tu(e)},eu),this.ko=new Map,this.$o=new Set,this.Oo=new Bu(oa.comparator),this.Fo=new Map,this.Mo=new eh,this.Lo={},this.Bo=new Map,this.Uo=rl.ie(),this.onlineState="Unknown",this.qo=void 0}return d(e,[{key:"isPrimaryClient",get:function(){return!0===this.qo}}]),e}();function Zf(e,t){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u,s,c;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ld(n),!(u=i.xo.get(r))){e.next=6;break}o=u.targetId,i.sharedClientState.addLocalQueryTarget(o),a=u.view.Do(),e.next=15;break;case 6:return e.next=8,Bl(i.localStore,Xa(r));case 8:return s=e.sent,c=i.sharedClientState.addLocalQueryTarget(s.targetId),o=s.targetId,e.next=13,Wf(i,r,o,"current"===c);case 13:a=e.sent,i.isPrimaryClient&&Vh(i.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}},t)})),Gf.apply(this,arguments)}function Wf(e,t,n,r){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Xe.Z)(e().mark(function t(n,r,i,o){var a,u,s,c,l,h;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.Ko=function(t,r,i){return(o=(0,Xe.Z)(e().mark(function t(n,r,i,o){var a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.view.Io(i),e.t0=a.Ln,!e.t0){e.next=6;break}return e.next=5,Gl(n.localStore,r.query,!1).then(function(e){var t=e.documents;return r.view.Io(t,a)});case 5:a=e.sent;case 6:return u=o&&o.targetChanges.get(r.targetId),s=r.view.applyChanges(a,n.isPrimaryClient,u),e.abrupt("return",(fd(n,r.targetId,s.vo),s.snapshot));case 8:case"end":return e.stop()}},t)})),function(e,t,n,r){return o.apply(this,arguments)})(n,t,r,i);var o},t.next=3,Gl(n.localStore,r,!0);case 3:return a=t.sent,u=new qf(r,a.Gn),s=u.Io(a.documents),c=os.createSynthesizedTargetChangeForCurrentChange(i,o&&"Offline"!==n.onlineState),l=u.applyChanges(s,n.isPrimaryClient,c),fd(n,i,l.vo),h=new zf(r,i,u),t.abrupt("return",(n.xo.set(r,h),n.ko.has(i)?n.ko.get(i).push(r):n.ko.set(i,[r]),l.snapshot));case 11:case"end":return t.stop()}},t)})),Kf.apply(this,arguments)}function Qf(e,t){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=_o(n),o=i.xo.get(r),!((a=i.ko.get(o.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i.ko.set(o.targetId,a.filter(function(e){return!eu(e,r)})),void i.xo.delete(r)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(o.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(o.targetId),e.t0){e.next=9;break}return e.next=9,Hl(i.localStore,o.targetId,!1).then(function(){i.sharedClientState.clearQueryState(o.targetId),Uh(i.remoteStore,o.targetId),ld(i,o.targetId)}).catch(sl);case 9:e.next=14;break;case 11:return ld(i,o.targetId),e.next=14,Hl(i.localStore,o.targetId,!0);case 14:case"end":return e.stop()}},t)})),Yf.apply(this,arguments)}function Jf(){return Jf=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Md(n),e.prev=1,e.next=4,function(e,t){var n,r=_o(e),i=Vo.now(),o=t.reduce(function(e,t){return e.add(t.key)},ts());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.Qn.Pn(e,o).next(function(o){n=o;var a,u=[],s=c(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,h=Cu(l,n.get(l.key));null!=h&&u.push(new Ru(l.key,h,ba(h.value.mapValue),xu.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.In.addMutationBatch(e,i,u,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(o.localStore,r);case 4:return a=e.sent,o.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Lo[e.currentUser.toKey()];r||(r=new Bu(Lo)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(o,a.batchId,i),e.next=9,pd(o,a.changes);case 9:return e.next=11,tf(o.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=bf(e.t0,"Failed to persist write"),i.reject(u);case 17:case"end":return e.stop()}},t,null,[[1,13]])})),Jf.apply(this,arguments)}function Xf(e,t){return $f.apply(this,arguments)}function $f(){return $f=(0,Xe.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(n),e.prev=1,e.next=4,jl(i.localStore,r);case 4:return o=e.sent,r.targetChanges.forEach(function(e,t){var n=i.Fo.get(t);n&&(bo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Co=!0:e.modifiedDocuments.size>0?bo(n.Co):e.removedDocuments.size>0&&(bo(n.Co),n.Co=!1))}),e.next=8,pd(i,o,r);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,sl(e.t0);case 14:case"end":return e.stop()}},t,null,[[1,10]])})),$f.apply(this,arguments)}function ed(e,t,n){var r=_o(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.xo.forEach(function(e,n){var r=n.view.eo(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=_o(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,o=c(n.listeners);try{for(o.s();!(i=o.n()).done;){i.value.eo(t)&&(r=!0)}}catch(a){o.e(a)}finally{o.f()}}),r&&Df(n)}(r.eventManager,t),i.length&&r.No.Tr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function td(e,t,n){return nd.apply(this,arguments)}function nd(){return nd=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u,s,c,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((o=_o(n)).sharedClientState.updateQueryState(r,"rejected",i),a=o.Fo.get(r),!(u=a&&a.key)){e.next=14;break}return s=(s=new Bu(oa.comparator)).insert(u,_a.newNoDocument(u,Uo.min())),c=ts().add(u),l=new is(Uo.min(),new Map,new Gu(Lo),s,c),e.next=9,Xf(o,l);case 9:o.Oo=o.Oo.remove(u),o.Fo.delete(r),vd(o),e.next=16;break;case 14:return e.next=16,Hl(o.localStore,r,!1).then(function(){return ld(o,r,i)}).catch(sl);case 16:case"end":return e.stop()}},t)})),nd.apply(this,arguments)}function rd(e,t){return id.apply(this,arguments)}function id(){return id=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(n),o=r.batch.batchId,e.prev=1,e.next=4,Vl(i.localStore,r);case 4:return a=e.sent,cd(i,o,null),sd(i,o),i.sharedClientState.updateMutationState(o,"acknowledged"),e.next=10,pd(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sl(e.t0);case 16:case"end":return e.stop()}},t,null,[[1,12]])})),id.apply(this,arguments)}function od(e,t,n){return ad.apply(this,arguments)}function ad(){return ad=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=_o(n),e.prev=1,e.next=4,function(e,t){var n=_o(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.In.lookupMutationBatch(e,t).next(function(t){return bo(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)}).next(function(){return n.In.performConsistencyCheck(e)}).next(function(){return n.Qn.Pn(e,r)})})}(o.localStore,r);case 4:return a=e.sent,cd(o,r,i),sd(o,r),o.sharedClientState.updateMutationState(r,"rejected",i),e.next=10,pd(o,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,sl(e.t0);case 16:case"end":return e.stop()}},t,null,[[1,12]])})),ad.apply(this,arguments)}function ud(){return ud=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Hh((i=_o(n)).remoteStore)||yo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=_o(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.In.getHighestUnacknowledgedBatchId(e)})}(i.localStore);case 5:if(-1!==(o=e.sent)){e.next=8;break}return e.abrupt("return",void r.resolve());case 8:(a=i.Bo.get(o)||[]).push(r),i.Bo.set(o,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=bf(e.t0,"Initialization of waitForPendingWrites() operation failed"),r.reject(u);case 16:case"end":return e.stop()}},t,null,[[2,12]])})),ud.apply(this,arguments)}function sd(e,t){(e.Bo.get(t)||[]).forEach(function(e){e.resolve()}),e.Bo.delete(t)}function cd(e,t,n){var r=_o(e),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function ld(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=c(e.ko.get(t));try{for(i.s();!(r=i.n()).done;){var o=r.value;e.xo.delete(o),n&&e.No.jo(o,n)}}catch(a){i.e(a)}finally{i.f()}e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(function(t){e.Mo.containsKey(t)||hd(e,t)})}function hd(e,t){e.$o.delete(t.path.canonicalString());var n=e.Oo.get(t);null!==n&&(Uh(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),vd(e))}function fd(e,t,n){var r,i=c(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o instanceof Uf?(e.Mo.addReference(o.key,t),dd(e,o)):o instanceof jf?(yo("SyncEngine","Document no longer in limbo: "+o.key),e.Mo.removeReference(o.key,t),e.Mo.containsKey(o.key)||hd(e,o.key)):wo()}}catch(a){i.e(a)}finally{i.f()}}function dd(e,t){var n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(yo("SyncEngine","New document in limbo: "+n),e.$o.add(r),vd(e))}function vd(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){var t=e.$o.values().next().value;e.$o.delete(t);var n=new oa(Ho.fromString(t)),r=e.Uo.next();e.Fo.set(r,new Bf(n)),e.Oo=e.Oo.insert(n,r),Vh(e.remoteStore,new Ac(Xa(Za(n.path)),r,2,Ro.T))}}function pd(e,t,n){return yd.apply(this,arguments)}function yd(){return yd=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u,s,l;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=_o(n),a=[],u=[],s=[],t.t0=o.xo.isEmpty(),t.t0){t.next=9;break}return o.xo.forEach(function(e,t){s.push(o.Ko(t,r,i).then(function(e){if(e){o.isPrimaryClient&&o.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Rl.kn(t.targetId,e);u.push(n)}}))}),t.next=6,Promise.all(s);case 6:return o.No.Tr(a),t.next=9,(l=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u,s,l,h;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(n),e.prev=1,e.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return pc.forEach(r,function(t){return pc.forEach(t.Nn,function(n){return i.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return pc.forEach(t.xn,function(n){return i.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),wc(e.t0)){e.next=10;break}throw e.t0;case 10:yo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:o=c(r);try{for(o.s();!(a=o.n()).done;)u=a.value,s=u.targetId,u.fromCache||(l=i.Un.get(s),h=l.withLastLimboFreeSnapshotVersion(l.snapshotVersion),i.Un=i.Un.insert(s,h))}catch(t){o.e(t)}finally{o.f()}case 13:case"end":return e.stop()}},t,null,[[1,6]])})),function(e,t){return l.apply(this,arguments)})(o.localStore,u);case 9:case"end":return t.stop()}},t)})),yd.apply(this,arguments)}function gd(e,t){return md.apply(this,arguments)}function md(){return md=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=_o(n)).currentUser.isEqual(r)){e.next=12;break}return yo("SyncEngine","User change. New user:",r.toKey()),e.next=5,Ml(i.localStore,r);case 5:return o=e.sent,i.currentUser=r,(a=i).Bo.forEach(function(e){e.forEach(function(e){e.reject(new Io(xo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Bo.clear(),i.sharedClientState.handleUserChange(r,o.removedBatchIds,o.addedBatchIds),e.next=12,pd(i,o.Wn);case 12:case"end":return e.stop()}},t)})),md.apply(this,arguments)}function kd(e,t){var n=_o(e),r=n.Fo.get(t);if(r&&r.Co)return ts().add(r.key);var i=ts(),o=n.ko.get(t);if(!o)return i;var a,u=c(o);try{for(u.s();!(a=u.n()).done;){var s=a.value,l=n.xo.get(s);i=i.unionWith(l.view.To)}}catch(h){u.e(h)}finally{u.f()}return i}function wd(e,t){return bd.apply(this,arguments)}function bd(){return bd=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(n),e.next=3,Gl(i.localStore,r.query,!0);case 3:return o=e.sent,a=r.view.So(o),e.abrupt("return",(i.isPrimaryClient&&fd(i,r.targetId,a.vo),a));case 6:case"end":return e.stop()}},t)})),bd.apply(this,arguments)}function _d(e){return xd.apply(this,arguments)}function xd(){return xd=(0,Xe.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(n),e.abrupt("return",Kl(r.localStore).then(function(e){return pd(r,e)}));case 2:case"end":return e.stop()}},t)})),xd.apply(this,arguments)}function Id(e,t,n,r){return Td.apply(this,arguments)}function Td(){return Td=(0,Xe.Z)(e().mark(function t(n,r,i,o){var a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=_o(n),e.next=3,function(e,t){var n=_o(e),r=_o(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.Xt(e,t).next(function(t){return t?n.Qn.Pn(e,t):pc.resolve(null)})})}(a.localStore,r);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==i){e.next=10;break}return e.next=8,tf(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===i||"rejected"===i?(cd(a,r,o||null),sd(a,r),s=r,_o(_o(a.localStore).In).te(s)):wo();case 11:return e.next=13,pd(a,u);case 13:e.next=16;break;case 15:yo("SyncEngine","Cannot apply mutation batch with id: "+r);case 16:case"end":return e.stop()}},t)})),Td.apply(this,arguments)}function Ed(){return Ed=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u,s,l,h,f;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ld(i=_o(n)),Md(i),!0!==r||!0===i.qo){e.next=13;break}return o=i.sharedClientState.getAllActiveQueryTargets(),e.next=5,Sd(i,o.toArray());case 5:return a=e.sent,i.qo=!0,e.next=9,yf(i.remoteStore,!0);case 9:u=c(a);try{for(u.s();!(s=u.n()).done;)l=s.value,Vh(i.remoteStore,l)}catch(t){u.e(t)}finally{u.f()}e.next=25;break;case 13:if(!1!==r||!1===i.qo){e.next=25;break}return h=[],f=Promise.resolve(),i.ko.forEach(function(e,t){i.sharedClientState.isLocalQueryTarget(t)?h.push(t):f=f.then(function(){return ld(i,t),Hl(i.localStore,t,!0)}),Uh(i.remoteStore,t)}),e.next=19,f;case 19:return e.next=21,Sd(i,h);case 21:return function(e){var t=_o(e);t.Fo.forEach(function(e,n){Uh(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new Bu(oa.comparator)}(i),i.qo=!1,e.next=25,yf(i.remoteStore,!1);case 25:case"end":return e.stop()}},t)})),Ed.apply(this,arguments)}function Sd(e,t,n){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u,s,l,h,f,d,v,p,y,g,m,k;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=_o(n),a=[],u=[],s=c(r),e.prev=2,s.s();case 4:if((l=s.n()).done){e.next=45;break}if(h=l.value,f=void 0,!(d=o.ko.get(h))||0===d.length){e.next=34;break}return e.next=11,Bl(o.localStore,Xa(d[0]));case 11:f=e.sent,v=c(d),e.prev=13,v.s();case 15:if((p=v.n()).done){e.next=24;break}return y=p.value,g=o.xo.get(y),e.next=20,wd(o,g);case 20:(m=e.sent).snapshot&&u.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),v.e(e.t0);case 29:return e.prev=29,v.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Wl(o.localStore,h);case 36:return k=e.sent,e.next=39,Bl(o.localStore,k);case 39:return f=e.sent,e.next=42,Wf(o,Ad(k),h,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(o.No.Tr(u),a));case 54:case"end":return e.stop()}},t,null,[[2,47,50,53],[13,26,29,32]])})),Cd.apply(this,arguments)}function Ad(e){return Ha(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Nd(e){var t=_o(e);return _o(_o(t.localStore).persistence).pn()}function Od(e,t,n,r){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,Xe.Z)(e().mark(function t(n,r,i,o){var a,u,s;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=_o(n)).qo){e.next=5;break}yo("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.ko.has(r)){e.next=21;break}e.t0=i,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Kl(a.localStore);case 11:return u=e.sent,s=is.createSynthesizedRemoteEventForCurrentChange(r,"current"===i),e.next=15,pd(a,u,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,Hl(a.localStore,r,!0);case 18:return ld(a,r,o),e.abrupt("break",21);case 20:wo();case 21:case"end":return e.stop()}},t)})),Rd.apply(this,arguments)}function Dd(e,t,n){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u,s,l,h,f,d,v;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=Ld(n)).qo){t.next=45;break}a=c(r),t.prev=3,a.s();case 5:if((u=a.n()).done){t.next=21;break}if(s=u.value,!o.ko.has(s)){t.next=10;break}return yo("SyncEngine","Adding an already active target "+s),t.abrupt("continue",19);case 10:return t.next=12,Wl(o.localStore,s);case 12:return l=t.sent,t.next=15,Bl(o.localStore,l);case 15:return h=t.sent,t.next=18,Wf(o,Ad(l),h.targetId,!1);case 18:Vh(o.remoteStore,h);case 19:t.next=5;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(3),a.e(t.t0);case 26:return t.prev=26,a.f(),t.finish(26);case 29:f=c(i),t.prev=30,v=e().mark(function t(){var n;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.value,e.t0=o.ko.has(n),!e.t0){e.next=5;break}return e.next=5,Hl(o.localStore,n,!1).then(function(){Uh(o.remoteStore,n),ld(o,n)}).catch(sl);case 5:case"end":return e.stop()}},t)}),f.s();case 33:if((d=f.n()).done){t.next=37;break}return t.delegateYield(v(),"t1",35);case 35:t.next=33;break;case 37:t.next=42;break;case 39:t.prev=39,t.t2=t.catch(30),f.e(t.t2);case 42:return t.prev=42,f.f(),t.finish(42);case 45:case"end":return t.stop()}},t,null,[[3,23,26,29],[30,39,42,45]])})),Pd.apply(this,arguments)}function Ld(e){var t=_o(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=td.bind(null,t),t.No.Tr=Of.bind(null,t.eventManager),t.No.jo=Rf.bind(null,t.eventManager),t}function Md(e){var t=_o(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=od.bind(null,t),t}var Fd=function(){function t(){p(this,t),this.synchronizeTabs=!1}return d(t,[{key:"initialize",value:function(t){var n=this;return(0,Xe.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.N=Eh(t.databaseInfo.databaseId),n.sharedClientState=n.Wo(t),n.persistence=n.Go(t),e.next=5,n.persistence.start();case 5:n.gcScheduler=n.zo(t),n.localStore=n.Ho(t);case 7:case"end":return e.stop()}},r)}))()}},{key:"zo",value:function(e){return null}},{key:"Ho",value:function(e){return Ll(this.persistence,new Dl,e.initialUser,this.N)}},{key:"Go",value:function(e){return new ah(sh.Ns,this.N)}},{key:"Wo",value:function(e){return new mh}},{key:"terminate",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.gcScheduler&&t.gcScheduler.stop(),e.next=3,t.sharedClientState.shutdown();case 3:return e.next=5,t.persistence.shutdown();case 5:case"end":return e.stop()}},n)}))()}}]),t}(),Vd=function(t){y(r,t);var n=g(r);function r(e,t,i){var o;return p(this,r),(o=n.call(this)).Jo=e,o.cacheSizeBytes=t,o.forceOwnership=i,o.synchronizeTabs=!1,o}return d(r,[{key:"initialize",value:function(t){var n=this,i=this;return(0,Xe.Z)(e().mark(function a(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(I(r.prototype),"initialize",n).call(i,t);case 2:return e.next=4,function(e){return Ql.apply(this,arguments)}(i.localStore);case 4:return e.next=6,i.Jo.initialize(i,t);case 6:return e.next=8,Md(i.Jo.syncEngine);case 8:return e.next=10,tf(i.Jo.remoteStore);case 10:return e.next=12,i.persistence.nn(function(){return i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()});case 12:case"end":return e.stop()}},a)}))()}},{key:"Ho",value:function(e){return Ll(this.persistence,new Dl,e.initialUser,this.N)}},{key:"zo",value:function(e){return new fl(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}},{key:"Go",value:function(e){var t=Al(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qc.withCacheSize(this.cacheSizeBytes):Qc.DEFAULT;return new El(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ih(),Th(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Wo",value:function(e){return new mh}}]),r}(Fd),Ud=function(t){y(r,t);var n=g(r);function r(e,t){var i;return p(this,r),(i=n.call(this,e,t,!1)).Jo=e,i.cacheSizeBytes=t,i.synchronizeTabs=!0,i}return d(r,[{key:"initialize",value:function(t){var n=this,i=this;return(0,Xe.Z)(e().mark(function a(){var u;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o(I(r.prototype),"initialize",n).call(i,t);case 2:if(u=i.Jo.syncEngine,a.t0=i.sharedClientState instanceof gh,!a.t0){a.next=8;break}return i.sharedClientState.syncEngine={_i:Id.bind(null,u),mi:Od.bind(null,u),gi:Dd.bind(null,u),pn:Nd.bind(null,u),wi:_d.bind(null,u)},a.next=8,i.sharedClientState.start();case 8:return a.next=10,i.persistence.nn(function(){var t=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return Ed.apply(this,arguments)}(i.Jo.syncEngine,n);case 2:i.gcScheduler&&(n&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):n||i.gcScheduler.stop());case 3:case"end":return e.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return a.stop()}},a)}))()}},{key:"Wo",value:function(e){var t=Ih();if(!gh.bt(t))throw new Io(xo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Al(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),r}(Vd),jd=function(){function t(){p(this,t)}return d(t,[{key:"initialize",value:function(t,n){var r=this;return(0,Xe.Z)(e().mark(function i(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.localStore,e.t0){e.next=12;break}return r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=function(e){return ed(r.syncEngine,e,1)},r.remoteStore.remoteSyncer.handleCredentialChange=gd.bind(null,r.syncEngine),e.next=12,yf(r.remoteStore,r.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}},i)}))()}},{key:"createEventManager",value:function(e){return new Ef}},{key:"createDatastore",value:function(e){var t=Eh(e.databaseInfo.databaseId),n=new xh(e.databaseInfo);return new Oh(e.credentials,n,t)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ed(a.syncEngine,e,0)},o=wh.bt()?new wh:new kh,new Dh(t,n,r,i,o)}},{key:"createSyncEngine",value:function(e,t){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=e.initialUser,u=e.maxConcurrentLimboResolutions,s=t,c=new Hf(n,r,i,o,a,u),s&&(c.qo=!0),c;var n,r,i,o,a,u,s,c}},{key:"terminate",value:function(){return(t=(0,Xe.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(n),yo("RemoteStore","RemoteStore shutting down."),r.Kr.add(5),e.next=5,Mh(r);case 5:r.Qr.shutdown(),r.Wr.set("Unknown");case 7:case"end":return e.stop()}},t)})),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}]),t}();function qd(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,r=0;return{read:function(){return(0,Xe.Z)(e().mark(function i(){var o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<t.byteLength)){e.next=3;break}return o={value:t.slice(r,r+n),done:!1},e.abrupt("return",(r+=n,o));case 3:return e.abrupt("return",{done:!0});case 4:case"end":return e.stop()}},i)}))()},cancel:function(){return(0,Xe.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var zd=function(){function e(t){p(this,e),this.observer=t,this.muted=!1}return d(e,[{key:"next",value:function(e){this.observer.next&&this.Yo(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Xo",value:function(){this.muted=!0}},{key:"Yo",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Bd=function(){function t(e,n){var r=this;p(this,t),this.Zo=e,this.N=n,this.metadata=new To,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(function(e){e&&e.ho()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return d(t,[{key:"close",value:function(){return this.Zo.cancel()}},{key:"getMetadata",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.metadata.promise);case 1:case"end":return e.stop()}},n)}))()}},{key:"Qo",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMetadata();case 2:return e.abrupt("return",t.ea());case 3:case"end":return e.stop()}},n)}))()}},{key:"ea",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r,i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.na();case 2:if(null!==(r=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return i=t.ta.decode(r),o=Number(i),isNaN(o)&&t.sa("length string (".concat(i,") is not valid number")),e.next=9,t.ia(o);case 9:return a=e.sent,e.abrupt("return",new Lf(JSON.parse(a),r.length+o));case 11:case"end":return e.stop()}},n)}))()}},{key:"ra",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"na",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.ra()<0,!e.t0){e.next=5;break}return e.next=4,t.oa();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=9;break}case 7:e.next=0;break;case 9:if(0!==t.buffer.length){e.next=11;break}return e.abrupt("return",null);case 11:return(r=t.ra())<0&&t.sa("Reached the end of bundle when a length string is expected."),i=t.buffer.slice(0,r),e.abrupt("return",(t.buffer=t.buffer.slice(r),i));case 15:case"end":return e.stop()}},n)}))()}},{key:"ia",value:function(t){var n=this;return(0,Xe.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.buffer.length<t)){e.next=8;break}return e.next=3,n.oa();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}n.sa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return i=n.ta.decode(n.buffer.slice(0,t)),e.abrupt("return",(n.buffer=n.buffer.slice(t),i));case 10:case"end":return e.stop()}},r)}))()}},{key:"sa",value:function(e){throw this.Zo.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"oa",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.Zo.read();case 2:return(r=e.sent).done||((i=new Uint8Array(t.buffer.length+r.value.length)).set(t.buffer),i.set(r.value,t.buffer.length),t.buffer=i),e.abrupt("return",r.done);case 5:case"end":return e.stop()}},n)}))()}}]),t}(),Hd=function(){function t(e){p(this,t),this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return d(t,[{key:"lookup",value:function(t){var n=this;return(0,Xe.Z)(e().mark(function r(){var i,o;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n.ensureCommitNotCalled(),!(n.mutations.length>0)){r.next=2;break}throw new Io(xo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return r.next=4,(o=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a,u,s,c;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(n),o=Es(i.N)+"/documents",a={documents:r.map(function(e){return _s(i.N,e)})},e.next=5,i.Ki("BatchGetDocuments",o,a);case 5:return u=e.sent,s=new Map,u.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){bo(!!t.found);var n=xs(e,t.found.name),r=ks(t.found.updateTime),i=new wa({mapValue:{fields:t.found.fields}});return _a.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){bo(!!t.missing),bo(!!t.readTime);var n=xs(e,t.missing),r=ks(t.readTime);return _a.newNoDocument(n,r)}(e,t):wo()}(i.N,e);s.set(t.key.toString(),t)}),c=[],e.abrupt("return",(r.forEach(function(e){var t=s.get(e.toString());bo(!!t),c.push(t)}),c));case 10:case"end":return e.stop()}},t)})),function(e,t){return o.apply(this,arguments)})(n.datastore,t);case 4:return i=r.sent,r.abrupt("return",(i.forEach(function(e){return n.recordVersion(e)}),i));case 6:case"end":return r.stop()}},r)}))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Vu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r,i;return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!t.lastWriteError){n.next=2;break}throw t.lastWriteError;case 2:return r=t.readVersions,t.mutations.forEach(function(e){r.delete(e.key.toString())}),r.forEach(function(e,n){var r=oa.fromPath(n);t.mutations.push(new Uu(r,t.precondition(r)))}),n.next=7,(i=(0,Xe.Z)(e().mark(function t(n,r){var i,o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(n),o=Es(i.N)+"/documents",a={writes:r.map(function(e){return Ns(i.N,e)})},e.next=3,i.Li("Commit",o,a);case 3:case"end":return e.stop()}},t)})),function(e,t){return i.apply(this,arguments)})(t.datastore,t.mutations);case 7:t.committed=!0;case 8:case"end":return n.stop()}},n)}))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wo();t=Uo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Io(xo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?xu.updateTime(t):xu.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Uo.min()))throw new Io(xo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xu.updateTime(t)}return xu.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),t}(),Zd=function(){function t(e,n,r,i){p(this,t),this.asyncQueue=e,this.datastore=n,this.updateFunction=r,this.deferred=i,this.aa=5,this.rr=new Sh(this.asyncQueue,"transaction_retry")}return d(t,[{key:"run",value:function(){this.aa-=1,this.ca()}},{key:"ca",value:function(){var t=this;this.rr.Xi((0,Xe.Z)(e().mark(function n(){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new Hd(t.datastore),(i=t.ua(r))&&i.then(function(e){t.asyncQueue.enqueueAndForget(function(){return r.commit().then(function(){t.deferred.resolve(e)}).catch(function(e){t.ha(e)})})}).catch(function(e){t.ha(e)});case 2:case"end":return e.stop()}},n)})))}},{key:"ua",value:function(e){try{var t=this.updateFunction(e);return!na(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}},{key:"ha",value:function(e){var t=this;this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(function(){return t.ca(),Promise.resolve()})):this.deferred.reject(e)}},{key:"la",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qu(t)}return!1}}]),t}(),Gd=function(){function t(n,r,i){p(this,t);var o,a=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ho.UNAUTHENTICATED,this.clientId=Po.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(r,(o=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return yo("FirestoreClient","Received user=",n.uid),e.next=3,a.credentialListener(n);case 3:a.user=n;case 4:case"end":return e.stop()}},t)})),function(e){return o.apply(this,arguments)}))}return d(t,[{key:"getConfiguration",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,credentials:t.credentials,initialUser:t.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}},n)}))()}},{key:"setCredentialChangeListener",value:function(e){this.credentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Io(xo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new To;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Xe.Z)(e().mark(function r(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=t.onlineComponents,!e.t0){e.next=5;break}return e.next=5,t.onlineComponents.terminate();case 5:if(e.t1=t.offlineComponents,!e.t1){e.next=9;break}return e.next=9,t.offlineComponents.terminate();case 9:t.credentials.shutdown(),n.resolve(),e.next=17;break;case 13:e.prev=13,e.t2=e.catch(0),i=bf(e.t2,"Failed to shutdown persistence"),n.reject(i);case 17:case"end":return e.stop()}},r,null,[[0,13]])}))),n.promise}}]),t}();function Wd(e,t){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,Xe.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),yo("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,n.getConfiguration();case 3:return i=t.sent,t.next=6,r.initialize(i);case 6:o=i.initialUser,n.setCredentialChangeListener(function(){var t=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=o.isEqual(n),e.t0){e.next=5;break}return e.next=4,Ml(r.localStore,n);case 4:o=n;case 5:case"end":return e.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener(function(){return n.terminate()}),n.offlineComponents=r;case 8:case"end":return t.stop()}},t)})),Kd.apply(this,arguments)}function Qd(e,t){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,Xe.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),t.next=3,Jd(n);case 3:return i=t.sent,yo("FirestoreClient","Initializing OnlineComponentProvider"),t.next=7,n.getConfiguration();case 7:return o=t.sent,t.next=10,r.initialize(i,o);case 10:n.setCredentialChangeListener(function(t){return(n=(0,Xe.Z)(e().mark(function t(n,r){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=_o(n)).asyncQueue.verifyOperationInProgress(),yo("RemoteStore","RemoteStore received new credentials"),o=Hh(i),i.Kr.add(3),e.next=6,Mh(i);case 6:return o&&i.Wr.set("Unknown"),e.next=9,i.remoteSyncer.handleCredentialChange(r);case 9:return i.Kr.delete(3),e.next=12,Ph(i);case 12:case"end":return e.stop()}},t)})),function(e,t){return n.apply(this,arguments)})(r.remoteStore,t);var n}),n.onlineComponents=r;case 12:case"end":return t.stop()}},t)})),Yd.apply(this,arguments)}function Jd(e){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.offlineComponents,e.t0){e.next=5;break}return yo("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Wd(n,new Fd);case 5:return e.abrupt("return",n.offlineComponents);case 6:case"end":return e.stop()}},t)})),Xd.apply(this,arguments)}function $d(e){return ev.apply(this,arguments)}function ev(){return ev=(0,Xe.Z)(e().mark(function t(n){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.onlineComponents,e.t0){e.next=5;break}return yo("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Qd(n,new jd);case 5:return e.abrupt("return",n.onlineComponents);case 6:case"end":return e.stop()}},t)})),ev.apply(this,arguments)}function tv(e){return Jd(e).then(function(e){return e.persistence})}function nv(e){return Jd(e).then(function(e){return e.localStore})}function rv(e){return $d(e).then(function(e){return e.remoteStore})}function iv(e){return $d(e).then(function(e){return e.syncEngine})}function ov(e){return av.apply(this,arguments)}function av(){return av=(0,Xe.Z)(e().mark(function t(n){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$d(n);case 2:return r=e.sent,i=r.eventManager,e.abrupt("return",(i.onListen=Zf.bind(null,r.syncEngine),i.onUnlisten=Qf.bind(null,r.syncEngine),i));case 5:case"end":return e.stop()}},t)})),av.apply(this,arguments)}function uv(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new To;return t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function o(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n,r,i){var o=new zd({next:function(o){t.enqueueAndForget(function(){return Af(e,a)});var u=o.docs.has(n);!u&&o.fromCache?i.reject(new Io(xo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new Io(xo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new Pf(Za(n.path),o,{includeMetadataChanges:!0,uo:!0});return Sf(e,a)},e.next=3,ov(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=r,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}},o)}))),i.promise}function sv(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new To;return t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function o(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n,r,i){var o=new zd({next:function(n){t.enqueueAndForget(function(){return Af(e,a)}),n.fromCache&&"server"===r.source?i.reject(new Io(xo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new Pf(n,o,{includeMetadataChanges:!0,uo:!0});return Sf(e,a)},e.next=3,ov(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=r,e.t5=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}},o)}))),i.promise}var cv=d(function e(t,n,r,i,o,a,u,s){p(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.useFetchStreams=s}),lv=function(){function e(t,n){p(this,e),this.projectId=t,this.database=n||"(default)"}return d(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),hv=new Map;function fv(e,t,n){if(!n)throw new Io(xo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dv(e,t,n,r){if(!0===t&&!0===r)throw new Io(xo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function vv(e){if(!oa.isDocumentKey(e))throw new Io(xo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function pv(e){if(oa.isDocumentKey(e))throw new Io(xo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":wo()}function gv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Io(xo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yv(e);throw new Io(xo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function mv(e,t){if(t<=0)throw new Io(xo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var kv=function(){function e(t){var n;if(p(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Io(xo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Io(xo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,dv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return d(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),wv=function(){function e(t,n){p(this,e),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1,t instanceof lv?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Io(xo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lv(e.options.projectId)}(t))}return d(e,[{key:"app",get:function(){if(!this._app)throw new Io(xo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Io(xo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new So;switch(e.type){case"gapi":var t=e.client;return bo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Oo(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Io(xo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=hv.get(e))&&(yo("ComponentProvider","Removing Datastore"),hv.delete(e),t.terminate()),Promise.resolve();var e,t}}]),e}(),bv=function(){function e(t,n,r){p(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return d(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new xv(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),_v=function(){function e(t,n,r){p(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return d(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),xv=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e,r,Za(i)))._path=i,o.type="collection",o}return d(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bv(this.firestore,null,new oa(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(_v);function Iv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,nt.m9)(e),fv("collection","path",t),e instanceof wv){var o=Ho.fromString.apply(Ho,[t].concat(r));return pv(o),new xv(e,null,o)}if(!(e instanceof bv||e instanceof xv))throw new Io(xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Ho.fromString.apply(Ho,[t].concat(r)));return pv(a),new xv(e.firestore,null,a)}function Tv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,nt.m9)(e),1===arguments.length&&(t=Po.I()),fv("doc","path",t),e instanceof wv){var o=Ho.fromString.apply(Ho,[t].concat(r));return vv(o),new bv(e,null,new oa(o))}if(!(e instanceof bv||e instanceof xv))throw new Io(xo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Ho.fromString.apply(Ho,[t].concat(r)));return vv(a),new bv(e.firestore,e instanceof xv?e.converter:null,new oa(a))}function Ev(e,t){return e=(0,nt.m9)(e),t=(0,nt.m9)(t),(e instanceof bv||e instanceof xv)&&(t instanceof bv||t instanceof xv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Sv(e,t){return e=(0,nt.m9)(e),t=(0,nt.m9)(t),e instanceof _v&&t instanceof _v&&e.firestore===t.firestore&&eu(e._query,t._query)&&e.converter===t.converter}var Cv=function(){function t(){var e=this;p(this,t),this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Sh(this,"async_queue_retry"),this.Ea=function(){var t=Th();t&&yo("AsyncQueue","Visibility state changed to "+t.visibilityState),e.rr.tr()};var n=Th();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}return d(t,[{key:"isShuttingDown",get:function(){return this.wa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ta(),this.Ia(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.wa){this.wa=!0,this.ya=e||!1;var t=Th();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ta(),this.wa)return new Promise(function(){});var n=new To;return this.Ia(function(){return t.wa&&t.ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.da.push(e),t.Aa()})}},{key:"Aa",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.da.length){e.next=14;break}return e.prev=1,e.next=4,t.da[0]();case 4:t.da.shift(),t.rr.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),wc(e.t0)){e.next=12;break}throw e.t0;case 12:yo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:t.da.length>0&&t.rr.Xi(function(){return t.Aa()});case 14:case"end":return e.stop()}},n,null,[[1,8]])}))()}},{key:"Ia",value:function(e){var t=this,n=this.fa.then(function(){return t.ga=!0,e().catch(function(e){throw t.ma=e,t.ga=!1,go("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e;var n,r}).then(function(e){return t.ga=!1,e})});return this.fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ta(),this.pa.indexOf(e)>-1&&(t=0);var i=wf.createAndSchedule(this,e,t,n,function(e){return r.Ra(e)});return this._a.push(i),i}},{key:"Ta",value:function(){this.ma&&wo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ba",value:function(){var t=this;return(0,Xe.Z)(e().mark(function n(){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fa,e.next=3,r;case 3:if(r!==t.fa){e.next=0;break}case 4:case"end":return e.stop()}},n)}))()}},{key:"Pa",value:function(e){var t,n=c(this._a);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"va",value:function(e){var t=this;return this.ba().then(function(){t._a.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=c(t._a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(o){r.e(o)}finally{r.f()}return t.ba()})}},{key:"Va",value:function(e){this.pa.push(e)}},{key:"Ra",value:function(e){var t=this._a.indexOf(e);this._a.splice(t,1)}}]),t}();function Av(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Nv=function(){function e(){p(this,e),this._progressObserver={},this._taskCompletionResolver=new To,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return d(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Ov=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).type="firestore",i._queue=new Cv,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return d(n,[{key:"_terminate",value:function(){return this._firestoreClient||Dv(this),this._firestoreClient.terminate()}}]),n}(wv);function Rv(e){return e._firestoreClient||Dv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Dv(e){var t,n,r,i=e._freezeSettings(),o=(n=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new cv(e._databaseId,n,e._persistenceKey,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams));e._firestoreClient=new Gd(e._credentials,e._queue,o)}function Pv(t,n,r){var i=new To;return t.asyncQueue.enqueue((0,Xe.Z)(e().mark(function o(){var a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wd(t,r);case 3:return e.next=5,Qd(t,n);case 5:i.resolve(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),"FirebaseError"===(a=e.t0).name?a.code===xo.FAILED_PRECONDITION||a.code===xo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code){e.next=12;break}throw e.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e.t0),i.reject(e.t0);case 13:case"end":return e.stop()}},o,null,[[0,8]])}))).then(function(){return i.promise})}function Lv(e){if(e._initialized||e._terminated)throw new Io(xo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Mv=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Io(xo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Go(n)}return d(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),Fv=function(){function e(t){p(this,e),this._byteString=t}return d(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ko.fromBase64String(t))}catch(n){throw new Io(xo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}},{key:"fromUint8Array",value:function(t){return new e(Ko.fromUint8Array(t))}}]),e}(),Vv=d(function e(t){p(this,e),this._methodName=t}),Uv=function(){function e(t,n){if(p(this,e),!isFinite(t)||t<-90||t>90)throw new Io(xo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Io(xo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return d(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Lo(this._lat,e._lat)||Lo(this._long,e._long)}}]),e}(),jv=/^__.*__$/,qv=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return d(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ou(e,this.data,t,this.fieldTransforms)}}]),e}(),zv=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return d(e,[{key:"toMutation",value:function(e,t){return new Ru(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Bv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wo()}}var Hv=function(){function e(t,n,r,i,o,a){p(this,e),this.settings=t,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Sa(),this.fieldTransforms=o||[],this.fieldMask=a||[]}return d(e,[{key:"path",get:function(){return this.settings.path}},{key:"Da",get:function(){return this.settings.Da}},{key:"Ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}},{key:"$a",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}},{key:"Oa",value:function(e){return this.Ca({path:void 0,xa:!0})}},{key:"Fa",value:function(e){return lp(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"Sa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ka(this.path.get(e))}},{key:"ka",value:function(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(Bv(this.Da)&&jv.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}]),e}(),Zv=function(){function e(t,n,r){p(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.N=r||Eh(t)}return d(e,[{key:"Ba",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Hv({Da:e,methodName:t,La:n,path:Go.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),e}();function Gv(e){var t=e._freezeSettings(),n=Eh(e._databaseId);return new Zv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Wv(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=e.Ba(o.merge||o.mergeFields?2:0,t,n,i);ap("Data must be an object, but it was:",a,r);var u,s,l=ip(r,a);if(o.merge)u=new Wo(a.fieldMask),s=a.fieldTransforms;else if(o.mergeFields){var h,f=[],d=c(o.mergeFields);try{for(d.s();!(h=d.n()).done;){var v=h.value,p=up(t,v,n);if(!a.contains(p))throw new Io(xo.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));hp(f,p)||f.push(p)}}catch(y){d.e(y)}finally{d.f()}u=new Wo(f),s=a.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,s=a.fieldTransforms;return new qv(new wa(l),u,s)}var Kv=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Da)throw e.Fa(1===e.Da?"".concat(this._methodName,"() can only appear at the top level of your update data"):"".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Vv);function Qv(e,t,n){return new Hv({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}var Yv=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"_toFieldTransform",value:function(e){return new bu(e.path,new du)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Vv),Jv=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).Ua=r,i}return d(n,[{key:"_toFieldTransform",value:function(e){var t=Qv(this,e,!0),n=this.Ua.map(function(e){return rp(e,t)}),r=new vu(n);return new bu(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Vv),Xv=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).Ua=r,i}return d(n,[{key:"_toFieldTransform",value:function(e){var t=Qv(this,e,!0),n=this.Ua.map(function(e){return rp(e,t)}),r=new yu(n);return new bu(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Vv),$v=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).qa=r,i}return d(n,[{key:"_toFieldTransform",value:function(e){var t=new mu(e.N,su(e.N,this.qa));return new bu(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Vv);function ep(e,t,n,r){var i=e.Ba(1,t,n);ap("Data must be an object, but it was:",i,r);var o=[],a=wa.empty();qo(r,function(e,r){var u=cp(t,e,n);r=(0,nt.m9)(r);var s=i.$a(u);if(r instanceof Kv)o.push(u);else{var c=rp(r,s);null!=c&&(o.push(u),a.set(u,c))}});var u=new Wo(o);return new zv(a,u,i.fieldTransforms)}function tp(e,t,n,r,i,o){var a=e.Ba(1,t,n),u=[up(t,r,n)],s=[i];if(o.length%2!=0)throw new Io(xo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<o.length;c+=2)u.push(up(t,o[c])),s.push(o[c+1]);for(var l=[],h=wa.empty(),f=u.length-1;f>=0;--f)if(!hp(l,u[f])){var d=u[f],v=s[f];v=(0,nt.m9)(v);var p=a.$a(d);if(v instanceof Kv)l.push(d);else{var y=rp(v,p);null!=y&&(l.push(d),h.set(d,y))}}var g=new Wo(l);return new zv(h,g,a.fieldTransforms)}function np(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return rp(n,e.Ba(r?4:3,t))}function rp(e,t){if(op(e=(0,nt.m9)(e)))return ap("Unsupported field value:",t,e),ip(e,t);if(e instanceof Vv)return function(e,t){if(!Bv(t.Da))throw t.Fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,o=c(e);try{for(o.s();!(n=o.n()).done;){var a=rp(n.value,t.Oa(i));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}}catch(u){o.e(u)}finally{o.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,nt.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return su(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Vo.fromDate(e);return{timestampValue:ys(t.N,n)}}if(e instanceof Vo){var r=new Vo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ys(t.N,r)}}if(e instanceof Uv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fv)return{bytesValue:gs(t.N,e._byteString)};if(e instanceof bv){var i=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw t.Fa("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ws(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa("Unsupported field value: ".concat(yv(e)))}(e,t)}function ip(e,t){var n={};return zo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qo(e,function(e,r){var i=rp(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function op(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Vo||e instanceof Uv||e instanceof Fv||e instanceof bv||e instanceof Vv)}function ap(e,t,n){if(!op(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){var r=yv(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}var i}function up(e,t,n){if((t=(0,nt.m9)(t))instanceof Mv)return t._internalPath;if("string"==typeof t)return cp(e,t);throw lp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var sp=new RegExp("[~\\*/\\[\\]]");function cp(e,t,n){if(t.search(sp)>=0)throw lp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return b(Mv,u(t.split(".")))._internalPath}catch(r){throw lp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function lp(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(o||a)&&(s+=" (found",o&&(s+=" in field ".concat(r)),a&&(s+=" in document ".concat(i)),s+=")"),new Io(xo.INVALID_ARGUMENT,u+e+s)}function hp(e,t){return e.some(function(e){return e.isEqual(t)})}var fp=function(){function e(t,n,r,i,o){p(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return d(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bv(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new dp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(vp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),dp=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"data",value:function(){return o(I(n.prototype),"data",this).call(this)}}]),n}(fp);function vp(e,t){return"string"==typeof t?cp(e,t):t instanceof Mv?t._internalPath:t._delegate._internalPath}var pp=function(){function e(t,n){p(this,e),this.hasPendingWrites=t,this.fromCache=n}return d(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),yp=function(e){y(n,e);var t=g(n);function n(e,r,i,o,a,u){var s;return p(this,n),(s=t.call(this,e,r,i,o,u))._firestore=e,s._firestoreImpl=e,s.metadata=a,s}return d(n,[{key:"exists",value:function(){return o(I(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(vp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(fp),gp=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(I(n.prototype),"data",this).call(this,e)}}]),n}(yp),mp=function(){function e(t,n,r,i){p(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new pp(i.hasPendingWrites,i.fromCache),this.query=r}return d(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new gp(n._firestore,n._userDataWriter,r.key,r,new pp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Io(xo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new gp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new gp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:kp(t.type),doc:n,oldIndex:i,newIndex:o}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function kp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wo()}}function wp(e,t){return e instanceof yp&&t instanceof yp?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof mp&&t instanceof mp&&e._firestore===t._firestore&&Sv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function bp(e){if(Wa(e)&&0===e.explicitOrderBy.length)throw new Io(xo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _p=d(function e(){p(this,e)});function xp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=a._apply(e)}return e}var Ip=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this)).Ka=e,o.ja=r,o.Qa=i,o.type="where",o}return d(n,[{key:"_apply",value:function(e){var t,n,r,i=Gv(e.firestore),o=function(e,t,n,r,i,o,a){var u;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Io(xo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on FieldPath.documentId()."));if("in"===o||"not-in"===o){Op(a,o);var s,l=[],h=c(a);try{for(h.s();!(s=h.n()).done;){var f=s.value;l.push(Np(r,e,f))}}catch(v){h.e(v)}finally{h.f()}u={arrayValue:{values:l}}}else u=Np(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Op(a,o),u=np(n,"where",a,"in"===o||"not-in"===o);var d=Ca.create(i,o,u);return function(e,t){if(t.v()){var n=Qa(e);if(null!==n&&!n.isEqual(t.field))throw new Io(xo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ka(e);null!==r&&Rp(0,t.field,r)}var i=function(e,t){var n,r=c(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(v){r.e(v)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new Io(xo.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,i,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new _v(e.firestore,e.converter,(t=e._query,n=o,r=t.filters.concat([n]),new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(_p),Tp=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).Ka=e,i.Wa=r,i.type="orderBy",i}return d(n,[{key:"_apply",value:function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new Io(xo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Io(xo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ua(t,n);return function(e,t){if(null===Ka(e)){var n=Qa(e);null!==n&&Rp(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new _v(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new Ba(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(_p),Ep=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this)).type=e,o.Ga=r,o.za=i,o}return d(n,[{key:"_apply",value:function(e){return new _v(e.firestore,e.converter,$a(e._query,this.Ga,this.za))}}]),n}(_p),Sp=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this)).type=e,o.Ha=r,o.Ja=i,o}return d(n,[{key:"_apply",value:function(e){var t,n,r=Ap(e,this.type,this.Ha,this.Ja);return new _v(e.firestore,e.converter,(n=r,new Ba((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))}}]),n}(_p),Cp=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this)).type=e,o.Ha=r,o.Ja=i,o}return d(n,[{key:"_apply",value:function(e){var t,n,r=Ap(e,this.type,this.Ha,this.Ja);return new _v(e.firestore,e.converter,(n=r,new Ba((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))}}]),n}(_p);function Ap(e,t,n,r){if(n[0]=(0,nt.m9)(n[0]),n[0]instanceof fp)return function(e,t,n,r,i){if(!r)throw new Io(xo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var o,a=[],u=c(Ja(e));try{for(u.s();!(o=u.n()).done;){var s=o.value;if(s.field.isKeyField())a.push(da(t,r.key));else{var l=r.data.field(s.field);if($o(l))throw new Io(xo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var h=s.field.canonicalString();throw new Io(xo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(h,"' (used as the orderBy) does not exist."))}a.push(l)}}}catch(f){u.e(f)}finally{u.f()}return new Fa(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Gv(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new Io(xo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(a[s].field.isKeyField()){if("string"!=typeof c)throw new Io(xo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ya(e)&&-1!==c.indexOf("/"))throw new Io(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ho.fromString(c));if(!oa.isDocumentKey(l))throw new Io(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new oa(l);u.push(da(t,h))}else{var f=np(n,r,c);u.push(f)}}return new Fa(u,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function Np(e,t,n){if("string"==typeof(n=(0,nt.m9)(n))){if(""===n)throw new Io(xo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ya(t)&&-1!==n.indexOf("/"))throw new Io(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ho.fromString(n));if(!oa.isDocumentKey(r))throw new Io(xo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return da(e,new oa(r))}if(n instanceof bv)return da(e,n._key);throw new Io(xo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yv(n),"."))}function Op(e,t){if(!Array.isArray(e)||0===e.length)throw new Io(xo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Io(xo.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Rp(e,t,n){if(!n.isEqual(t))throw new Io(xo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Dp=function(){function e(){p(this,e)}return d(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return qo(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Uv(Jo(e.latitude),Jo(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ea(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ta(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Yo(e);return new Vo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ho.fromString(e);bo(Zs(n));var r=new lv(n.get(1),n.get(3)),i=new oa(n.popFirst(5));return r.isEqual(t)||go("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Pp(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Lp=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return d(n,[{key:"convertBytes",value:function(e){return new Fv(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bv(this.firestore,null,t)}}]),n}(Dp),Mp=function(){function e(t,n){p(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gv(t)}return d(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Fp(e,this._firestore),i=Pp(r.converter,t,n),o=Wv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,xu.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Fp(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return r="string"==typeof(t=(0,nt.m9)(t))||t instanceof Mv?tp(this._dataReader,"WriteBatch.update",i._key,t,n,a):ep(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,xu.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Fp(e,this._firestore);return this._mutations=this._mutations.concat(new Vu(t._key,xu.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Io(xo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Fp(e,t){if((e=(0,nt.m9)(e)).firestore!==t)throw new Io(xo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Vp=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return d(n,[{key:"convertBytes",value:function(e){return new Fv(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bv(this.firestore,null,t)}}]),n}(Dp);function Up(e){e=gv(e,_v);var t=gv(e.firestore,Ov),n=Rv(t),r=new Vp(t);return bp(e._query),sv(n,e._query).then(function(n){return new mp(t,r,e,n)})}function jp(e,t,n){e=gv(e,bv);var r=gv(e.firestore,Ov),i=Pp(e.converter,t,n);return Bp(r,[Wv(Gv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xu.none())])}function qp(e,t,n){e=gv(e,bv);for(var r=gv(e.firestore,Ov),i=Gv(r),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return Bp(r,[("string"==typeof(t=(0,nt.m9)(t))||t instanceof Mv?tp(i,"updateDoc",e._key,t,n,a):ep(i,"updateDoc",e._key,t)).toMutation(e._key,xu.exists(!0))])}function zp(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o,a,u;t=(0,nt.m9)(t);var s={includeMetadataChanges:!1},c=0;"object"!=typeof r[c]||Av(r[c])||(s=r[c],c++);var l,h,f,d={includeMetadataChanges:s.includeMetadataChanges};if(Av(r[c])){var v=r[c];r[c]=null===(o=v.next)||void 0===o?void 0:o.bind(v),r[c+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),r[c+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(t instanceof bv)h=gv(t.firestore,Ov),f=Za(t._key.path),l={next:function(e){r[c]&&r[c](Hp(h,t,e))},error:r[c+1],complete:r[c+2]};else{var p=gv(t,_v);h=gv(p.firestore,Ov),f=p._query;var y=new Vp(h);l={next:function(e){r[c]&&r[c](new mp(h,y,p,e))},error:r[c+1],complete:r[c+2]},bp(t._query)}return function(t,n,r,i){var o=new zd(i),a=new Pf(n,o,r);return t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Sf,e.next=3,ov(t);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},n)}))),function(){o.Xo(),t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Af,e.next=3,ov(t);case 3:return e.t1=e.sent,e.t2=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},n)})))}}(Rv(h),f,d,l)}function Bp(t,n){return r=Rv(t),i=n,o=new To,r.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n){return Jf.apply(this,arguments)},e.next=3,iv(r);case 3:return e.t1=e.sent,e.t2=i,e.t3=o,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}},t)}))),o.promise;var r,i,o}function Hp(e,t,n){var r=n.docs.get(t._key),i=new Vp(e);return new yp(e,i,t._key,r,new pp(n.hasPendingWrites,n.fromCache),t.converter)}var Zp=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r))._firestore=e,i}return d(n,[{key:"get",value:function(e){var t=this,r=Fp(e,this._firestore),i=new Vp(this._firestore);return o(I(n.prototype),"get",this).call(this,e).then(function(e){return new yp(t._firestore,i,r._key,e._document,new pp(!1,!1),r.converter)})}}]),n}(function(){function e(t,n){p(this,e),this._firestore=t,this._transaction=n,this._dataReader=Gv(t)}return d(e,[{key:"get",value:function(e){var t=this,n=Fp(e,this._firestore),r=new Lp(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return wo();var i=e[0];if(i.isFoundDocument())return new fp(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new fp(t._firestore,r,n._key,null,n.converter);throw wo()})}},{key:"set",value:function(e,t,n){var r=Fp(e,this._firestore),i=Pp(r.converter,t,n),o=Wv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}},{key:"update",value:function(e,t,n){for(var r,i=Fp(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return r="string"==typeof(t=(0,nt.m9)(t))||t instanceof Mv?tp(this._dataReader,"Transaction.update",i._key,t,n,a):ep(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Fp(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Gp(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Io("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function Wp(){if("undefined"==typeof Uint8Array)throw new Io("unimplemented","Uint8Arrays are not available in this environment.")}function Kp(){if("undefined"==typeof atob)throw new Io("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(e){fo=e})($e.SDK_VERSION),(0,$e._registerComponent)(new et.wA("firestore",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=new Ov(r,new Ao(e.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),i._setSettings(n),i},"PUBLIC")),(0,$e.registerVersion)("@firebase/firestore","3.0.2",void 0);var Qp=function(){function e(t){p(this,e),this._delegate=t}return d(e,[{key:"toBase64",value:function(){return Kp(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Wp(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Kp(),new e(Fv.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Wp(),new e(Fv.fromUint8Array(t))}}]),e}();function Yp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Jp=function(){function t(){p(this,t)}return d(t,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Lv(e=gv(e,Ov));var n=Rv(e),r=e._freezeSettings(),i=new jd;return Pv(n,i,new Vd(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Lv(e=gv(e,Ov));var t=Rv(e),n=e._freezeSettings(),r=new jd;return Pv(t,r,new Ud(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(t){return function(t){if(t._initialized&&!t._terminated)throw new Io(xo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new To;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Xe.Z)(e().mark(function r(){var i;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(i=(0,Xe.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(gc.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return r=n+"main",e.next=5,gc.delete(r);case 5:case"end":return e.stop()}},t)})),function(e){return i.apply(this,arguments)})(Al(t._databaseId,t._persistenceKey));case 3:n.resolve(),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),n.reject(r.t0);case 9:case"end":return r.stop()}},r,null,[[0,6]])}))),n.promise}(t._delegate)}}]),t}(),Xp=function(){function t(e,n,r){var i=this;p(this,t),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},e instanceof lv||(this._appCompat=e)}return d(t,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(e=gv(e,wv))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&mo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var a,u;if("string"==typeof i.mockUserToken)a=i.mockUserToken,u=ho.MOCK_USER;else{a=(0,nt.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Io(xo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ho(s)}e._credentials=new Co(new Eo(a,u))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(t){return function(t){return t.asyncQueue.enqueue((0,Xe.Z)(e().mark(function n(){var r,i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tv(t);case 2:return r=e.sent,e.next=5,rv(t);case 5:return i=e.sent,e.abrupt("return",(r.setNetworkEnabled(!0),n=void 0,(n=_o(i)).Kr.delete(0),Ph(n)));case 7:case"end":return e.stop()}var n},n)})))}(Rv(t=gv(t,Ov)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(t){return function(t){return t.asyncQueue.enqueue((0,Xe.Z)(e().mark(function n(){var r,i,o;return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tv(t);case 2:return r=n.sent,n.next=5,rv(t);case 5:return i=n.sent,n.abrupt("return",(r.setNetworkEnabled(!1),(o=(0,Xe.Z)(e().mark(function t(n){var r;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=_o(n)).Kr.add(0),e.next=4,Mh(r);case 4:r.Wr.set("Offline");case 5:case"end":return e.stop()}},t)})),function(e){return o.apply(this,arguments)})(i)));case 7:case"end":return n.stop()}},n)})))}(Rv(t=gv(t,Ov)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&dv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(t){return n=Rv(t=gv(t,Ov)),r=new To,n.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){return ud.apply(this,arguments)},e.next=3,iv(n);case 3:return e.t1=e.sent,e.t2=r,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},t)}))),r.promise;var n,r}(this._delegate)}},{key:"onSnapshotsInSync",value:function(t){return function(t,n){return function(t,n){var r=new zd(n);return t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function n(){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ov(t);case 2:return i=e.sent,o=r,_o(i).Zr.add(o),e.abrupt("return",void o.next());case 6:case"end":return e.stop()}},n)}))),function(){r.Xo(),t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function n(){var i,o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ov(t);case 2:return i=e.sent,o=r,e.abrupt("return",void _o(i).Zr.delete(o));case 5:case"end":return e.stop()}},n)})))}}(Rv(t=gv(t,Ov)),Av(n)?n:{next:n})}(this._delegate,t)}},{key:"app",get:function(){if(!this._appCompat)throw new Io("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new fy(this,Iv(this._delegate,e))}catch(t){throw iy(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new ry(this,Tv(this._delegate,e))}catch(t){throw iy(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cy(this,function(e,t){if(e=gv(e,wv),fv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Io(xo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new _v(e,null,(n=t,new Ba(Ho.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw iy(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(t){var n=this;return function(t,n){return function(t,n){var r=new To;return t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function i(){var o;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$d(t).then(function(e){return e.datastore});case 2:o=e.sent,new Zd(t.asyncQueue,o,n,r).run();case 4:case"end":return e.stop()}},i)}))),r.promise}(Rv(t),function(e){return n(new Zp(t,e))})}(this._delegate,function(e){return t(new ey(n,e))})}},{key:"batch",value:function(){var e=this;return Rv(this._delegate),new ty(new Mp(this._delegate,function(t){return Bp(e._delegate,t)}))}},{key:"loadBundle",value:function(t){return function(t,n){var r=Rv(t=gv(t,Ov)),i=new Nv;return function(t,n,r,i){var o,a,u,s=(o=r,a=Eh(n),u=function(e,t){if(e instanceof Uint8Array)return qd(e,t);if(e instanceof ArrayBuffer)return qd(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof o?(new TextEncoder).encode(o):o),new Bd(u,a));t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function n(){return e().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(t,n,r){var i,o=_o(t);(i=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u,s,c,l;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getMetadata();case 3:return o=e.sent,e.next=6,function(e,t){var n=_o(e),r=ks(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Je.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(n.localStore,o);case 6:if(!e.sent){e.next=10;break}return e.next=9,r.close();case 9:return e.abrupt("return",void i._completeWith((l=o,{taskState:"Success",documentsLoaded:l.totalDocuments,bytesLoaded:l.totalBytes,totalDocuments:l.totalDocuments,totalBytes:l.totalBytes})));case 10:return i._updateProgress(Vf(o)),a=new Ff(o,n.localStore,r.N),e.next=14,r.Qo();case 14:u=e.sent;case 15:if(!u){e.next=25;break}return e.next=18,a.fo(u);case 18:return(s=e.sent)&&i._updateProgress(s),e.next=22,r.Qo();case 22:u=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return c=e.sent,e.next=30,pd(n,c.Tn,void 0);case 30:return e.next=32,function(e,t){var n=_o(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Je.saveBundleMetadata(e,t)})}(n.localStore,o);case 32:i._completeWith(c.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),mo("SyncEngine","Loading bundle failed with ".concat(e.t0)),i._failWith(e.t0);case 38:case"end":return e.stop()}},t,null,[[0,35]])})),function(e,t,n){return i.apply(this,arguments)})(o,n,r).then(function(){o.sharedClientState.notifyBundleLoaded()})},n.next=3,iv(t);case 3:n.t1=n.sent,n.t2=s,n.t3=i,(0,n.t0)(n.t1,n.t2,n.t3);case 7:case"end":return n.stop()}},n)})))}(r,t._databaseId,n,i),i}(this._delegate,t)}},{key:"namedQuery",value:function(t){var n=this;return function(t,n){return function(t,n){return t.asyncQueue.enqueue((0,Xe.Z)(e().mark(function r(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){var n=_o(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Je.getNamedQuery(e,t)})},e.next=3,nv(t);case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},r)})))}(Rv(t=gv(t,Ov)),n).then(function(e){return e?new _v(t,null,e.query):null})}(this._delegate,t).then(function(e){return e?new cy(n,e):null})}}]),t}(),$p=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return d(n,[{key:"convertBytes",value:function(e){return new Qp(new Fv(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return ry.forKey(t,this.firestore,null)}}]),n}(Dp),ey=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new $p(t)}return d(e,[{key:"get",value:function(e){var t=this,n=dy(e);return this._delegate.get(n).then(function(e){return new uy(t._firestore,new yp(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=dy(e);return n?(Gp("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];var u=dy(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(o)),this}},{key:"delete",value:function(e){var t=dy(e);return this._delegate.delete(t),this}}]),e}(),ty=function(){function e(t){p(this,e),this._delegate=t}return d(e,[{key:"set",value:function(e,t,n){var r=dy(e);return n?(Gp("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];var u=dy(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(o)),this}},{key:"delete",value:function(e){var t=dy(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ny=function(){function e(t,n,r){p(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return d(e,[{key:"fromFirestore",value:function(e,t){var n=new gp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sy(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new $p(t),n),i.set(n,o)),o}}]),e}();ny.INSTANCES=new WeakMap;var ry=function(){function t(e,n){p(this,t),this.firestore=e,this._delegate=n,this._userDataWriter=new $p(e)}return d(t,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new fy(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new fy(this.firestore,Iv(this._delegate,e))}catch(t){throw iy(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,nt.m9)(e))instanceof bv&&Ev(this._delegate,e)}},{key:"set",value:function(e,t){t=Gp("DocumentReference.set",t);try{return t?jp(this._delegate,e,t):jp(this._delegate,e)}catch(n){throw iy(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?qp(this._delegate,e):qp.apply(void 0,[this._delegate,e,t].concat(r))}catch(o){throw iy(o,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Bp(gv(e.firestore,Ov),[new Vu(e._key,xu.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oy(n),o=ay(n,function(t){return new uy(e.firestore,new yp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return zp(this._delegate,i,o)}},{key:"get",value:function(t){var n,r=this;return n="cache"===(null==t?void 0:t.source)?function(t){t=gv(t,bv);var n=gv(t.firestore,Ov),r=Rv(n),i=new Vp(n);return function(t,n){var r=new To;return t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function i(){var o;return e().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=(o=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=_o(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.Qn.An(e,t)})}(n,r);case 3:(o=e.sent).isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new Io(xo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=bf(e.t0,"Failed to get document '".concat(r," from cache")),i.reject(a);case 11:case"end":return e.stop()}},t,null,[[0,7]])})),function(e,t,n){return o.apply(this,arguments)}),i.next=3,nv(t);case 3:return i.t1=i.sent,i.t2=n,i.t3=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3));case 7:case"end":return i.stop()}},i)}))),r.promise}(r,t._key).then(function(e){return new yp(n,i,t._key,e,new pp(null!==e&&e.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(e){e=gv(e,bv);var t=gv(e.firestore,Ov);return uv(Rv(t),e._key,{source:"server"}).then(function(n){return Hp(t,e,n)})}(this._delegate):function(e){e=gv(e,bv);var t=gv(e.firestore,Ov);return uv(Rv(t),e._key).then(function(n){return Hp(t,e,n)})}(this._delegate),n.then(function(e){return new uy(r.firestore,new yp(r.firestore._delegate,r._userDataWriter,e._key,e._document,e.metadata,r._delegate.converter))})}},{key:"withConverter",value:function(e){return new t(this.firestore,this._delegate.withConverter(e?ny.getInstance(this.firestore,e):null))}}],[{key:"forPath",value:function(e,n,r){if(e.length%2!=0)throw new Io("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(e.canonicalString()," has ").concat(e.length));return new t(n,new bv(n._delegate,r,new oa(e)))}},{key:"forKey",value:function(e,n,r){return new t(n,new bv(n._delegate,r,e))}}]),t}();function iy(e,t,n){return e.message=e.message.replace(t,n),e}function oy(e){var t,n=c(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!Yp(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function ay(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Yp(e[0])?e[0]:Yp(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uy=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return d(e,[{key:"ref",get:function(){return new ry(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return wp(this._delegate,e._delegate)}}]),e}(),sy=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||wo()}(void 0!==t),t}}]),n}(uy),cy=function(){function t(e,n){p(this,t),this.firestore=e,this._delegate=n,this._userDataWriter=new $p(e)}return d(t,[{key:"where",value:function(e,n,r){try{return new t(this.firestore,xp(this._delegate,function(e,t,n){var r=t,i=vp("where",e);return new Ip(i,r,n)}(e,n,r)))}catch(i){throw iy(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(e,n){try{return new t(this.firestore,xp(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=vp("orderBy",e);return new Tp(r,n)}(e,n)))}catch(r){throw iy(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(e){try{return new t(this.firestore,xp(this._delegate,function(e){return mv("limit",e),new Ep("limit",e,"F")}(e)))}catch(n){throw iy(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(e){try{return new t(this.firestore,xp(this._delegate,function(e){return mv("limitToLast",e),new Ep("limitToLast",e,"L")}(e)))}catch(n){throw iy(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new t(this.firestore,xp(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sp("startAt",t,!0)}).apply(void 0,arguments)))}catch(e){throw iy(e,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new t(this.firestore,xp(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sp("startAfter",t,!1)}).apply(void 0,arguments)))}catch(e){throw iy(e,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new t(this.firestore,xp(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cp("endBefore",t,!0)}).apply(void 0,arguments)))}catch(e){throw iy(e,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new t(this.firestore,xp(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cp("endAt",t,!1)}).apply(void 0,arguments)))}catch(e){throw iy(e,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Sv(this._delegate,e._delegate)}},{key:"get",value:function(t){var n,r=this;return n="cache"===(null==t?void 0:t.source)?function(t){t=gv(t,_v);var n=gv(t.firestore,Ov),r=Rv(n),i=new Vp(n);return function(t,n){var r=new To;return t.asyncQueue.enqueueAndForget((0,Xe.Z)(e().mark(function i(){var o;return e().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=(o=(0,Xe.Z)(e().mark(function t(n,r,i){var o,a,u,s,c;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gl(n,r,!0);case 3:o=e.sent,a=new qf(r,o.Gn),u=a.Io(o.documents),s=a.applyChanges(u,!1),i.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=bf(e.t0,"Failed to execute query '".concat(r," against cache")),i.reject(c);case 14:case"end":return e.stop()}},t,null,[[0,10]])})),function(e,t,n){return o.apply(this,arguments)}),i.next=3,nv(t);case 3:return i.t1=i.sent,i.t2=n,i.t3=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3));case 7:case"end":return i.stop()}},i)}))),r.promise}(r,t._query).then(function(e){return new mp(n,i,t,e)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(e){e=gv(e,_v);var t=gv(e.firestore,Ov),n=Rv(t),r=new Vp(t);return sv(n,e._query,{source:"server"}).then(function(n){return new mp(t,r,e,n)})}(this._delegate):Up(this._delegate),n.then(function(e){return new hy(r.firestore,new mp(r.firestore._delegate,r._userDataWriter,r._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=oy(n),o=ay(n,function(t){return new hy(e.firestore,new mp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return zp(this._delegate,i,o)}},{key:"withConverter",value:function(e){return new t(this.firestore,this._delegate.withConverter(e?ny.getInstance(this.firestore,e):null))}}]),t}(),ly=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return d(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sy(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),hy=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return d(e,[{key:"query",get:function(){return new cy(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new sy(e._firestore,t)})}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new ly(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new sy(n._firestore,r))})}},{key:"isEqual",value:function(e){return wp(this._delegate,e._delegate)}}]),e}(),fy=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return d(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new ry(this.firestore,e):null}},{key:"doc",value:function(e){try{return new ry(this.firestore,void 0===e?Tv(this._delegate):Tv(this._delegate,e))}catch(t){throw iy(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=gv(e.firestore,Ov),r=Tv(e),i=Pp(e.converter,t);return Bp(n,[Wv(Gv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xu.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new ry(t.firestore,e)})}},{key:"isEqual",value:function(e){return Ev(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,this._delegate.withConverter(e?ny.getInstance(this.firestore,e):null))}}]),n}(cy);function dy(e){return gv(e,bv)}var vy=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=b(Mv,n)}return d(e,[{key:"isEqual",value:function(e){return(e=(0,nt.m9)(e))instanceof Mv&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Go.keyField().canonicalString())}}]),e}(),py=function(){function e(t){p(this,e),this._delegate=t}return d(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Yv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Kv("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jv("arrayUnion",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Xv("arrayRemove",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new $v("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yy={Firestore:Xp,GeoPoint:Uv,Timestamp:Vo,Blob:Qp,Transaction:ey,WriteBatch:ty,DocumentReference:ry,DocumentSnapshot:uy,Query:cy,QueryDocumentSnapshot:sy,QuerySnapshot:hy,CollectionReference:fy,FieldPath:vy,FieldValue:py,setLogLevel:function(e){!function(e){vo.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){(function(e,t){e.INTERNAL.registerComponent(new et.wA("firestore-compat",function(e){return function(e,t){return new Xp(e,t,new Jp)}(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())},"PUBLIC").setServiceProps(Object.assign({},yy)))})(e),e.registerVersion("@firebase/firestore-compat","0.1.2")}(Je.Z);var gy=a(9765),my=a(6682),ky=a(309),wy=a(5345);function by(e,t){return"function"==typeof t?function(n){return n.pipe(by(function(n,r){return(0,Oe.D)(e(n,r)).pipe((0,ze.U)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new _y(e))}}var _y=function(){function e(t){p(this,e),this.project=t}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new xy(e,this.project))}}]),e}(),xy=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return d(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new wy.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,wy.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;(!e||e.closed)&&o(I(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&o(I(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(wy.Ds),Iy=a(7771),Ty=a(5319),Ey=a(7971),Sy=a(8858),Cy=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return p(this,n),(e=t.call(this)).scheduler=o,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return d(n,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}o(I(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new Ay(this._getNow(),e)),this._trimBufferThenGetEvents()),o(I(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new Ey.N;if(this.isStopped||this.hasError?t=Ty.w.EMPTY:(this.observers.push(e),t=new Sy.W(this,e)),i&&e.add(e=new ky.ht(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(var u=0;u<o&&!e.closed;u++)e.next(r[u].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||Iy.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r}}]),n}(gy.xQ),Ay=d(function e(t,n){p(this,e),this.time=t,this.value=n});function Ny(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=e.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,u=e.refCount,s=e.scheduler,c=0,l=!1,h=!1;return function(e){var r;c++,!t||l?(l=!1,t=new Cy(i,a,s),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}),h&&(n=void 0)):r=t.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&u&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(r))}}var Oy=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Ry=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Dy=a(9193);function Py(e){return function(t){return 0===e?(0,Dy.c)():t.lift(new Ly(e))}}var Ly=function(){function e(t){if(p(this,e),this.total=t,this.total<0)throw new Ry}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new My(e,this.total))}}]),e}(),My=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return d(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(Ve.L);function Fy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new Vy(e))}}var Vy=function(){function e(t){p(this,e),this.defaultValue=t}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new Uy(e,this.defaultValue))}}]),e}(),Uy=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return d(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(Ve.L);function jy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:By;return function(t){return t.lift(new qy(e))}}var qy=function(){function e(t){p(this,e),this.errorFactory=t}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new zy(e,this.errorFactory))}}]),e}(),zy=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return d(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(Ve.L);function By(){return new Oy}var Hy=a(4487);function Zy(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ke(function(t,n){return e(t,n,r)}):Hy.y,Py(1),n?Fy(t):jy(function(){return new Oy}))}}function Gy(e,t){return t?by(function(){return e},t):by(function(){return e})}var Wy=a(3101),Ky=a(7841),Qy=new s.OlP("angularfire2.auth.use-emulator"),Yy=new s.OlP("angularfire2.auth.settings"),Jy=new s.OlP("angularfire2.auth.tenant-id"),Xy=new s.OlP("angularfire2.auth.langugage-code"),$y=new s.OlP("angularfire2.auth.use-device-language"),eg=new s.OlP("angularfire.auth.persistence"),tg=function(e,t,r,i,o,a,s,c){return(0,De.cc)("".concat(e.name,".auth"),"AngularFireAuth",e.name,function(){var l=t.runOutsideAngular(function(){return e.auth()});if(r&&l.useEmulator.apply(l,u(r)),i&&(l.tenantId=i),l.languageCode=o,a&&l.useDeviceLanguage(),s)for(var h=0,f=Object.entries(s);h<f.length;h++){var d=n(f[h],2),v=d[0],p=d[1];l.settings[v]=p}return c&&l.setPersistence(c),l},[r,i,o,a,s,c])},ng=function(){var e=d(function e(t,n,r,i,o,u,s,c,l,h,f){p(this,e);var d=new gy.xQ,v=(0,Re.of)(void 0).pipe((0,ky.QV)(o.outsideAngular),by(function(){return i.runOutsideAngular(function(){return Promise.resolve().then(a.bind(a,6780))})}),(0,ze.U)(function(){return(0,Ce.on)(t,i,n)}),(0,ze.U)(function(e){return tg(e,i,u,c,l,h,s,f)}),Ny({bufferSize:1,refCount:!1}));if(K(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Re.of)(null);else{v.pipe(Zy()).subscribe();var y=v.pipe(by(function(e){return e.getRedirectResult().then(function(e){return e},function(){return null})}),De.iC,Ny({bufferSize:1,refCount:!1})),g=v.pipe(by(function(e){return new Ne.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onAuthStateChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})})),m=v.pipe(by(function(e){return new Ne.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onIdTokenChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})}));this.authState=y.pipe(Gy(g),(0,Wy.R)(o.outsideAngular),(0,ky.QV)(o.insideAngular)),this.user=y.pipe(Gy(m),(0,Wy.R)(o.outsideAngular),(0,ky.QV)(o.insideAngular)),this.idToken=this.user.pipe(by(function(e){return e?(0,Oe.D)(e.getIdToken()):(0,Re.of)(null)})),this.idTokenResult=this.user.pipe(by(function(e){return e?(0,Oe.D)(e.getIdTokenResult()):(0,Re.of)(null)})),this.credential=(0,my.T)(y,d,this.authState.pipe(Ke(function(e){return!e}))).pipe((0,ze.U)(function(e){return(null==e?void 0:e.user)?e:null}),(0,Wy.R)(o.outsideAngular),(0,ky.QV)(o.insideAngular))}return(0,Ce.pX)(this,v,i,{spy:{apply:function(e,t,n){(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(function(e){return d.next(e)})}}})});return e.\u0275fac=function(t){return new(t||e)(s.LFG(Ce.Dh),s.LFG(Ce.xv,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(De.HU),s.LFG(Qy,8),s.LFG(Yy,8),s.LFG(Jy,8),s.LFG(Xy,8),s.LFG($y,8),s.LFG(eg,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}();function rg(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae.z;return new Ne.y(function(n){var r;return null!=t?t.schedule(function(){r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(e,t)}function ig(e,t){return rg(e,t).pipe((0,ze.U)(function(e){return{payload:e,type:"query"}}))}function og(e,t){return ig(e,t).pipe(Fe(void 0),Ue(),(0,ze.U)(function(e){var t=n(e,2),r=t[0],i=t[1],o=i.payload.docChanges(),a=o.map(function(e){return{type:e.type,payload:e}});return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(e,t){var n=o.find(function(t){return t.doc.ref.isEqual(e.ref)}),i=null==r?void 0:r.payload.docs.find(function(t){return t.ref.isEqual(e.ref)});n&&JSON.stringify(n.doc.metadata)===JSON.stringify(e.metadata)||!n&&i&&JSON.stringify(i.metadata)===JSON.stringify(e.metadata)||a.push({type:"modified",payload:{oldIndex:t,newIndex:t,type:"modified",doc:e}})}),a}))}function ag(e,t,n){return og(e,n).pipe(Be(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return ug(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return ug(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return ug(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(function(e){return e.payload}),t)},[]),function(e){return e.lift(new Ge(void 0,void 0))},(0,ze.U)(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}function ug(e,t,n){for(var r=e.slice(),i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return r.splice.apply(r,[t,n].concat(o)),r}function sg(e){return(!e||0===e.length)&&(e=["added","removed","modified"]),e}var cg=function(){function e(t,n,r){p(this,e),this.ref=t,this.query=n,this.afs=r}return d(e,[{key:"stateChanges",value:function(e){var t=og(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ze.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}))),t.pipe(Fe(void 0),Ue(),Ke(function(e){var t=n(e,2),r=t[0];return t[1].length>0||!r}),(0,ze.U)(function(e){var t=n(e,2);t[0];return t[1]}),De.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(Be(function(e,t){return[].concat(u(e),u(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=sg(e);return ag(this.query,t,this.afs.schedulers.outsideAngular).pipe(De.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(Object.assign({},n.data()),t({},e.idField,n.id)):n.data()})}),De.iC)}},{key:"get",value:function(e){return(0,Oe.D)(this.query.get(e)).pipe(De.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new lg(this.ref.doc(e),this.afs)}}]),e}(),lg=function(){function e(t,n){p(this,e),this.ref=t,this.afs=n}return d(e,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=yg(this.ref.collection(e),t),r=n.ref,i=n.query;return new cg(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return function(e,t){return rg(e,t).pipe(Fe(void 0),Ue(),(0,ze.U)(function(e){var t=n(e,2),r=t[0],i=t[1];return i.exists?(null==r?void 0:r.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(De.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,ze.U)(function(n){var r=n.payload;return e.idField?Object.assign(Object.assign({},r.data()),t({},e.idField,r.id)):r.data()}))}},{key:"get",value:function(e){return(0,Oe.D)(this.ref.get(e)).pipe(De.iC)}}]),e}(),hg=function(){function e(t,n){p(this,e),this.query=t,this.afs=n}return d(e,[{key:"stateChanges",value:function(e){return e&&0!==e.length?og(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),Ke(function(e){return e.length>0}),De.iC):og(this.query,this.afs.schedulers.outsideAngular).pipe(De.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(Be(function(e,t){return[].concat(u(e),u(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=sg(e);return ag(this.query,t,this.afs.schedulers.outsideAngular).pipe(De.iC)}},{key:"valueChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,ze.U)(function(n){return n.payload.docs.map(function(n){return e.idField?Object.assign(t({},e.idField,n.id),n.data()):n.data()})}),De.iC)}},{key:"get",value:function(e){return(0,Oe.D)(this.query.get(e)).pipe(De.iC)}}]),e}(),fg=new s.OlP("angularfire2.enableFirestorePersistence"),dg=new s.OlP("angularfire2.firestore.persistenceSettings"),vg=new s.OlP("angularfire2.firestore.settings"),pg=new s.OlP("angularfire2.firestore.use-emulator");function yg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var gg=function(){var e=function(){function e(t,r,i,o,a,s,c,l,h,f,d,v,y,g,m,k){var w;p(this,e),this.schedulers=c;var b=(0,Ce.on)(t,s,r),_=h;f&&tg(b,s,d,y,g,m,v,k),w=n((0,De.cc)("".concat(b.name,".firestore"),"AngularFirestore",b.name,function(){var e=s.runOutsideAngular(function(){return b.firestore()});if(o&&e.settings(o),_&&e.useEmulator.apply(e,u(_)),i&&!K(a)){return[e,s.runOutsideAngular(function(){try{return(0,Oe.D)(e.enablePersistence(l||void 0).then(function(){return!0},function(){return!1}))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Re.of)(!1)}})]}return[e,(0,Re.of)(!1)]},[o,_,i]),2),this.firestore=w[0],this.persistenceEnabled$=w[1]}return d(e,[{key:"collection",value:function(e,t){var n=yg("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query,o=this.schedulers.ngZone.run(function(){return r});return new cg(o,i,this)}},{key:"collectionGroup",value:function(e,t){var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new hg(n(r),this)}},{key:"doc",value:function(e){var t;t="string"==typeof e?this.firestore.doc(e):e;var n=this.schedulers.ngZone.run(function(){return t});return new lg(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(Ce.Dh),s.LFG(Ce.xv,8),s.LFG(fg,8),s.LFG(vg,8),s.LFG(s.Lbi),s.LFG(s.R0b),s.LFG(De.HU),s.LFG(dg,8),s.LFG(pg,8),s.LFG(ng,8),s.LFG(Qy,8),s.LFG(Yy,8),s.LFG(Jy,8),s.LFG(Xy,8),s.LFG($y,8),s.LFG(eg,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),mg=function(){var e=function(){function e(){p(this,e),Ky.Z.registerVersion("angularfire",De.q4.full,"fst-compat")}return d(e,null,[{key:"enablePersistence",value:function(t){return{ngModule:e,providers:[{provide:fg,useValue:!0},{provide:dg,useValue:t}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[gg]}),e}(),kg=function(e){y(n,e);var t=g(n);function n(e){var r;return p(this,n),(r=t.call(this))._value=e,r}return d(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=o(I(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ey.N;return this._value}},{key:"next",value:function(e){o(I(n.prototype),"next",this).call(this,this._value=e)}}]),n}(gy.xQ),wg=a(9796),bg=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(Ve.L),_g=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this)).parent=e,o.outerValue=r,o.outerIndex=i,o.index=0,o}return d(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(Ve.L),xg=a(7444);function Ig(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new _g(e,n,r);if(!i.closed)return t instanceof Ne.y?t.subscribe(i):(0,xg.s)(t)(i)}var Tg=a(6693),Eg={},Sg=function(){function e(t){p(this,e),this.resultSelector=t}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new Cg(e,this.resultSelector))}}]),e}(),Cg=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return d(n,[{key:"_next",value:function(e){this.values.push(Eg),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(Ig(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===Eg?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(bg);function Ag(e){return new Ne.y(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Oe.D)(n):(0,Dy.c)()).subscribe(t)})}var Ng=a(2441);function Og(e){return function(t){var n=new Rg(e),r=t.lift(n);return n.caught=r}}var Rg=function(){function e(t){p(this,e),this.selector=t}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new Dg(e,this.selector,this.caught))}}]),e}(),Dg=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e)).selector=r,o.caught=i,o}return d(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(a){return void o(I(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var r=new wy.IY(this);this.add(r);var i=(0,wy.ft)(t,r);i!==r&&this.add(i)}}}]),n}(wy.Ds),Pg=a(9773);function Lg(e,t){return(0,Pg.zg)(e,t,1)}function Mg(e){return function(t){return 0===e?(0,Dy.c)():t.lift(new Fg(e))}}var Fg=function(){function e(t){if(p(this,e),this.total=t,this.total<0)throw new Ry}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new Vg(e,this.total))}}]),e}(),Vg=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return d(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()}}]),n}(Ve.L),Ug=a(3342),jg=a(1307),qg=function(){function e(t){p(this,e),this.callback=t}return d(e,[{key:"call",value:function(e,t){return t.subscribe(new zg(e,this.callback))}}]),e}(),zg=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).add(new Ty.w(r)),i}return d(n)}(Ve.L),Bg=d(function e(t,n){p(this,e),this.id=t,this.url=n}),Hg=function(e){y(n,e);var t=g(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return p(this,n),(i=t.call(this,e,r)).navigationTrigger=o,i.restoredState=a,i}return d(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Bg),Zg=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o}return d(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Bg),Gg=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e,r)).reason=i,o}return d(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Bg),Wg=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e,r)).error=i,o}return d(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Bg),Kg=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;return p(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Bg),Qg=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;return p(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Bg),Yg=function(e){y(n,e);var t=g(n);function n(e,r,i,o,a){var u;return p(this,n),(u=t.call(this,e,r)).urlAfterRedirects=i,u.state=o,u.shouldActivate=a,u}return d(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Bg),Jg=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;return p(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Bg),Xg=function(e){y(n,e);var t=g(n);function n(e,r,i,o){var a;return p(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return d(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Bg),$g=function(){function e(t){p(this,e),this.route=t}return d(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),em=function(){function e(t){p(this,e),this.route=t}return d(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),tm=function(){function e(t){p(this,e),this.snapshot=t}return d(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),nm=function(){function e(t){p(this,e),this.snapshot=t}return d(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),rm=function(){function e(t){p(this,e),this.snapshot=t}return d(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),im=function(){function e(t){p(this,e),this.snapshot=t}return d(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),om=function(){function e(t,n,r){p(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return d(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),am="primary",um=function(){function e(t){p(this,e),this.params=t||{}}return d(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function sm(e){return new um(e)}var cm="ngNavigationCancelingError";function lm(e){var t=Error("NavigationCancelingError: "+e);return t[cm]=!0,t}function hm(e,t,n){var r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],u=e[o];if(a.startsWith(":"))i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function fm(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!dm(e[n=r[o]],t[n]))return!1;return!0}function dm(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=u(e).sort(),r=u(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function vm(e){return Array.prototype.concat.apply([],e)}function pm(e){return e.length>0?e[e.length-1]:null}function ym(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function gm(e){return(0,s.CqO)(e)?e:(0,s.QGY)(e)?(0,Oe.D)(Promise.resolve(e)):(0,Re.of)(e)}var mm={exact:function e(t,n,r){if(!Sm(t.segments,n.segments)||!xm(t.segments,n.segments,r)||t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children)if(!t.children[i]||!e(t.children[i],n.children[i],r))return!1;return!0},subset:bm},km={exact:function(e,t){return fm(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return dm(e[n],t[n])})},ignored:function(){return!0}};function wm(e,t,n){return mm[n.paths](e.root,t.root,n.matrixParams)&&km[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function bm(e,t,n){return _m(e,t,t.segments,n)}function _m(e,t,n,r){if(e.segments.length>n.length){var i=e.segments.slice(0,n.length);return!(!Sm(i,n)||t.hasChildren()||!xm(i,n,r))}if(e.segments.length===n.length){if(!Sm(e.segments,n)||!xm(e.segments,n,r))return!1;for(var o in t.children)if(!e.children[o]||!bm(e.children[o],t.children[o],r))return!1;return!0}var a=n.slice(0,e.segments.length),u=n.slice(e.segments.length);return!!(Sm(e.segments,a)&&xm(e.segments,a,r)&&e.children[am])&&_m(e.children[am],t,u,r)}function xm(e,t,n){return t.every(function(t,r){return km[n](e[r].parameters,t.parameters)})}var Im=function(){function e(t,n,r){p(this,e),this.root=t,this.queryParams=n,this.fragment=r}return d(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=sm(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Nm.serialize(this)}}]),e}(),Tm=function(){function e(t,n){var r=this;p(this,e),this.segments=t,this.children=n,this.parent=null,ym(n,function(e,t){return e.parent=r})}return d(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Om(this)}}]),e}(),Em=function(){function e(t,n){p(this,e),this.path=t,this.parameters=n}return d(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=sm(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Vm(this)}}]),e}();function Sm(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var Cm=d(function e(){p(this,e)}),Am=function(){function e(){p(this,e)}return d(e,[{key:"parse",value:function(e){var t=new Bm(e);return new Im(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t="/".concat(Rm(e.root,!0)),n=function(e){var t=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return"".concat(Pm(t),"=").concat(Pm(e))}).join("&"):"".concat(Pm(t),"=").concat(Pm(n))}).filter(function(e){return!!e});return t.length?"?".concat(t.join("&")):""}(e.queryParams),r="string"==typeof e.fragment?"#".concat(function(e){return encodeURI(e)}(e.fragment)):"";return"".concat(t).concat(n).concat(r)}}]),e}(),Nm=new Am;function Om(e){return e.segments.map(function(e){return Vm(e)}).join("/")}function Rm(e,t){if(!e.hasChildren())return Om(e);if(t){var n=e.children[am]?Rm(e.children[am],!1):"",r=[];return ym(e.children,function(e,t){t!==am&&r.push("".concat(t,":").concat(Rm(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return ym(e.children,function(e,r){r===am&&(n=n.concat(t(e,r)))}),ym(e.children,function(e,r){r!==am&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return n===am?[Rm(e.children[am],!1)]:["".concat(n,":").concat(Rm(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children[am]?"".concat(Om(e),"/").concat(i[0]):"".concat(Om(e),"/(").concat(i.join("//"),")")}function Dm(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pm(e){return Dm(e).replace(/%3B/gi,";")}function Lm(e){return Dm(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mm(e){return decodeURIComponent(e)}function Fm(e){return Mm(e.replace(/\+/g,"%20"))}function Vm(e){return"".concat(Lm(e.path)).concat(function(e){return Object.keys(e).map(function(t){return";".concat(Lm(t),"=").concat(Lm(e[t]))}).join("")}(e.parameters))}var Um=/^[^\/()?;=#]+/;function jm(e){var t=e.match(Um);return t?t[0]:""}var qm=/^[^=?&#]+/,zm=/^[^?&#]+/,Bm=function(){function e(t){p(this,e),this.url=t,this.remaining=t}return d(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tm([],{}):new Tm([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[am]=new Tm(e,t)),n}},{key:"parseSegment",value:function(){var e=jm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new Em(Mm(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=jm(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=jm(this.remaining);r&&(n=r,this.capture(n))}e[Mm(t)]=Mm(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(qm);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(zm);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Fm(t),o=Fm(n);if(e.hasOwnProperty(i)){var a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=jm(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=am);var o=this.parseChildren();t[i]=1===Object.keys(o).length?o[am]:new Tm([],o),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Hm=function(){function e(t){p(this,e),this._root=t}return d(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Zm(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=Zm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Gm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return Gm(e,this._root).map(function(e){return e.value})}}]),e}();function Zm(e,t){if(e===t.value)return t;var n,r=c(t.children);try{for(r.s();!(n=r.n()).done;){var i=Zm(e,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function Gm(e,t){if(e===t.value)return[t];var n,r=c(t.children);try{for(r.s();!(n=r.n()).done;){var i=Gm(e,n.value);if(i.length)return i.unshift(t),i}}catch(o){r.e(o)}finally{r.f()}return[]}var Wm=function(){function e(t,n){p(this,e),this.value=t,this.children=n}return d(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function Km(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var Qm=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).snapshot=r,tk(k(i),e),i}return d(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Hm);function Ym(e,t){var n=function(e,t){var n=new $m([],{},{},"",{},am,t,null,e.root,-1,{});return new ek("",new Wm(n,[]))}(e,t),r=new kg([new Em("",{})]),i=new kg({}),o=new kg({}),a=new kg({}),u=new kg(""),s=new Jm(r,i,a,u,o,am,t,n.root);return s.snapshot=n.root,new Qm(new Wm(s,[]),n)}var Jm=function(){function e(t,n,r,i,o,a,u,s){p(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this._futureSnapshot=s}return d(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,ze.U)(function(e){return sm(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ze.U)(function(e){return sm(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function Xm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var $m=function(){function e(t,n,r,i,o,a,u,s,c,l,h){p(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=s,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return d(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=sm(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=sm(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),ek=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this,r)).url=e,tk(k(i),r),i}return d(n,[{key:"toString",value:function(){return nk(this._root)}}]),n}(Hm);function tk(e,t){t.value._routerState=e,t.children.forEach(function(t){return tk(e,t)})}function nk(e){var t=e.children.length>0?" { ".concat(e.children.map(nk).join(", ")," } "):"";return"".concat(e.value).concat(t)}function rk(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,fm(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),fm(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!fm(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),fm(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function ik(e,t){var n=fm(e.params,t.params)&&function(e,t){return Sm(e,t)&&e.every(function(e,n){return fm(e.parameters,t[n].parameters)})}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||ik(e.parent,t.parent))}function ok(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=c(n.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(e.shouldReuseRoute(t.value,o.value.snapshot))return ok(e,t,o)}}catch(a){i.e(a)}finally{i.f()}return ok(e,t)})}(e,t,n);return new Wm(r,i)}if(e.shouldAttach(t.value)){var o=e.retrieve(t.value);if(null!==o){var a=o.route;return ak(t,a),a}}var u=function(e){return new Jm(new kg(e.url),new kg(e.params),new kg(e.queryParams),new kg(e.fragment),new kg(e.data),e.outlet,e.component,e)}(t.value),s=t.children.map(function(t){return ok(e,t)});return new Wm(u,s)}function ak(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)ak(e.children[n],t.children[n])}function uk(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function sk(e){return"object"==typeof e&&null!=e&&e.outlets}function ck(e,t,n,r,i){var o={};return r&&ym(r,function(e,t){o[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new Im(n.root===e?t:lk(n.root,e,t),o,i)}function lk(e,t,n){var r={};return ym(e.children,function(e,i){r[i]=e===t?n:lk(e,t,n)}),new Tm(e.segments,r)}var hk=function(){function e(t,n,r){if(p(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&uk(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(sk);if(i&&i!==pm(r))throw new Error("{outlets:{}} has to be the last command")}return d(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),fk=d(function e(t,n,r){p(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r});function dk(e,t,n){if(e||(e=new Tm([],{})),0===e.segments.length&&e.hasChildren())return vk(e,t,n);var r=function(e,t,n){for(var r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return o;var a=e.segments[i],u=n[r];if(sk(u))break;var s="".concat(u),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&c&&"object"==typeof c&&void 0===c.outlets){if(!mk(s,c,a))return o;r+=2}else{if(!mk(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var o=new Tm(e.segments.slice(0,r.pathIndex),{});return o.children[am]=new Tm(e.segments.slice(r.pathIndex),e.children),vk(o,0,i)}return r.match&&0===i.length?new Tm(e.segments,{}):r.match&&!e.hasChildren()?pk(e,t,n):r.match?vk(e,0,i):pk(e,t,n)}function vk(e,n,r){if(0===r.length)return new Tm(e.segments,{});var i=function(e){return sk(e[0])?e[0].outlets:t({},am,e)}(r),o={};return ym(i,function(t,r){"string"==typeof t&&(t=[t]),null!==t&&(o[r]=dk(e.children[r],n,t))}),ym(e.children,function(e,t){void 0===i[t]&&(o[t]=e)}),new Tm(e.segments,o)}function pk(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var o=n[i];if(sk(o)){var a=yk(o.outlets);return new Tm(r,a)}if(0===i&&uk(n[0]))r.push(new Em(e.segments[t].path,gk(n[0]))),i++;else{var u=sk(o)?o.outlets[am]:"".concat(o),s=i<n.length-1?n[i+1]:null;u&&s&&uk(s)?(r.push(new Em(u,gk(s))),i+=2):(r.push(new Em(u,{})),i++)}}return new Tm(r,{})}function yk(e){var t={};return ym(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=pk(new Tm([],{}),0,e))}),t}function gk(e){var t={};return ym(e,function(e,n){return t[n]="".concat(e)}),t}function mk(e,t,n){return e==n.path&&fm(t,n.parameters)}var kk=function(){function e(t,n,r,i){p(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return d(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),rk(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=Km(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),ym(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Km(e),o=0,a=Object.keys(i);o<a.length;o++){var u=a[o];this.deactivateRouteAndItsChildren(i[u],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=Km(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new im(e.value.snapshot))}),e.children.length&&this.forwardEvent(new nm(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(rk(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),wk(u.route)}else{var s=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=s?s.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function wk(e){rk(e.value),e.children.forEach(wk)}var bk=d(function e(t,n){p(this,e),this.routes=t,this.module=n});function _k(e){return"function"==typeof e}function xk(e){return e instanceof Im}var Ik=Symbol("INITIAL_VALUE");function Tk(){return by(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;return(0,Me.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&(0,wg.k)(t[0])&&(t=t[0]),(0,Tg.n)(t,i).lift(new Sg(r))}(e.map(function(e){return e.pipe(Py(1),Fe(Ik))})).pipe(Be(function(e,t){var n=!1;return t.reduce(function(e,r,i){return e!==Ik?e:(r===Ik&&(n=!0),n||!1!==r&&i!==t.length-1&&!xk(r)?e:r)},e)},Ik),Ke(function(e){return e!==Ik}),(0,ze.U)(function(e){return xk(e)?e:!0===e}),Py(1))})}var Ek=function(){var e=d(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&s._UZ(0,"router-outlet")},directives:function(){return[_w]},encapsulation:2}),e}();function Sk(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];Ck(r,Ak(t,r))}}function Ck(e,t){e.children&&Sk(e.children,t)}function Ak(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Nk(e){var t=e.children&&e.children.map(Nk),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==am&&(n.component=Ek),n}function Ok(e){return e.outlet||am}function Rk(e,t){var n=e.filter(function(e){return Ok(e)===t});return n.push.apply(n,u(e.filter(function(e){return Ok(e)!==t}))),n}var Dk={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Pk(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Dk):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||hm)(n,e,t);if(!i)return Object.assign({},Dk);var o={};ym(i.posParams,function(e,t){o[t]=e.path});var a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Lk(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return Mk(e,t,n)&&Ok(n)!==am})}(e,n,r)){var o=new Tm(t,function(e,t,n,r){var i={};i[am]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var o,a=c(n);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(""===u.path&&Ok(u)!==am){var s=new Tm([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,i[Ok(u)]=s}}}catch(l){a.e(l)}finally{a.f()}return i}(e,t,r,new Tm(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return Mk(e,t,n)})}(e,n,r)){var a=new Tm(e.segments,function(e,t,n,r,i,o){var a,u={},s=c(r);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(Mk(e,n,l)&&!i[Ok(l)]){var h=new Tm([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===o?e.segments.length:t.length,u[Ok(l)]=h}}}catch(f){s.e(f)}finally{s.f()}return Object.assign(Object.assign({},i),u)}(e,t,n,r,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}var u=new Tm(e.segments,e.children);return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}function Mk(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Fk(e,t,n,r){return!!(Ok(e)===r||r!==am&&Mk(t,n,e))&&("**"===e.path||Pk(t,e,n).matched)}function Vk(e,t,n){return 0===t.length&&!e.children[n]}var Uk=d(function e(t){p(this,e),this.segmentGroup=t||null}),jk=d(function e(t){p(this,e),this.urlTree=t});function qk(e){return new Ne.y(function(t){return t.error(new Uk(e))})}function zk(e){return new Ne.y(function(t){return t.error(new jk(e))})}function Bk(e){return new Ne.y(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var Hk=function(){function e(t,n,r,i,o){p(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(s.h0i)}return d(e,[{key:"apply",value:function(){var e=this,t=Lk(this.urlTree.root,[],[],this.config).segmentGroup,n=new Tm(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,am).pipe((0,ze.U)(function(t){return e.createUrlTree(Zk(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(Og(function(t){if(t instanceof jk)return e.allowRedirects=!1,e.match(t.urlTree);throw t instanceof Uk?e.noMatchError(t):t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,am).pipe((0,ze.U)(function(n){return t.createUrlTree(Zk(n),e.queryParams,e.fragment)})).pipe(Og(function(e){throw e instanceof Uk?t.noMatchError(e):e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,n,r){var i=e.segments.length>0?new Tm([],t({},am,e)):e;return new Im(i,n,r)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,ze.U)(function(e){return new Tm([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],o=0,a=Object.keys(n.children);o<a.length;o++){var u=a[o];"primary"===u?i.unshift(u):i.push(u)}return(0,Oe.D)(i).pipe(Lg(function(i){var o=n.children[i],a=Rk(t,i);return r.expandSegmentGroup(e,a,o,i).pipe((0,ze.U)(function(e){return{segment:e,outlet:i}}))}),Be(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Ke(function(t,n){return e(t,n,r)}):Hy.y,Mg(1),n?Fy(t):jy(function(){return new Oy}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,o){var a=this;return(0,Oe.D)(n).pipe(Lg(function(u){return a.expandSegmentAgainstRoute(e,t,n,u,r,i,o).pipe(Og(function(e){if(e instanceof Uk)return(0,Re.of)(null);throw e}))}),Zy(function(e){return!!e}),Og(function(e,n){if(e instanceof Oy||"EmptyError"===e.name){if(Vk(t,r,i))return(0,Re.of)(new Tm([],{}));throw new Uk(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,o,a){return Fk(r,t,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):qk(t):qk(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?zk(o):this.lineralizeSegments(n,o).pipe((0,Pg.zg)(function(n){var o=new Tm(n,{});return i.expandSegment(e,o,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){var a=this,u=Pk(t,r,i),s=u.matched,c=u.consumedSegments,l=u.lastChild,h=u.positionalParamSegments;if(!s)return qk(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?zk(f):this.lineralizeSegments(r,f).pipe((0,Pg.zg)(function(r){return a.expandSegment(e,t,n,r.concat(i.slice(l)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var o=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Re.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,ze.U)(function(e){return n._loadedConfig=e,new Tm(r,{})})):(0,Re.of)(new Tm(r,{}));var a=Pk(t,n,r),u=a.matched,s=a.consumedSegments,c=a.lastChild;if(!u)return qk(t);var l=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,Pg.zg)(function(e){var r=e.module,a=e.routes,u=Lk(t,s,l,a),c=u.segmentGroup,h=u.slicedSegments,f=new Tm(c.segments,c.children);if(0===h.length&&f.hasChildren())return o.expandChildren(r,a,f).pipe((0,ze.U)(function(e){return new Tm(s,e)}));if(0===a.length&&0===h.length)return(0,Re.of)(new Tm(s,{}));var d=Ok(n)===i;return o.expandSegment(r,f,a,h,d?am:i,!0).pipe((0,ze.U)(function(e){return new Tm(s.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?(0,Re.of)(new bk(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Re.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Pg.zg)(function(n){return n?r.configLoader.load(e.injector,t).pipe((0,ze.U)(function(e){return t._loadedConfig=e,e})):function(e){return new Ne.y(function(t){return t.error(lm("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))})}(t)})):(0,Re.of)(new bk([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return(0,Re.of)(!0);var o=i.map(function(r){var i,o=e.get(r);if(function(e){return e&&_k(e.canLoad)}(o))i=o.canLoad(t,n);else{if(!_k(o))throw new Error("Invalid CanLoad guard");i=o(t,n)}return gm(i)});return(0,Re.of)(o).pipe(Tk(),(0,Ug.b)(function(e){if(xk(e)){var t=lm('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),(0,ze.U)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Re.of)(n);if(r.numberOfChildren>1||!r.children[am])return Bk(e.redirectTo);r=r.children[am]}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new Im(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return ym(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,o=this.createSegments(e,t.segments,n,r),a={};return ym(t.children,function(t,o){a[o]=i.createSegmentGroup(e,t,n,r)}),new Tm(o,a)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=c(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===e.path)return t.splice(r),o;r++}}catch(a){i.e(a)}finally{i.f()}return e}}]),e}();function Zk(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],o=Zk(e.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function(e){if(1===e.numberOfChildren&&e.children[am]){var t=e.children[am];return new Tm(e.segments.concat(t.segments),t.children)}return e}(new Tm(e.segments,t))}var Gk=d(function e(t){p(this,e),this.path=t,this.route=this.path[this.path.length-1]}),Wk=d(function e(t,n){p(this,e),this.component=t,this.route=n});function Kk(e,t,n){var r=e._root;return Yk(r,t?t._root:null,n,[r.value])}function Qk(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Yk(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=Km(t);return e.children.forEach(function(e){(function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=e.value,a=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var s=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Sm(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Sm(e.url,t.url)||!fm(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ik(e,t)||!fm(e.queryParams,t.queryParams);default:return!ik(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);s?i.canActivateChecks.push(new Gk(r)):(o.data=a.data,o._resolvedData=a._resolvedData),Yk(e,t,o.component?u?u.children:null:n,r,i),s&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Wk(u.outlet.component,a))}else a&&Jk(t,u,i),i.canActivateChecks.push(new Gk(r)),Yk(e,null,o.component?u?u.children:null:n,r,i)})(e,o[e.value.outlet],n,r.concat([e.value]),i),delete o[e.value.outlet]}),ym(o,function(e,t){return Jk(e,n.getContext(t),i)}),i}function Jk(e,t,n){var r=Km(e),i=e.value;ym(r,function(e,r){Jk(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Wk(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Xk=d(function e(){p(this,e)});function $k(e){return new Ne.y(function(t){return t.error(e)})}var ew=function(){function e(t,n,r,i,o,a){p(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return d(e,[{key:"recognize",value:function(){var e=Lk(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,am);if(null===t)return null;var n=new $m([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},am,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Wm(n,t),i=new ek(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Xm(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var o=i[r],a=t.children[o],s=Rk(e,o),c=this.processSegmentGroup(s,a,o);if(null===c)return null;n.push.apply(n,u(c))}var l=tw(n);return function(e){e.sort(function(e,t){return e.value.outlet===am?-1:t.value.outlet===am?1:e.value.outlet.localeCompare(t.value.outlet)})}(l),l}},{key:"processSegment",value:function(e,t,n,r){var i,o=c(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,u=this.processSegmentAgainstRoute(a,t,n,r);if(null!==u)return u}}catch(s){o.e(s)}finally{o.f()}return Vk(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!Fk(e,t,n,r))return null;var i,o=[],a=[];if("**"===e.path){var u=n.length>0?pm(n).parameters:{};i=new $m(n,u,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iw(e),Ok(e),e.component,e,nw(t),rw(t)+n.length,ow(e))}else{var s=Pk(t,e,n);if(!s.matched)return null;o=s.consumedSegments,a=n.slice(s.lastChild),i=new $m(o,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iw(e),Ok(e),e.component,e,nw(t),rw(t)+o.length,ow(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Lk(t,o,a,c.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new Wm(i,d)]}if(0===c.length&&0===f.length)return[new Wm(i,[])];var v=Ok(e)===r,p=this.processSegment(c,h,f,v?am:r);return null===p?null:[new Wm(i,p)]}}]),e}();function tw(e){var t,n=[],r=new Set,i=c(e);try{var o=function(){var e,i=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(i))return n.push(i),"continue";var o=n.find(function(e){return i.value.routeConfig===e.value.routeConfig});void 0!==o?((e=o.children).push.apply(e,u(i.children)),r.add(o)):n.push(i)};for(i.s();!(t=i.n()).done;)o()}catch(f){i.e(f)}finally{i.f()}var a,s=c(r);try{for(s.s();!(a=s.n()).done;){var l=a.value,h=tw(l.children);n.push(new Wm(l.value,h))}}catch(f){s.e(f)}finally{s.f()}return n.filter(function(e){return!r.has(e)})}function nw(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function rw(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function iw(e){return e.data||{}}function ow(e){return e.resolve||{}}function aw(e){return by(function(t){var n=e(t);return n?(0,Oe.D)(n).pipe((0,ze.U)(function(){return t})):(0,Re.of)(t)})}var uw=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n)}(function(){function e(){p(this,e)}return d(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),sw=new s.OlP("ROUTES"),cw=function(){function e(t,n,r,i){p(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return d(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe((0,ze.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new bk(vm(i.injector.get(sw,void 0,s.XFs.Self|s.XFs.Optional)).map(Nk),i)}),Og(function(e){throw t._loader$=void 0,e}));return t._loader$=new Ng.c(r,function(){return new gy.xQ}).pipe((0,jg.x)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?(0,Oe.D)(this.loader.load(e)):gm(e()).pipe((0,Pg.zg)(function(e){return e instanceof s.YKP?(0,Re.of)(e):(0,Oe.D)(t.compiler.compileModuleAsync(e))}))}}]),e}(),lw=d(function e(){p(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new hw,this.attachRef=null}),hw=function(){function e(){p(this,e),this.contexts=new Map}return d(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new lw,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),fw=function(){function e(){p(this,e)}return d(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function dw(e){throw e}function vw(e,t,n){return t.parse("/")}function pw(e,t){return(0,Re.of)(null)}var yw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mw=function(){var e=function(){function e(t,n,r,i,o,a,u,c){var l=this;p(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gy.xQ,this.errorHandler=dw,this.malformedUriErrorHandler=vw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pw,afterPreactivation:pw},this.urlHandlingStrategy=new fw,this.routeReuseStrategy=new uw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(s.h0i),this.console=o.get(s.c2e);var h=o.get(s.R0b);this.isNgZoneEnabled=h instanceof s.R0b&&s.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Im(new Tm([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new cw(a,u,function(e){return l.triggerEvent(new $g(e))},function(e){return l.triggerEvent(new em(e))}),this.routerState=Ym(this.currentUrlTree,this.rootComponentType),this.transitions=new kg({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return d(e,[{key:"browserPageId",get:function(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}},{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Ke(function(e){return 0!==e.id}),(0,ze.U)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),by(function(e){var r=!1,i=!1;return(0,Re.of)(e).pipe((0,Ug.b)(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),by(function(e){var r=t.browserUrlTree.toString(),o=!t.navigated||e.extractedUrl.toString()!==r||r!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||o)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return kw(e.source)&&(t.browserUrlTree=e.extractedUrl),(0,Re.of)(e).pipe(by(function(e){var r=t.transitions.getValue();return n.next(new Hg(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Dy.E:Promise.resolve(e)}),function(e,t,n,r){return by(function(i){return function(e,t,n,r,i){return new Hk(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe((0,ze.U)(function(e){return Object.assign(Object.assign({},i),{urlAfterRedirects:e})}))})}(t.ngModule.injector,t.configLoader,t.urlSerializer,t.config),(0,Ug.b)(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,o,a){return(0,Pg.zg)(function(r){return function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var u=new ew(e,t,n,r,o,a).recognize();return null===u?$k(new Xk):(0,Re.of)(u)}catch(i){return $k(i)}}(e,n,r.urlAfterRedirects,(u=r.urlAfterRedirects,t.serializeUrl(u)),o,a).pipe((0,ze.U)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var u})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),(0,Ug.b)(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,e),t.browserUrlTree=e.urlAfterRedirects);var r=new Kg(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(o&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var a=e.id,u=e.extractedUrl,s=e.source,c=e.restoredState,l=e.extras,h=new Hg(a,t.serializeUrl(u),s,c);n.next(h);var f=Ym(u,t.rootComponentType).snapshot;return(0,Re.of)(Object.assign(Object.assign({},e),{targetSnapshot:f,urlAfterRedirects:u,extras:Object.assign(Object.assign({},l),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Dy.E}),aw(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,u=a.skipLocationChange,s=a.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!u,replaceUrl:!!s})}),(0,Ug.b)(function(e){var n=new Qg(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(0,ze.U)(function(e){return Object.assign(Object.assign({},e),{guards:Kk(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return(0,Pg.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,u=o.canDeactivateChecks;return 0===u.length&&0===a.length?(0,Re.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Oe.D)(e).pipe((0,Pg.zg)(function(e){return function(e,t,n,r,i){var o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,Re.of)(!0);var a=o.map(function(o){var a,u=Qk(o,t,i);if(function(e){return e&&_k(e.canDeactivate)}(u))a=gm(u.canDeactivate(e,t,n,r));else{if(!_k(u))throw new Error("Invalid CanDeactivate guard");a=gm(u(e,t,n,r))}return a.pipe(Zy())});return(0,Re.of)(a).pipe(Tk())}(e.component,e.route,n,t,r)}),Zy(function(e){return!0!==e},!0))}(u,r,i,e).pipe((0,Pg.zg)(function(n){return n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Oe.D)(t).pipe(Lg(function(t){return Le(function(e,t){return null!==e&&t&&t(new tm(e)),(0,Re.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new rm(e)),(0,Re.of)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return Ag(function(){var i=t.guards.map(function(i){var o,a=Qk(i,t.node,n);if(function(e){return e&&_k(e.canActivateChild)}(a))o=gm(a.canActivateChild(r,e));else{if(!_k(a))throw new Error("Invalid CanActivateChild guard");o=gm(a(r,e))}return o.pipe(Zy())});return(0,Re.of)(i).pipe(Tk())})});return(0,Re.of)(i).pipe(Tk())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Re.of)(!0);var i=r.map(function(r){return Ag(function(){var i,o=Qk(r,t,n);if(function(e){return e&&_k(e.canActivate)}(o))i=gm(o.canActivate(t,e));else{if(!_k(o))throw new Error("Invalid CanActivate guard");i=gm(o(t,e))}return i.pipe(Zy())})});return(0,Re.of)(i).pipe(Tk())}(e,t.route,n))}),Zy(function(e){return!0!==e},!0))}(r,a,e,t):(0,Re.of)(n)}),(0,ze.U)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),(0,Ug.b)(function(e){if(xk(e.guardsResult)){var n=lm('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new Yg(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),Ke(function(e){return!!e.guardsResult||(t.restoreHistory(e),t.cancelNavigationTransition(e,""),!1)}),aw(function(e){if(e.guards.canActivateChecks.length)return(0,Re.of)(e).pipe((0,Ug.b)(function(e){var n=new Jg(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),by(function(e){var n=!1;return(0,Re.of)(e).pipe(function(e,t){return(0,Pg.zg)(function(n){var r=n.targetSnapshot,i=n.guards.canActivateChecks;if(!i.length)return(0,Re.of)(n);var o=0;return(0,Oe.D)(i).pipe(Lg(function(n){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return(0,Re.of)({});var o={};return(0,Oe.D)(i).pipe((0,Pg.zg)(function(i){return function(e,t,n,r){var i=Qk(e,t,r);return gm(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Ug.b)(function(e){o[i]=e}))}),Mg(1),(0,Pg.zg)(function(){return Object.keys(o).length===i.length?(0,Re.of)(o):Dy.E}))}(e._resolve,e,t,r).pipe((0,ze.U)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Xm(e,n).resolve),null}))}(n.route,r,e,t)}),(0,Ug.b)(function(){return o++}),Mg(1),(0,Pg.zg)(function(e){return o===i.length?(0,Re.of)(n):Dy.E}))})}(t.paramsInheritanceStrategy,t.ngModule.injector),(0,Ug.b)({next:function(){return n=!0},complete:function(){n||(t.restoreHistory(e),t.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,Ug.b)(function(e){var n=new Xg(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),aw(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,u=a.skipLocationChange,s=a.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!u,replaceUrl:!!s})}),(0,ze.U)(function(e){var n=function(e,t,n){var r=ok(e,t._root,n?n._root:void 0);return new Qm(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),(0,Ug.b)(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(e.urlAfterRedirects,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,e),t.browserUrlTree=e.urlAfterRedirects)}),function(e,t,n){return(0,ze.U)(function(r){return new kk(t,r.targetRouterState,r.currentRouterState,n).activate(e),r})}(t.rootContexts,t.routeReuseStrategy,function(e){return t.triggerEvent(e)}),(0,Ug.b)({next:function(){r=!0},complete:function(){r=!0}}),function(e){return function(t){return t.lift(new qg(e))}}(function(){var n;if(!r&&!i){var o="Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId);"replace"===t.canceledNavigationResolution?(t.restoreHistory(e),t.cancelNavigationTransition(e,o)):t.cancelNavigationTransition(e,o)}(null===(n=t.currentNavigation)||void 0===n?void 0:n.id)===e.id&&(t.currentNavigation=null)}),Og(function(r){if(i=!0,function(e){return e&&e[cm]}(r)){var o=xk(r.url);o||(t.navigated=!0,t.restoreHistory(e,!0));var a=new Gg(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),o?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree),i={skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||kw(e.source)};t.scheduleNavigation(n,"imperative",null,i,{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.restoreHistory(e,!0);var u=new Wg(e.id,t.serializeUrl(e.extractedUrl),r);n.next(u);try{e.resolve(t.errorHandler(r))}catch(a){e.reject(a)}}return Dy.E}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var a=Object.assign({},r);delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(o.state=a)}e.scheduleNavigation(i,t,r,o)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return t.transitionId!==e.transitionId||!n||!("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source)}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){Sk(e),this.config=e.map(Nk),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,o=t.queryParamsHandling,a=t.preserveFragment,s=n||this.routerState.root,c=a?this.currentUrlTree.fragment:i,l=null;switch(o){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return ck(t.root,t.root,t,r,i);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new hk(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return ym(r.outlets,function(e,t){o[t]="string"==typeof e?e.split("/"):e}),[].concat(u(e),[{outlets:o}])}if(r.segmentPath)return[].concat(u(e),[r.segmentPath])}return"string"!=typeof r?[].concat(u(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(u(e),[r])},[]);return new hk(n,t,r)}(n);if(o.toRoot())return ck(t.root,new Tm([],{}),t,r,i);var a=function(e,t,n){if(e.isAbsolute)return new fk(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new fk(r,r===t.root,0)}var i=uk(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new fk(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(o,t,e),s=a.processChildren?vk(a.segmentGroup,a.index,o.commands):dk(a.segmentGroup,a.index,o.commands);return ck(a.segmentGroup,s,t,r,i)}(s,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=xk(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},yw):!1===t?Object.assign({},gw):t,xk(e))return wm(this.currentUrlTree,e,n);var r=this.parseUrl(e);return wm(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.currentPageId=t.targetPageId,e.events.next(new Zg(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ".concat(t))})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var o,a;if(this.disposed)return Promise.resolve(!1);var u,s,c,l=this.getTransition(),h=kw(t)&&l&&!kw(l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===e.toString();if(h&&f)return Promise.resolve(!0);i?(u=i.resolve,s=i.reject,c=i.promise):c=new Promise(function(e,t){u=e,s=t});var d,v=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(a=this.browserPageId)&&void 0!==a?a:0)+1):d=0,this.setTransition({id:v,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:u,reject:s,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t){var n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"restoreHistory",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(t=this.currentNavigation)||void 0===t?void 0:t.finalUrl)||0===i?this.currentUrlTree===(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(e,t){var n=new Gg(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}},{key:"generateNgRouterState",value:function(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.DyG),s.LFG(Cm),s.LFG(hw),s.LFG(M),s.LFG(s.zs3),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(void 0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}();function kw(e){return"imperative"!==e}var ww=function(){var e=function(){function e(t,n,r){var i=this;p(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new gy.xQ,this.subscription=t.events.subscribe(function(e){e instanceof Zg&&i.updateTargetUrlAndHref()})}return d(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r,i){if(0!==e||t||n||r||i||"string"==typeof this.target&&"_self"!=this.target)return!0;var o={skipLocationChange:bw(this.skipLocationChange),replaceUrl:bw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bw(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(mw),s.Y36(Jm),s.Y36(O))},e.\u0275dir=s.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&s.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(s.Ikx("href",t.href,s.LSH),s.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[s.TTD]}),e}();function bw(e){return""===e||!!e}var _w=function(){var e=function(){function e(t,n,r,i,o){p(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new s.vpe,this.deactivateEvents=new s.vpe,this.name=i||am,t.onChildOutletCreated(this.name,this)}return d(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new xw(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(hw),s.Y36(s.s_b),s.Y36(s._Vd),s.$8M("name"),s.Y36(s.sBO))},e.\u0275dir=s.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),xw=function(){function e(t,n,r){p(this,e),this.route=t,this.childContexts=n,this.parent=r}return d(e,[{key:"get",value:function(e,t){return e===Jm?this.route:e===hw?this.childContexts:this.parent.get(e,t)}}]),e}(),Iw=d(function e(){p(this,e)}),Tw=function(){function e(){p(this,e)}return d(e,[{key:"preload",value:function(e,t){return(0,Re.of)(null)}}]),e}(),Ew=function(){var e=function(){function e(t,n,r,i,o){p(this,e),this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new cw(n,r,function(e){return t.triggerEvent(new $g(e))},function(e){return t.triggerEvent(new em(e))})}return d(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Ke(function(e){return e instanceof Zg}),Lg(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(s.h0i);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=c(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;r.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(e,o)):o.children&&r.push(this.processRoutes(e,o.children))}}catch(u){i.e(u)}finally{i.f()}return(0,Oe.D)(r).pipe((0,Pe.J)(),(0,ze.U)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?(0,Re.of)(t._loadedConfig):n.loader.load(e.injector,t)).pipe((0,Pg.zg)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(mw),s.LFG(s.v3s),s.LFG(s.Sil),s.LFG(s.zs3),s.LFG(Iw))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),Sw=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return d(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Hg?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zg&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof om&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new om(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(mw),s.LFG(Q),s.LFG(void 0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}(),Cw=new s.OlP("ROUTER_CONFIGURATION"),Aw=new s.OlP("ROUTER_FORROOT_GUARD"),Nw=[M,{provide:Cm,useClass:Am},{provide:mw,useFactory:function(e,t,n,r,i,o,a){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},s=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new mw(null,e,t,n,r,i,o,vm(a));return s&&(l.urlHandlingStrategy=s),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(u,l),u.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[Cm,hw,M,s.zs3,s.v3s,s.Sil,sw,Cw,[function(){return d(function e(){p(this,e)})}(),new s.FiY],[function(){return d(function e(){p(this,e)})}(),new s.FiY]]},hw,{provide:Jm,useFactory:function(e){return e.routerState.root},deps:[mw]},{provide:s.v3s,useClass:s.EAV},Ew,Tw,function(){function e(){p(this,e)}return d(e,[{key:"preload",value:function(e,t){return t().pipe(Og(function(){return(0,Re.of)(null)}))}}]),e}(),{provide:Cw,useValue:{enableTracing:!1}}];function Ow(){return new s.PXZ("Router",mw)}var Rw=function(){var e=function(){function e(t,n){p(this,e)}return d(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[Nw,Mw(t),{provide:Aw,useFactory:Lw,deps:[[mw,new s.FiY,new s.tp0]]},{provide:Cw,useValue:n||{}},{provide:O,useFactory:Pw,deps:[v,[new s.tBr(D),new s.FiY],Cw]},{provide:Sw,useFactory:Dw,deps:[mw,Q,Cw]},{provide:Iw,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Tw},{provide:s.PXZ,multi:!0,useFactory:Ow},[Fw,{provide:s.ip1,multi:!0,useFactory:Vw,deps:[Fw]},{provide:jw,useFactory:Uw,deps:[Fw]},{provide:s.tb,multi:!0,useExisting:jw}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Mw(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(Aw,8),s.LFG(mw,8))},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({}),e}();function Dw(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Sw(e,t,n)}function Pw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new L(e,t):new P(e,t)}function Lw(e){return"guarded"}function Mw(e){return[{provide:s.deG,multi:!0,useValue:e},{provide:sw,multi:!0,useValue:e}]}var Fw=function(){var e=function(){function e(t){p(this,e),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new gy.xQ}return d(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(x,Promise.resolve(null)).then(function(){if(e.destroyed)return Promise.resolve(!0);var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(mw),i=e.injector.get(Cw);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?(0,Re.of)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Cw),n=this.injector.get(Ew),r=this.injector.get(Sw),i=this.injector.get(mw),o=this.injector.get(s.z2F);e===o.components[0]&&(("enabledNonBlocking"===t.initialNavigation||void 0===t.initialNavigation)&&i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.LFG(s.zs3))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}();function Vw(e){return e.appInitializer.bind(e)}function Uw(e){return e.bootstrapListener.bind(e)}var jw=new s.OlP("Router Initializer"),qw=a(2329),zw={production:!0,firebaseConfig:{apiKey:"AIzaSyABsHJGksz2GQ6lRjQDgVamsa0Uzj9K6os",authDomain:"prenotazione-bd921.firebaseapp.com",projectId:"prenotazione-bd921",storageBucket:"prenotazione-bd921.appspot.com",messagingSenderId:"444714964774",appId:"1:444714964774:web:2cf44f687108be56bcd3e7",measurementId:"G-F5SFSZBWS3"}},Bw=function(){var e=d(function e(t){p(this,e),this.store=t,this.title="matrimonio-gian";var n=(0,qw.ZF)(zw.firebaseConfig);this.db=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,$e.getApp)();return(0,$e._getProvider)(e,"firestore").getImmediate()}(n)});return e.\u0275fac=function(t){return new(t||e)(s.Y36(gg))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[["routerLink","/invitati"]],template:function(e,t){1&e&&(s.TgZ(0,"a",0),s._uU(1,"Vai alla scelta"),s.qZA(),s._UZ(2,"router-outlet"))},directives:[ww,_w],styles:[""]}),e}(),Hw=function(e,t){return{red:e,green:t}};function Zw(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"tr"),s.TgZ(2,"td"),s._uU(3),s.qZA(),s.TgZ(4,"td"),s._uU(5),s.qZA(),s.TgZ(6,"td"),s._UZ(7,"div",2),s.qZA(),s.qZA(),s.BQk()),2&e){var n=t.$implicit;s.xp6(3),s.Oqu(n.nome),s.xp6(2),s.Oqu(n.cognome),s.xp6(2),s.Q6J("ngClass",s.WLB(3,Hw,"no"==n.isPresent,"si"==n.isPresent))}}var Gw=function(){var e=function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.call(this)).partecipanti=[],e.presenti=0,e.assenti=0,e.dubbio=0,e}return d(n,[{key:"ngOnInit",value:function(){var e=this;this.partecipanti=[],Up(Iv(this.db,"partecipanti")).then(function(t){var n,r,i;t.forEach(function(t){e.partecipanti.push(t.data())}),e.presenti=null===(n=e.partecipanti.filter(function(e){return"si"==e.isPresent}))||void 0===n?void 0:n.length,e.assenti=null===(r=e.partecipanti.filter(function(e){return"no"==e.isPresent}))||void 0===r?void 0:r.length,e.dubbio=null===(i=e.partecipanti.filter(function(e){return"forse"==e.isPresent}))||void 0===i?void 0:i.length})}}]),n}(Bw);return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin"]],features:[s.qOj],decls:17,vars:4,consts:[["id","partecipants"],[4,"ngFor","ngForOf"],[1,"dot",3,"ngClass"]],template:function(e,t){1&e&&(s.TgZ(0,"h1"),s._uU(1,"Lista Partecipanti"),s.qZA(),s.TgZ(2,"h3"),s._uU(3),s.qZA(),s.TgZ(4,"h3"),s._uU(5),s.qZA(),s.TgZ(6,"h3"),s._uU(7),s.qZA(),s.TgZ(8,"table",0),s.TgZ(9,"tr"),s.TgZ(10,"th"),s._uU(11,"Nome"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Cognome"),s.qZA(),s.TgZ(14,"th"),s._uU(15,"Presente"),s.qZA(),s.qZA(),s.YNc(16,Zw,8,6,"ng-container",1),s.qZA()),2&e&&(s.xp6(3),s.hij("Totale presenti: ",t.presenti,""),s.xp6(2),s.hij("Totale assenti: ",t.assenti,""),s.xp6(2),s.hij("Totale in dubbio: ",t.dubbio,""),s.xp6(9),s.Q6J("ngForOf",t.partecipanti))},directives:[Z,B],styles:["#partecipants[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;border-collapse:collapse;width:80%;margin:0 auto}#partecipants[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #partecipants[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}#partecipants[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}#partecipants[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#partecipants[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:left;background-color:#04aa6d;color:#fff}#partecipants[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){text-align:center}.dot[_ngcontent-%COMP%]{height:25px;width:25px;background-color:orange;border-radius:50%;display:inline-block}.red[_ngcontent-%COMP%]{background-color:red}.green[_ngcontent-%COMP%]{background-color:green}"]}),e}(),Ww=a(1555);function Kw(e,t){return new Ne.y(function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,a=0,u=function(u){var s=(0,Oe.D)(e[u]),c=!1;n.add(s.subscribe({next:function(e){c||(c=!0,a++),i[u]=e},error:function(e){return n.error(e)},complete:function(){(++o===r||!c)&&(a===r&&n.next(t?t.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),n.complete())}}))},s=0;s<r;s++)u(s);else n.complete()})}var Qw=function(){var e=function(){function e(t,n){p(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return d(e,[{key:"setProperty",value:function(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"setDisabledState",value:function(e){this.setProperty("disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.Qsj),s.Y36(s.SBq))},e.\u0275dir=s.lG2({type:e}),e}(),Yw=function(){var e,t=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n)}(Qw);return t.\u0275fac=function(n){return(e||(e=s.n5z(t)))(n||t)},t.\u0275dir=s.lG2({type:t,features:[s.qOj]}),t}(),Jw=new s.OlP("NgValueAccessor"),Xw={provide:Jw,useExisting:(0,s.Gpc)(function(){return eb}),multi:!0},$w=new s.OlP("CompositionEventMode"),eb=function(){var e=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,e,r))._compositionMode=i,o._composing=!1,null==o._compositionMode&&(o._compositionMode=!function(){var e=h()?h().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}()),o}return d(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),n}(Qw);return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36($w,8))},e.\u0275dir=s.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&s.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[s._Bn([Xw]),s.qOj]}),e}();function tb(e){return null==e||0===e.length}function nb(e){return null!=e&&"number"==typeof e.length}var rb=new s.OlP("NgValidators"),ib=new s.OlP("NgAsyncValidators"),ob=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ab=function(){function e(){p(this,e)}return d(e,null,[{key:"min",value:function(e){return function(e){return function(t){if(tb(t.value)||tb(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}},{key:"max",value:function(e){return function(e){return function(t){if(tb(t.value)||tb(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}},{key:"required",value:function(e){return function(e){return tb(e.value)?{required:!0}:null}(e)}},{key:"requiredTrue",value:function(e){return function(e){return!0===e.value?null:{required:!0}}(e)}},{key:"email",value:function(e){return function(e){return tb(e.value)||ob.test(e.value)?null:{email:!0}}(e)}},{key:"minLength",value:function(e){return function(e){return function(t){return tb(t.value)||!nb(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}}(e)}},{key:"maxLength",value:function(e){return function(e){return function(t){return nb(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}}(e)}},{key:"pattern",value:function(e){return function(e){return e?("string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),function(e){if(tb(e.value))return null;var r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}):ub;var t,n}(e)}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){return db(e)}},{key:"composeAsync",value:function(e){return pb(e)}}]),e}();function ub(e){return null}function sb(e){return null!=e}function cb(e){var t=(0,s.QGY)(e)?(0,Oe.D)(e):e;return(0,s.CqO)(t),t}function lb(e){var t={};return e.forEach(function(e){t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function hb(e,t){return t.map(function(t){return t(e)})}function fb(e){return e.map(function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}})}function db(e){if(!e)return null;var t=e.filter(sb);return 0==t.length?null:function(e){return lb(hb(e,t))}}function vb(e){return null!=e?db(fb(e)):null}function pb(e){if(!e)return null;var t=e.filter(sb);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if((0,wg.k)(r))return Kw(r,null);if((0,Ww.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return Kw(i.map(function(e){return r[e]}),i)}}if("function"==typeof t[t.length-1]){var o=t.pop();return Kw(t=1===t.length&&(0,wg.k)(t[0])?t[0]:t,null).pipe((0,ze.U)(function(e){return o.apply(void 0,u(e))}))}return Kw(t,null)}(hb(e,t).map(cb)).pipe((0,ze.U)(lb))}}function yb(e){return null!=e?pb(fb(e)):null}function gb(e,t){return null===e?[t]:Array.isArray(e)?[].concat(u(e),[t]):[e,t]}function mb(e){return e._rawValidators}function kb(e){return e._rawAsyncValidators}function wb(e){return e?Array.isArray(e)?e:[e]:[]}function bb(e,t){return Array.isArray(e)?e.includes(t):e===t}function _b(e,t){var n=wb(t);return wb(e).forEach(function(e){bb(n,e)||n.push(e)}),n}function xb(e,t){return wb(t).filter(function(t){return!bb(e,t)})}var Ib=function(){var e=function(){function e(){p(this,e),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return d(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(e){this._rawValidators=e||[],this._composedValidatorFn=vb(this._rawValidators)}},{key:"_setAsyncValidators",value:function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yb(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(e){this._onDestroyCallbacks.push(e)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(e){return e()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e}),e}(),Tb=function(){var e,t=function(e){y(n,e);var t=g(n);function n(){return p(this,n),t.apply(this,arguments)}return d(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(Ib);return t.\u0275fac=function(n){return(e||(e=s.n5z(t)))(n||t)},t.\u0275dir=s.lG2({type:t,features:[s.qOj]}),t}(),Eb=function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e}return d(n)}(Ib),Sb=function(){function e(t){p(this,e),this._cd=t}return d(e,[{key:"is",value:function(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}]),e}(),Cb=function(){var e=function(e){y(n,e);var t=g(n);function n(e){return p(this,n),t.call(this,e)}return d(n)}(Sb);return e.\u0275fac=function(t){return new(t||e)(s.Y36(Eb,2))},e.\u0275dir=s.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&s.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[s.qOj]}),e}(),Ab=function(){var e=function(e){y(n,e);var t=g(n);function n(e){return p(this,n),t.call(this,e)}return d(n)}(Sb);return e.\u0275fac=function(t){return new(t||e)(s.Y36(Tb,10))},e.\u0275dir=s.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&s.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[s.qOj]}),e}();function Nb(e,t){Db(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Lb(e,t)})}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(function(){e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Lb(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(function(){e._unregisterOnDisabledChange(n)})}}(e,t)}function Ob(e,t){var n=function(){};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),Pb(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(function(){}))}function Rb(e,t){e.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Db(e,t){var n=mb(e);null!==t.validator?e.setValidators(gb(n,t.validator)):"function"==typeof n&&e.setValidators([n]);var r=kb(e);null!==t.asyncValidator?e.setAsyncValidators(gb(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);var i=function(){return e.updateValueAndValidity()};Rb(t._rawValidators,i),Rb(t._rawAsyncValidators,i)}function Pb(e,t){var n=!1;if(null!==e){if(null!==t.validator){var r=mb(e);if(Array.isArray(r)&&r.length>0){var i=r.filter(function(e){return e!==t.validator});i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){var o=kb(e);if(Array.isArray(o)&&o.length>0){var a=o.filter(function(e){return e!==t.asyncValidator});a.length!==o.length&&(n=!0,e.setAsyncValidators(a))}}}var u=function(){};return Rb(t._rawValidators,u),Rb(t._rawAsyncValidators,u),n}function Lb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Mb(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Fb="VALID",Vb="INVALID",Ub="PENDING",jb="DISABLED";function qb(e){return(Zb(e)?e.validators:e)||null}function zb(e){return Array.isArray(e)?vb(e):e||null}function Bb(e,t){return(Zb(t)?t.asyncValidators:e)||null}function Hb(e){return Array.isArray(e)?yb(e):e||null}function Zb(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Gb=function(){function e(t,n){p(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=zb(this._rawValidators),this._composedAsyncValidatorFn=Hb(this._rawAsyncValidators)}return d(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return this.status===Fb}},{key:"invalid",get:function(){return this.status===Vb}},{key:"pending",get:function(){return this.status==Ub}},{key:"disabled",get:function(){return this.status===jb}},{key:"enabled",get:function(){return this.status!==jb}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=zb(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Hb(e)}},{key:"addValidators",value:function(e){this.setValidators(_b(e,this._rawValidators))}},{key:"addAsyncValidators",value:function(e){this.setAsyncValidators(_b(e,this._rawAsyncValidators))}},{key:"removeValidators",value:function(e){this.setValidators(xb(e,this._rawValidators))}},{key:"removeAsyncValidators",value:function(e){this.setAsyncValidators(xb(e,this._rawAsyncValidators))}},{key:"hasValidator",value:function(e){return bb(this._rawValidators,e)}},{key:"hasAsyncValidator",value:function(e){return bb(this._rawAsyncValidators,e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status=Ub,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status=jb,this.errors=null,this._forEachChild(function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!0)})}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status=Fb,this._forEachChild(function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!1)})}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fb||this.status===Ub)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?jb:Fb}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status=Ub,this._hasOwnPendingAsyncValidator=!0;var n=cb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;var r=e;return t.forEach(function(e){r=r instanceof Kb?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Qb&&r.at(e)||null}),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?jb:this.errors?Vb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ub)?Ub:this._anyControlsHaveStatus(Vb)?Vb:Fb}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(e){return e.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(e){return e.touched})}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){Zb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),e}(),Wb=function(e){y(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return p(this,n),(e=t.call(this,qb(i),Bb(o,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e._initObservables(),e.updateValueAndValidity({onlySelf:!0,emitEvent:!!e.asyncValidator}),e}return d(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_unregisterOnChange",value:function(e){Mb(this._onChange,e)}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_unregisterOnDisabledChange",value:function(e){Mb(this._onDisabledChange,e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(Gb),Kb=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,qb(r),Bb(i,r))).controls=e,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!o.asyncValidator}),o}return d(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"removeControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(Object.keys(e).forEach(function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Wb?t.value:t.getRawValue(),e})}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach(function(n){var r=t.controls[n];r&&e(r,n)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var r=n[t],i=this.controls[r];if(this.contains(r)&&e(i))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(Gb),Qb=function(e){y(n,e);var t=g(n);function n(e,r,i){var o;return p(this,n),(o=t.call(this,qb(r),Bb(i,r))).controls=e,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!o.asyncValidator}),o}return d(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}},{key:"removeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach(function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(e.forEach(function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map(function(e){return e instanceof Wb?e.value:e.getRawValue()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach(function(t,n){e(t,n)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var e,t=c(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(Gb),Yb=function(){var e=d(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=s.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e}(),Jb=function(){var e=d(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({}),e}(),Xb=new s.OlP("NgModelWithFormControlWarning"),$b={provide:Tb,useExisting:(0,s.Gpc)(function(){return e_})},e_=function(){var e=function(e){y(n,e);var t=g(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).validators=e,i.asyncValidators=r,i.submitted=!1,i._onCollectionChange=function(){return i._updateDomValue()},i.directives=[],i.form=null,i.ngSubmit=new s.vpe,i._setValidators(e),i._setAsyncValidators(r),i}return d(n,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}},{key:"ngOnDestroy",value:function(){this.form&&(Pb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(function(){}))}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return Nb(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){Ob(e.control||null,e,!1),Mb(this.directives,e)}},{key:"addFormGroup",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormGroup",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormArray",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,function(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach(function(t){var n=t.control,r=e.form.get(t.path);n!==r&&(Ob(n||null,t),r instanceof Wb&&(Nb(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_setUpFormContainer",value:function(e){var t=this.form.get(e.path);(function(e,t){Db(e,t)})(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"_cleanUpFormContainer",value:function(e){if(this.form){var t=this.form.get(e.path);t&&function(e,t){return Pb(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}},{key:"_updateRegistrations",value:function(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){})}},{key:"_updateValidators",value:function(){Db(this.form,this),this._oldForm&&Pb(this._oldForm,this)}},{key:"_checkFormPresent",value:function(){}}]),n}(Tb);return e.\u0275fac=function(t){return new(t||e)(s.Y36(rb,10),s.Y36(ib,10))},e.\u0275dir=s.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&s.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([$b]),s.qOj,s.TTD]}),e}(),t_={provide:Eb,useExisting:(0,s.Gpc)(function(){return n_})},n_=function(){var e=function(e){y(n,e);var t=g(n);function n(e,r,i,o,a){var u;return p(this,n),(u=t.call(this))._ngModelWarningConfig=a,u._added=!1,u.update=new s.vpe,u._ngModelWarningSent=!1,u._parent=e,u._setValidators(r),u._setAsyncValidators(i),u.valueAccessor=function(e,t){return t?(Array.isArray(t),t.forEach(function(e){e.constructor===eb?n=e:function(e){return Object.getPrototypeOf(e.constructor)===Yw}(e)?r=e:i=e}),i||r||n||null):null;var n,r,i}(0,o),u}return d(n,[{key:"isDisabled",set:function(e){}},{key:"ngOnChanges",value:function(e){this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"path",get:function(){return function(e,t){return[].concat(u(t.path),[e])}(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"_checkParentType",value:function(){}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}]),n}(Eb);return e.\u0275fac=function(t){return new(t||e)(s.Y36(Tb,13),s.Y36(rb,10),s.Y36(ib,10),s.Y36(Jw,10),s.Y36(Xb,8))},e.\u0275dir=s.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[s._Bn([t_]),s.qOj,s.TTD]}),e._ngModelWarningSentOnce=!1,e}(),r_={provide:Jw,useExisting:(0,s.Gpc)(function(){return o_}),multi:!0};function i_(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var o_=function(){var e,t=function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments))._optionMap=new Map,e._idCounter=0,e._compareWith=Object.is,e}return d(n,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);var n=i_(t,e);this.setProperty("value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}]),n}(Yw);return t.\u0275fac=function(n){return(e||(e=s.n5z(t)))(n||t)},t.\u0275dir=s.lG2({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&s.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([r_]),s.qOj]}),t}(),a_=function(){var e=function(){function e(t,n,r){p(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}return d(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(i_(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(o_,9))},e.\u0275dir=s.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e}(),u_={provide:Jw,useExisting:(0,s.Gpc)(function(){return c_}),multi:!0};function s_(e,t){return null==e?"".concat(t):("string"==typeof t&&(t="'".concat(t,"'")),t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}var c_=function(){var e,t=function(e){y(n,e);var t=g(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments))._optionMap=new Map,e._idCounter=0,e._compareWith=Object.is,e}return d(n,[{key:"compareWith",set:function(e){this._compareWith=e}},{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map(function(e){return n._getOptionId(e)});t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),u=t._getOptionValue(a.value);r.push(u)}else for(var s=n.options,c=0;c<s.length;c++){var l=s.item(c);if(l.selected){var h=t._getOptionValue(l.value);r.push(h)}}t.value=r,e(r)}}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}]),n}(Yw);return t.\u0275fac=function(n){return(e||(e=s.n5z(t)))(n||t)},t.\u0275dir=s.lG2({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&s.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([u_]),s.qOj]}),t}(),l_=function(){var e=function(){function e(t,n,r){p(this,e),this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}return d(e,[{key:"ngValue",set:function(e){null!=this._select&&(this._value=e,this._setElementValue(s_(this.id,e)),this._select.writeValue(this._select.value))}},{key:"value",set:function(e){this._select?(this._value=e,this._setElementValue(s_(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}},{key:"_setElementValue",value:function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}},{key:"_setSelected",value:function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}},{key:"ngOnDestroy",value:function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(c_,9))},e.\u0275dir=s.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e}(),h_=function(){var e=d(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[Jb]]}),e}(),f_=function(){var e=function(){function e(){p(this,e)}return d(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:Xb,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[h_]}),e}(),d_=[{path:"",children:[{path:"admin",component:Gw},{path:"invitati",component:function(){var e=function(){function e(t){p(this,e),this.store=t,this.form=new Kb({firstname:new Wb("",ab.required),lastname:new Wb("",ab.required),choice:new Wb("",ab.required)})}return d(e,[{key:"onConfirm",value:function(){var e,t,n,r,i=this;this.form.valid&&(null===(e=this.store)||void 0===e||e.collection("partecipanti").add({nome:null===(t=this.form.get("firstname"))||void 0===t?void 0:t.value,cognome:null===(n=this.form.get("lastname"))||void 0===n?void 0:n.value,isPresent:null===(r=this.form.get("choice"))||void 0===r?void 0:r.value}).then(function(e){alert("Scelta salvata con successo"),i.form.reset()}).catch(function(e){alert("Riprova!")}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(gg))},e.\u0275cmp=s.Xpm({type:e,selectors:[["invitati"]],decls:20,vars:2,consts:[[3,"formGroup","ngSubmit"],["formControlName","firstname","type","text","id","fname","name","firstname","placeholder","Inserisci nome.."],["formControlName","lastname","type","text","id","lname","name","lastname","placeholder","Inserisci cognome.."],["for","scelta"],["formControlName","choice","id","scelta","name","scelta"],["value","si"],["value","no"],["value","forse"],["type","submit","value","Conferma scelta",3,"disabled"]],template:function(e,t){1&e&&(s.TgZ(0,"h1"),s._uU(1,"Parteciperai al matrimonio?"),s.qZA(),s.TgZ(2,"div"),s.TgZ(3,"form",0),s.NdJ("ngSubmit",function(){return t.onConfirm()}),s.TgZ(4,"label"),s._uU(5,"Nome"),s.qZA(),s._UZ(6,"input",1),s.TgZ(7,"label"),s._uU(8,"Cognome"),s.qZA(),s._UZ(9,"input",2),s.TgZ(10,"label",3),s._uU(11,"Partecipo"),s.qZA(),s.TgZ(12,"select",4),s.TgZ(13,"option",5),s._uU(14,"S\xec"),s.qZA(),s.TgZ(15,"option",6),s._uU(16,"No"),s.qZA(),s.TgZ(17,"option",7),s._uU(18,"Ancora in dubbio"),s.qZA(),s.qZA(),s._UZ(19,"input",8),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Q6J("formGroup",t.form),s.xp6(16),s.Q6J("disabled",!t.form.valid))},directives:[Yb,Ab,e_,eb,Cb,n_,o_,a_,l_],styles:["h1[_ngcontent-%COMP%]{text-align:center;width:80%;margin:20px auto 0}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}input[type=submit][_ngcontent-%COMP%]{width:100%;background-color:#4caf50;color:#fff;padding:14px 20px;margin:8px 0;border:none;border-radius:4px;cursor:pointer}.disab[_ngcontent-%COMP%]{background-color:#ccc}div[_ngcontent-%COMP%]{border-radius:5px;background-color:#f2f2f2;padding:20px;width:80%;margin:2rem auto}"]}),e}()}]}],v_=function(){var e=d(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[Rw.forRoot(d_)],Rw]}),e}(),p_=function(){var e=d(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e,bootstrap:[Bw]}),e.\u0275inj=s.cJS({providers:[{provide:Ce.Dh,useValue:zw.firebaseConfig}],imports:[[Se,v_,Ce.hO,mg,f_]]}),e}();zw.production&&(0,s.G48)(),Te().bootstrapModule(p_).catch(function(e){return console.error(e)})},4762:function(e,t,n){"use strict";n.d(t,{ZT:function(){return i},pi:function(){return o},_T:function(){return a},mG:function(){return u},Jh:function(){return s},XA:function(){return c},CR:function(){return l},ev:function(){return h}});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function u(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,u)}s((r=r.apply(e,t||[])).next())})}function s(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(s){u=[6,s],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}},8239:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function u(e){r(a,i,o,u,s,"next",e)}function s(e){r(a,i,o,u,s,"throw",e)}u(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e(e.s=7906)}])}();