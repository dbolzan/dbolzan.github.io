(self.webpackChunkmatrimonio_gian=self.webpackChunkmatrimonio_gian||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},3018:function(e,t,n){"use strict";n.d(t,{deG:function(){return Jt},tb:function(){return Ya},AFp:function(){return $a},ip1:function(){return Ha},CZH:function(){return Za},hGG:function(){return Hu},z2F:function(){return Pu},sBO:function(){return Xo},Sil:function(){return uu},_Vd:function(){return To},EJc:function(){return eu},SBq:function(){return Ao},qLn:function(){return Br},vpe:function(){return ka},gxx:function(){return ts},tBr:function(){return In},XFs:function(){return R},OlP:function(){return Yt},zs3:function(){return ms},ZZ4:function(){return $o},aQg:function(){return Wo},soG:function(){return Xa},YKP:function(){return ca},v3s:function(){return Mu},h0i:function(){return ua},PXZ:function(){return xu},R0b:function(){return hu},FiY:function(){return Tn},Lbi:function(){return Qa},g9A:function(){return Ka},Qsj:function(){return No},FYo:function(){return xo},JOm:function(){return Sn},Tiy:function(){return Ro},q3G:function(){return Ur},tp0:function(){return En},EAV:function(){return Uu},Rgc:function(){return ia},dDg:function(){return vu},DyG:function(){return Xt},q4F:function(){return Po},GfV:function(){return Do},s_b:function(){return ha},ifc:function(){return V},eFA:function(){return Nu},G48:function(){return Cu},Gpc:function(){return g},X6Q:function(){return Su},_c5:function(){return zu},VLi:function(){return bu},c2e:function(){return Ja},zSh:function(){return rs},wAp:function(){return ao},vHH:function(){return v},EiD:function(){return Fr},mCW:function(){return br},qzn:function(){return lr},JVY:function(){return dr},pB0:function(){return mr},eBb:function(){return pr},L6k:function(){return fr},LAX:function(){return gr},cg1:function(){return io},Tjo:function(){return qu},kL8:function(){return so},yhl:function(){return hr},dqk:function(){return z},sIi:function(){return Ss},CqO:function(){return js},QGY:function(){return Vs},F4k:function(){return Us},RDi:function(){return Ce},AaK:function(){return d},z3N:function(){return cr},qOj:function(){return vs},TTD:function(){return _e},_Bn:function(){return _o},xp6:function(){return ii},uIk:function(){return ks},ekj:function(){return $s},Suo:function(){return qa},Xpm:function(){return X},lG2:function(){return oe},Yz7:function(){return T},cJS:function(){return E},oAB:function(){return re},Yjl:function(){return ae},Y36:function(){return Ns},_UZ:function(){return Ls},BQk:function(){return Fs},ynx:function(){return Ms},qZA:function(){return Ps},TgZ:function(){return Ds},n5z:function(){return $t},Ikx:function(){return eo},LFG:function(){return yn},$8M:function(){return Wt},NdJ:function(){return qs},CRH:function(){return za},Q6J:function(){return Os},WLB:function(){return Ca},iGM:function(){return ja},LSH:function(){return jr},kYT:function(){return ie},YNc:function(){return xs},_uU:function(){return Ys},Oqu:function(){return Js},hij:function(){return Xs}});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(2441);var u=n(1307);function c(){return new r.xQ}function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function f(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const p=l({__forward_ref__:l});function g(e){return e.__forward_ref__=g,e.toString=function(){return d(this())},e}function m(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(p)&&e.__forward_ref__===g}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function _(e){return"string"==typeof e?e:null==e?"":String(e)}function w(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():_(e)}function b(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${w(e)} found${n}`)}function I(e,t){null==e&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function E(e){return{providers:e.providers||[],imports:e.imports||[]}}function S(e){return C(e,k)||C(e,N)}function C(e,t){return e.hasOwnProperty(t)?e[t]:null}function A(e){return e&&(e.hasOwnProperty(x)||e.hasOwnProperty(O))?e[x]:null}const k=l({"\u0275prov":l}),x=l({"\u0275inj":l}),N=l({ngInjectableDef:l}),O=l({ngInjectorDef:l});var R=(()=>((R=R||{})[R.Default=0]="Default",R[R.Host=1]="Host",R[R.Self=2]="Self",R[R.SkipSelf=4]="SkipSelf",R[R.Optional=8]="Optional",R))();let D;function P(e){const t=D;return D=e,t}function L(e,t,n){const r=S(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&R.Optional?null:void 0!==t?t:void b(d(e),"Injector")}function M(e){return{toString:e}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),V=(()=>((V=V||{})[V.Emulated=0]="Emulated",V[V.None=2]="None",V[V.ShadowDom=3]="ShadowDom",V))();const U="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,z=U||"undefined"!=typeof global&&global||j||q,B={},H=[],Z=l({"\u0275cmp":l}),$=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),W=l({"\u0275mod":l}),K=l({"\u0275loc":l}),Q=l({"\u0275fac":l}),Y=l({__NG_ELEMENT_ID__:l});let J=0;function X(e){return M(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||H,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||V.Emulated,id:"c",styles:e.styles||H,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=J++,n.inputs=se(e.inputs,t),n.outputs=se(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(te):null,n})}function ee(e){return ue(e)||function(e){return e[$]||null}(e)}function te(e){return function(e){return e[G]||null}(e)}const ne={};function re(e){return M(()=>{const t={type:e.type,bootstrap:e.bootstrap||H,declarations:e.declarations||H,imports:e.imports||H,exports:e.exports||H,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function ie(e,t){return M(()=>{const n=ce(e,!0);n.declarations=t.declarations||H,n.imports=t.imports||H,n.exports=t.exports||H})}function se(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const oe=X;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ue(e){return e[Z]||null}function ce(e,t){const n=e[W]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}function le(e){return Array.isArray(e)&&"object"==typeof e[1]}function he(e){return Array.isArray(e)&&!0===e[1]}function de(e){return 0!=(8&e.flags)}function fe(e){return 2==(2&e.flags)}function pe(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function me(e){return 0!=(512&e[2])}function ye(e,t){return e.hasOwnProperty(Q)?e[Q]:null}class ve{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function _e(){return we}function we(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ie),be}function be(){const e=Ee(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Ie(e,t,n,r){const i=Ee(e)||function(e,t){return e[Te]=t}(e,{previous:B,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new ve(u&&u.currentValue,t,o===B),e[r]=t}_e.ngInherit=!0;const Te="__ngSimpleChanges__";function Ee(e){return e[Te]||null}let Se;function Ce(e){Se=e}function Ae(e){return!!e.listen}const ke={createRenderer:(e,t)=>void 0!==Se?Se:"undefined"!=typeof document?document:void 0};function xe(e){for(;Array.isArray(e);)e=e[0];return e}function Ne(e,t){return xe(t[e])}function Oe(e,t){return xe(t[e.index])}function Re(e,t){return e.data[t]}function De(e,t){const n=t[e];return le(n)?n:n[0]}function Pe(e){return 4==(4&e[2])}function Le(e){return 128==(128&e[2])}function Me(e,t){return null==t?null:e[t]}function Fe(e){e[18]=0}function Ve(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ue={lFrame:st(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function je(){return Ue.bindingsEnabled}function qe(){return Ue.lFrame.lView}function ze(){return Ue.lFrame.tView}function Be(){let e=He();for(;null!==e&&64===e.type;)e=e.parent;return e}function He(){return Ue.lFrame.currentTNode}function Ze(e,t){const n=Ue.lFrame;n.currentTNode=e,n.isParent=t}function $e(){return Ue.lFrame.isParent}function Ge(){Ue.lFrame.isParent=!1}function We(){return Ue.isInCheckNoChangesMode}function Ke(e){Ue.isInCheckNoChangesMode=e}function Qe(){return Ue.lFrame.bindingIndex++}function Ye(e,t){const n=Ue.lFrame;n.bindingIndex=n.bindingRootIndex=e,Je(t)}function Je(e){Ue.lFrame.currentDirectiveIndex=e}function Xe(){return Ue.lFrame.currentQueryIndex}function et(e){Ue.lFrame.currentQueryIndex=e}function tt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function nt(e,t,n){if(n&R.SkipSelf){let r=t,i=e;for(;!(r=r.parent,null!==r||n&R.Host||(r=tt(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;t=r,e=i}const r=Ue.lFrame=it();return r.currentTNode=t,r.lView=e,!0}function rt(e){const t=it(),n=e[1];Ue.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function it(){const e=Ue.lFrame,t=null===e?null:e.child;return null===t?st(e):t}function st(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ot(){const e=Ue.lFrame;return Ue.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const at=ot;function ut(){const e=ot();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ct(){return Ue.lFrame.selectedIndex}function lt(e){Ue.lFrame.selectedIndex=e}function ht(){const e=Ue.lFrame;return Re(e.tView,e.selectedIndex)}function dt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function ft(e,t,n){mt(e,t,3,n)}function pt(e,t,n,r){(3&e[2])===n&&mt(e,t,n,r)}function gt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function mt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(yt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function yt(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class vt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function _t(e,t,n){const r=Ae(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];bt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function wt(e){return 3===e||4===e||6===e}function bt(e){return 64===e.charCodeAt(0)}function It(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Tt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Tt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Et(e){return-1!==e}function St(e){return 32767&e}function Ct(e,t){let n=function(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let At=!0;function kt(e){const t=At;return At=e,t}let xt=0;function Nt(e,t){const n=Rt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ot(r.data,e),Ot(t,null),Ot(r.blueprint,null));const i=Dt(e,t),s=e.injectorIndex;if(Et(i)){const e=St(i),n=Ct(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Ot(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Rt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Dt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Pt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=xt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Lt(e,t,n){if(n&R.Optional)return e;b(t,"NodeInjector")}function Mt(e,t,n,r){if(n&R.Optional&&void 0===r&&(r=null),0==(n&(R.Self|R.Host))){const i=e[9],s=P(void 0);try{return i?i.get(t,r,n&R.Optional):L(t,r,n&R.Optional)}finally{P(s)}}return Lt(r,t,n)}function Ft(e,t,n,r=R.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:Ut:t}(n);if("function"==typeof s){if(!nt(t,e,r))return r&R.Host?Lt(i,n,r):Mt(t,n,r,i);try{const e=s(r);if(null!=e||r&R.Optional)return e;b(n)}finally{at()}}else if("number"==typeof s){let i=null,o=Rt(e,t),a=-1,u=r&R.Host?t[16][6]:null;for((-1===o||r&R.SkipSelf)&&(a=-1===o?Dt(e,t):t[o+8],-1!==a&&Ht(r,!1)?(i=t[1],o=St(a),t=Ct(a,t)):o=-1);-1!==o;){const e=t[1];if(Bt(s,o,e.data)){const e=jt(o,t,n,i,r,u);if(e!==Vt)return e}a=t[o+8],-1!==a&&Ht(r,t[1].data[o+8]===u)&&Bt(s,o,t)?(i=e,o=St(a),t=Ct(a,t)):o=-1}}}return Mt(t,n,r,i)}const Vt={};function Ut(){return new Zt(Be(),qe())}function jt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],u=qt(a,o,n,null==r?fe(a)&&At:r!=o&&0!=(3&a.type),i&R.Host&&s===a);return null!==u?zt(t,o,u,a):Vt}function qt(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,u=e.directiveStart,c=s>>20,l=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<l;h++){const e=o[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(i){const e=o[u];if(e&&ge(e)&&e.type===n)return u}return null}function zt(e,t,n,r){let i=e[n];const s=t.data;if(function(e){return e instanceof vt}(i)){const o=i;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(w(s[n]));const a=kt(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;nt(e,r,R.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=we(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==u&&P(u),kt(a),o.resolving=!1,at()}}return i}function Bt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Ht(e,t){return!(e&R.Self||e&R.Host&&t)}class Zt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return Ft(this._tNode,this._lView,e,n,t)}}function $t(e){return M(()=>{const t=e.prototype.constructor,n=t[Q]||Gt(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Q]||Gt(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Gt(e){return y(e)?()=>{const t=Gt(m(e));return t&&t()}:ye(e)}function Wt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(wt(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(Be(),e)}const Kt="__parameters__";function Qt(e,t,n){return M(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(Kt)?e[Kt]:Object.defineProperty(e,Kt,{value:[]})[Kt];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class Yt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=T({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Jt=new Yt("AnalyzeForEntryComponents"),Xt=Function;function en(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),en(r,t)):t!==e&&t.push(r)}return t}function tn(e,t){e.forEach(e=>Array.isArray(e)?tn(e,t):t(e))}function nn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function rn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sn(e,t,n){let r=an(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function on(e,t){const n=an(e,t);if(n>=0)return e[1|n]}function an(e,t){return function(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}(e,t,1)}const un={},cn="__NG_DI_FLAG__",ln="ngTempTokenPath",hn=/\n/gm,dn="__source",fn=l({provide:String,useValue:l});let pn;function gn(e){const t=pn;return pn=e,t}function mn(e,t=R.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?L(e,void 0,t):pn.get(e,t&R.Optional?null:void 0,t)}function yn(e,t=R.Default){return(D||mn)(m(e),t)}function vn(e){const t=[];for(let n=0;n<e.length;n++){const r=m(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=R.Default;for(let t=0;t<r.length;t++){const i=r[t],s=wn(i);"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(yn(e,n))}else t.push(yn(r))}return t}function _n(e,t){return e[cn]=t,e.prototype[cn]=t,e}function wn(e){return e[cn]}function bn(e,t,n,r){const i=e[ln];throw t[dn]&&i.unshift(t[dn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(hn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[ln]=null,e}const In=_n(Qt("Inject",e=>({token:e})),-1),Tn=_n(Qt("Optional"),8),En=_n(Qt("SkipSelf"),4);var Sn=(()=>((Sn=Sn||{})[Sn.Important=1]="Important",Sn[Sn.DashCase=2]="DashCase",Sn))();const Cn="__ngContext__";function An(e,t){e[Cn]=t}function kn(e){const t=function(e){return e[Cn]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function xn(e,t){return undefined(e,t)}function Nn(e){const t=e[3];return he(t)?t[3]:t}function On(e){return Dn(e[13])}function Rn(e){return Dn(e[4])}function Dn(e){for(;null!==e&&!he(e);)e=e[4];return e}function Pn(e,t,n,r,i){if(null!=r){let s,o=!1;he(r)?s=r:le(r)&&(o=!0,r=r[0]);const a=xe(r);0===e&&null!==n?null==i?zn(t,n,a):qn(t,n,a,i||null,!0):1===e&&null!==n?qn(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Hn(e,t);r&&function(e,t,n,r){Ae(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==xe(n)&&Pn(t,e,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];Jn(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Ln(e,t,n){return Ae(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Mn(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ve(i,-1)),n.splice(r,1)}function Fn(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Mn(i,r),t>0&&(e[n-1][4]=r[4]);const s=rn(e,10+t);!function(e,t){Jn(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Vn(e,t){if(!(256&t[2])){const n=t[11];Ae(n)&&n.destroyNode&&Jn(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Un(e[1],e);for(;t;){let n=null;if(le(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)le(t)&&Un(t[1],t),t=t[3];null===t&&(t=e),le(t)&&Un(t[1],t),n=t&&t[4]}t=n}}(t)}}function Un(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof vt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):xe(t[e]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)r[e]();t[7]=null}}(e,t),1===t[1].type&&Ae(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&he(t[3])){n!==t[3]&&Mn(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function jn(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===V.None||t===V.Emulated)return null}return Oe(r,n)}(e,t.parent,n)}function qn(e,t,n,r,i){Ae(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function zn(e,t,n){Ae(e)?e.appendChild(t,n):t.appendChild(n)}function Bn(e,t,n,r,i){null!==r?qn(e,t,n,r,i):zn(e,t,n)}function Hn(e,t){return Ae(e)?e.parentNode(t):t.parentNode}let Zn,$n=function(e,t,n){return 40&e.type?Oe(e,n):null};function Gn(e,t,n,r){const i=jn(e,r,t),s=t[11],o=function(e,t,n){return $n(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Bn(s,i,n[a],o,!1);else Bn(s,i,n,o,!1)}function Wn(e,t){if(null!==t){const n=t.type;if(3&n)return Oe(t,e);if(4&n)return Qn(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Wn(e,n);{const n=e[t.index];return he(n)?Qn(-1,n):xe(n)}}if(32&n)return xn(t,e)()||xe(e[t.index]);{const n=Kn(e,t);return null!==n?Array.isArray(n)?n[0]:Wn(Nn(e[16]),n):Wn(e,t.next)}}return null}function Kn(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Qn(e,t){const n=10+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Wn(e,r)}return t[7]}function Yn(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&An(xe(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Yn(e,t,n.child,r,i,s,!1),Pn(t,e,i,a,s);else if(32&u){const o=xn(n,r);let u;for(;u=o();)Pn(t,e,i,u,s);Pn(t,e,i,a,s)}else 16&u?Xn(e,t,r,n,i,s):Pn(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Jn(e,t,n,r,i,s){Yn(n,r,e.firstChild,t,i,s,!1)}function Xn(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pn(t,e,i,a[u],s);else Yn(e,t,a,o[3],i,s,!0)}function er(e,t,n){Ae(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function tr(e,t,n){Ae(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function nr(e){var t;return(null===(t=function(){if(void 0===Zn&&(Zn=null,z.trustedTypes))try{Zn=z.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return Zn}())||void 0===t?void 0:t.createHTML(e))||e}class rr{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class ir extends rr{getTypeName(){return"HTML"}}class sr extends rr{getTypeName(){return"Style"}}class or extends rr{getTypeName(){return"Script"}}class ar extends rr{getTypeName(){return"URL"}}class ur extends rr{getTypeName(){return"ResourceURL"}}function cr(e){return e instanceof rr?e.changingThisBreaksApplicationSecurity:e}function lr(e,t){const n=hr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function hr(e){return e instanceof rr&&e.getTypeName()||null}function dr(e){return new ir(e)}function fr(e){return new sr(e)}function pr(e){return new or(e)}function gr(e){return new ar(e)}function mr(e){return new ur(e)}class yr{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(nr(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class vr{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=nr(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=nr(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;("xmlns:ns1"===n||0===n.indexOf("ns1:"))&&e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const _r=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function br(e){return(e=String(e)).match(_r)||e.match(wr)?e:"unsafe:"+e}function Ir(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Tr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Er=Ir("area,br,col,hr,img,wbr"),Sr=Ir("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cr=Ir("rp,rt"),Ar=Tr(Er,Tr(Sr,Ir("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Tr(Cr,Ir("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tr(Cr,Sr)),kr=Ir("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xr=Ir("srcset"),Nr=Tr(kr,xr,Ir("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ir("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Or=Ir("script,style,template");class Rr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ar.hasOwnProperty(t))return this.sanitizedSomething=!0,!Or.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!Nr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;kr[s]&&(o=br(o)),xr[s]&&(r=o,o=(r=String(r)).split(",").map(e=>br(e.trim())).join(", ")),this.buf.push(" ",t,'="',Lr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ar.hasOwnProperty(t)&&!Er.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Lr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Dr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pr=/([^\#-~ |!])/g;function Lr(e){return e.replace(/&/g,"&amp;").replace(Dr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Pr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mr;function Fr(e,t){let n=null;try{Mr=Mr||function(e){const t=new vr(e);return function(){try{return!!(new window.DOMParser).parseFromString(nr(""),"text/html")}catch(e){return!1}}()?new yr(t):t}(e);let r=t?String(t):"";n=Mr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Mr.getInertBodyElement(r)}while(r!==s);return nr((new Rr).sanitizeChildren(Vr(n)||n))}finally{if(n){const e=Vr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function Vr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ur=(()=>((Ur=Ur||{})[Ur.NONE=0]="NONE",Ur[Ur.HTML=1]="HTML",Ur[Ur.STYLE=2]="STYLE",Ur[Ur.SCRIPT=3]="SCRIPT",Ur[Ur.URL=4]="URL",Ur[Ur.RESOURCE_URL=5]="RESOURCE_URL",Ur))();function jr(e){const t=function(){const e=qe();return e&&e[12]}();return t?t.sanitize(Ur.URL,e)||"":lr(e,"URL")?cr(e):br(_(e))}function qr(e){return e.ngOriginalError}function zr(e,...t){e.error(...t)}class Br{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=(i=e)&&i.ngErrorLogger||zr;var i;r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?e.ngDebugContext||this._findContext(qr(e)):null}_findOriginalError(e){let t=e&&qr(e);for(;t&&qr(t);)t=qr(t);return t||null}}const Hr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function Zr(e){return e instanceof Function?e():e}function $r(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const Gr="ng-template";function Wr(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==$r(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Kr(e){return 4===e.type&&e.value!==Gr}function Qr(e,t,n){return t===(4!==e.type||n?e.value:Gr)}function Yr(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(wt(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Qr(e,u,n)||""===u&&1===t.length){if(Jr(r))return!1;o=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!Wr(e.attrs,c,n)){if(Jr(r))return!1;o=!0}continue}const l=Xr(8&r?"class":u,i,Kr(e),n);if(-1===l){if(Jr(r))return!1;o=!0;continue}if(""!==c){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==$r(t,c,0)||2&r&&c!==e){if(Jr(r))return!1;o=!0}}}}else{if(!o&&!Jr(r)&&!Jr(u))return!1;if(o&&Jr(u))continue;o=!1,r=u|1&r}}return Jr(r)||o}function Jr(e){return 0==(1&e)}function Xr(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ei(e,t,n=!1){for(let r=0;r<t.length;r++)if(Yr(e,t[r],n))return!0;return!1}function ti(e,t){return e?":not("+t.trim()+")":t}function ni(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Jr(o)&&(t+=ti(s,i),i=""),r=o,s=s||!Jr(r);n++}return""!==i&&(t+=ti(s,i)),t}const ri={};function ii(e){si(ze(),qe(),ct()+e,We())}function si(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&ft(t,r,n)}else{const r=e.preOrderHooks;null!==r&&pt(t,r,0,n)}lt(n)}function oi(e,t){return e<<17|t<<2}function ai(e){return e>>17&32767}function ui(e){return 2|e}function ci(e){return(131068&e)>>2}function li(e,t){return-131069&e|t<<2}function hi(e){return 1|e}function di(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];et(i),n.contentQueries(2,t[s],s)}}}function fi(e,t,n,r,i,s,o,a,u,c){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Fe(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function pi(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=He(),o=$e(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),Ue.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=Ue.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return Ze(s,!0),s}function gi(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function mi(e,t,n){rt(t);try{const r=e.viewQuery;null!==r&&Gi(1,r,n);const i=e.template;null!==i&&_i(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&di(e,t),e.staticViewQueries&&Gi(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)zi(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,ut()}}function yi(e,t,n,r){const i=t[2];if(256==(256&i))return;rt(t);const s=We();try{Fe(t),function(e){Ue.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&_i(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&ft(t,n,null)}else{const n=e.preOrderHooks;null!==n&&pt(t,n,0,null),gt(t,0)}if(function(e){for(let t=On(e);null!==t;t=Rn(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Ve(r,1),n[2]|=1024}}}(t),function(e){for(let t=On(e);null!==t;t=Rn(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Le(n)&&yi(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&di(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&ft(t,n)}else{const n=e.contentHooks;null!==n&&pt(t,n,1),gt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)lt(~r);else{const i=r,s=n[++e],o=n[++e];Ye(s,i),o(2,t[i])}}}finally{lt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)ji(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&Gi(2,u,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&ft(t,n)}else{const n=e.viewHooks;null!==n&&pt(t,n,2),gt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ve(t[3],-1))}finally{ut()}}function vi(e,t,n,r){const i=t[10],s=!We(),o=Pe(t);try{s&&!o&&i.begin&&i.begin(),o&&mi(e,t,r),yi(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function _i(e,t,n,r,i){const s=ct(),o=2&r;try{lt(-1),o&&t.length>20&&si(e,t,20,We()),n(r,i)}finally{lt(s)}}function wi(e,t,n){if(de(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function bi(e,t,n){!je()||(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Nt(n,t),An(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&Li(t,n,r);const u=zt(t,e,a,n);An(u,t),null!==o&&Fi(0,a-i,u,r,0,o),s&&(De(n.index,t)[8]=u)}}(e,t,n,Oe(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ue.lFrame.currentDirectiveIndex;try{lt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];Je(n),(null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs)&&Ni(r,i)}}finally{lt(-1),Je(o)}}(e,t,n))}function Ii(e,t,n=Oe){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Ti(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ei(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ei(e,t,n,r,i,s,o,a,u,c){const l=20+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ri);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Si(e,t,n,r){const i=Ki(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Qi(e).push(r,i.length-1))}function Ci(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Ai(e,t,n,r,i,s,o,a){const u=Oe(t,n);let c,l=t.inputs;!a&&null!=l&&(c=l[r])?(Ji(e,n,c,r,i),fe(t)&&function(e,t){const n=De(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,Ae(s)?s.setProperty(u,r,i):bt(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ki(e,t,n,r){let i=!1;if(je()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ei(n,o.selectors,!1)&&(i||(i=[]),Pt(Nt(n,t),e,o.type),ge(o)?(Oi(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Di(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,u=gi(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=It(n.mergedAttrs,c.hostAttrs),Pi(e,n,t,u,c),Ri(u,c,o),null!==c.contentQueries&&(n.flags|=8),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),!a&&(l.ngOnChanges||l.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],n=e.inputs,c=null===i||Kr(t)?null:Vi(n,i);s.push(c),o=Ci(n,u,o),a=Ci(e.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=It(n.mergedAttrs,n.attrs),i}function xi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Ni(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Oi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Ri(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function Di(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Pi(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=ye(i.type)),o=new vt(s,ge(i),null);e.blueprint[r]=o,n[r]=o,xi(e,t,0,r,gi(e,n,i.hostVars,ri),i)}function Li(e,t,n){const r=Oe(t,e),i=Ti(n),s=e[10],o=Bi(e,fi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Mi(e,t,n,r,i,s){const o=Oe(e,t);!function(e,t,n,r,i,s,o){if(null==s)Ae(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?_(s):o(s,r||"",i);Ae(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}function Fi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Vi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Ui(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function ji(e,t){const n=De(t,e);if(Le(n)){const e=n[1];80&n[2]?yi(e,n,e.template,n[8]):n[5]>0&&qi(n)}}function qi(e){for(let n=On(e);null!==n;n=Rn(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];yi(e,t,e.template,t[8])}else t[5]>0&&qi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=De(t[n],e);Le(r)&&r[5]>0&&qi(r)}}function zi(e,t){const n=De(t,e),r=n[1];(function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),mi(r,n,n[8])}function Bi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Hi(e){for(;e;){e[2]|=64;const t=Nn(e);if(me(e)&&!t)return e;e=t}return null}function Zi(e,t,n){const r=t[10];r.begin&&r.begin();try{yi(e,t,e.template,n)}catch(i){throw Yi(t,i),i}finally{r.end&&r.end()}}function $i(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=kn(n),i=r[1];vi(i,r,i.template,n)}}(e[8])}function Gi(e,t,n){et(0),t(e,n)}const Wi=(()=>Promise.resolve(null))();function Ki(e){return e[7]||(e[7]=[])}function Qi(e){return e.cleanup||(e.cleanup=[])}function Yi(e,t){const n=e[9],r=n?n.get(Br,null):null;r&&r.handleError(t)}function Ji(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Xi(e,t,n){const r=Ne(t,e);!function(e,t,n){Ae(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function es(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=f(i,e):2==s&&(r=f(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const ts=new Yt("INJECTOR",-1);class ns{get(e,t=un){if(t===un){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const rs=new Yt("Set Injector scope."),is={},ss={};let os;function as(){return void 0===os&&(os=new ns),os}function us(e,t=null,n=null,r){return new cs(e,n,t||as(),r)}class cs{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&tn(t,n=>this.processProvider(n,e,t)),tn([e],e=>this.processInjectorType(e,[],i)),this.records.set(ts,ds(void 0,this));const s=this.records.get(rs);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=un,n=R.Default){this.assertNotDestroyed();const r=gn(this),i=P(void 0);try{if(!(n&R.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof Yt)&&S(e);t=n&&this.injectableDefInScope(n)?ds(ls(e),is):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&R.Self?as():this.parent).get(e,t=n&R.Optional&&t===un?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[ln]=o[ln]||[]).unshift(d(e)),r)throw o;return bn(o,e,"R3InjectorError",this.source)}throw o}finally{P(i),gn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=m(e)))return!1;let r=A(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=A(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{tn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];tn(r,e=>this.processProvider(e,n,r||H))}}this.injectorDefTypes.add(s);const a=ye(s)||(()=>new s);this.records.set(s,ds(a,is));const u=r.providers;if(null!=u&&!o){const t=e;tn(u,e=>this.processProvider(e,t,u))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=ps(e=m(e))?e:m(e&&e.provide);const i=(s=e,fs(s)?ds(void 0,s.useValue):ds(hs(s),is));var s;if(ps(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=ds(void 0,is,!0),t.factory=()=>vn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){return t.value===is&&(t.value=ss,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}injectableDefInScope(e){if(!e.providedIn)return!1;const t=m(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function ls(e){const t=S(e),n=null!==t?t.factory:ye(e);if(null!==n)return n;if(e instanceof Yt)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?");throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[k]||e[N]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function hs(e,t,n){let r;if(ps(e)){const t=m(e);return ye(t)||ls(t)}if(fs(e))r=()=>m(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...vn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>yn(m(e.useExisting));else{const t=m(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ye(t)||ls(t);r=()=>new t(...vn(e.deps))}return r}function ds(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function fs(e){return null!==e&&"object"==typeof e&&fn in e}function ps(e){return"function"==typeof e}const gs=function(e,t,n){return function(e,t=null,n=null,r){const i=us(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let ms=(()=>{class e{static create(e,t){return Array.isArray(e)?gs(e,t,""):gs(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=un,e.NULL=new ns,e.\u0275prov=T({token:e,providedIn:"any",factory:()=>yn(ts)}),e.__NG_ELEMENT_ID__=-1,e})();function ys(e,t){dt(kn(e)[1],Be())}function vs(e){let t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=_s(e.inputs),t.declaredInputs=_s(e.declaredInputs),t.outputs=_s(e.outputs);const n=i.hostBindings;n&&Is(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&ws(e,s),o&&bs(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===vs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=It(i.hostAttrs,n=It(n,i.hostAttrs))}}(r)}function _s(e){return e===B?{}:e===H?[]:e}function ws(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function bs(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Is(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let Ts=null;function Es(){if(!Ts){const e=z.Symbol;if(e&&e.iterator)Ts=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ts=n)}}}return Ts}function Ss(e){return!!Cs(e)&&(Array.isArray(e)||!(e instanceof Map)&&Es()in e)}function Cs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function As(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ks(e,t,n,r){const i=qe();return As(i,Qe(),t)&&(ze(),Mi(ht(),i,e,t,n,r)),ks}function xs(e,t,n,r,i,s,o,a){const u=qe(),c=ze(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,u){const c=t.consts,l=pi(t,e,4,o||null,Me(c,a));ki(t,n,l,Me(c,u)),dt(t,l);const h=l.tViews=Ei(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,s,o):c.data[l];Ze(h,!1);const d=u[11].createComment("");Gn(c,u,d,h),An(d,u),Bi(u,u[l]=Ui(d,u,d,h)),pe(h)&&bi(c,u,h),null!=o&&Ii(u,h,a)}function Ns(e,t=R.Default){const n=qe();return null===n?yn(e,t):Ft(Be(),n,m(e),t)}function Os(e,t,n){const r=qe();return As(r,Qe(),t)&&Ai(ze(),ht(),r,e,t,r[11],n,!1),Os}function Rs(e,t,n,r,i){const s=i?"class":"style";Ji(e,n,t.inputs[s],s,r)}function Ds(e,t,n,r){const i=qe(),s=ze(),o=20+e,a=i[11],u=i[o]=Ln(a,t,Ue.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,u=pi(t,e,2,i,Me(a,s));return ki(t,n,u,Me(a,o)),null!==u.attrs&&es(u,u.attrs,!1),null!==u.mergedAttrs&&es(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,s,i,0,t,n,r):s.data[o];Ze(c,!0);const l=c.mergedAttrs;null!==l&&_t(a,u,l);const h=c.classes;null!==h&&tr(a,u,h);const d=c.styles;null!==d&&er(a,u,d),64!=(64&c.flags)&&Gn(s,i,u,c),0===Ue.lFrame.elementDepthCount&&An(u,i),Ue.lFrame.elementDepthCount++,pe(c)&&(bi(s,i,c),wi(s,c,i)),null!==r&&Ii(i,c)}function Ps(){let e=Be();$e()?Ge():(e=e.parent,Ze(e,!1));const t=e;Ue.lFrame.elementDepthCount--;const n=ze();n.firstCreatePass&&(dt(n,e),de(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Rs(n,t,qe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Rs(n,t,qe(),t.stylesWithoutHost,!1)}function Ls(e,t,n,r){Ds(e,t,n,r),Ps()}function Ms(e,t,n){const r=qe(),i=ze(),s=e+20,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Me(s,r),a=pi(t,e,8,"ng-container",o);return null!==o&&es(a,o,!0),ki(t,n,a,Me(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];Ze(o,!0);const a=r[s]=r[11].createComment("");Gn(i,r,a,o),An(a,r),pe(o)&&(bi(i,r,o),wi(i,o,r)),null!=n&&Ii(r,o)}function Fs(){let e=Be();const t=ze();$e()?Ge():(e=e.parent,Ze(e,!1)),t.firstCreatePass&&(dt(t,e),de(e)&&t.queries.elementEnd(e))}function Vs(e){return!!e&&"function"==typeof e.then}function Us(e){return!!e&&"function"==typeof e.subscribe}const js=Us;function qs(e,t,n,r){const i=qe(),s=ze(),o=Be();return function(e,t,n,r,i,s,o,a){const u=pe(r),c=e.firstCreatePass&&Qi(e),l=t[8],h=Ki(t);let d=!0;if(3&r.type||a){const f=Oe(r,t),p=a?a(f):f,g=h.length,m=a?e=>a(xe(e[r.index])):r.index;if(Ae(n)){let o=null;if(!a&&u&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,d=!1;else{s=Bs(r,t,l,s,!1);const e=n.listen(p,i,s);h.push(s,e),c&&c.push(i,m,g,g+1)}}else s=Bs(r,t,l,s,!0),p.addEventListener(i,s,o),h.push(s),c&&c.push(i,m,g,o)}else s=Bs(r,t,l,s,!1);const f=r.outputs;let p;if(d&&null!==f&&(p=f[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=h.length;h.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),qs}function zs(e,t,n,r){try{return!1!==n(r)}catch(i){return Yi(e,i),!1}}function Bs(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?De(e.index,t):t;0==(32&t[2])&&Hi(o);let a=zs(t,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=zs(t,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Hs(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?ai(s):ci(s),u=!1;for(;0!==a&&(!1===u||o);){const n=e[a+1];Zs(e[a],t)&&(u=!0,e[a+1]=r?hi(n):ui(n)),a=r?ai(n):ci(n)}u&&(e[n+1]=r?ui(s):hi(s))}function Zs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&an(e,t)>=0}function $s(e,t){return function(e,t,n,r){const i=qe(),s=ze(),o=function(e){const t=Ue.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);s.firstUpdatePass&&function(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[ct()],o=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(e.flags&(t?16:32))})(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=Ue.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Ws(n=Gs(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Gs(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==ci(r))return e[ai(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Gs(null,e,t,n[1],r),n=Ws(n,t.attrs,r),function(e,t,n,r){e[ai(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Ws(r,e[s].hostAttrs,n);return Ws(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=ai(o),u=ci(o);e[r]=n;let c,l=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||an(e,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const t=ai(e[a+1]);e[r+1]=oi(t,a),0!==t&&(e[t+1]=li(e[t+1],r)),e[a+1]=function(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=oi(a,0),0!==a&&(e[a+1]=li(e[a+1],r)),a=r;else e[r+1]=oi(u,0),0===a?a=r:e[u+1]=li(e[u+1],r),u=r;l&&(e[r+1]=ui(e[r+1])),Hs(e,c,r,!0),Hs(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&an(s,t)>=0&&(n[r+1]=hi(n[r+1]))}(t,c,e,r,s),o=oi(a,u),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}(s,e,o,r),t!==ri&&As(i,o,t)&&function(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const u=e.data,c=u[a+1];Qs(function(e){return 1==(1&e)}(c)?Ks(u,t,n,i,ci(c),o):void 0)||(Qs(s)||function(e){return 2==(2&e)}(c)&&(s=Ks(u,null,n,i,a,o)),function(e,t,n,r,i){const s=Ae(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Sn.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=Sn.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ne(ct(),n),i,s))}(s,s.data[ct()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=d(cr(e)))),e}(t,n),r,o)}(e,t,null,!0),$s}function Gs(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=Ws(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Ws(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),sn(e,o,!!n||t[++s]))}return void 0===e?null:e}function Ks(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),u=s?t[1]:t,c=null===u;let l=n[i+1];l===ri&&(l=c?H:void 0);let h=c?on(l,r):u===r?l:void 0;if(s&&!Qs(h)&&(h=on(t,r)),Qs(h)&&(a=h,o))return a;const d=e[i+1];i=o?ai(d):ci(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=on(e,r))}return a}function Qs(e){return void 0!==e}function Ys(e,t=""){const n=qe(),r=ze(),i=e+20,s=r.firstCreatePass?pi(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ae(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Gn(r,n,o,s),Ze(s,!1)}function Js(e){return Xs("",e,""),Js}function Xs(e,t,n){const r=qe(),i=function(e,t,n,r){return As(e,Qe(),n)?t+_(n)+r:ri}(r,e,t,n);return i!==ri&&Xi(r,ct(),i),Xs}function eo(e,t,n){const r=qe();return As(r,Qe(),t)&&Ai(ze(),ht(),r,e,t,r[11],n,!0),eo}const to=void 0;var no=["en",[["a","p"],["AM","PM"],to],[["AM","PM"],to,to],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],to,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],to,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",to,"{1} 'at' {0}",to],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ro={};function io(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=oo(t);if(n)return n;const r=t.split("-")[0];if(n=oo(r),n)return n;if("en"===r)return no;throw new Error(`Missing locale data for the locale "${e}".`)}function so(e){return io(e)[ao.PluralCase]}function oo(e){return e in ro||(ro[e]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[e]),ro[e]}var ao=(()=>((ao=ao||{})[ao.LocaleId=0]="LocaleId",ao[ao.DayPeriodsFormat=1]="DayPeriodsFormat",ao[ao.DayPeriodsStandalone=2]="DayPeriodsStandalone",ao[ao.DaysFormat=3]="DaysFormat",ao[ao.DaysStandalone=4]="DaysStandalone",ao[ao.MonthsFormat=5]="MonthsFormat",ao[ao.MonthsStandalone=6]="MonthsStandalone",ao[ao.Eras=7]="Eras",ao[ao.FirstDayOfWeek=8]="FirstDayOfWeek",ao[ao.WeekendRange=9]="WeekendRange",ao[ao.DateFormat=10]="DateFormat",ao[ao.TimeFormat=11]="TimeFormat",ao[ao.DateTimeFormat=12]="DateTimeFormat",ao[ao.NumberSymbols=13]="NumberSymbols",ao[ao.NumberFormats=14]="NumberFormats",ao[ao.CurrencyCode=15]="CurrencyCode",ao[ao.CurrencySymbol=16]="CurrencySymbol",ao[ao.CurrencyName=17]="CurrencyName",ao[ao.Currencies=18]="Currencies",ao[ao.Directionality=19]="Directionality",ao[ao.PluralCase=20]="PluralCase",ao[ao.ExtraData=21]="ExtraData",ao))();const uo="en-US";let co=uo;function lo(e){I(e,"Expected localeId to be defined"),"string"==typeof e&&(co=e.toLowerCase().replace(/_/g,"-"))}function ho(e,t,n,r,i){if(e=m(e),Array.isArray(e))for(let s=0;s<e.length;s++)ho(e[s],t,n,r,i);else{const s=ze(),o=qe();let a=ps(e)?e:m(e.provide),u=hs(e);const c=Be(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ps(e)||!e.multi){const r=new vt(u,i,Ns),f=go(a,t,i?l:l+d,h);-1===f?(Pt(Nt(c,o),s,a),fo(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=go(a,t,l+d,h),p=go(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Pt(Nt(c,o),s,a);const l=function(e,t,n,r,i){const s=new vt(e,n,Ns);return s.multi=[],s.index=t,s.componentProviders=0,po(s,i,r&&!n),s}(i?yo:mo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),fo(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else fo(s,e,f>-1?f:p,po(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function fo(e,t,n,r){const i=ps(t);if(i||function(e){return!!e.useClass}(t)){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function po(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function go(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function mo(e,t,n,r){return vo(this.multi,[])}function yo(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=zt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),vo(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],vo(i,s);return s}function vo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function _o(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=ze();if(r.firstCreatePass){const i=ge(e);ho(n,r.data,r.blueprint,i,!0),ho(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class wo{}const bo="ngComponent";class Io{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t[bo]=e,t}(e)}}let To=(()=>{class e{}return e.NULL=new Io,e})();function Eo(...e){}function So(e,t){return new Ao(Oe(e,t))}const Co=function(){return So(Be(),qe())};let Ao=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Co,e})();function ko(e){return e instanceof Ao?e.nativeElement:e}class xo{}let No=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Oo(),e})();const Oo=function(){const e=qe(),t=De(Be().index,e);return function(e){return e[11]}(le(t)?t:e)};let Ro=(()=>{class e{}return e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null}),e})();class Do{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Po=new Do("12.2.17");class Lo{constructor(){}supports(e){return Ss(e)}create(e){return new Fo(e)}}const Mo=(e,t)=>t;class Fo{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Mo}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<qo(n,r,i)?t:n,o=qo(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ss(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Es()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Vo(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new jo),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Vo{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uo{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class jo{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Uo,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qo(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class zo{constructor(){}supports(e){return e instanceof Map||Cs(e)}create(){return new Bo}}class Bo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Cs(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ho(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Ho{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zo(){return new $o([new Lo])}let $o=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Zo()),deps:[[e,new En,new Tn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(e){return e.name||typeof e}(e)}'`)}}return e.\u0275prov=T({token:e,providedIn:"root",factory:Zo}),e})();function Go(){return new Wo([new zo])}let Wo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Go()),deps:[[e,new En,new Tn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=T({token:e,providedIn:"root",factory:Go}),e})();function Ko(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(xe(s)),he(s))for(let e=10;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&Ko(t[1],t,n,r)}const o=n.type;if(8&o)Ko(e,t,n.child,r);else if(32&o){const e=xn(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Kn(t,n);if(Array.isArray(e))r.push(...e);else{const n=Nn(t[16]);Ko(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class Qo{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Ko(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(he(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Fn(e,n),rn(t,n))}this._attachedToViewContainer=!1}Vn(this._lView[1],this._lView)}onDestroy(e){Si(this._lView[1],this._lView,null,e)}markForCheck(){Hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ke(!0);try{Zi(e,t,n)}finally{Ke(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Jn(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Yo extends Qo{constructor(e){super(e),this._view=e}detectChanges(){$i(this._view)}checkNoChanges(){!function(e){Ke(!0);try{$i(e)}finally{Ke(!1)}}(this._view)}get context(){return null}}const Jo=function(e){return function(e,t,n){if(fe(e)&&!n){const n=De(e.index,t);return new Qo(n,n)}return 47&e.type?new Qo(t[16],t):null}(Be(),qe(),16==(16&e))};let Xo=(()=>{class e{}return e.__NG_ELEMENT_ID__=Jo,e})();const ea=[new zo],ta=new $o([new Lo]),na=new Wo(ea),ra=function(){return aa(Be(),qe())};let ia=(()=>{class e{}return e.__NG_ELEMENT_ID__=ra,e})();const sa=ia,oa=class extends sa{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=fi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),mi(t,n,e),new Qo(n)}};function aa(e,t){return 4&e.type?new oa(t,e,So(e,t)):null}class ua{}class ca{}const la=function(){return ma(Be(),qe())};let ha=(()=>{class e{}return e.__NG_ELEMENT_ID__=la,e})();const da=ha,fa=class extends da{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return So(this._hostTNode,this._hostLView)}get injector(){return new Zt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Dt(this._hostTNode,this._hostLView);if(Et(e)){const t=Ct(e,this._hostLView),n=St(e);return new Zt(t[1].data[n+8],t)}return new Zt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=pa(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(ua,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(he(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new fa(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],nn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=Qn(i,s),a=n[11],u=Hn(a,s[7]);return null!==u&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,Jn(e,r,n,1,i,s)}(r,s[6],a,n,u,o),e.attachToViewContainerRef(),nn(ga(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=pa(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Fn(this._lContainer,t);n&&(rn(ga(this._lContainer),t),Vn(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Fn(this._lContainer,t);return n&&null!=rn(ga(this._lContainer),t)?new Qo(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function pa(e){return e[8]}function ga(e){return e[8]||(e[8]=[])}function ma(e,t){let n;const r=t[e.index];if(he(r))n=r;else{let i;if(8&e.type)i=xe(r);else{const n=t[11];i=n.createComment("");const r=Oe(e,t);qn(n,Hn(n,r),i,function(e,t){return Ae(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Ui(r,t,i,e),Bi(t,n)}return new fa(n,e,t)}const ya={};class va extends To{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ue(e);return new ba(t,this.ngModule)}}function _a(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const wa=new Yt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Hr});class ba extends wo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(ni).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return _a(this.componentDef.inputs)}get outputs(){return _a(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,ya,i);return s!==ya||r===ya?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(xo,ke),o=i.get(Ro,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Ae(e))return e.selectRootElement(t,n===V.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ln(s.createRenderer(null,this.componentDef),u,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h=function(e,t){return{components:[],scheduler:e||Hr,clean:Wi,playerHandler:t||null,flags:0}}(),d=Ei(0,null,null,1,0,null,null,null,null,null),f=fi(null,d,h,l,null,null,s,a,o,i);let p,g;rt(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=pi(o,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(es(a,u,!0),null!==e&&(_t(i,e,u),null!==a.classes&&tr(i,e,a.classes),null!==a.styles&&er(i,e,a.styles)));const c=r.createRenderer(e,t),l=fi(n,Ti(t),null,t.onPush?64:16,n[20],a,r,c,s||null,null);return o.firstCreatePass&&(Pt(Nt(a,n),o,t.type),Oi(o,a),Di(a,n.length,1)),Bi(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)_t(a,c,["ng-version",Po.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!Jr(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&_t(a,c,e),t&&t.length>0&&tr(a,c,t.join(" "))}if(g=Re(d,20),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Be();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Pi(e,r,t,gi(e,t,1,null),n));const i=zt(t,e,r.directiveStart,r);An(i,t);const s=Oe(r,t);return s&&An(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=Be();t.contentQueries(1,o,e.directiveStart)}const a=Be();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(lt(a.index),xi(n[1],a,0,a.directiveStart,a.directiveEnd,t),Ni(t,o)),o}(e,this.componentDef,f,h,[ys]),mi(d,f,null)}finally{ut()}return new Ia(this.componentType,p,So(g,f),f,g)}}class Ia extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Yo(r),this.componentType=e}get injector(){return new Zt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Ta=new Map;class Ea extends ua{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new va(this);const n=ce(e),r=e[K]||null;r&&lo(r),this._bootstrapComponents=Zr(n.bootstrap),this._r3Injector=us(e,t,[{provide:ua,useValue:this},{provide:To,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=ms.THROW_IF_NOT_FOUND,n=R.Default){return e===ms||e===ua||e===ts?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Sa extends ca{constructor(e){super(),this.moduleType=e,null!==ce(e)&&function(e){const t=new Set;!function e(n){const r=ce(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,Ta.get(i),n),Ta.set(i,n));const s=Zr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Ea(this.moduleType,e)}}function Ca(e,t,n,r,i){return function(e,t,n,r,i,s,o){const a=t+n;return function(e,t,n,r){const i=As(e,t,n);return As(e,t+1,r)||i}(e,a,i,s)?function(e,t,n){return e[t]=n}(e,a+2,o?r.call(o,i,s):r(i,s)):function(e,t){const n=e[t];return n===ri?void 0:n}(e,a+2)}(qe(),function(){const e=Ue.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),e,t,n,r,i)}function Aa(e){return t=>{setTimeout(e,void 0,t)}}const ka=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,u=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),u=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(u=Aa(u),a&&(a=Aa(a)),c&&(c=Aa(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof i.w&&e.add(l),l}};function xa(){return this._results[Es()]()}class Na{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Es(),n=Na.prototype;n[t]||(n[t]=xa)}get changes(){return this._changes||(this._changes=new ka)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=en(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Oa{constructor(e){this.queryList=e,this.matches=null}clone(){return new Oa(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ra{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ra(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ba(e,t).matches&&this.queries[t].setDirty()}}class Da{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Pa{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Pa(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class La{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new La(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,Ma(t,i)),this.matchTNodeWithReadOption(e,t,qt(t,e,i,!1,!1))}else n===ia?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,qt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ao||r===ha||r===ia&&4&t.type)this.addMatch(t.index,-2);else{const n=qt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Ma(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Fa(e,t,n,r){return-1===n?function(e,t){return 11&e.type?So(e,t):4&e.type?aa(e,t):null}(t,e):-2===n?function(e,t,n){return n===Ao?So(t,e):n===ia?aa(t,e):n===ha?ma(t,e):void 0}(e,t,r):zt(e,e[1],n,t)}function Va(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:Fa(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function Ua(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Va(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=10;e<o.length;e++){const t=o[e];t[17]===t[3]&&Ua(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];Ua(n[1],n,i,r)}}}}}return r}function ja(e){const t=qe(),n=ze(),r=Xe();et(r+1);const i=Ba(n,r);if(e.dirty&&Pe(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?Ua(n,t,r,[]):Va(n,t,i,r);e.reset(s,ko),e.notifyOnChanges()}return!0}return!1}function qa(e,t,n,r){const i=ze();if(i.firstCreatePass){const s=Be();(function(e,t,n){null===e.queries&&(e.queries=new Pa),e.queries.track(new La(t,n))})(i,new Da(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}!function(e,t,n){const r=new Na(4==(4&n));Si(e,t,r,r.destroy),null===t[19]&&(t[19]=new Ra),t[19].queries.push(new Oa(r))}(i,qe(),n)}function za(){return e=qe(),t=Xe(),e[19].queries[t].queryList;var e,t}function Ba(e,t){return e.queries.getByIndex(t)}const Ha=new Yt("Application Initializer");let Za=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Eo,this.reject=Eo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Vs(t))e.push(t);else if(js(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(yn(Ha,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const $a=new Yt("AppId"),Ga={provide:$a,useFactory:function(){return`${Wa()}${Wa()}${Wa()}`},deps:[]};function Wa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ka=new Yt("Platform Initializer"),Qa=new Yt("Platform ID"),Ya=new Yt("appBootstrapListener");let Ja=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const Xa=new Yt("LocaleId"),eu=new Yt("DefaultCurrencyCode");class tu{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const nu=function(e){return new Sa(e)},ru=nu,iu=function(e){return Promise.resolve(nu(e))},su=function(e){const t=nu(e),n=Zr(ce(e).declarations).reduce((e,t)=>{const n=ue(t);return n&&e.push(new ba(n)),e},[]);return new tu(t,n)},ou=su,au=function(e){return Promise.resolve(su(e))};let uu=(()=>{class e{constructor(){this.compileModuleSync=ru,this.compileModuleAsync=iu,this.compileModuleAndAllComponentsSync=ou,this.compileModuleAndAllComponentsAsync=au}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const cu=(()=>Promise.resolve(0))();function lu(e){"undefined"==typeof Zone?cu.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class hu{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ka(!1),this.onMicrotaskEmpty=new ka(!1),this.onStable=new ka(!1),this.onError=new ka(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=z.requestAnimationFrame,t=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(z,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,pu(e),e.isCheckStableRunning=!0,fu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),pu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return gu(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),mu(e)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return gu(e),n.invoke(i,s,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),mu(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,pu(e),fu(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,du,Eo,Eo);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const du={};function fu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function pu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function gu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function mu(e){e._nesting--,fu(e)}class yu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ka,this.onMicrotaskEmpty=new ka,this.onStable=new ka,this.onError=new ka}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let vu=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hu.assertNotInAngularZone(),lu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lu(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(yn(hu))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})(),_u=(()=>{class e{constructor(){this._applications=new Map,Iu.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Iu.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();class wu{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function bu(e){Iu=e}let Iu=new wu,Tu=!0,Eu=!1;function Su(){return Eu=!0,Tu}function Cu(){if(Eu)throw new Error("Cannot enable prod mode after platform setup.");Tu=!1}let Au;const ku=new Yt("AllowMultipleToken");class xu{constructor(e,t){this.name=e,this.token=t}}function Nu(e,t,n=[]){const r=`Platform: ${t}`,i=new Yt(r);return(t=[])=>{let s=Ou();if(!s||s.injector.get(ku,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:rs,useValue:"platform"});!function(e){if(Au&&!Au.destroyed&&!Au.injector.get(ku,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Au=e.get(Ru);const t=e.get(Ka,null);t&&t.forEach(e=>e())}(ms.create({providers:e,name:r}))}return function(e){const t=Ou();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Ou(){return Au&&!Au.destroyed?Au:null}let Ru=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new yu:("zone.js"===e?void 0:e)||new hu({enableLongStackTrace:Su(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:hu,useValue:n}];return n.run(()=>{const i=ms.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(i),o=s.injector.get(Br,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{o.handleError(e)}});s.onDestroy(()=>{Lu(this._modules,s),e.unsubscribe()})}),function(e,n,r){try{const t=r();return Vs(t)?t.catch(t=>{throw n.runOutsideAngular(()=>e.handleError(t)),t}):t}catch(t){throw n.runOutsideAngular(()=>e.handleError(t)),t}}(o,n,()=>{const e=s.injector.get(Za);return e.runInitializers(),e.donePromise.then(()=>(lo(s.injector.get(Xa,uo)||uo),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=Du({},t);return function(e,t,n){const r=new Sa(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Pu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(yn(ms))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function Du(e,t){return Array.isArray(t)?t.reduce(Du,e):Object.assign(Object.assign({},e),t)}let Pu=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{hu.assertNotInAngularZone(),lu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{hu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(e=>(0,u.x)()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r}}(c)(e))))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof wo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(ua),i=n.create(ms.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(vu,null),a=o&&i.injector.get(_u);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Lu(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Lu(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ya,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(yn(hu),yn(ms),yn(Br),yn(To),yn(Za))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function Lu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Mu{}class Fu{}const Vu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Uu=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Vu}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>ju(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>ju(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(yn(uu),yn(Fu,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function ju(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const qu=function(e){return null},zu=Nu(null,"core",[{provide:Qa,useValue:"unknown"},{provide:Ru,deps:[ms]},{provide:_u,deps:[]},{provide:Ja,deps:[]}]),Bu=[{provide:Pu,useClass:Pu,deps:[hu,ms,Br,To,Za]},{provide:wa,deps:[hu],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Za,useClass:Za,deps:[[new Tn,Ha]]},{provide:uu,useClass:uu,deps:[]},Ga,{provide:$o,useFactory:function(){return ta},deps:[]},{provide:Wo,useFactory:function(){return na},deps:[]},{provide:Xa,useFactory:function(e){return lo(e=e||"undefined"!=typeof $localize&&$localize.locale||uo),e},deps:[[new In(Xa),new Tn,new En]]},{provide:eu,useValue:"USD"}];let Hu=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(yn(Pu))},e.\u0275mod=re({type:e}),e.\u0275inj=E({providers:Bu}),e})()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return g},xv:function(){return h},Dh:function(){return l},GT:function(){return u},on:function(){return d},pX:function(){return a}});var r=n(3018),i=n(7841),s=n(7667);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),u=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class c{constructor(e){return e}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const f=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},p={provide:c,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:l,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[p]}),e})()},7667:function(e,t,n){"use strict";n.d(t,{q4:function(){return c},iC:function(){return v},HU:function(){return m},cc:function(){return d}});var r=n(3018),i=(n(2329),n(7771)),s=n(3637),o=n(3342),a=n(3101),u=n(309);e=n.hmd(e);const c=new r.GfV("7.0.4"),l=!!e.hot,h=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};function d(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(h("error",`${t} was already initialized on the ${n} Firebase App with different settings.${l?" You may need to reload as Firebase is not HMR aware.":""}`),h("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}function f(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class p{constructor(e,t=i.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class g{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",f,{},f,f)),t.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let m=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new p(Zone.current)),this.insideAngular=e.run(()=>new p(Zone.current,s.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function y(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("AngularFireModule has not been provided");return e}function v(e){return y(),function(e){return function(t){return(t=t.lift(new g(e.ngZone))).pipe((0,a.R)(e.outsideAngular),(0,u.QV)(e.insideAngular))}}(y())(e)}},4486:function(e,t,n){"use strict";var r=n(4685),i=n(6034),s=n(5452),o=n(300);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const u=new e(a,n);return t[a.name]=u,u},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.1",undefined),t.Z=h},5452:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return o.ZR},SDK_VERSION:function(){return I},_DEFAULT_ENTRY_NAME:function(){return l},_addComponent:function(){return p},_addOrOverwriteComponent:function(){return g},_apps:function(){return d},_clearComponents:function(){return _},_components:function(){return f},_getProvider:function(){return y},_registerComponent:function(){return m},_removeServiceInstance:function(){return v},deleteApp:function(){return C},getApp:function(){return E},getApps:function(){return S},initializeApp:function(){return T},onLog:function(){return x},registerVersion:function(){return k},setLogLevel:function(){return N}});var r=n(8239),i=n(6034),s=n(300),o=n(4685);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",c=new s.Yd("@firebase/app"),l="[DEFAULT]",h={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,f=new Map;function p(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function g(e,t){e.container.addOrOverwriteComponent(t)}function m(e){const t=e.name;if(f.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of d.values())p(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function v(e,t,n=l){y(e,t).clearInstance(n)}function _(){f.clear()}const w=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const I="9.0.0";function T(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:l,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw w.create("bad-app-name",{appName:String(r)});const s=d.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw w.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of f.values())a.addComponent(i);const u=new b(e,n,a);return d.set(r,u),u}function E(e=l){const t=d.get(e);if(!t)throw w.create("no-app",{appName:e});return t}function S(){return Array.from(d.values())}function C(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function k(e,t,n){var r;let s=null!==(r=h[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}m(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function x(e,t){if(null!==e&&"function"!=typeof e)throw w.create("invalid-log-argument");(0,s.Am)(e,t)}function N(e){(0,s.Ub)(e)}m(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),k(u,"0.7.0",undefined),k("fire-js","")},6034:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return c}});var r=n(4762),i=n(4685),s=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,s=this.onInitCallbacks.get(t);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(e,t)}catch(c){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:u(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function u(e){return e===o?void 0:e}var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},300:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}n.d(t,{in:function(){return o},Yd:function(){return h},Ub:function(){return d},Am:function(){return f}});var i,s=[],o=(()=>{return(e=o||(o={}))[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",o;var e})(),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString(),o=c[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,r(["["+s+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function d(e){s.forEach(function(t){t.setLogLevel(e)})}function f(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=a[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},4685:function(e,t,n){"use strict";n.d(t,{BH:function(){return l},LL:function(){return E},ZR:function(){return T},tV:function(){return a},r3:function(){return A},Sg:function(){return h},ne:function(){return P},vZ:function(){return x},ZB:function(){return u},pd:function(){return D},m9:function(){return F},z$:function(){return d},jU:function(){return g},ru:function(){return m},d:function(){return v},xb:function(){return k},w1:function(){return _},hl:function(){return I},uI:function(){return f},UG:function(){return p},b$:function(){return y},G6:function(){return b},Mn:function(){return w},xO:function(){return O},zd:function(){return R}});var r=n(4762),i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)!t.hasOwnProperty(n)||!c(n)||(e[n]=u(e[n],t[n]));return e}function c(e){return"__proto__"!==e}var l=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function h(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function p(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function g(){return"object"==typeof self&&self.self===self}function m(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function v(){return d().indexOf("Electron/")>=0}function _(){var e=d();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function b(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return"indexedDB"in self&&null!=indexedDB}var T=function(e){function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,E.prototype.create),s}return(0,r.ZT)(t,e),t}(Error),E=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,s=this.errors[e],o=s?S(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new T(i,a,r);return u},e}();function S(e,t){return e.replace(C,function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"})}var C=/\{\$([^}]+)}/g;function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function x(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,s=n;i<s.length;i++){if(!r.includes(l=s[i]))return!1;var o=e[l],a=t[l];if(N(o)&&N(a)){if(!x(o,a))return!1}else if(o!==a)return!1}for(var u=0,c=r;u<c.length;u++){var l;if(!n.includes(l=c[u]))return!1}return!0}function N(e){return null!==e&&"object"==typeof e}function O(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r];n(s[0],s[1])}return t.length?"&"+t.join("&"):""}function R(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[1];t[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),t}function D(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function P(e,t){var n=new L(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var L=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function M(){}function F(e){return e&&e._delegate?e._delegate:e}},2329:function(e,t,n){"use strict";n.d(t,{ZF:function(){return r.initializeApp}});var r=n(5452);(0,r.registerVersion)("firebase","9.0.2","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(4486);r.Z.registerVersion("firebase","9.0.2","app-compat")},6780:function(e,t,n){"use strict";n.r(t);var r=n(8239),i=n(4486),s=n(4685),o=n(5452),a=n(4762),u=n(300),c=n(6034);const l=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},d=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),f=new u.Yd("@firebase/auth");function p(e,...t){f.logLevel<=u.in.ERROR&&f.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function g(e,...t){throw _(e,...t)}function m(e,...t){return _(e,...t)}function y(e,t,n){const r=Object.assign(Object.assign({},h()),{[t]:n});return new s.LL("auth","Firebase",r).create(t,{appName:e.name})}function v(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g(e,"argument-error"),y(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return d.create(e,...t)}function w(e,t,...n){if(!e)throw _(t,...n)}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p(t),new Error(t)}function I(e,t){e||b(t)}const T=new Map;function E(e){I(e instanceof Function,"Expected a class definition");let t=T.get(e);return t?(I(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T.set(e,t),t)}function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===A()||"https:"===A()}function A(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,I(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(C()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){I(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class N{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},R=new k(3e4,6e4);function D(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function P(e,t,n,r){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)(function*(e,t,n,r,i={}){return M(e,i,()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=new(N.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&u.set("X-Firebase-Locale",e.languageCode),N.fetch()(j(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},i))})})).apply(this,arguments)}function M(e,t,n){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},O),t);try{const t=new q(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw z(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw y(e,a,o);g(e,a)}}catch(i){if(i instanceof s.ZR)throw i;g(e,"network-request-failed")}})).apply(this,arguments)}function V(e,t,n,r){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield P(e,t,n,r,i);return"mfaPendingCredential"in s&&g(e,"multi-factor-auth-required",{serverResponse:s}),s})).apply(this,arguments)}function j(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?x(e.config,i):`${e.config.apiScheme}://${i}`}class q{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"timeout")),R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function z(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=m(e,t,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function H(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function $(e,t){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function W(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(){return(K=(0,r.Z)(function*(e,t=!1){const n=(0,s.m9)(e),r=yield n.getIdToken(t),i=Y(r);w(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:W(Q(i.auth_time)),issuedAtTime:W(Q(i.iat)),expirationTime:W(Q(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function Q(e){return 1e3*Number(e)}function Y(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return p("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(p("Failed to decode base64 JWT payload"),null)}catch(i){return p("Caught error parsing JWT payload as JSON",i),null}}function J(e,t){return X.apply(this,arguments)}function X(){return(X=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof s.ZR&&ee(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function ee({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class ne{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W(this.lastLoginAt),this.creationTime=W(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function re(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield J(e,$(n,{idToken:r}));w(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ae(s.providerUserInfo):[],a=oe(e.providerData,o),u=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ne(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,c)})).apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e){const t=(0,s.m9)(e);yield re(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function oe(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ae(e){return e.map(e=>{var{providerId:t}=e,n=(0,a._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ue(){return(ue=(0,r.Z)(function*(e,t){const n=yield M(e,{},()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=j(e,r,"/v1/token",`key=${i}`);return N.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){w(e.idToken,"internal-error"),w(void 0!==e.idToken,"internal-error"),w(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Y(e);return w(t,"internal-error"),w(void 0!==t.exp,"internal-error"),w(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return w(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ue.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ce;return n&&(w("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(w("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(w("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ce,this.toJSON())}_performRefresh(){return b("not implemented")}}function le(e,t){w("string"==typeof e||void 0===e,"internal-error",{appName:t})}class he{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.metadata=new ne(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield J(t,t.stsTokenManager.getToken(t.auth,e));return w(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return K.apply(this,arguments)}(this,e)}reload(){return function(e){return se.apply(this,arguments)}(this)}_assign(e){this!==e&&(w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new he(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield re(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield J(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:b,providerData:I,stsTokenManager:T}=t;w(v&&T,e,"internal-error");const E=ce.fromJSON(this.name,T);w("string"==typeof v,e,"internal-error"),le(l,e.name),le(h,e.name),w("boolean"==typeof _,e,"internal-error"),w("boolean"==typeof b,e,"internal-error"),le(d,e.name),le(f,e.name),le(p,e.name),le(g,e.name),le(m,e.name),le(y,e.name);const S=new he({uid:v,auth:e,email:h,emailVerified:_,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(S.providerData=I.map(e=>Object.assign({},e))),g&&(S._redirectEventId=g),S}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new ce;r.updateFromServerResponse(t);const i=new he({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield re(i),i})()}}const de=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function fe(e,t,n){return`firebase:${e}:${t}:${n}`}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fe(this.userKey,r.apiKey,i),this.fullPersistenceKey=fe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?he._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new pe(E(de),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||E(de);const o=fe(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=he._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const u=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(t){}});return function(t){return e.apply(this,arguments)}}())),new pe(s,e,n)):new pe(s,e,n)})()}}function ge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(be(t))return"Blackberry";if(Ie(t))return"Webos";if(ye(t))return"Safari";if((t.includes("chrome/")||ve(t))&&!t.includes("edge/"))return"Chrome";if(we(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function me(e=(0,s.z$)()){return/firefox\//i.test(e)}function ye(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ve(e=(0,s.z$)()){return/crios\//i.test(e)}function _e(e=(0,s.z$)()){return/iemobile/i.test(e)}function we(e=(0,s.z$)()){return/android/i.test(e)}function be(e=(0,s.z$)()){return/blackberry/i.test(e)}function Ie(e=(0,s.z$)()){return/webos/i.test(e)}function Te(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)}function Ee(e=(0,s.z$)()){return Te(e)||we(e)||Ie(e)||be(e)||/windows phone/i.test(e)||_e(e)}function Se(e,t=[]){let n;switch(e){case"Browser":n=ge((0,s.z$)());break;case"Worker":n=`${ge((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Ce{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=E(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r;n._deleted||(n.persistenceManager=yield pe.create(n,e),!n._deleted&&((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),!n._deleted&&(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t)}})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);(!i||i===s)&&(null==o?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(w(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield re(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,s.m9)(e):null;return n&&w(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&w(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(E(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&E(e)||t._popupRedirectResolver;w(n,t,"argument-error"),t.redirectPersistenceManager=yield pe.create(t,[E(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return w(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ae(e){return(0,s.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ne(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Oe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}function Re(e,t){return De.apply(this,arguments)}function De(){return(De=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:resetPassword",D(e,t))})).apply(this,arguments)}function Pe(e,t){return Le.apply(this,arguments)}function Le(){return(Le=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Me(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",D(e,t))})).apply(this,arguments)}function Ve(){return(Ve=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPassword",D(e,t))})).apply(this,arguments)}function Ue(e,t){return je.apply(this,arguments)}function je(){return(je=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:sendOobCode",D(e,t))})).apply(this,arguments)}function qe(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Be(e,t){return He.apply(this,arguments)}function He(){return(He=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ze(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ge(e,t){return We.apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))})).apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))})).apply(this,arguments)}class Ye extends Oe{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ye(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ye(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Ve.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Ke.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:g(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Pe(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Qe.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:g(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Je(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithIdp",D(e,t))})).apply(this,arguments)}class et extends Oe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new et(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,a._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new et(n,r);return Object.assign(s,i),s}_getIdTokenResponse(e){return Je(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Je(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Je(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:sendVerificationCode",D(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t))})).apply(this,arguments)}function it(){return(it=(0,r.Z)(function*(e,t){const n=yield V(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t));if(n.temporaryProof)throw z(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const st={USER_NOT_FOUND:"user-not-found"};function ot(){return(ot=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),st)})).apply(this,arguments)}class at extends Oe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new at({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new at({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return rt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return it.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return ot.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new at({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ut{constructor(e){var t,n,r,i,o,a;const u=(0,s.zd)((0,s.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);w(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new ut(t)}catch(n){return null}}}let ct=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ye._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ut.parseLink(t);return w(n,"argument-error"),Ye._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class lt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ht extends lt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class dt extends ht{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return w("providerId"in t&&"signInMethod"in t,"argument-error"),et._fromParams(t)}credential(e){return this._credential(e)}_credential(e){return w(e.idToken||e.accessToken,"argument-error"),et._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return dt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return dt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!n&&!r&&!t&&!i||!o)return null;try{return new dt(o)._credential({idToken:t,accessToken:n,rawNonce:s,pendingToken:i})}catch(a){return null}}}let ft=(()=>{class e extends ht{constructor(){super("facebook.com")}static credential(t){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),pt=(()=>{class e extends ht{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),gt=(()=>{class e extends ht{constructor(){super("github.com")}static credential(t){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class mt extends Oe{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Je(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Je(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Je(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new mt(n,i):null}static _create(e,t){return new mt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let yt=(()=>{class e extends ht{constructor(){super("twitter.com")}static credential(t,n){return et._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function vt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signUp",D(e,t))})).apply(this,arguments)}class wt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield he._fromIdTokenResponse(e,n,i),s=bt(n);return new wt({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=bt(n);return new wt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function bt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function It(){return(It=(0,r.Z)(function*(e){var t;const n=Ae(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new wt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield vt(n,{returnSecureToken:!0}),i=yield wt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Tt extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Tt.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(i=e.tenantId)&&void 0!==i?i:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new Tt(e,t,n,r)}}function Et(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw"auth/multi-factor-auth-required"===n.code?Tt._fromErrorAndOperation(e,n,t,r):n})}function St(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Ct(){return(Ct=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);yield xt(!0,n,t);const{providerUserInfo:r}=yield H(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=St(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function At(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,r.Z)(function*(e,t,n=!1){const r=yield J(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return wt._forOperation(e,"link",r)})).apply(this,arguments)}function xt(e,t,n){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,r.Z)(function*(e,t,n){yield re(t);const r=!1===e?"provider-already-linked":"no-such-provider";w(St(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Ot(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield J(e,Et(r,i,t,e),n);w(s.idToken,r,"internal-error");const o=Y(s.idToken);w(o,r,"internal-error");const{sub:a}=o;return w(e.uid===a,r,"user-mismatch"),wt._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&g(r,"user-mismatch"),s}})).apply(this,arguments)}function Dt(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield Et(e,r,t),s=yield wt._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Lt(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t){return Dt(Ae(e),t)})).apply(this,arguments)}function Ft(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);return yield xt(!1,n,t.providerId),At(n,t)})).apply(this,arguments)}function Ut(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return Ot((0,s.m9)(e),t)})).apply(this,arguments)}function qt(e,t){return zt.apply(this,arguments)}function zt(){return(zt=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithCustomToken",D(e,t))})).apply(this,arguments)}function Bt(){return(Bt=(0,r.Z)(function*(e,t){const n=Ae(e),r=yield qt(n,{token:t,returnSecureToken:!0}),i=yield wt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Ht{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Zt._fromServerResponse(e,t):g(e,"internal-error")}}class Zt extends Ht{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Zt(t)}}function $t(e,t,n){var r;w((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),w(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(w(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(w(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Gt(){return(Gt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&$t(r,i,n),yield Be(r,i)})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t,n){yield Re((0,s.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t){yield Me((0,s.m9)(e),{oobCode:t})})).apply(this,arguments)}function Qt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r=yield Re(n,{oobCode:t}),i=r.requestType;switch(w(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":w(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":w(r.mfaInfo,n,"internal-error");default:w(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Ht._fromServerResponse(Ae(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t){const{data:n}=yield Qt((0,s.m9)(e),t);return n.email})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=Ae(e),i=yield vt(r,{returnSecureToken:!0,email:t,password:n}),s=yield wt._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"EMAIL_SIGNIN",email:t};w(n.handleCodeInApp,r,"argument-error"),n&&$t(r,i,n),yield Ze(r,i)})).apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=ct.credentialWithLink(t,n||S());return w(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Lt(r,i)})).apply(this,arguments)}function nn(e,t){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:createAuthUri",D(e,t))})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:C()?S():"http://localhost"},{signinMethods:r}=yield nn((0,s.m9)(e),n);return r||[]})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&$t(n.auth,r,t);const{email:i}=yield qe(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(){return(an=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&$t(r.auth,i,n);const{email:o}=yield Ge(r.auth,i);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function un(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,t){return P(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield J(r,un(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield J(e,Pe(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class fn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class pn extends fn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class gn extends fn{constructor(e,t){super(e,"facebook.com",t)}}class mn extends pn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class yn extends fn{constructor(e,t){super(e,"google.com",t)}}class vn extends pn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function _n(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Y(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new fn(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new gn(s,i);case"github.com":return new mn(s,i);case"google.com":return new yn(s,i);case"twitter.com":return new vn(s,i,e.screenName||null);case"custom":case"anonymous":return new fn(s,null);default:return new fn(s,r,i)}}(n)}class wn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new wn("enroll",e)}static _fromMfaPendingCredential(e){return new wn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return wn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return wn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class bn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ae(e),i=(t.serverResponse.mfaInfo||[]).map(e=>Ht._fromServerResponse(n,e));w(t.serverResponse.mfaPendingCredential,n,"internal-error");const s=wn._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new bn(s,i,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,s);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const i=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield wt._fromIdTokenResponse(n,t.operationType,i);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return w(t.user,n,"internal-error"),wt._forOperation(t.user,t.operationType,i);default:g(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function In(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}class Tn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Ht._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Tn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return wn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield J(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield J(t.user,function(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:e.tenantId},t))}(t.user.auth,{idToken:r,mfaEnrollmentId:n}));t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(s){if("auth/user-token-expired"!==s.code)throw s}})()}}const En=new WeakMap,Sn="__sak";class Cn{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sn,"1"),this.storage.removeItem(Sn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}const An=(()=>{class e extends Cn{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return ye(e)||Te(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ee(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),kn=(()=>{class e extends Cn{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let xn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||0===this.handlersMap[e].size)&&delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Nn(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class On{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Nn("",20);r.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Rn(){return window}function Dn(){return void 0!==Rn().WorkerGlobalScope&&"function"==typeof Rn().importScripts}function Pn(){return(Pn=(0,r.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(hi){return null}})).apply(this,arguments)}const Ln="firebaseLocalStorageDb",Mn="firebaseLocalStorage",Fn="fbase_key";class Vn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Un(e,t){return e.transaction([Mn],t?"readwrite":"readonly").objectStore(Mn)}function jn(){const e=indexedDB.open(Ln,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Mn,{keyPath:Fn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Mn)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Ln);return new Vn(e).toPromise()}(),t(yield jn()))}))})}function qn(e,t,n){return zn.apply(this,arguments)}function zn(){return(zn=(0,r.Z)(function*(e,t,n){const r=Un(e,!0).put({[Fn]:t,value:n});return new Vn(r).toPromise()})).apply(this,arguments)}function Bn(){return(Bn=(0,r.Z)(function*(e,t){const n=Un(e,!1).get(t),r=yield new Vn(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function Hn(e,t){const n=Un(e,!0).delete(t);return new Vn(n).toPromise()}const Zn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield jn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return Dn()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=xn._getInstance(Dn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Pn.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new On(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);!r||(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){if(t.sender&&t.activeServiceWorker&&function(){var e;return(null===(e=null==navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield jn();return yield qn(e,Sn,"1"),yield Hn(e,Sn),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>qn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return Bn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>Hn(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Un(e,!1).getAll();return new Vn(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function $n(e,t){return P(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}function Gn(){return(Gn=(0,r.Z)(function*(e){return(yield P(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wn(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Kn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Qn=1e12;class Yn{constructor(e){this.auth=e,this.counter=Qn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Jn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Qn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Qn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Qn))||void 0===n||n.execute(),""})()}}class Jn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;w(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xn=Kn("rcb"),er=new k(3e4,6e4);class tr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rn().grecaptcha}load(e,t=""){return w((n=t).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Rn().grecaptcha):new Promise((n,r)=>{const i=Rn().setTimeout(()=>{r(m(e,"network-request-failed"))},er.get());Rn()[Xn]=()=>{Rn().clearTimeout(i),delete Rn()[Xn];const s=Rn().grecaptcha;if(!s)return void r(m(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Wn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Xn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(m(e,"internal-error"))})});var n}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Rn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(e){return(0,r.Z)(function*(){return new Yn(e)})()}clearedOneInstance(){}}const rr="recaptcha",ir={theme:"light",type:"image"};class sr{constructor(e,t=Object.assign({},ir),n){this.parameters=t,this.type=rr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ae(n),this.isInvisible="invisible"===this.parameters.size,w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;w(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new tr,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{!t||(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){w(!this.parameters.sitekey,this.auth,"argument-error"),w(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),w("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Rn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){w(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){w(C()&&!Dn(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Gn.apply(this,arguments)}(e.auth);w(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return w(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class or{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=at._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=Ae(e),i=yield lr(r,t,(0,s.m9)(n));return new or(i,e=>Lt(r,e))})).apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);yield xt(!1,r,"phone");const i=yield lr(r.auth,t,(0,s.m9)(n));return new or(i,e=>Ft(r,e))})).apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=yield lr(r.auth,t,(0,s.m9)(n));return new or(i,e=>Ut(r,e))})).apply(this,arguments)}function lr(e,t,n){return hr.apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(w("string"==typeof i,e,"argument-error"),w(n.type===rr,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return w("enroll"===t.type,e,"internal-error"),(yield In(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{w("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return w(n,e,"missing-multi-factor-info"),(yield $n(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield tt(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function dr(){return(dr=(0,r.Z)(function*(e,t){yield At((0,s.m9)(e),t)})).apply(this,arguments)}let fr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ae(t)}verifyPhoneNumber(e,t){return lr(this.auth,e,(0,s.m9)(t))}static credential(e,t){return at._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?at._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function pr(e,t){return t?E(t):(w(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class gr extends Oe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Je(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Je(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Je(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return Dt(e.auth,new gr(e),e.bypassAuthState)}function yr(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),Ot(n,new gr(e),e.bypassAuthState)}function vr(e){return _r.apply(this,arguments)}function _r(){return(_r=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return w(n,t,"internal-error"),At(n,new gr(e),e.bypassAuthState)})).apply(this,arguments)}class wr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const u={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(u))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return yr;default:g(this.auth,"internal-error")}}resolve(e){I(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){I(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const br=new k(2e3,1e4);function Ir(){return(Ir=(0,r.Z)(function*(e,t,n){const r=Ae(e);v(e,t,lt);const i=pr(r,n);return new Sr(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Tr(){return(Tr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);return new Sr(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function Er(){return(Er=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);return new Sr(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let Sr=(()=>{class e extends wr{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return w(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){I(1===e.filter.length,"Popup operations only handle one event");const t=Nn();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,br.get())};e()}}return e.currentPopupAction=null,e})();const Cr=new Map;class Ar extends wr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Cr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return kr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Cr.set(t.auth._key(),n)}return n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function kr(){return(kr=(0,r.Z)(function*(e,t){const n=Rr(t),r="true"===(yield Or(e)._get(n));return yield Or(e)._remove(n),r})).apply(this,arguments)}function xr(e,t){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,r.Z)(function*(e,t){return Or(e)._set(Rr(t),"true")})).apply(this,arguments)}function Or(e){return E(e._redirectPersistence)}function Rr(e){return fe("pendingRedirect",e.config.apiKey,e.name)}function Dr(){return(Dr=(0,r.Z)(function*(e,t,n){const r=Ae(e);v(e,t,lt);const i=pr(r,n);return yield xr(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);yield xr(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);v(r.auth,t,lt);const i=pr(r.auth,n);yield xt(!1,r,t.providerId),yield xr(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(e,t){return yield Ae(e)._initializationPromise,Fr(e,t,!1)})).apply(this,arguments)}function Fr(e,t){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,r.Z)(function*(e,t,n=!1){const r=Ae(e),i=pr(r,t),s=yield new Ar(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})).apply(this,arguments)}function Ur(e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(e){const t=Nn(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class qr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Br(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Br(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zr(e))}saveEventToCache(e){this.cachedEventUids.add(zr(e)),this.lastProcessedEventTime=Date.now()}}function zr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Br({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function Hr(e){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,r.Z)(function*(e,t={}){return P(e,"GET","/v1/projects",t)})).apply(this,arguments)}const $r=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gr=/^https?/;function Wr(){return(Wr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield Hr(e);for(const r of t)try{if(Kr(r))return}catch(n){}g(e,"unauthorized-domain")})).apply(this,arguments)}function Kr(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Gr.test(n))return!1;if($r.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Qr=new k(3e4,6e4);function Yr(){const e=Rn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Jr=null;function Xr(e){return Jr=Jr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Yr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Yr(),n(m(e,"network-request-failed"))},timeout:Qr.get()})}if(null===(i=null===(r=Rn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Rn().gapi)||void 0===s?void 0:s.load)){const t=Kn("iframefcb");return Rn()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},Wn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Jr=null,e})}(e),Jr}const ei=new k(5e3,15e3),ti={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ni=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ri(e){const t=e.config;w(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},i=ni.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ii(){return ii=(0,r.Z)(function*(e){const t=yield Xr(e),n=Rn().gapi;return w(n,e,"internal-error"),t.open({where:document.body,url:ri(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ti,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=m(e,"network-request-failed"),s=Rn().setTimeout(()=>{r(i)},ei.get());function o(){Rn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))}),ii.apply(this,arguments)}const si={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ai(e,t,n,r,i,a){w(e.config.authDomain,e,"auth-domain-config-required"),w(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(t instanceof lt){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof ht){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(c).slice(1)}`}const ui="webStorageSupport";class ci extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return b("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ci(e)}_finalizeEnroll(e,t,n){return function(e,t){return P(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return P(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class li{constructor(){}static assertion(e){return ci._fromCredential(e)}}var hi;class di{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fi(){return window}function pi(){return pi=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=fi();I(t.sessionId,"AuthEvent did not contain a session ID");const s=yield yi(t.sessionId),o={};return Te()?o.ibi=i.packageName:we()?o.apn=i.packageName:g(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ai(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}),pi.apply(this,arguments)}function gi(){return gi=(0,r.Z)(function*(e){const{BuildInfo:t}=fi(),n={};Te()?n.iosBundleId=t.packageName:we()?n.androidPackageName=t.packageName:g(e,"operation-not-supported-in-this-environment"),yield Hr(e,n)}),gi.apply(this,arguments)}function mi(){return mi=(0,r.Z)(function*(e,t,n){const{cordova:r}=fi();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function u(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(m(e,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null==document?void 0:document.visibilityState)&&c()}t.addPassiveListener(u),document.addEventListener("resume",c,!1),we()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}})}finally{i()}}),mi.apply(this,arguments)}function yi(e){return vi.apply(this,arguments)}function vi(){return vi=(0,r.Z)(function*(e){const t=_i(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}),vi.apply(this,arguments)}function _i(e){if(I(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}hi="Browser",(0,o._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{w(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),w(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:hi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Se(hi)},s=new Ce(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(E);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",e=>{const t=Ae(e.getProvider("auth").getImmediate());return new di(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)("@firebase/auth","0.17.2",void 0);class wi extends qr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function bi(e){return Ii.apply(this,arguments)}function Ii(){return Ii=(0,r.Z)(function*(e){const t=yield Ei()._get(Si(e));return t&&(yield Ei()._remove(Si(e))),t}),Ii.apply(this,arguments)}function Ti(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ei(){return E(An)}function Si(e){return fe("authEvent",e.config.apiKey,e.name)}function Ci(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function Ai(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:m("no-auth-event")}}function ki(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function xi(e=(0,s.z$)()){return!("file:"!==ki()&&"ionic:"!==ki()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ni(){try{const e=self.localStorage,t=Nn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null==document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(hi){return Oi()&&(0,s.hl)()}return!1}function Oi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ri(){return("http:"===ki()||"https:"===ki()||(0,s.ru)()||xi())&&!((0,s.b$)()||(0,s.UG)())&&Ni()&&!Oi()}function Di(){return xi()&&"undefined"!=typeof document}function Pi(){return Pi=(0,r.Z)(function*(){return!!Di()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}),Pi.apply(this,arguments)}const Li={LOCAL:"local",NONE:"none",SESSION:"session"},Mi=w,Fi="persistence";function Vi(e){return Ui.apply(this,arguments)}function Ui(){return Ui=(0,r.Z)(function*(e){yield e._initializationPromise;const t=ji(),n=fe(Fi,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())}),Ui.apply(this,arguments)}function ji(){return"undefined"!=typeof window?window:null}const qi=w;class zi{constructor(){this.browserResolver=E(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Fr}_openPopup(e,t,n,i){var o=this;return(0,r.Z)(function*(){var r;I(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=ai(e,t,n,S(),i);return function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},si),{width:r.toString(),height:i.toString(),top:o,left:a}),l=(0,s.z$)().toLowerCase();n&&(u=ve(l)?"_blank":n),me(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return Te(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new oi(null);const d=window.open(t||"",u,h);w(d,e,"popup-blocked");try{d.focus()}catch(f){}return new oi(d)}(e,a,Nn())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s._originValidation(e),r=ai(e,t,n,S(),i),Rn().location.href=r,new Promise(()=>{});var r})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(I(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return ii.apply(this,arguments)}(e),r=new qr(e);return n.register("authEvent",t=>(w(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ui,{type:ui},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[ui];void 0!==i&&t(!!i),g(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Wr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ee()||ye()||Te()}}),this.cordovaResolver=E(class{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new wi(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){g(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,s,o,a,u,c,l;const h=fi();w("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),w(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),w("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),w("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),w("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Cr.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Ti(),postBody:null,tenantId:e.tenantId,error:m(e,"no-auth-event")}}(e,n,i);yield function(e,t){return Ei()._set(Si(e),t)}(e,a);const u=yield function(e,t,n){return pi.apply(this,arguments)}(e,a,t),c=yield function(e){const{cordova:t}=fi();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(u);return function(e,t,n){return mi.apply(this,arguments)}(e,r,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return gi.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=fi(),o=setTimeout((0,r.Z)(function*(){yield bi(e),t.onEvent(Ai())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield bi(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Ci(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ci(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ci(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const s=Ci(i),o=s.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(s.firebaseError)):null,a=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=a?m(a):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Ai())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const u=i,c=`${s.packageName.toLowerCase()}://`;fi().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Di()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Pi.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function Bi(e){return e.unwrap()}function Hi(e){return $i(e)}function Zi(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Yi(e,function(e,t){var n;const r=(0,s.m9)(e),i=t;return w(t.operationType,r,"argument-error"),w(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bn._fromError(r,i)}(e,t));else if(r){const e=$i(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function $i(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return fr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=pt;break;case"facebook.com":r=ft;break;case"github.com":r=gt;break;case"twitter.com":r=yt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?mt._create(n,o):et._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new dt(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function Gi(e,t){return Wi.apply(this,arguments)}function Wi(){return Wi=(0,r.Z)(function*(e,t){let n;try{n=yield t}catch(o){throw o instanceof s.ZR&&Zi(e,o),o}const{operationType:r,user:i}=n;return{operationType:r,credential:Hi(n),additionalUserInfo:_n(n),user:Ji.getOrCreate(i)}}),Wi.apply(this,arguments)}function Ki(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>Gi(e,n.confirm(t))}}),Qi.apply(this,arguments)}class Yi{constructor(e,t){this.resolver=t,this.auth=function(e){return e.wrapped()}(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gi(Bi(this.auth),this.resolver.resolveSignIn(e))}}class Ji{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.m9)(e);return En.has(t)||En.set(t,Tn._fromUser(t)),En.get(t)}(e)}static getOrCreate(e){return Ji.USER_MAP.has(e)||Ji.USER_MAP.set(e,new Ji(e)),Ji.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Ft(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Ki(n.auth,function(e,t,n){return ur.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,function(e,t,n){return Er.apply(this,arguments)}(t._delegate,e,zi))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Vi(Ae(t.auth)),function(e,t,n){return function(e,t,n){return Lr.apply(this,arguments)}(e,t,n)}(t._delegate,e,zi)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gi(t.auth,Ut(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Ki(this.auth,function(e,t,n){return cr.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return Gi(this.auth,function(e,t,n){return Tr.apply(this,arguments)}(this._delegate,e,zi))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Vi(Ae(t.auth)),function(e,t,n){return function(e,t,n){return Pr.apply(this,arguments)}(e,t,n)}(t._delegate,e,zi)})()}sendEmailVerification(e){return function(e,t){return on.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return Ct.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return hn((0,s.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return hn((0,s.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return dr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return ln.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return an.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ji.USER_MAP=new WeakMap;const Xi=w;let es=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Xi(n,"invalid-api-key",{appName:e.name});let r=[de];if("undefined"!=typeof window){r=function(e,t){const n=ji();if(!(null==n?void 0:n.sessionStorage))return[];const r=fe(Fi,e,t);switch(n.sessionStorage.getItem(r)){case Li.NONE:return[de];case Li.LOCAL:return[Zn,kn];case Li.SESSION:return[kn];default:return[]}}(n,e.name);for(const e of[Zn,An,kn])r.includes(e)||r.push(e)}Xi(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?zi:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(l),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ji.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ae(e);w(r._canInitEmulator,r,"emulator-config-failed"),w(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=xe(t),{host:o,port:a}=function(e){const t=xe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ne(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ne(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),function(e){function t(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!e&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(i)}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Kt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Qt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Wt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return Gi(n._delegate,function(e,t,n){return Xt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=ut.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Xi(Ri(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Mr.apply(this,arguments)}(e._delegate,zi);return t?Gi(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ae(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=ts(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=ts(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Gt.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Mi(Object.values(Li).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?Mi(t!==Li.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?Mi(t===Li.NONE,e,"unsupported-persistence-type"):Oi()?Mi(t===Li.NONE||t===Li.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):Mi(t===Li.NONE||Ni(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Li.SESSION:n=kn;break;case Li.LOCAL:n=(yield E(Zn)._isAvailable())?Zn:An;break;case Li.NONE:n=de;break;default:return g("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gi(this._delegate,function(e){return It.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return Gi(this._delegate,Lt(this._delegate,e))}signInWithCustomToken(e){return Gi(this._delegate,function(e,t){return Bt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Gi(this._delegate,function(e,t,n){return Lt((0,s.m9)(e),ct.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Gi(this._delegate,function(e,t,n){return tn.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Ki(this._delegate,function(e,t,n){return ar.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Xi(Ri(),t._delegate,"operation-not-supported-in-this-environment"),Gi(t._delegate,function(e,t,n){return Ir.apply(this,arguments)}(t._delegate,e,zi))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Xi(Ri(),t._delegate,"operation-not-supported-in-this-environment"),yield Vi(t._delegate),function(e,t,n){return function(e,t,n){return Dr.apply(this,arguments)}(e,t,n)}(t._delegate,e,zi)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Jt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Li,e})();function ts(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Ji.getOrCreate(e)),error:t,complete:n}}class ns{constructor(){this.providerId="phone",this._delegate=new fr(Bi(i.Z.auth()))}static credential(e,t){return fr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ns.PHONE_SIGN_IN_METHOD=fr.PHONE_SIGN_IN_METHOD,ns.PROVIDER_ID=fr.PROVIDER_ID;const rs=w;class is{constructor(e,t,n=i.Z.app()){var r;rs(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new c.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new es(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ct,FacebookAuthProvider:ft,GithubAuthProvider:gt,GoogleAuthProvider:pt,OAuthProvider:dt,PhoneAuthProvider:ns,PhoneMultiFactorGenerator:li,RecaptchaVerifier:is,TwitterAuthProvider:yt,Auth:es,AuthCredential:Oe,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.1.2")}(i.Z)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return c}});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487);var u=n(2494);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:function(e){return 0===e.length?a.y:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}(e)(this)}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return c},xQ:function(){return l}});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends c{constructor(e,t,n,s){super(),this._parentSubscriber=e;let o,a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,u.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){e=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(d){e=e||[],d instanceof o?e=e.concat(c(d.errors)):e.push(d)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var u;function c(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return a},ft:function(){return u}});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function u(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return u}});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const u=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return s}});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[u.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}class u extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:function(e,t,n){"use strict";n.d(t,{ht:function(){return l},QV:function(){return u}});var r=n(7393),i=n(9193),s=n(5917),o=n(7574);class a{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new a("N",e):a.undefinedValueNotification}static createError(e){return new a("E",void 0,e)}static createComplete(){return a.completeNotification}}function u(e,t=0){return function(n){return n.lift(new c(e,t))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}class l extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}},3101:function(e,t,n){"use strict";n.d(t,{R:function(){return p}});var r=n(7574);let i=1;const s=Promise.resolve(),o={};function a(e){return e in o&&(delete o[e],!0)}const u={setImmediate(e){const t=i++;return o[t]=!0,s.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends c.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=u.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(u.clearImmediate(t),e.scheduled=void 0)}});var d=n(9796);class f extends r.y{constructor(e,t=0,n=h){var r;super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(!(0,d.k)(r=t)&&r-parseFloat(r)+1>=0)||t<0)&&(this.delayTime=0),(!n||"function"!=typeof n.schedule)&&(this.scheduler=h)}static create(e,t=0,n=h){return new f(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function p(e,t=0){return function(n){return n.lift(new g(e,t))}}class g{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new f(t,this.delay,this.scheduler).subscribe(e)}}},3342:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393);function i(){}var s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(6465);const i=new(n(6102).v)(r.o)},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return s}});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:function(e,t,n){"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=e=>{if(e&&"function"==typeof e[o.L])return(e=>t=>{const n=e[o.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(e);if((0,a.z)(e))return(0,r.V)(e);if((0,u.t)(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t))(e);if(e&&"function"==typeof e[s.hZ])return(e=>t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(e);{const t=`You provided ${(0,c.K)(e)?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},7906:function(e,t,n){"use strict";var r=n(3018);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:u,token:e,providedIn:"platform"}),e})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function f(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function p(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function g(e){return e&&"?"!==e[0]?"?"+e:e}let m=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new _((0,r.LFG)(a),t&&t.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class e extends m{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return f(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e extends m{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=f(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(v,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=p(T(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+g(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,T(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(m),r.LFG(a))},e.normalizeQueryParams=g,e.joinWithSlash=f,e.stripTrailingSlash=p,e.\u0275prov=(0,r.Yz7)({factory:I,token:e,providedIn:"root"}),e})();function I(){return new b((0,r.LFG)(m),(0,r.LFG)(a))}function T(e){return e.replace(/\/index.html$/,"")}var E=(()=>((E=E||{})[E.Zero=0]="Zero",E[E.One=1]="One",E[E.Two=2]="Two",E[E.Few=3]="Few",E[E.Many=4]="Many",E[E.Other=5]="Other",E))();const S=r.kL8;class C{}let A=(()=>{class e extends C{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(S(t||this.locale)(e)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),k=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})();class x{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(e){return e.name||typeof e}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new O(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new O(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class O{constructor(e,t){this.record=e,this.view=t}}let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:C,useClass:A}]}),e})();function D(e){return"server"===e}let P=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new L((0,r.LFG)(o),window)}),e})();class L{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=M(this.window.history)||M(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function M(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class F extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new F,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(U=U||document.querySelector("base"),U?U.getAttribute("href"):null);return null==t?null:function(e){V=V||document.createElement("a"),V.setAttribute("href",e);const t=V.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){U=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let V,U=null;const j=new r.OlP("TRANSITION_ID"),q=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let e=0;e<r.length;e++)n.remove(r[e])})}},deps:[j,o,r.zs3],multi:!0}];class z{static init(){(0,r.VLi)(new z)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let B=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const H=new r.OlP("EventManagerPlugins");let Z=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(H),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ${constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let G=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),W=(()=>{class e extends G{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(K),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(K))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function K(e){s().remove(e)}const Q={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Y=/%COMP%/g;function J(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?J(e,i,n):(i=i.replace(Y,e),n.push(i))}return n}function X(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let ee=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new te(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new ne(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new re(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=J(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Z),r.LFG(W),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class te{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Q[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=Q[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Q[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,i&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,X(n)):this.eventManager.addEventListener(e,t,X(n))}}class ne extends te{constructor(e,t,n,r){super(e),this.component=n;const i=J(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Y,r+"-"+n.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(Y,e)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class re extends te{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=J(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ie=(()=>{class e extends ${constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const se=["alt","control","meta","shift"],oe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ae={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ue={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let ce=(()=>{class e extends ${constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(se.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&ae.hasOwnProperty(t)&&(t=ae[t]))}return oe[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),se.forEach(r=>{r!=n&&ue[r](e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const le=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){F.makeCurrent(),z.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),he=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:H,useClass:ie,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:H,useClass:ce,multi:!0,deps:[o]},[],{provide:ee,useClass:ee,deps:[Z,W,r.AFp]},{provide:r.FYo,useExisting:ee},{provide:G,useExisting:W},{provide:W,useClass:W,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:Z,useClass:Z,deps:[H,r.R0b]},{provide:class{},useClass:B,deps:[]},[]];let de=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:j,useExisting:r.AFp},q]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:he,imports:[R,r.hGG]}),e})();"undefined"!=typeof window&&window;var fe=n(8939),pe=n(3637),ge=n(7574),me=n(4402),ye=n(5917),ve=n(7667),_e=n(3282);function we(...e){return(0,_e.J)(1)((0,ye.of)(...e))}var be=n(4869);function Ie(...e){const t=e[e.length-1];return(0,be.K)(t)?(e.pop(),n=>we(e,n,t)):t=>we(e,t)}var Te=n(7393);function Ee(){return e=>e.lift(new Se)}class Se{call(e,t){return t.subscribe(new Ce(e))}}class Ce extends Te.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Ae=n(8002);function ke(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new xe(e,t,n))}}class xe{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Ne(e,this.accumulator,this.seed,this.hasSeed))}}class Ne extends Te.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Oe{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Re(e,this.compare,this.keySelector))}}class Re extends Te.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}function De(e,t){return function(n){return n.lift(new Pe(e,t))}}class Pe{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Le(e,this.predicate,this.thisArg))}}class Le extends Te.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}n(6780);var Me=n(4486),Fe=n(8239),Ve=n(5452),Ue=n(6034),je=n(300),qe=n(4685),ze=function(e,t){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Be(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var He,Ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$e=$e||{},Ge=Ze||self;function We(){}function Ke(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Qe(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ye="closure_uid_"+(1e9*Math.random()>>>0),Je=0;function Xe(e,t,n){return e.call.apply(e.bind,arguments)}function et(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function tt(e,t,n){return(tt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Xe:et).apply(null,arguments)}function nt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function rt(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function it(){this.s=this.s,this.o=this.o}var st={};it.prototype.s=!1,it.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ye)&&e[Ye]||(e[Ye]=++Je)}(this);delete st[e]}},it.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ot=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},at=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function ut(e){return Array.prototype.concat.apply([],arguments)}function ct(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function lt(e){return/^[\s\xa0]*$/.test(e)}var ht,dt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ft(e,t){return-1!=e.indexOf(t)}function pt(e,t){return e<t?-1:e>t?1:0}e:{var gt=Ge.navigator;if(gt){var mt=gt.userAgent;if(mt){ht=mt;break e}}ht=""}function yt(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function vt(e){var t={};for(var n in e)t[n]=e[n];return t}var _t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wt(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<_t.length;s++)n=_t[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function bt(e){return bt[" "](e),e}bt[" "]=We;var It,Tt,Et=ft(ht,"Opera"),St=ft(ht,"Trident")||ft(ht,"MSIE"),Ct=ft(ht,"Edge"),At=Ct||St,kt=ft(ht,"Gecko")&&!(ft(ht.toLowerCase(),"webkit")&&!ft(ht,"Edge"))&&!(ft(ht,"Trident")||ft(ht,"MSIE"))&&!ft(ht,"Edge"),xt=ft(ht.toLowerCase(),"webkit")&&!ft(ht,"Edge");function Nt(){var e=Ge.document;return e?e.documentMode:void 0}e:{var Ot="",Rt=(Tt=ht,kt?/rv:([^\);]+)(\)|;)/.exec(Tt):Ct?/Edge\/([\d\.]+)/.exec(Tt):St?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Tt):xt?/WebKit\/(\S+)/.exec(Tt):Et?/(?:Version)[ \/]?(\S+)/.exec(Tt):void 0);if(Rt&&(Ot=Rt?Rt[1]:""),St){var Dt=Nt();if(null!=Dt&&Dt>parseFloat(Ot)){It=String(Dt);break e}}It=Ot}var Pt={};function Lt(){return e=Pt,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=dt(String(It)).split("."),n=dt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var s=t[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=pt(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||pt(0==s[2].length,0==o[2].length)||pt(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}();var e}var Mt=Ge.document&&St&&(Nt()||parseInt(It,10))||void 0,Ft=function(){if(!Ge.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ge.addEventListener("test",We,t),Ge.removeEventListener("test",We,t)}catch(n){}return e}();function Vt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ut(e,t){if(Vt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(kt){e:{try{bt(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:jt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ut.Z.h.call(this)}}Vt.prototype.h=function(){this.defaultPrevented=!0},rt(Ut,Vt);var jt={2:"touch",3:"pen",4:"mouse"};Ut.prototype.h=function(){Ut.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qt="closure_listenable_"+(1e6*Math.random()|0),zt=0;function Bt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++zt,this.ca=this.fa=!1}function Ht(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Zt(e){this.src=e,this.g={},this.h=0}function $t(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=ot(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ht(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gt(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}Zt.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Gt(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Bt(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Wt="closure_lm_"+(1e6*Math.random()|0),Kt={};function Qt(e,t,n,r,i){if(r&&r.once)return Jt(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qt(e,t[s],n,r,i);return null}return n=on(n),e&&e[qt]?e.N(t,n,Qe(r)?!!r.capture:!!r,i):Yt(e,t,n,!1,r,i)}function Yt(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Qe(i)?!!i.capture:!!i,a=rn(e);if(a||(e[Wt]=a=new Zt(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=nn;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ft||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(tn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Jt(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Jt(e,t[s],n,r,i);return null}return n=on(n),e&&e[qt]?e.O(t,n,Qe(r)?!!r.capture:!!r,i):Yt(e,t,n,!0,r,i)}function Xt(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Xt(e,t[s],n,r,i);else r=Qe(r)?!!r.capture:!!r,n=on(n),e&&e[qt]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Gt(s=e.g[t],n,r,i))&&(Ht(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=rn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gt(t,n,r,i)),(n=-1<e?t[e]:null)&&en(n))}function en(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[qt])$t(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(tn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=rn(t))?($t(n,e),0==n.h&&(n.src=null,t[Wt]=null)):Ht(e)}}}function tn(e){return e in Kt?Kt[e]:Kt[e]="on"+e}function nn(e,t){if(e.ca)e=!0;else{t=new Ut(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&en(e),e=n.call(r,t)}return e}function rn(e){return(e=e[Wt])instanceof Zt?e:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function on(e){return"function"==typeof e?e:(e[sn]||(e[sn]=function(t){return e.handleEvent(t)}),e[sn])}function an(){it.call(this),this.i=new Zt(this),this.P=this,this.I=null}function un(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Vt(t,e);else if(t instanceof Vt)t.target=t.target||e;else{var i=t;wt(t=new Vt(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=cn(o,r,!0,t)&&i}if(i=cn(o=t.g=e,r,!0,t)&&i,i=cn(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=cn(o=t.g=n[s],r,!1,t)&&i}function cn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&$t(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}rt(an,it),an.prototype[qt]=!0,an.prototype.removeEventListener=function(e,t,n,r){Xt(this,e,t,n,r)},an.prototype.M=function(){if(an.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ht(n[r]);delete t.g[e],t.h--}}this.I=null},an.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},an.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ln=Ge.JSON.stringify;function hn(){var e=_n,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var dn,fn=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=pn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),pn=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},e}())(function(){return new gn},function(e){return e.reset()}),gn=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function mn(e){Ge.setTimeout(function(){throw e},0)}function yn(e,t){dn||function(){var e=Ge.Promise.resolve(void 0);dn=function(){e.then(wn)}}(),vn||(dn(),vn=!0),_n.add(e,t)}var vn=!1,_n=new fn;function wn(){for(var e;e=hn();){try{e.h.call(e.g)}catch(n){mn(n)}var t=pn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}vn=!1}function bn(e,t){an.call(this),this.h=e||1,this.g=t||Ge,this.j=tt(this.kb,this),this.l=Date.now()}function In(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Tn(e,t,n){if("function"==typeof e)n&&(e=tt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=tt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ge.setTimeout(e,t||0)}function En(e){e.g=Tn(function(){e.g=null,e.i&&(e.i=!1,En(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}rt(bn,an),(He=bn.prototype).da=!1,He.S=null,He.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),un(this,"tick"),this.da&&(In(this),this.start()))}},He.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.M=function(){bn.Z.M.call(this),In(this),delete this.g};var Sn=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ze(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:En(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(Ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(it);function Cn(e){it.call(this),this.h=e,this.g={}}rt(Cn,it);var An=[];function kn(e,t,n,r){Array.isArray(n)||(n&&(An[0]=n.toString()),n=An);for(var i=0;i<n.length;i++){var s=Qt(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function xn(e){yt(e.g,function(e,t){this.g.hasOwnProperty(t)&&en(e)},e),e.g={}}function Nn(){this.g=!0}function On(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ln(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Cn.prototype.M=function(){Cn.Z.M.call(this),xn(this)},Cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nn.prototype.Aa=function(){this.g=!1},Nn.prototype.info=function(){};var Rn={},Dn=null;function Pn(){return Dn=Dn||new an}function Ln(e){Vt.call(this,Rn.Ma,e)}function Mn(e){var t=Pn();un(t,new Ln(t,e))}function Fn(e,t){Vt.call(this,Rn.STAT_EVENT,e),this.stat=t}function Vn(e){var t=Pn();un(t,new Fn(t,e))}function Un(e,t){Vt.call(this,Rn.Na,e),this.size=t}function jn(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ge.setTimeout(function(){e()},t)}Rn.Ma="serverreachability",rt(Ln,Vt),Rn.STAT_EVENT="statevent",rt(Fn,Vt),Rn.Na="timingevent",rt(Un,Vt);var qn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},zn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bn(){}function Hn(){}Bn.prototype.h=null;var Zn,$n={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Gn(){Vt.call(this,"d")}function Wn(){Vt.call(this,"c")}function Kn(){}function Qn(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Cn(this),this.P=Jn,this.W=new bn(e=At?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Yn}function Yn(){this.i=null,this.g="",this.h=!1}rt(Gn,Vt),rt(Wn,Vt),rt(Kn,Bn),Kn.prototype.g=function(){return new XMLHttpRequest},Kn.prototype.i=function(){return{}},Zn=new Kn;var Jn=45e3,Xn={},er={};function tr(e,t,n){e.K=1,e.v=Er(vr(t)),e.s=n,e.U=!0,nr(e,null)}function nr(e,t){e.F=Date.now(),or(e),e.A=vr(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Fr(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Yn,e.g=Vi(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Sn(tt(e.Ia,e,e.g),e.O)),kn(e.V,e.g,"readystatechange",e.gb),t=e.H?vt(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Mn(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function rr(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function ir(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=sr(e,n))==er){4==t&&(e.o=4,Vn(14),i=!1),On(e.j,e.m,null,"[Incomplete Response]");break}if(r==Xn){e.o=4,Vn(15),On(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}On(e.j,e.m,r,null),hr(e,r)}rr(e)&&r!=er&&r!=Xn&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Vn(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ni(t),t.L=!0,Vn(11))):(On(e.j,e.m,n,"[Invalid Chunked Response]"),lr(e),cr(e))}function sr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?er:(n=Number(t.substring(n,r)),isNaN(n)?Xn:(r+=1)+n>t.length?er:(t=t.substr(r,n),e.C=r+n,t))}function or(e){e.Y=Date.now()+e.P,ar(e,e.P)}function ar(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=jn(tt(e.eb,e),t)}function ur(e){e.B&&(Ge.clearTimeout(e.B),e.B=null)}function cr(e){0==e.l.G||e.I||Di(e.l,e)}function lr(e){ur(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,In(e.W),xn(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function hr(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Hr(n.i,e)))if(n.I=e.N,!e.J&&Hr(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(m){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=jn(tt(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;Ri(n),bi(n)}xi(n),Vn(18)}if(1>=Br(n.i)&&n.ka){try{n.ka()}catch(m){}n.ka=void 0}}else Li(n,11)}else if((e.J||n.g==e)&&Ri(n),!lt(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ft(l,"spdy")||ft(l,"quic")||ft(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Zr(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Tr(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=e;if((r=n).oa=Fi(r,r.H?r.la:null,r.W),f.J){$r(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(ur(p),or(p)),r.g=f}else ki(r);0<n.l.length&&Ei(n)}else"stop"!=s[0]&&"close"!=s[0]||Li(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?Li(n,7):wi(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}Mn(4)}catch(m){}}function dr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ke(e)||"string"==typeof e)at(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ke(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Ke(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function fr(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof fr)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pr(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];gr(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)gr(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function gr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(He=Qn.prototype).setTimeout=function(e){this.P=e},He.gb=function(e){e=e.target;var t=this.L;t&&3==gi(e)?t.l():this.Ia(e)},He.Ia=function(e){try{if(e==this.g)e:{var t=gi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||At||this.g&&(this.h.h||this.g.ga()||mi(this.g)))){this.I||4!=t||7==n||Mn(8==n||0>=r?3:2),ur(this);var i=this.g.ba();this.N=i;t:if(rr(this)){var s=mi(this.g);e="";var o=s.length,a=4==gi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){lr(this),cr(this);var u="";break t}this.h.i=new Ge.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lt(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Vn(12),lr(this),cr(this);break e}On(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hr(this,i)}this.U?(ir(this,t,u),At&&this.i&&3==t&&(kn(this.V,this.W,"tick",this.fb),this.W.start())):(On(this.j,this.m,u,null),hr(this,u)),4==t&&lr(this),this.i&&!this.I&&(4==t?Di(this.l,this):(this.i=!1,or(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Vn(12)):(this.o=0,Vn(13)),lr(this),cr(this)}}}catch(d){}},He.fb=function(){if(this.g){var e=gi(this.g),t=this.g.ga();this.C<t.length&&(ur(this),ir(this,e,t),this.i&&4!=e&&or(this))}},He.cancel=function(){this.I=!0,lr(this)},He.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Mn(3),Vn(17)),lr(this),this.o=2,cr(this)):ar(this,this.Y-e)},(He=fr.prototype).R=function(){pr(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},He.T=function(){return pr(this),this.g.concat()},He.get=function(e,t){return gr(this.h,e)?this.h[e]:t},He.set=function(e,t){gr(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},He.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var mr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yr(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof yr){this.g=void 0!==t?t:e.g,_r(this,e.j),this.s=e.s,wr(this,e.i),br(this,e.m),this.l=e.l,t=e.h;var n=new Dr;n.i=t.i,t.g&&(n.g=new fr(t.g),n.h=t.h),Ir(this,n),this.o=e.o}else e&&(n=String(e).match(mr))?(this.g=!!t,_r(this,n[1]||"",!0),this.s=Sr(n[2]||""),wr(this,n[3]||"",!0),br(this,n[4]),this.l=Sr(n[5]||"",!0),Ir(this,n[6]||"",!0),this.o=Sr(n[7]||"")):(this.g=!!t,this.h=new Dr(null,this.g))}function vr(e){return new yr(e)}function _r(e,t,n){e.j=n?Sr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function wr(e,t,n){e.i=n?Sr(t,!0):t}function br(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ir(e,t,n){t instanceof Dr?(e.h=t,function(e,t){t&&!e.j&&(Pr(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Lr(this,t),Fr(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Cr(t,Or)),e.h=new Dr(t,e.g))}function Tr(e,t,n){e.h.set(t,n)}function Er(e){return Tr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Sr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cr(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ar),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ar(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cr(t,kr,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cr(t,kr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cr(n,"/"==n.charAt(0)?Nr:xr,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cr(n,Rr)),e.join("")};var kr=/[#\/\?@]/g,xr=/[#\?:]/g,Nr=/[#\?]/g,Or=/[#\?@]/g,Rr=/#/g;function Dr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pr(e){e.g||(e.g=new fr,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Lr(e,t){Pr(e),t=Vr(e,t),gr(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,gr((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&pr(e)))}function Mr(e,t){return Pr(e),t=Vr(e,t),gr(e.g.h,t)}function Fr(e,t,n){Lr(e,t),0<n.length&&(e.i=null,e.g.set(Vr(e,t),ct(n)),e.h+=n.length)}function Vr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(He=Dr.prototype).add=function(e,t){Pr(this),this.i=null,e=Vr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},He.forEach=function(e,t){Pr(this),this.g.forEach(function(n,r){at(n,function(n){e.call(t,n,r,this)},this)},this)},He.T=function(){Pr(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},He.R=function(e){Pr(this);var t=[];if("string"==typeof e)Mr(this,e)&&(t=ut(t,this.g.get(Vr(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ut(t,e[n])}return t},He.set=function(e,t){return Pr(this),this.i=null,Mr(this,e=Vr(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},He.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Ur=function(e,t){this.h=e,this.g=t};function jr(e){this.l=e||qr,e=Ge.PerformanceNavigationTiming?0<(e=Ge.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Ge.g&&Ge.g.Ea&&Ge.g.Ea()&&Ge.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qr=10;function zr(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Br(e){return e.h?1:e.g?e.g.size:0}function Hr(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zr(e,t){e.g?e.g.add(t):e.h=t}function $r(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gr(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=Be(e.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return ct(e.i)}function Wr(){}function Kr(){this.g=new Wr}function Qr(e,t,n){var r=n||"";try{dr(e,function(e,n){var i=e;Qe(e)&&(i=ln(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Yr(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Jr(e){this.l=e.$b||null,this.j=e.ib||!1}function Xr(e,t){an.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ei,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jr.prototype.cancel=function(){var e,t;if(this.i=Gr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Be(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},Wr.prototype.stringify=function(e){return Ge.JSON.stringify(e,void 0)},Wr.prototype.parse=function(e){return Ge.JSON.parse(e,void 0)},rt(Jr,Bn),Jr.prototype.g=function(){return new Xr(this.l,this.j)},Jr.prototype.i=function(e){return function(){return e}}({}),rt(Xr,an);var ei=0;function ti(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ni(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ri(e)}function ri(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(He=Xr.prototype).open=function(e,t){if(this.readyState!=ei)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ri(this)},He.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ge).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ni(this)),this.readyState=ei},He.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ge.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ti(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},He.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ni(this):ri(this),3==this.readyState&&ti(this)}},He.Ua=function(e){this.g&&(this.response=this.responseText=e,ni(this))},He.Ta=function(e){this.g&&(this.response=e,ni(this))},He.ha=function(){this.g&&ni(this)},He.setRequestHeader=function(e,t){this.v.append(e,t)},He.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ii=Ge.JSON.parse;function si(e){an.call(this),this.headers=new fr,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oi,this.K=this.L=!1}rt(si,an);var oi="",ai=/^https?$/i,ui=["POST","PUT"];function ci(e){return"content-type"==e.toLowerCase()}function li(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,hi(e),fi(e)}function hi(e){e.D||(e.D=!0,un(e,"complete"),un(e,"error"))}function di(e){if(e.h&&void 0!==$e&&(!e.C[1]||4!=gi(e)||2!=e.ba()))if(e.v&&4==gi(e))Tn(e.Fa,0,e);else if(un(e,"readystatechange"),4==gi(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(mr)[1]||null;if(!s&&Ge.self&&Ge.self.location){var o=Ge.self.location.protocol;s=o.substr(0,o.length-1)}i=!ai.test(s?s.toLowerCase():"")}t=i}if(t)un(e,"complete"),un(e,"success");else{e.m=6;try{var a=2<gi(e)?e.g.statusText:""}catch(u){a=""}e.j=a+" ["+e.ba()+"]",hi(e)}}finally{fi(e)}}}function fi(e,t){if(e.g){pi(e);var n=e.g,r=e.C[0]?We:null;e.g=null,e.C=null,t||un(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function pi(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ge.clearTimeout(e.A),e.A=null)}function gi(e){return e.g?e.g.readyState:0}function mi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case oi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function yi(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return yt(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Tr(e,t,n))}function vi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _i(e){this.za=0,this.l=[],this.h=new Nn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=vi("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=vi("baseRetryDelayMs",5e3,e),this.$a=vi("retryDelaySeedMs",1e4,e),this.Ya=vi("forwardChannelMaxRetries",2,e),this.ra=vi("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new jr(e&&e.concurrentRequestLimit),this.Ca=new Kr,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function wi(e){if(Ii(e),3==e.G){var t=e.V++,n=vr(e.F);Tr(n,"SID",e.J),Tr(n,"RID",t),Tr(n,"TYPE","terminate"),Ci(e,n),(t=new Qn(e,e.h,t,void 0)).K=2,t.v=Er(vr(n)),n=!1,Ge.navigator&&Ge.navigator.sendBeacon&&(n=Ge.navigator.sendBeacon(t.v.toString(),"")),!n&&Ge.Image&&((new Image).src=t.v,n=!0),n||(t.g=Vi(t.l,null),t.g.ea(t.v)),t.F=Date.now(),or(t)}Mi(e)}function bi(e){e.g&&(Ni(e),e.g.cancel(),e.g=null)}function Ii(e){bi(e),e.u&&(Ge.clearTimeout(e.u),e.u=null),Ri(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Ge.clearTimeout(e.m),e.m=null)}function Ti(e,t){e.l.push(new Ur(e.Za++,t)),3==e.G&&Ei(e)}function Ei(e){zr(e.i)||e.m||(e.m=!0,yn(e.Ha,e),e.C=0)}function Si(e,t){var n;n=t?t.m:e.V++;var r=vr(e.F);Tr(r,"SID",e.J),Tr(r,"RID",n),Tr(r,"AID",e.U),Ci(e,r),e.o&&e.s&&yi(r,e.o,e.s),n=new Qn(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ai(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Zr(e.i,n),tr(n,r,t)}function Ci(e,t){e.j&&dr({},function(e,n){Tr(t,n,e)})}function Ai(e,t,n){n=Math.min(e.l.length,n);var r=e.j?tt(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{Qr(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ki(e){e.g||e.u||(e.Y=1,yn(e.Ga,e),e.A=0)}function xi(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=jn(tt(e.Ga,e),Pi(e,e.A)),e.A++,0))}function Ni(e){null!=e.B&&(Ge.clearTimeout(e.B),e.B=null)}function Oi(e){e.g=new Qn(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=vr(e.oa);Tr(t,"RID","rpc"),Tr(t,"SID",e.J),Tr(t,"CI",e.N?"0":"1"),Tr(t,"AID",e.U),Ci(e,t),Tr(t,"TYPE","xmlhttp"),e.o&&e.s&&yi(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Er(vr(t)),n.s=null,n.U=!0,nr(n,e)}function Ri(e){null!=e.v&&(Ge.clearTimeout(e.v),e.v=null)}function Di(e,t){var n=null;if(e.g==t){Ri(e),Ni(e),e.g=null;var r=2}else{if(!Hr(e.i,t))return;n=t.D,$r(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;un(r=Pn(),new Un(r,n,t,i)),Ei(e)}else ki(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Br(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=jn(tt(e.Ha,e,t),Pi(e,e.C)),e.C++,0)))}(e,t)||2==r&&xi(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Li(e,5);break;case 4:Li(e,10);break;case 3:Li(e,6);break;default:Li(e,2)}}function Pi(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Li(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=tt(e.jb,e);n||(n=new yr("//www.google.com/images/cleardot.gif"),Ge.location&&"http"==Ge.location.protocol||_r(n,"https"),Er(n)),function(e,t){var n=new Nn;if(Ge.Image){var r=new Image;r.onload=nt(Yr,n,r,"TestLoadImage: loaded",!0,t),r.onerror=nt(Yr,n,r,"TestLoadImage: error",!1,t),r.onabort=nt(Yr,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=nt(Yr,n,r,"TestLoadImage: timeout",!1,t),Ge.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vn(2);e.G=0,e.j&&e.j.va(t),Mi(e),Ii(e)}function Mi(e){e.G=0,e.I=-1,e.j&&((0!=Gr(e.i).length||0!=e.l.length)&&(e.i.i.length=0,ct(e.l),e.l.length=0),e.j.ua())}function Fi(e,t,n){var r=function(e){return e instanceof yr?vr(e):new yr(e,void 0)}(n);if(""!=r.i)t&&wr(r,t+"."+r.i),br(r,r.m);else{var i=Ge.location;r=function(e,t,n,r){var i=new yr(null,void 0);return e&&_r(i,e),t&&wr(i,t),n&&br(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&yt(e.aa,function(e,t){Tr(r,t,e)}),n=e.sa,(t=e.D)&&n&&Tr(r,t,n),Tr(r,"VER",e.ma),Ci(e,r),r}function Vi(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new si(n&&e.Ba&&!e.qa?new Jr({ib:!0}):e.qa)).L=e.H,t}function Ui(){}function ji(){if(St&&!(10<=Number(Mt)))throw Error("Environmental error: no available transport.")}function qi(e,t){an.call(this),this.g=new _i(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!lt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!lt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Hi(this)}function zi(e){Gn.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Bi(){Wn.call(this),this.status=1}function Hi(e){this.g=e}(He=si.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zn.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Zn),this.g.onreadystatechange=tt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void li(this,s)}e=n||"";var i=new fr(this.headers);r&&dr(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=ci,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Ge.FormData&&e instanceof Ge.FormData,!(0<=ot(ui,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pi(this),0<this.B&&((this.K=function(e){return St&&Lt()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tt(this.pa,this)):this.A=Tn(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){li(this,s)}},He.pa=function(){void 0!==$e&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))},He.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,un(this,"complete"),un(this,"abort"),fi(this))},He.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fi(this,!0)),si.Z.M.call(this)},He.Fa=function(){this.s||(this.F||this.v||this.l?di(this):this.cb())},He.cb=function(){di(this)},He.ba=function(){try{return 2<gi(this)?this.g.status:-1}catch(Tt){return-1}},He.ga=function(){try{return this.g?this.g.responseText:""}catch(Tt){return""}},He.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ii(t)}},He.Da=function(){return this.m},He.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=_i.prototype).ma=8,He.G=1,He.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},He.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Qn(this,this.h,e,void 0),n=this.s;if(this.P&&(n?wt(n=vt(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ai(this,t,r),Tr(i=vr(this.F),"RID",e),Tr(i,"CVER",22),this.D&&Tr(i,"X-HTTP-Session-Id",this.D),Ci(this,i),this.o&&n&&yi(i,this.o,n),Zr(this.i,t),this.Ra&&Tr(i,"TYPE","init"),this.ja?(Tr(i,"$req",r),Tr(i,"SID","null"),t.$=!0,tr(t,i,null)):tr(t,i,r),this.G=2}}else 3==this.G&&(e?Si(this,e):0==this.l.length||zr(this.i)||Si(this))},He.Ga=function(){if(this.u=null,Oi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=jn(tt(this.bb,this),e)}},He.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Vn(10),bi(this),Oi(this))},He.ab=function(){null!=this.v&&(this.v=null,bi(this),xi(this),Vn(19))},He.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Vn(2)):(this.h.info("Failed to ping google.com"),Vn(1))},(He=Ui.prototype).xa=function(){},He.wa=function(){},He.va=function(){},He.ua=function(){},He.Oa=function(){},ji.prototype.g=function(e,t){return new qi(e,t)},rt(qi,an),qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),yn(tt(e.hb,e,t))),Vn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Fi(e,null,e.W),Ei(e)},qi.prototype.close=function(){wi(this.g)},qi.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Ti(this.g,t)}else this.v?((t={}).__data__=ln(e),Ti(this.g,t)):Ti(this.g,e)},qi.prototype.M=function(){this.g.j=null,delete this.j,wi(this.g),delete this.g,qi.Z.M.call(this)},rt(zi,Gn),rt(Bi,Wn),rt(Hi,Ui),Hi.prototype.xa=function(){un(this.g,"a")},Hi.prototype.wa=function(e){un(this.g,new zi(e))},Hi.prototype.va=function(e){un(this.g,new Bi(e))},Hi.prototype.ua=function(){un(this.g,"b")},ji.prototype.createWebChannel=ji.prototype.g,qi.prototype.send=qi.prototype.u,qi.prototype.open=qi.prototype.m,qi.prototype.close=qi.prototype.close,qn.NO_ERROR=0,qn.TIMEOUT=8,qn.HTTP_ERROR=6,zn.COMPLETE="complete",Hn.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",an.prototype.listen=an.prototype.N,si.prototype.listenOnce=si.prototype.O,si.prototype.getLastError=si.prototype.La,si.prototype.getLastErrorCode=si.prototype.Da,si.prototype.getStatus=si.prototype.ba,si.prototype.getResponseJson=si.prototype.Qa,si.prototype.getResponseText=si.prototype.ga,si.prototype.send=si.prototype.ea;var Zi=qn,$i=zn,Gi=Rn,Wi=10,Ki=11,Qi=Jr,Yi=Hn,Ji=si;class Xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xi.UNAUTHENTICATED=new Xi(null),Xi.GOOGLE_CREDENTIALS=new Xi("google-credentials-uid"),Xi.FIRST_PARTY=new Xi("first-party-uid"),Xi.MOCK_USER=new Xi("mock-user");let es="9.0.2";const ts=new je.Yd("@firebase/firestore");function ns(){return ts.logLevel}function rs(e,...t){if(ts.logLevel<=je.in.DEBUG){const n=t.map(os);ts.debug(`Firestore (${es}): ${e}`,...n)}}function is(e,...t){if(ts.logLevel<=je.in.ERROR){const n=t.map(os);ts.error(`Firestore (${es}): ${e}`,...n)}}function ss(e,...t){if(ts.logLevel<=je.in.WARN){const n=t.map(os);ts.warn(`Firestore (${es}): ${e}`,...n)}}function os(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function as(e="Unexpected state"){const t=`FIRESTORE (${es}) INTERNAL ASSERTION FAILED: `+e;throw is(t),new Error(t)}function us(e,t){e||as()}function cs(e,t){return e}const ls={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hs extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ds{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fs{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class ps{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xi.UNAUTHENTICATED))}shutdown(){}}class gs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ms{constructor(e){this.t=e,this.currentUser=Xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ds,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,Fe.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{rs("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(rs("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ds)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(rs("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(us("string"==typeof t.accessToken),new fs(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return us(null===e||"string"==typeof e),new Xi(e)}}class ys{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Xi.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class vs{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new ys(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _s{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function ws(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}_s.T=-1;class bs{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=ws(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Is(e,t){return e<t?-1:e>t?1:0}function Ts(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Es(e){return e+"\0"}class Ss{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hs(ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hs(ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hs(ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hs(ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ss.fromMillis(Date.now())}static fromDate(e){return Ss.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ss(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Is(this.nanoseconds,e.nanoseconds):Is(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Cs{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Cs(e)}static min(){return new Cs(new Ss(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function As(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ks(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ns{constructor(e,t,n){void 0===t?t=0:t>e.length&&as(),void 0===n?n=e.length-t:n>e.length-t&&as(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ns.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ns?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Os extends Ns{construct(e,t,n){return new Os(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new hs(ls.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Os(t)}static emptyPath(){return new Os([])}}const Rs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ds extends Ns{construct(e,t,n){return new Ds(e,t,n)}static isValidIdentifier(e){return Rs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ds.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ds(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new hs(ls.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new hs(ls.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new hs(ls.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new hs(ls.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ds(t)}static emptyPath(){return new Ds([])}}class Ps{constructor(e){this.fields=e,e.sort(Ds.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ts(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ls{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ls(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ls(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Is(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ls.EMPTY_BYTE_STRING=new Ls("");const Ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(e){if(us(!!e),"string"==typeof e){let t=0;const n=Ms.exec(e);if(us(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Vs(e.seconds),nanos:Vs(e.nanos)}}function Vs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Us(e){return"string"==typeof e?Ls.fromBase64String(e):Ls.fromUint8Array(e)}function js(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qs(e){const t=e.mapValue.fields.__previous_value__;return js(t)?qs(t):t}function zs(e){const t=Fs(e.mapValue.fields.__local_write_time__.timestampValue);return new Ss(t.seconds,t.nanos)}function Bs(e){return null==e}function Hs(e){return 0===e&&1/e==-1/0}function Zs(e){return"number"==typeof e&&Number.isInteger(e)&&!Hs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class $s{constructor(e){this.path=e}static fromPath(e){return new $s(Os.fromString(e))}static fromName(e){return new $s(Os.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Os.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Os.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $s(new Os(e.slice()))}}function Gs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?js(e)?4:10:as()}function Ws(e,t){const n=Gs(e);if(n!==Gs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zs(e).isEqual(zs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Fs(e.timestampValue),r=Fs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Us(e.bytesValue).isEqual(Us(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vs(e.geoPointValue.latitude)===Vs(t.geoPointValue.latitude)&&Vs(e.geoPointValue.longitude)===Vs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vs(e.integerValue)===Vs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Vs(e.doubleValue),r=Vs(t.doubleValue);return n===r?Hs(n)===Hs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ts(e.arrayValue.values||[],t.arrayValue.values||[],Ws);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(As(n)!==As(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ws(n[i],r[i])))return!1;return!0}(e,t);default:return as()}var r}function Ks(e,t){return void 0!==(e.values||[]).find(e=>Ws(e,t))}function Qs(e,t){const n=Gs(e),r=Gs(t);if(n!==r)return Is(n,r);switch(n){case 0:return 0;case 1:return Is(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Vs(e.integerValue||e.doubleValue),r=Vs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ys(e.timestampValue,t.timestampValue);case 4:return Ys(zs(e),zs(t));case 5:return Is(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Us(e),r=Us(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Is(n[i],r[i]);if(0!==e)return e}return Is(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Is(Vs(e.latitude),Vs(t.latitude));return 0!==n?n:Is(Vs(e.longitude),Vs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Qs(n[i],r[i]);if(e)return e}return Is(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Is(r[o],s[o]);if(0!==e)return e;const t=Qs(n[r[o]],i[s[o]]);if(0!==t)return t}return Is(r.length,s.length)}(e.mapValue,t.mapValue);default:throw as()}}function Ys(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Is(e,t);const n=Fs(e),r=Fs(t),i=Is(n.seconds,r.seconds);return 0!==i?i:Is(n.nanos,r.nanos)}function Js(e){return Xs(e)}function Xs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Fs(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Us(e.bytesValue).toBase64():"referenceValue"in e?$s.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Xs(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Xs(e.fields[i])}`;return n+"}"}(e.mapValue):as();var t}function eo(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function to(e){return!!e&&"integerValue"in e}function no(e){return!!e&&"arrayValue"in e}function ro(e){return!!e&&"nullValue"in e}function io(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function so(e){return!!e&&"mapValue"in e}function oo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ks(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=oo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oo(e.arrayValue.values[n]);return t}return Object.assign({},e)}class ao{constructor(e){this.value=e}static empty(){return new ao({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!so(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(t)}setAll(e){let t=Ds.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=oo(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());so(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];so(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ks(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ao(oo(this.value))}}function uo(e){const t=[];return ks(e.fields,(e,n)=>{const r=new Ds([e]);if(so(n)){const e=uo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ps(t)}class co{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new co(e,0,Cs.min(),ao.empty(),0)}static newFoundDocument(e,t,n){return new co(e,1,t,n,0)}static newNoDocument(e,t){return new co(e,2,t,ao.empty(),0)}static newUnknownDocument(e,t){return new co(e,3,t,ao.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ao.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof co&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new co(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lo{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function ho(e,t=null,n=[],r=[],i=null,s=null,o=null){return new lo(e,t,n,r,i,s,o)}function fo(e){const t=cs(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+Js(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Bs(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Co(t.startAt)),t.endAt&&(e+="|ub:",e+=Co(t.endAt)),t.A=e}return t.A}function po(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!ko(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!Ws(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!No(e.startAt,t.startAt)&&No(e.endAt,t.endAt)}function go(e){return $s.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class mo extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new yo(e,t,n):"array-contains"===t?new bo(e,n):"in"===t?new Io(e,n):"not-in"===t?new To(e,n):"array-contains-any"===t?new Eo(e,n):new mo(e,t,n)}static R(e,t,n){return"in"===t?new vo(e,n):new _o(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Qs(t,this.value)):null!==t&&Gs(this.value)===Gs(t)&&this.P(Qs(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return as()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class yo extends mo{constructor(e,t,n){super(e,t,n),this.key=$s.fromName(n.referenceValue)}matches(e){const t=$s.comparator(e.key,this.key);return this.P(t)}}class vo extends mo{constructor(e,t){super(e,"in",t),this.keys=wo(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _o extends mo{constructor(e,t){super(e,"not-in",t),this.keys=wo(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>$s.fromName(e.referenceValue))}class bo extends mo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return no(t)&&Ks(t.arrayValue,this.value)}}class Io extends mo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ks(this.value.arrayValue,t)}}class To extends mo{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ks(this.value.arrayValue,t)}}class Eo extends mo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!no(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ks(this.value.arrayValue,e))}}class So{constructor(e,t){this.position=e,this.before=t}}function Co(e){return`${e.before?"b":"a"}:${e.position.map(e=>Js(e)).join(",")}`}class Ao{constructor(e,t="asc"){this.field=e,this.dir=t}}function ko(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function xo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?$s.comparator($s.fromName(o.referenceValue),n.key):Qs(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function No(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ws(e.position[n],t.position[n]))return!1;return!0}class Oo{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function Ro(e,t,n,r,i,s,o,a){return new Oo(e,t,n,r,i,s,o,a)}function Do(e){return new Oo(e)}function Po(e){return!Bs(e.limit)&&"F"===e.limitType}function Lo(e){return!Bs(e.limit)&&"L"===e.limitType}function Mo(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Fo(e){for(const t of e.filters)if(t.v())return t.field;return null}function Vo(e){return null!==e.collectionGroup}function Uo(e){const t=cs(e);if(null===t.V){t.V=[];const e=Fo(t),n=Mo(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new Ao(e)),t.V.push(new Ao(Ds.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Ao(Ds.keyField(),e))}}}return t.V}function jo(e){const t=cs(e);if(!t.S)if("F"===t.limitType)t.S=ho(t.path,t.collectionGroup,Uo(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Uo(t))e.push(new Ao(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new So(t.endAt.position,!t.endAt.before):null,r=t.startAt?new So(t.startAt.position,!t.startAt.before):null;t.S=ho(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function qo(e,t,n){return new Oo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zo(e,t){return po(jo(e),jo(t))&&e.limitType===t.limitType}function Bo(e){return`${fo(jo(e))}|lt:${e.limitType}`}function Ho(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Js(t.value)}`;var t}).join(", ")}]`),Bs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: "+Co(e.startAt)),e.endAt&&(t+=", endAt: "+Co(e.endAt)),`Target(${t})`}(jo(e))}; limitType=${e.limitType})`}function Zo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):$s.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!xo(n.startAt,Uo(n),r)||n.endAt&&xo(n.endAt,Uo(n),r)));var n,r}function $o(e){return(t,n)=>{let r=!1;for(const i of Uo(e)){const e=Go(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Go(e,t,n){const r=e.field.isKeyField()?$s.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Qs(r,i):as()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return as()}}function Wo(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hs(t)?"-0":t}}function Ko(e){return{integerValue:""+e}}function Qo(e,t){return Zs(t)?Ko(t):Wo(e,t)}class Yo{constructor(){this._=void 0}}function Jo(e,t,n){return e instanceof ta?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof na?ra(e,t):e instanceof ia?sa(e,t):function(e,t){const n=ea(e,t),r=aa(n)+aa(e.C);return to(n)&&to(e.C)?Ko(r):Wo(e.N,r)}(e,t)}function Xo(e,t,n){return e instanceof na?ra(e,t):e instanceof ia?sa(e,t):n}function ea(e,t){return e instanceof oa?to(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}class ta extends Yo{}class na extends Yo{constructor(e){super(),this.elements=e}}function ra(e,t){const n=ua(t);for(const r of e.elements)n.some(e=>Ws(e,r))||n.push(r);return{arrayValue:{values:n}}}class ia extends Yo{constructor(e){super(),this.elements=e}}function sa(e,t){let n=ua(t);for(const r of e.elements)n=n.filter(e=>!Ws(e,r));return{arrayValue:{values:n}}}class oa extends Yo{constructor(e,t){super(),this.N=e,this.C=t}}function aa(e){return Vs(e.integerValue||e.doubleValue)}function ua(e){return no(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ca{constructor(e,t){this.field=e,this.transform=t}}class la{constructor(e,t){this.version=e,this.transformResults=t}}class ha{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ha}static exists(e){return new ha(void 0,e)}static updateTime(e){return new ha(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function da(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class fa{}function pa(e,t,n){e instanceof _a?function(e,t,n){const r=e.value.clone(),i=Ia(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wa?function(e,t,n){if(!da(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ia(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ba(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}function ga(e,t,n){var r;e instanceof _a?function(e,t,n){if(!da(e.precondition,t))return;const r=e.value.clone(),i=Ta(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(va(t),r).setHasLocalMutations()}(e,t,n):e instanceof wa?function(e,t,n){if(!da(e.precondition,t))return;const r=Ta(e.fieldTransforms,n,t),i=t.data;i.setAll(ba(e)),i.setAll(r),t.convertToFoundDocument(va(t),i).setHasLocalMutations()}(e,t,n):da(e.precondition,r=t)&&r.convertToNoDocument(Cs.min())}function ma(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ea(r.transform,e||null);null!=i&&(null==n&&(n=ao.empty()),n.set(r.field,i))}return n||null}function ya(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&Ts(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(r=t.transform,(n=e.transform)instanceof na&&r instanceof na||n instanceof ia&&r instanceof ia?Ts(n.elements,r.elements,Ws):n instanceof oa&&r instanceof oa?Ws(n.C,r.C):n instanceof ta&&r instanceof ta);var n,r}(e,t))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function va(e){return e.isFoundDocument()?e.version:Cs.min()}class _a extends fa{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class wa extends fa{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function ba(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ia(e,t,n){const r=new Map;us(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Xo(o,a,n[i]))}return r}function Ta(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Jo(e,s,t))}return r}class Ea extends fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Sa extends fa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ca{constructor(e){this.count=e}}var Aa,ka;function xa(e){switch(e){case ls.OK:return as();case ls.CANCELLED:case ls.UNKNOWN:case ls.DEADLINE_EXCEEDED:case ls.RESOURCE_EXHAUSTED:case ls.INTERNAL:case ls.UNAVAILABLE:case ls.UNAUTHENTICATED:return!1;case ls.INVALID_ARGUMENT:case ls.NOT_FOUND:case ls.ALREADY_EXISTS:case ls.PERMISSION_DENIED:case ls.FAILED_PRECONDITION:case ls.ABORTED:case ls.OUT_OF_RANGE:case ls.UNIMPLEMENTED:case ls.DATA_LOSS:return!0;default:return as()}}function Na(e){if(void 0===e)return is("GRPC error has no .code"),ls.UNKNOWN;switch(e){case Aa.OK:return ls.OK;case Aa.CANCELLED:return ls.CANCELLED;case Aa.UNKNOWN:return ls.UNKNOWN;case Aa.DEADLINE_EXCEEDED:return ls.DEADLINE_EXCEEDED;case Aa.RESOURCE_EXHAUSTED:return ls.RESOURCE_EXHAUSTED;case Aa.INTERNAL:return ls.INTERNAL;case Aa.UNAVAILABLE:return ls.UNAVAILABLE;case Aa.UNAUTHENTICATED:return ls.UNAUTHENTICATED;case Aa.INVALID_ARGUMENT:return ls.INVALID_ARGUMENT;case Aa.NOT_FOUND:return ls.NOT_FOUND;case Aa.ALREADY_EXISTS:return ls.ALREADY_EXISTS;case Aa.PERMISSION_DENIED:return ls.PERMISSION_DENIED;case Aa.FAILED_PRECONDITION:return ls.FAILED_PRECONDITION;case Aa.ABORTED:return ls.ABORTED;case Aa.OUT_OF_RANGE:return ls.OUT_OF_RANGE;case Aa.UNIMPLEMENTED:return ls.UNIMPLEMENTED;case Aa.DATA_LOSS:return ls.DATA_LOSS;default:return as()}}(ka=Aa||(Aa={}))[ka.OK=0]="OK",ka[ka.CANCELLED=1]="CANCELLED",ka[ka.UNKNOWN=2]="UNKNOWN",ka[ka.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ka[ka.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ka[ka.NOT_FOUND=5]="NOT_FOUND",ka[ka.ALREADY_EXISTS=6]="ALREADY_EXISTS",ka[ka.PERMISSION_DENIED=7]="PERMISSION_DENIED",ka[ka.UNAUTHENTICATED=16]="UNAUTHENTICATED",ka[ka.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ka[ka.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ka[ka.ABORTED=10]="ABORTED",ka[ka.OUT_OF_RANGE=11]="OUT_OF_RANGE",ka[ka.UNIMPLEMENTED=12]="UNIMPLEMENTED",ka[ka.INTERNAL=13]="INTERNAL",ka[ka.UNAVAILABLE=14]="UNAVAILABLE",ka[ka.DATA_LOSS=15]="DATA_LOSS";class Oa{constructor(e,t){this.comparator=e,this.root=t||Da.EMPTY}insert(e,t){return new Oa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Da.BLACK,null,null))}remove(e){return new Oa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Da.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ra(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ra(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ra(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ra(this.root,e,this.comparator,!0)}}class Ra{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Da{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Da.RED,this.left=null!=r?r:Da.EMPTY,this.right=null!=i?i:Da.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Da(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Da.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Da.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Da.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw as();const e=this.left.check();if(e!==this.right.check())throw as();return e+(this.isRed()?0:1)}}Da.EMPTY=null,Da.RED=!0,Da.BLACK=!1,Da.EMPTY=new class{constructor(){this.size=0}get key(){throw as()}get value(){throw as()}get color(){throw as()}get left(){throw as()}get right(){throw as()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Da(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pa{constructor(e){this.comparator=e,this.data=new Oa(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new La(this.data.getIterator())}getIteratorFrom(e){return new La(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pa(this.comparator);return t.data=e,t}}class La{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Ma=new Oa($s.comparator);function Fa(){return Ma}const Va=new Oa($s.comparator);function Ua(){return Va}const ja=new Oa($s.comparator);function qa(){return ja}const za=new Pa($s.comparator);function Ba(...e){let t=za;for(const n of e)t=t.add(n);return t}const Ha=new Pa(Is);function Za(){return Ha}class $a{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Ga.createSynthesizedTargetChangeForCurrentChange(e,t)),new $a(Cs.min(),n,Za(),Fa(),Ba())}}class Ga{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ga(Ls.EMPTY_BYTE_STRING,t,Ba(),Ba(),Ba())}}class Wa{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class Ka{constructor(e,t){this.targetId=e,this.O=t}}class Qa{constructor(e,t,n=Ls.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ya{constructor(){this.F=0,this.M=eu(),this.L=Ls.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Ba(),t=Ba(),n=Ba();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:as()}}),new Ga(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=eu()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Ja{constructor(e){this.tt=e,this.et=new Map,this.nt=Fa(),this.st=Xa(),this.it=new Pa(Is)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:as()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(go(e))if(0===n){const n=new $s(e.path);this.at(t,n,co.newNoDocument(n,Cs.min()))}else us(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const i=this.dt(r);if(i){if(n.current&&go(i.target)){const t=new $s(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,co.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=Ba();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new $a(e,t,this.it,this.nt,n);return this.nt=Fa(),this.st=Xa(),this.it=new Pa(Is),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Ya,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Pa(Is),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||rs("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new Ya),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Xa(){return new Oa($s.comparator)}function eu(){return new Oa($s.comparator)}const tu={asc:"ASCENDING",desc:"DESCENDING"},nu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ru{constructor(e,t){this.databaseId=e,this.D=t}}function iu(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function su(e,t){return e.D?t.toBase64():t.toUint8Array()}function ou(e,t){return iu(e,t.toTimestamp())}function au(e){return us(!!e),Cs.fromTimestamp(function(e){const t=Fs(e);return new Ss(t.seconds,t.nanos)}(e))}function uu(e,t){return(n=e,new Os(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function cu(e){const t=Os.fromString(e);return us(Du(t)),t}function lu(e,t){return uu(e.databaseId,t.path)}function hu(e,t){const n=cu(t);if(n.get(1)!==e.databaseId.projectId)throw new hs(ls.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hs(ls.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $s(gu(n))}function du(e,t){return uu(e.databaseId,t)}function fu(e){const t=cu(e);return 4===t.length?Os.emptyPath():gu(t)}function pu(e){return new Os(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gu(e){return us(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function mu(e,t,n){return{name:lu(e,t),fields:n.value.mapValue.fields}}function yu(e,t,n){const r=hu(e,t.name),i=au(t.updateTime),s=new ao({mapValue:{fields:t.fields}}),o=co.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function vu(e,t){let n;if(t instanceof _a)n={update:mu(e,t.key,t.value)};else if(t instanceof Ea)n={delete:lu(e,t.key)};else if(t instanceof wa)n={update:mu(e,t.key,t.data),updateMask:Ru(t.fieldMask)};else{if(!(t instanceof Sa))return as();n={verify:lu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ta)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof na)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ia)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oa)return{fieldPath:t.field.canonicalString(),increment:n.C};throw as()}(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:ou(e,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:as()),n;var r}function _u(e,t){const n=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?ha.updateTime(au(i.updateTime)):void 0!==i.exists?ha.exists(i.exists):ha.none():ha.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(us("REQUEST_TIME"===t.setToServerValue),n=new ta):"appendMissingElements"in t?n=new na(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new ia(t.removeAllFromArray.values||[]):"increment"in t?n=new oa(e,t.increment):as();const r=Ds.fromServerFormat(t.fieldPath);return new ca(r,n)}(e,t)):[];var i;if(t.update){const i=hu(e,t.update.name),s=new ao({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=new Ps((t.updateMask.fieldPaths||[]).map(e=>Ds.fromServerFormat(e)));return new wa(i,s,e,n,r)}return new _a(i,s,n,r)}if(t.delete){const r=hu(e,t.delete);return new Ea(r,n)}if(t.verify){const r=hu(e,t.verify);return new Sa(r,n)}return as()}function wu(e,t){return{documents:[du(e,t.path)]}}function bu(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=du(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=du(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(io(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NAN"}};if(ro(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(io(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NOT_NAN"}};if(ro(e.value))return{unaryFilter:{field:ku(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ku(e.field),op:Au(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>{return{field:ku((t=e).field),direction:Cu(t.dir)};var t})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(a=t.limit,e.D||Bs(a)?a:{value:a});var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Eu(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Eu(t.endAt)),n}function Iu(e){let t=fu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){us(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Tu(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new Ao(xu((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Bs(t)?null:t}(n.limit));let u=null;n.startAt&&(u=Su(n.startAt));let c=null;return n.endAt&&(c=Su(n.endAt)),Ro(t,i,o,s,a,"F",u,c)}function Tu(e){return e?void 0!==e.unaryFilter?[Ou(e)]:void 0!==e.fieldFilter?[Nu(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>Tu(e)).reduce((e,t)=>e.concat(t)):as():[]}function Eu(e){return{before:e.before,values:e.position}}function Su(e){return new So(e.values||[],!!e.before)}function Cu(e){return tu[e]}function Au(e){return nu[e]}function ku(e){return{fieldPath:e.canonicalString()}}function xu(e){return Ds.fromServerFormat(e.fieldPath)}function Nu(e){return mo.create(xu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return as()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ou(e){switch(e.unaryFilter.op){case"IS_NAN":const t=xu(e.unaryFilter.field);return mo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=xu(e.unaryFilter.field);return mo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xu(e.unaryFilter.field);return mo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=xu(e.unaryFilter.field);return mo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return as()}}function Ru(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Du(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Pu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Mu(t)),t=Lu(e.get(n),t);return Mu(t)}function Lu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Mu(e){return e+"\x01\x01"}function Fu(e){const t=e.length;if(us(t>=2),2===t)return us("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Os.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&as(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:as()}s=t+2}return new Os(r)}class Vu{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Uu{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}Uu.store="owner",Uu.key="owner";class ju{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}ju.store="mutationQueues",ju.keyPath="userId";class qu{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}qu.store="mutations",qu.keyPath="batchId",qu.userMutationsIndex="userMutationsIndex",qu.userMutationsKeyPath=["userId","batchId"];class zu{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Pu(t)]}static key(e,t,n){return[e,Pu(t),n]}}zu.store="documentMutations",zu.PLACEHOLDER=new zu;class Bu{constructor(e,t){this.path=e,this.readTime=t}}class Hu{constructor(e,t){this.path=e,this.version=t}}class Zu{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Zu.store="remoteDocuments",Zu.readTimeIndex="readTimeIndex",Zu.readTimeIndexPath="readTime",Zu.collectionReadTimeIndex="collectionReadTimeIndex",Zu.collectionReadTimeIndexPath=["parentPath","readTime"];class $u{constructor(e){this.byteSize=e}}$u.store="remoteDocumentGlobal",$u.key="remoteDocumentGlobalKey";class Gu{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Gu.store="targets",Gu.keyPath="targetId",Gu.queryTargetsIndexName="queryTargetsIndex",Gu.queryTargetsKeyPath=["canonicalId","targetId"];class Wu{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Wu.store="targetDocuments",Wu.keyPath=["targetId","path"],Wu.documentTargetsIndex="documentTargetsIndex",Wu.documentTargetsKeyPath=["path","targetId"];class Ku{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Ku.key="targetGlobalKey",Ku.store="targetGlobal";class Qu{constructor(e,t){this.collectionId=e,this.parent=t}}Qu.store="collectionParents",Qu.keyPath=["collectionId","parent"];class Yu{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Yu.store="clientMetadata",Yu.keyPath="clientId";class Ju{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Ju.store="bundles",Ju.keyPath="bundleId";class Xu{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}Xu.store="namedQueries",Xu.keyPath="name";const ec=[ju.store,qu.store,zu.store,Zu.store,Gu.store,Uu.store,Ku.store,Wu.store,Yu.store,$u.store,Qu.store,Ju.store,Xu.store],tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class rc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&as(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rc((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof rc?t:rc.resolve(t)}catch(t){return rc.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rc.reject(t)}static resolve(e){return new rc((t,n)=>{t(e)})}static reject(e){return new rc((t,n)=>{n(e)})}static waitFor(e){return new rc((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=rc.resolve(!1);for(const n of e)t=t.next(e=>e?rc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class ic{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new ds,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new ac(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=dc(t.target.error);this.Tt.reject(new ac(e,n))}}static open(e,t,n,r){try{return new ic(t,e.transaction(r,n))}catch(i){throw new ac(t,i)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(rs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new cc(t)}}class sc{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===sc.Rt((0,qe.z$)())&&is("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rs("SimpleDb","Removing database:",e),lc(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if("undefined"==typeof indexedDB)return!1;if(sc.Pt())return!0;const e=(0,qe.z$)(),t=sc.Rt(e),n=0<t&&t<10,r=sc.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,Fe.Z)(function*(){return t.db||(rs("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new ac(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new hs(ls.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new hs(ls.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new ac(e,n))},i.onupgradeneeded=e=>{rs("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{rs("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,Fe.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Dt(e);const t=ic.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),rc.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(a){const e="FirebaseError"!==a.name&&o<3;if(rs("SimpleDb","Transaction failed with error:",a.message,"Retrying:",e),i.close(),!e)return Promise.reject(a)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oc{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return lc(this.kt.delete())}}class ac extends hs{constructor(e,t){super(ls.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function uc(e){return"IndexedDbTransactionError"===e.name}class cc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(rs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(rs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),lc(n)}add(e){return rs("SimpleDb","ADD",this.store.name,e,e),lc(this.store.add(e))}get(e){return lc(this.store.get(e)).next(t=>(void 0===t&&(t=null),rs("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return rs("SimpleDb","DELETE",this.store.name,e),lc(this.store.delete(e))}count(){return rs("SimpleDb","COUNT",this.store.name),lc(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){rs("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new rc((n,r)=>{t.onerror=e=>{const t=dc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new rc((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new oc(i),o=t(i.primaryKey,i.value,s);if(o instanceof rc){const e=o.catch(e=>(s.done(),rc.reject(e)));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}}).next(()=>rc.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lc(e){return new rc((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=dc(e.target.error);n(t)}})}let hc=!1;function dc(e){const t=sc.Rt((0,qe.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new hs("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hc||(hc=!0,setTimeout(()=>{throw e},0)),e}}return e}class fc extends nc{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function pc(e,t){const n=cs(e);return sc.St(n.Qt,t)}class gc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&pa(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ga(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ga(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Cs.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ba())}isEqual(e){return this.batchId===e.batchId&&Ts(this.mutations,e.mutations,(e,t)=>ya(e,t))&&Ts(this.baseMutations,e.baseMutations,(e,t)=>ya(e,t))}}class mc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){us(e.mutations.length===n.length);let r=qa();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new mc(e,t,n,r)}}class yc{constructor(e,t,n,r,i=Cs.min(),s=Cs.min(),o=Ls.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class vc{constructor(e){this.Wt=e}}function _c(e,t){if(t.document)return yu(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=$s.fromSegments(t.noDocument.path),n=Ec(t.noDocument.readTime),r=co.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=$s.fromSegments(t.unknownDocument.path),n=Ec(t.unknownDocument.version);return co.newUnknownDocument(e,n)}return as()}function wc(e,t,n){const r=bc(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n={name:lu(s=e.Wt,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:iu(s,o.version.toTimestamp())};return new Zu(null,null,n,t.hasCommittedMutations,r,i)}var s,o;if(t.isNoDocument()){const e=t.key.path.toArray(),n=Tc(t.version),s=t.hasCommittedMutations;return new Zu(null,new Bu(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Tc(t.version);return new Zu(new Hu(e,n),null,null,!0,r,i)}return as()}function bc(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ic(e){const t=new Ss(e[0],e[1]);return Cs.fromTimestamp(t)}function Tc(e){const t=e.toTimestamp();return new Vu(t.seconds,t.nanoseconds)}function Ec(e){const t=new Ss(e.seconds,e.nanoseconds);return Cs.fromTimestamp(t)}function Sc(e,t){const n=(t.baseMutations||[]).map(t=>_u(e.Wt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>_u(e.Wt,t)),i=Ss.fromMillis(t.localWriteTimeMs);return new gc(t.batchId,i,n,r)}function Cc(e){const t=Ec(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ec(e.lastLimboFreeSnapshotVersion):Cs.min();let r;var i;return void 0!==e.query.documents?(us(1===(i=e.query).documents.length),r=jo(Do(fu(i.documents[0])))):r=jo(Iu(e.query)),new yc(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Ls.fromBase64String(e.resumeToken))}function Ac(e,t){const n=Tc(t.snapshotVersion),r=Tc(t.lastLimboFreeSnapshotVersion);let i;i=go(t.target)?wu(e.Wt,t.target):bu(e.Wt,t.target);const s=t.resumeToken.toBase64();return new Gu(t.targetId,fo(t.target),n,s,t.sequenceNumber,r,i)}function kc(e){const t=Iu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qo(t,t.limit,"L"):t}class xc{getBundleMetadata(e,t){return Nc(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Ec(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Nc(e).put({bundleId:(n=t).id,createTime:Tc(au(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Oc(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:kc(t.bundledQuery),readTime:Ec(t.readTime)};var t})}saveNamedQuery(e,t){return Oc(e).put({name:(n=t).name,readTime:Tc(au(n.readTime)),bundledQuery:n.bundledQuery});var n}}function Nc(e){return pc(e,Ju.store)}function Oc(e){return pc(e,Xu.store)}class Rc{constructor(){this.Gt=new Dc}addToCollectionParentIndex(e,t){return this.Gt.add(t),rc.resolve()}getCollectionParents(e,t){return rc.resolve(this.Gt.getEntries(t))}}class Dc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pa(Os.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Pa(Os.comparator)).toArray()}}class Pc{constructor(){this.zt=new Dc}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const i={collectionId:n,parent:Pu(r)};return Lc(e).put(i)}return rc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Es(t),""],!1,!0);return Lc(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Fu(r.parent))}return n})}}function Lc(e){return pc(e,Qu.store)}const Mc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Fc(e,Fc.DEFAULT_COLLECTION_PERCENTILE,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vc(e,t,n){const r=e.store(qu.store),i=e.store(zu.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));s.push(u.next(()=>{us(1===a)}));const c=[];for(const l of n.mutations){const e=zu.key(t,l.key.path,n.batchId);s.push(i.delete(e)),c.push(l.key)}return rc.waitFor(s).next(()=>c)}function Uc(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw as();t=e.noDocument}return JSON.stringify(t).length}Fc.DEFAULT_COLLECTION_PERCENTILE=10,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fc.DEFAULT=new Fc(41943040,Fc.DEFAULT_COLLECTION_PERCENTILE,Fc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fc.DISABLED=new Fc(-1,0,0);class jc{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){us(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new jc(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zc(e).Kt({index:qu.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Bc(e),s=zc(e);return s.add({}).next(o=>{us("number"==typeof o);const a=new gc(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>vu(e.Wt,t)),i=n.mutations.map(t=>vu(e.Wt,t));return new qu(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),c=[];let l=new Pa((e,t)=>Is(e.canonicalString(),t.canonicalString()));for(const e of r){const t=zu.key(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),c.push(s.put(u)),c.push(i.put(t,zu.PLACEHOLDER))}return l.forEach(t=>{c.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),rc.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return zc(e).get(t).next(e=>e?(us(e.userId===this.userId),Sc(this.N,e)):null)}Xt(e,t){return this.Jt[t]?rc.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return zc(e).Kt({index:qu.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(us(t.batchId>=n),i=Sc(this.N,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return zc(e).Kt({index:qu.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zc(e).Lt(qu.userMutationsIndex,t).next(e=>e.map(e=>Sc(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=zu.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Bc(e).Kt({range:r},(n,r,s)=>{const[o,a,u]=n,c=Fu(a);if(o===this.userId&&t.path.isEqual(c))return zc(e).get(u).next(e=>{if(!e)throw as();us(e.userId===this.userId),i.push(Sc(this.N,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Pa(Is);const r=[];return t.forEach(t=>{const i=zu.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Bc(e).Kt({range:s},(e,r,i)=>{const[s,o,a]=e,u=Fu(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),rc.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=zu.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Pa(Is);return Bc(e).Kt({range:s},(e,t,i)=>{const[s,a,u]=e,c=Fu(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(zc(e).get(t).next(e=>{if(null===e)throw as();us(e.userId===this.userId),n.push(Sc(this.N,e))}))}),rc.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Vc(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),rc.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return rc.resolve();const n=IDBKeyRange.lowerBound(zu.prefixForUser(this.userId)),r=[];return Bc(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Fu(e[1]);r.push(t)}else n.done()}).next(()=>{us(0===r.length)})})}containsKey(e,t){return qc(e,this.userId,t)}ee(e){return Hc(e).get(this.userId).next(e=>e||new ju(this.userId,-1,""))}}function qc(e,t,n){const r=zu.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Bc(e).Kt({range:s,qt:!0},(e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function zc(e){return pc(e,qu.store)}function Bc(e){return pc(e,zu.store)}function Hc(e){return pc(e,ju.store)}class Zc{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Zc(0)}static ie(){return new Zc(-1)}}class $c{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new Zc(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>Cs.fromTimestamp(new Ss(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gc(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(us(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Gc(e).Kt((s,o)=>{const a=Cc(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>rc.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Gc(e).Kt((e,n)=>{const r=Cc(n);t(r)})}re(e){return Wc(e).get(Ku.key).next(e=>(us(null!==e),e))}oe(e,t){return Wc(e).put(Ku.key,t)}ae(e,t){return Gc(e).put(Ac(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=fo(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Gc(e).Kt({range:r,index:Gu.queryTargetsIndexName},(e,n,r)=>{const s=Cc(n);po(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Kc(e);return t.forEach(t=>{const s=Pu(t.path);r.push(i.put(new Wu(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),rc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Kc(e);return rc.forEach(t,t=>{const i=Pu(t.path);return rc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Kc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Kc(e);let i=Ba();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=Fu(e[1]),s=new $s(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Pu(t.path),r=IDBKeyRange.bound([n],[Es(n)],!1,!0);let i=0;return Kc(e).Kt({index:Wu.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return Gc(e).get(t).next(e=>e?Cc(e):null)}}function Gc(e){return pc(e,Gu.store)}function Wc(e){return pc(e,Ku.store)}function Kc(e){return pc(e,Wu.store)}function Qc(e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,Fe.Z)(function*(e){if(e.code!==ls.FAILED_PRECONDITION||e.message!==tc)throw e;rs("LocalStore","Unexpectedly lost primary lease")}),Yc.apply(this,arguments)}function Jc([e,t],[n,r]){const i=Is(e,n);return 0===i?Is(t,r):i}class Xc{constructor(e){this.ue=e,this.buffer=new Pa(Jc),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Jc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class el{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;rs("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Fe.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(n){uc(n)?rs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Qc(n)}yield t._e(e)}))}}class tl{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return rc.resolve(_s.T);const n=new Xc(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rs("LruGarbageCollector","Garbage collection skipped; disabled"),rc.resolve(Mc)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(rs("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mc):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(rs("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),ns()<=je.in.DEBUG&&rs("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+`ms\n\tRemoved ${i} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(u-a)+`ms\nTotal Duration: ${u-c}ms`),rc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class nl{constructor(e,t){this.db=e,this.garbageCollector=new tl(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,(e,n)=>t(n))}addReference(e,t,n){return rl(e,n)}removeReference(e,t,n){return rl(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return rl(e,t)}Ie(e,t){return function(e,t){let n=!1;return Hc(e).jt(r=>qc(e,r,t).next(e=>(e&&(n=!0),rc.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Te(e,(s,o)=>{if(o<=t){const t=this.Ie(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),Kc(e).delete([0,Pu(s.path)])))});r.push(t)}}).next(()=>rc.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return rl(e,t)}Te(e,t){const n=Kc(e);let r,i=_s.T;return n.Kt({index:Wu.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==_s.T&&t(new $s(Fu(r)),i),i=o,r=s):i=_s.T}).next(()=>{i!==_s.T&&t(new $s(Fu(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rl(e,t){return Kc(e).put((n=e.currentSequenceNumber,new Wu(0,Pu(t.path),n)));var n}class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){ks(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return xs(this.inner)}}class sl{constructor(){this.changes=new il(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Cs.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:co.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?rc.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ol{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return cl(e).put(ll(t),n)}removeEntry(e,t){const n=cl(e),r=ll(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return cl(e).get(ll(t)).next(e=>this.Re(t,e))}be(e,t){return cl(e).get(ll(t)).next(e=>({document:this.Re(t,e),size:Uc(e)}))}getEntries(e,t){let n=Fa();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=Fa(),r=new Oa($s.comparator);return this.Pe(e,t,(e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,Uc(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return rc.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return cl(e).Kt({range:r},(e,t,r)=>{const o=$s.fromSegments(e);for(;s&&$s.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=Fa();const i=t.path.length+1,s={};if(n.isEqual(Cs.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=bc(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=Zu.collectionReadTimeIndex}return cl(e).Kt(s,(e,n,s)=>{if(e.length!==i)return;const o=_c(this.N,n);t.path.isPrefixOf(o.key.path)?Zo(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new al(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return ul(e).get($u.key).next(e=>(us(!!e),e))}Ae(e,t){return ul(e).put($u.key,t)}Re(e,t){if(t){const e=_c(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(Cs.min()))return e}return co.newInvalidDocument(e)}}class al extends sl{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new il(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Pa((e,t)=>Is(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=wc(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast()),n+=Uc(a)-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=wc(this.Se.N,co.newNoDocument(i,Cs.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),rc.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function ul(e){return pc(e,$u.store)}function cl(e){return pc(e,Zu.store)}function ll(e){return e.path.toArray()}class hl{constructor(e){this.N=e}Ct(e,t,n,r){us(n<r&&n>=0&&r<=11);const i=new ic("createOrUpgrade",t);var s;n<1&&r>=1&&(e.createObjectStore(Uu.store),(s=e).createObjectStore(ju.store,{keyPath:ju.keyPath}),s.createObjectStore(qu.store,{keyPath:qu.keyPath,autoIncrement:!0}).createIndex(qu.userMutationsIndex,qu.userMutationsKeyPath,{unique:!0}),s.createObjectStore(zu.store),dl(e),function(e){e.createObjectStore(Zu.store)}(e));let o=rc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Wu.store),e.deleteObjectStore(Gu.store),e.deleteObjectStore(Ku.store)}(e),dl(e)),o=o.next(()=>function(e){const t=e.store(Ku.store),n=new Ku(0,0,Cs.min().toTimestamp(),0);return t.put(Ku.key,n)}(i))),n<4&&r>=4&&(0!==n&&(o=o.next(()=>function(e,t){return t.store(qu.store).Lt().next(n=>{e.deleteObjectStore(qu.store),e.createObjectStore(qu.store,{keyPath:qu.keyPath,autoIncrement:!0}).createIndex(qu.userMutationsIndex,qu.userMutationsKeyPath,{unique:!0});const r=t.store(qu.store),i=n.map(e=>r.put(e));return rc.waitFor(i)})}(e,i))),o=o.next(()=>{!function(e){e.createObjectStore(Yu.store,{keyPath:Yu.keyPath})}(e)})),n<5&&r>=5&&(o=o.next(()=>this.Ce(i))),n<6&&r>=6&&(o=o.next(()=>(function(e){e.createObjectStore($u.store)}(e),this.Ne(i)))),n<7&&r>=7&&(o=o.next(()=>this.xe(i))),n<8&&r>=8&&(o=o.next(()=>this.ke(e,i))),n<9&&r>=9&&(o=o.next(()=>{(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){const t=e.objectStore(Zu.store);t.createIndex(Zu.readTimeIndex,Zu.readTimeIndexPath,{unique:!1}),t.createIndex(Zu.collectionReadTimeIndex,Zu.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(o=o.next(()=>this.$e(i))),n<11&&r>=11&&(o=o.next(()=>{(function(e){e.createObjectStore(Ju.store,{keyPath:Ju.keyPath})})(e),function(e){e.createObjectStore(Xu.store,{keyPath:Xu.keyPath})}(e)})),o}Ne(e){let t=0;return e.store(Zu.store).Kt((e,n)=>{t+=Uc(n)}).next(()=>{const n=new $u(t);return e.store($u.store).put($u.key,n)})}Ce(e){const t=e.store(ju.store),n=e.store(qu.store);return t.Lt().next(t=>rc.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(qu.userMutationsIndex,r).next(n=>rc.forEach(n,n=>{us(n.userId===t.userId);const r=Sc(this.N,n);return Vc(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(Wu.store),n=e.store(Zu.store);return e.store(Ku.store).get(Ku.key).next(e=>{const r=[];return n.Kt((n,i)=>{const s=new Os(n),o=[0,Pu(s)];r.push(t.get(o).next(n=>n?rc.resolve():t.put(new Wu(0,Pu(s),e.highestListenSequenceNumber))))}).next(()=>rc.waitFor(r))})}ke(e,t){e.createObjectStore(Qu.store,{keyPath:Qu.keyPath});const n=t.store(Qu.store),r=new Dc,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Pu(r)})}};return t.store(Zu.store).Kt({qt:!0},(e,t)=>{const n=new Os(e);return i(n.popLast())}).next(()=>t.store(zu.store).Kt({qt:!0},([e,t,n],r)=>{const s=Fu(t);return i(s.popLast())}))}$e(e){const t=e.store(Gu.store);return t.Kt((e,n)=>{const r=Cc(n),i=Ac(this.N,r);return t.put(i)})}}function dl(e){e.createObjectStore(Wu.store,{keyPath:Wu.keyPath}).createIndex(Wu.documentTargetsIndex,Wu.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Gu.store,{keyPath:Gu.keyPath}).createIndex(Gu.queryTargetsIndexName,Gu.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ku.store)}const fl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pl{constructor(e,t,n,r,i,s,o,a,u,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=u,this.Me=c,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!pl.bt())throw new hs(ls.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nl(this,r),this.We=t+"main",this.N=new vc(a),this.Ge=new sc(this.We,11,new hl(this.N)),this.ze=new $c(this.referenceDelegate,this.N),this.Ht=new Pc,this.He=new ol(this.N,this.Ht),this.Je=new xc,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===c&&is("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new hs(ls.FAILED_PRECONDITION,fl);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new _s(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,Fe.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,Fe.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Fe.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ml(e).put(new Yu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(uc(e))return rs("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return gl(e).get(Uu.key).next(e=>rc.resolve(this.cn(e)))}un(e){return ml(e).delete(this.clientId)}hn(){var e=this;return(0,Fe.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=pc(t,Yu.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return rc.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?rc.resolve(!0):gl(e).get(Uu.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new hs(ls.FAILED_PRECONDITION,fl);return!1}}return!(!this.networkEnabled||!this.inForeground)||ml(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&rs("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,Fe.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[Uu.store,Yu.store],t=>{const n=new fc(t,_s.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>ml(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return jc.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return rs("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",ec,i=>(r=new fc(i,this.Le?this.Le.next():_s.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw is(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new hs(ls.FAILED_PRECONDITION,tc);return n(r)}).next(e=>this.an(r).next(()=>e)):this.En(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}En(e){return gl(e).get(Uu.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new hs(ls.FAILED_PRECONDITION,fl)})}an(e){const t=new Uu(this.clientId,this.allowTabSynchronization,Date.now());return gl(e).put(Uu.key,t)}static bt(){return sc.bt()}on(e){const t=gl(e);return t.get(Uu.key).next(e=>this.cn(e)?(rs("IndexedDbPersistence","Releasing primary lease."),t.delete(Uu.key)):rc.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(is(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,qe.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return rs("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return is("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){is("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gl(e){return pc(e,Uu.store)}function ml(e){return pc(e,Yu.store)}function yl(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class vl{constructor(e,t){this.progress=e,this.Tn=t}}class _l{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return $s.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Vn(e,t.path):Vo(t)?this.Sn(e,t,n):this.Dn(e,t,n);var r}Vn(e,t){return this.An(e,new $s(t)).next(e=>{let t=Ua();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let i=Ua();return this.Ht.getCollectionParents(e,r).next(s=>rc.forEach(s,s=>{const o=(a=t,u=s.child(r),new Oo(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));var a,u;return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Cn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=co.newInvalidDocument(n),r=r.insert(n,i)),ga(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{Zo(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=Ba();for(const s of t)for(const e of s.mutations)e instanceof wa&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class wl{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=Ba(),r=Ba();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new wl(e,t.fromCache,n,r)}}class bl{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Cs.min())?this.Fn(e,t):this.On.Pn(e,r).next(i=>{const s=this.Mn(t,i);return(Po(t)||Lo(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(ns()<=je.in.DEBUG&&rs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ho(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))});var i}Mn(e,t){let n=new Pa($o(e));return t.forEach((t,r)=>{Zo(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return ns()<=je.in.DEBUG&&rs("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.On.getDocumentsMatchingQuery(e,t,Cs.min())}}class Il{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new Oa(Is),this.qn=new il(e=>fo(e),po),this.Kn=Cs.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new _l(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function Tl(e,t,n,r){return new Il(e,t,n,r)}function El(e,t){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,Fe.Z)(function*(e,t){const n=cs(e);let r=n.In,i=n.Qn;const s=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.In.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new _l(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=Ba();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s}),Sl.apply(this,arguments)}function Cl(e,t){const n=cs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=rc.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);us(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}function Al(e){const t=cs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function kl(e,t){const n=cs(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,s)));const u=t.resumeToken;if(u.approximateByteSize()>0){const d=a.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,d),c=a,h=t,us((l=d).resumeToken.approximateByteSize()>0),(0===c.resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&o.push(n.ze.updateTargetData(e,d))}var c,l,h});let a=Fa();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(xl(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(Cs.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return rc.waitFor(o).next(()=>s.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=i,e))}function xl(e,t,n,r,i){let s=Ba();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=Fa();return n.forEach((n,o)=>{const a=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Cs.min())?(t.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,u),s=s.insert(n,o)):rs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Nl(e,t){const n=cs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function Ol(e,t){const n=cs(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(i=>i?(r=i,rc.resolve(r)):n.ze.allocateTargetId(e).next(i=>(r=new yc(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function Rl(e,t,n){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,Fe.Z)(function*(e,t,n){const r=cs(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(o){if(!uc(o))throw o;rs("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)}),Dl.apply(this,arguments)}function Pl(e,t,n){const r=cs(e);let i=Cs.min(),s=Ba();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=cs(e),i=r.qn.get(n);return void 0!==i?rc.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,jo(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:Cs.min(),n?s:Ba())).next(e=>({documents:e,Gn:s})))}function Ll(e,t){const n=cs(e),r=cs(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function Ml(e){const t=cs(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=cs(e);let i=Fa(),s=bc(n);const o=cl(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:Zu.readTimeIndex,range:a},(e,t)=>{const n=_c(r.N,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({Tn:i,readTime:Ic(s)}))}(t.jn,e,t.Kn)).then(({Tn:e,readTime:n})=>(t.Kn=n,e))}function Fl(){return Fl=(0,Fe.Z)(function*(e){const t=cs(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=cl(e);let n=Cs.min();return t.Kt({index:Zu.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=Ic(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})}),Fl.apply(this,arguments)}function Vl(){return Vl=(0,Fe.Z)(function*(e,t,n,r){const i=cs(e);let s=Ba(),o=Fa(),a=qa();for(const h of n){const e=t.zn(h.metadata.name);h.document&&(s=s.add(e)),o=o.insert(e,t.Hn(h)),a=a.insert(e,t.Jn(h.metadata.readTime))}const u=i.jn.newChangeBuffer({trackRemovals:!0}),c=yield Ol(i,(l=r,jo(Do(Os.fromString(`__bundle__/docs/${l}`)))));var l;return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>xl(e,u,o,Cs.min(),a).next(t=>(u.apply(e),t)).next(t=>i.ze.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.ze.addMatchingKeys(e,s,c.targetId)).next(()=>i.Qn.vn(e,t)).next(()=>t)))}),Vl.apply(this,arguments)}function Ul(e,t){return jl.apply(this,arguments)}function jl(){return jl=(0,Fe.Z)(function*(e,t,n=Ba()){const r=yield Ol(e,jo(kc(t.bundledQuery))),i=cs(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=au(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(Ls.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next(()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.ze.addMatchingKeys(e,n,r.targetId)).next(()=>i.Je.saveNamedQuery(e,t))})}),jl.apply(this,arguments)}class ql{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return rc.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:au(n.createTime)}),rc.resolve()}getNamedQuery(e,t){return rc.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(n=t).name,query:kc(n.bundledQuery),readTime:au(n.readTime)}),rc.resolve();var n}}class zl{constructor(){this.Zn=new Pa(Bl.ts),this.es=new Pa(Bl.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Bl(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new Bl(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new $s(new Os([])),n=new Bl(t,e),r=new Bl(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new $s(new Os([])),n=new Bl(t,e),r=new Bl(t,e+1);let i=Ba();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Bl(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Bl{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return $s.comparator(e.key,t.key)||Is(e.ls,t.ls)}static ns(e,t){return Is(e.ls,t.ls)||$s.comparator(e.key,t.key)}}class Hl{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Pa(Bl.ts)}checkEmpty(e){return rc.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new gc(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new Bl(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return rc.resolve(s)}lookupMutationBatch(e,t){return rc.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return rc.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return rc.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return rc.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Bl(t,0),r=new Bl(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);i.push(t)}),rc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Pa(Is);return t.forEach(e=>{const t=new Bl(e,0),r=new Bl(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),rc.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;$s.isDocumentKey(i)||(i=i.child(""));const s=new Bl(new $s(i),0);let o=new Pa(Is);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),rc.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){us(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return rc.forEach(t.mutations,r=>{const i=new Bl(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new Bl(t,0),r=this.ds.firstAfterOrEqual(n);return rc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return rc.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class Zl{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Oa($s.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return rc.resolve(n?n.document.clone():co.newInvalidDocument(t))}getEntries(e,t){let n=Fa();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():co.newInvalidDocument(e))}),rc.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=Fa();const i=new $s(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||Zo(t,i)&&(r=r.insert(i.key,i.clone()))}return rc.resolve(r)}Es(e,t){return rc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new $l(this)}getSize(e){return rc.resolve(this.size)}}class $l extends sl{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),rc.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class Gl{constructor(e){this.persistence=e,this.Ts=new il(e=>fo(e),po),this.lastRemoteSnapshotVersion=Cs.min(),this.highestTargetId=0,this.Is=0,this.As=new zl,this.targetCount=0,this.Rs=Zc.se()}forEachTarget(e,t){return this.Ts.forEach((e,n)=>t(n)),rc.resolve()}getLastRemoteSnapshotVersion(e){return rc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rc.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),rc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),rc.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Zc(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,rc.resolve()}updateTargetData(e,t){return this.ae(t),rc.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,rc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),rc.waitFor(i).next(()=>r)}getTargetCount(e){return rc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return rc.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),rc.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),rc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),rc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return rc.resolve(n)}containsKey(e,t){return rc.resolve(this.As.containsKey(t))}}class Wl{constructor(e,t){this.bs={},this.Le=new _s(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new Gl(this),this.Ht=new Rc,this.He=new Zl(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new vc(t),this.Je=new ql(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Hl(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){rs("MemoryPersistence","Starting transaction:",e);const r=new Kl(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return rc.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class Kl extends nc{constructor(e){super(),this.currentSequenceNumber=e}}class Ql{constructor(e){this.persistence=e,this.Ds=new zl,this.Cs=null}static Ns(e){return new Ql(e)}get xs(){if(this.Cs)return this.Cs;throw as()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),rc.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),rc.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),rc.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rc.forEach(this.xs,n=>{const r=$s.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return rc.or([()=>rc.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function Yl(e,t){return`firestore_clients_${e}_${t}`}function Jl(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Xl(e,t){return`firestore_targets_${e}_${t}`}class eh{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new hs(r.error.code,r.error.message))),s?new eh(e,t,r.state,i):(is("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class th{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new hs(n.error.code,n.error.message))),i?new th(e,n.state,r):(is("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Za();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Zs(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new nh(e,i):(is("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class rh{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rh(t.clientId,t.onlineState):(is("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ih{constructor(){this.activeTargetIds=Za()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sh{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Oa(Is),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=Yl(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new ih),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Fe.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(Yl(e.persistenceKey,r));if(t){const n=nh.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Xl(this.persistenceKey,e));if(n){const r=th.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xl(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return rs("SharedClientState","READ",e,t),t}setItem(e,t){rs("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){rs("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(rs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void is("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Fe.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ai(n.key);return t.ci(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ci(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=_s.T;if(null!=e)try{const n=JSON.parse(e);us("number"==typeof n),t=n}catch(n){is("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(n.newValue);e!==_s.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new eh(this.currentUser,e,t,n),i=Jl(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=Jl(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=Xl(this.persistenceKey,e),i=new th(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return nh.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return eh.$s(new Xi(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return th.$s(r,t)}Xs(e){return rh.$s(e)}li(e){var t=this;return(0,Fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);rs("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=Za();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class oh{constructor(){this.yi=new ih,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new ih,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class ah{Ei(e){}shutdown(){}}class uh{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){rs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){rs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ch={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lh{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class hh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);rs("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then(e=>(rs("RestConnection","Received: ",e),e),t=>{throw ss("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+es,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${ch[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((i,s)=>{const o=new Ji;o.listenOnce($i.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Zi.NO_ERROR:const t=o.getResponseJson();rs("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Zi.TIMEOUT:rs("Connection",'RPC "'+e+'" timed out'),s(new hs(ls.DEADLINE_EXCEEDED,"Request time out"));break;case Zi.HTTP_ERROR:const n=o.getStatus();if(rs("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ls).indexOf(t)>=0?t:ls.UNKNOWN}(e.status);s(new hs(t,e.message))}else s(new hs(ls.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new hs(ls.UNAVAILABLE,"Connection failed."));break;default:as()}}finally{rs("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new ji,i=Pn(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Qi({})),this.Ui(s.initMessageHeaders,t),(0,qe.uI)()||(0,qe.b$)()||(0,qe.d)()||(0,qe.w1)()||(0,qe.Mn)()||(0,qe.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");rs("Connection","Creating WebChannel: "+o,s);const a=r.createWebChannel(o,s);let u=!1,c=!1;const l=new lh({vi:e=>{c?rs("Connection","Not sending because WebChannel is closed:",e):(u||(rs("Connection","Opening WebChannel transport."),a.open(),u=!0),rs("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return h(a,Yi.EventType.OPEN,()=>{c||rs("Connection","WebChannel transport opened.")}),h(a,Yi.EventType.CLOSE,()=>{c||(c=!0,rs("Connection","WebChannel transport closed"),l.$i())}),h(a,Yi.EventType.ERROR,e=>{c||(c=!0,ss("Connection","WebChannel transport errored:",e),l.$i(new hs(ls.UNAVAILABLE,"The operation could not be completed")))}),h(a,Yi.EventType.MESSAGE,e=>{var t;if(!c){const n=e.data[0];us(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){rs("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Aa[e];if(void 0!==t)return Na(t)}(e),n=i.message;void 0===t&&(t=ls.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,l.$i(new hs(t,n)),a.close()}else rs("Connection","WebChannel received:",n),l.Oi(n)}}),h(i,Gi.STAT_EVENT,e=>{e.stat===Wi?rs("Connection","Detected buffering proxy"):e.stat===Ki&&rs("Connection","Detected no buffering proxy")}),setTimeout(()=>{l.ki()},0),l}}function dh(){return"undefined"!=typeof window?window:null}function fh(){return"undefined"!=typeof document?document:null}function ph(e){return new ru(e,!0)}class gh{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&rs("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class mh{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new gh(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,Fe.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,Fe.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var n=this;return(0,Fe.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===ls.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===ls.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(e=>{this.sr===t&&this.yr(e)},t=>{e(()=>{const e=new hs(ls.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.pr(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}ur(){var e=this;this.state=4,this.rr.Xi((0,Fe.Z)(function*(){e.state=0,e.start()}))}pr(e){return rs("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(rs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yh extends mh{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:as(),s=t.targetChange.targetIds||[],o=function(e,t){return e.D?(us(void 0===t||"string"==typeof t),Ls.fromBase64String(t||"")):(us(void 0===t||t instanceof Uint8Array),Ls.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,u=a&&function(e){const t=void 0===e.code?ls.UNKNOWN:Na(e.code);return new hs(t,e.message||"")}(a);n=new Qa(i,s,o,u||null)}else if("documentChange"in t){const r=t.documentChange,i=hu(e,r.document.name),s=au(r.document.updateTime),o=new ao({mapValue:{fields:r.document.fields}}),a=co.newFoundDocument(i,s,o);n=new Wa(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=hu(e,r.document),s=r.readTime?au(r.readTime):Cs.min(),o=co.newNoDocument(i,s);n=new Wa([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=hu(e,r.document);n=new Wa([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return as();{const e=t.filter,r=new Ca(e.count||0);n=new Ka(e.targetId,r)}}var r;return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Cs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Cs.min():t.readTime?au(t.readTime):Cs.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=pu(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=go(r)?{documents:wu(e,r)}:{query:bu(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=su(e,t.resumeToken):t.snapshotVersion.compareTo(Cs.min())>0&&(n.readTime=iu(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return as()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=pu(this.N),t.removeTarget=e,this.wr(t)}}class vh extends mh{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if(us(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(us(void 0!==t),e.map(e=>function(e,t){let n=au(e.updateTime?e.updateTime:t);return n.isEqual(Cs.min())&&(n=au(t)),new la(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=au(e.commitTime);return this.listener.vr(n,t)}return us(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=pu(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>vu(this.N,e))};this.wr(t)}}class _h extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new hs(ls.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===ls.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new hs(ls.UNKNOWN,e.toString())})}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===ls.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new hs(ls.UNKNOWN,e.toString())})}terminate(){this.Dr=!0}}class wh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(is(t),this.$r=!1):rs("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class bh{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ei(e=>{n.enqueueAndForget((0,Fe.Z)(function*(){var e;Rh(s)&&(rs("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,Fe.Z)(function*(e){const t=cs(e);t.Kr.add(4),yield Eh(t),t.Wr.set("Unknown"),t.Kr.delete(4),yield Ih(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.Wr=new wh(n,r)}}function Ih(e){return Th.apply(this,arguments)}function Th(){return Th=(0,Fe.Z)(function*(e){if(Rh(e))for(const t of e.jr)yield t(!0)}),Th.apply(this,arguments)}function Eh(e){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,Fe.Z)(function*(e){for(const t of e.jr)yield t(!1)}),Sh.apply(this,arguments)}function Ch(e,t){const n=cs(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),Oh(n)?Nh(n):sd(n).cr()&&kh(n,t))}function Ah(e,t){const n=cs(e),r=sd(n);n.qr.delete(t),r.cr()&&xh(n,t),0===n.qr.size&&(r.cr()?r.lr():Rh(n)&&n.Wr.set("Unknown"))}function kh(e,t){e.Gr.Y(t.targetId),sd(e).Ir(t)}function xh(e,t){e.Gr.Y(t),sd(e).Ar(t)}function Nh(e){e.Gr=new Ja({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),sd(e).start(),e.Wr.Or()}function Oh(e){return Rh(e)&&!sd(e).ar()&&e.qr.size>0}function Rh(e){return 0===cs(e).Kr.size}function Dh(e){e.Gr=void 0}function Ph(e){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,Fe.Z)(function*(e){e.qr.forEach((t,n)=>{kh(e,t)})}),Lh.apply(this,arguments)}function Mh(e,t){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,Fe.Z)(function*(e,t){Dh(e),Oh(e)?(e.Wr.Lr(t),Nh(e)):e.Wr.set("Unknown")}),Fh.apply(this,arguments)}function Vh(e,t,n){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,Fe.Z)(function*(e,t,n){if(e.Wr.set("Online"),t instanceof Qa&&2===t.state&&t.cause)try{yield(r=(0,Fe.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(r){rs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield jh(e,r)}else if(t instanceof Wa?e.Gr.rt(t):t instanceof Ka?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(Cs.min()))try{const t=yield Al(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(Ls.EMPTY_BYTE_STRING,n.snapshotVersion)),xh(e,t);const r=new yc(n.target,t,1,n.sequenceNumber);kh(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(r){rs("RemoteStore","Failed to raise snapshot:",r),yield jh(e,r)}var r}),Uh.apply(this,arguments)}function jh(e,t,n){return qh.apply(this,arguments)}function qh(){return qh=(0,Fe.Z)(function*(e,t,n){if(!uc(t))throw t;e.Kr.add(1),yield Eh(e),e.Wr.set("Offline"),n||(n=()=>Al(e.localStore)),e.asyncQueue.enqueueRetryable((0,Fe.Z)(function*(){rs("RemoteStore","Retrying IndexedDB access"),yield n(),e.Kr.delete(1),yield Ih(e)}))}),qh.apply(this,arguments)}function zh(e,t){return t().catch(n=>jh(e,n,t))}function Bh(e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,Fe.Z)(function*(e){const t=cs(e),n=od(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;Zh(t);)try{const e=yield Nl(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,$h(t,e)}catch(i){yield jh(t,i)}Gh(t)&&Wh(t)}),Hh.apply(this,arguments)}function Zh(e){return Rh(e)&&e.Ur.length<10}function $h(e,t){e.Ur.push(t);const n=od(e);n.cr()&&n.br&&n.Pr(t.mutations)}function Gh(e){return Rh(e)&&!od(e).ar()&&e.Ur.length>0}function Wh(e){od(e).start()}function Kh(e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,Fe.Z)(function*(e){od(e).Sr()}),Qh.apply(this,arguments)}function Yh(e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,Fe.Z)(function*(e){const t=od(e);for(const n of e.Ur)t.Pr(n.mutations)}),Jh.apply(this,arguments)}function Xh(e,t,n){return ed.apply(this,arguments)}function ed(){return ed=(0,Fe.Z)(function*(e,t,n){const r=e.Ur.shift(),i=mc.from(r,t,n);yield zh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Bh(e)}),ed.apply(this,arguments)}function td(e,t){return nd.apply(this,arguments)}function nd(){return nd=(0,Fe.Z)(function*(e,t){var n;t&&od(e).br&&(yield(n=(0,Fe.Z)(function*(e,t){if(xa(n=t.code)&&n!==ls.ABORTED){const n=e.Ur.shift();od(e).hr(),yield zh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Bh(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),Gh(e)&&Wh(e)}),nd.apply(this,arguments)}function rd(e,t){return id.apply(this,arguments)}function id(){return id=(0,Fe.Z)(function*(e,t){const n=cs(e);t?(n.Kr.delete(2),yield Ih(n)):t||(n.Kr.add(2),yield Eh(n),n.Wr.set("Unknown"))}),id.apply(this,arguments)}function sd(e){return e.zr||(e.zr=function(e,t,n){const r=cs(e);return r.Cr(),new yh(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Ph.bind(null,e),Ci:Mh.bind(null,e),Tr:Vh.bind(null,e)}),e.jr.push(function(){var t=(0,Fe.Z)(function*(t){t?(e.zr.hr(),Oh(e)?Nh(e):e.Wr.set("Unknown")):(yield e.zr.stop(),Dh(e))});return function(e){return t.apply(this,arguments)}}())),e.zr}function od(e){return e.Hr||(e.Hr=function(e,t,n){const r=cs(e);return r.Cr(),new vh(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Kh.bind(null,e),Ci:td.bind(null,e),Vr:Yh.bind(null,e),vr:Xh.bind(null,e)}),e.jr.push(function(){var t=(0,Fe.Z)(function*(t){t?(e.Hr.hr(),yield Bh(e)):(yield e.Hr.stop(),e.Ur.length>0&&(rs("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))});return function(e){return t.apply(this,arguments)}}())),e.Hr}class ad{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ad(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hs(ls.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ud(e,t){if(is("AsyncQueue",`${t}: ${e}`),uc(e))return new hs(ls.UNAVAILABLE,`${t}: ${e}`);throw e}class cd{constructor(e){this.comparator=e?(t,n)=>e(t,n)||$s.comparator(t.key,n.key):(e,t)=>$s.comparator(e.key,t.key),this.keyedMap=Ua(),this.sortedSet=new Oa(this.comparator)}static emptySet(e){return new cd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new cd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ld{constructor(){this.Jr=new Oa($s.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):as():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,n)=>{e.push(n)}),e}}class hd{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new hd(e,t,cd.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class dd{constructor(){this.Xr=void 0,this.listeners=[]}}class fd{constructor(){this.queries=new il(e=>Bo(e),zo),this.onlineState="Unknown",this.Zr=new Set}}function pd(e,t){return gd.apply(this,arguments)}function gd(){return gd=(0,Fe.Z)(function*(e,t){const n=cs(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new dd),i)try{s.Xr=yield n.onListen(r)}catch(o){const e=ud(o,`Initialization of query '${Ho(t.query)}' failed`);return void t.onError(e)}n.queries.set(r,s),s.listeners.push(t),t.eo(n.onlineState),s.Xr&&t.no(s.Xr)&&wd(n)}),gd.apply(this,arguments)}function md(e,t){return yd.apply(this,arguments)}function yd(){return yd=(0,Fe.Z)(function*(e,t){const n=cs(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),yd.apply(this,arguments)}function vd(e,t){const n=cs(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.no(i)&&(r=!0);e.Xr=i}}r&&wd(n)}function _d(e,t,n){const r=cs(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function wd(e){e.Zr.forEach(e=>{e.next()})}class bd{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new hd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=hd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class Id{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class Td{constructor(e){this.N=e}zn(e){return hu(this.N,e)}Hn(e){return e.metadata.exists?yu(this.N,e.document,!1):co.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return au(e)}}class Ed{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=Sd(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new Td(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ba()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,Fe.Z)(function*(){const t=yield function(e,t,n,r){return Vl.apply(this,arguments)}(e.localStore,new Td(e.N),e.documents,e.lo.id),n=e.wo(e.documents);for(const r of e.queries)yield Ul(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new vl(Object.assign({},e.progress),t)})()}}function Sd(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Cd{constructor(e){this.key=e}}class Ad{constructor(e){this.key=e}}class kd{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=Ba(),this.mutatedKeys=Ba(),this.po=$o(e),this.Eo=new cd(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new ld,r=t?t.Eo:this.Eo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Po(this.query)&&r.size===this.query.limit?r.last():null,u=Lo(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),l=Zo(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ro(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.po(l,a)>0||u&&this.po(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),Po(this.query)||Lo(this.query))for(;s.size>this.query.limit;){const e=Po(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return as()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc)),this.bo(n);const s=t?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new hd(this.query,e.Eo,r,i,e.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new ld,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(e=>this._o=this._o.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._o=this._o.delete(e)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Ba(),this.Eo.forEach(e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))});const t=[];return e.forEach(e=>{this.yo.has(e)||t.push(new Ad(e))}),this.yo.forEach(n=>{e.has(n)||t.push(new Cd(n))}),t}So(e){this._o=e.Gn,this.yo=Ba();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return hd.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class xd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Nd{constructor(e){this.key=e,this.Co=!1}}class Od{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new il(e=>Bo(e),zo),this.ko=new Map,this.$o=new Set,this.Oo=new Oa($s.comparator),this.Fo=new Map,this.Mo=new zl,this.Lo={},this.Bo=new Map,this.Uo=Zc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function Rd(e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,Fe.Z)(function*(e,t){const n=Tf(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=yield Ol(n.localStore,jo(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield Pd(n,t,r,"current"===s),n.isPrimaryClient&&Ch(n.remoteStore,e)}return i}),Dd.apply(this,arguments)}function Pd(e,t,n,r){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,Fe.Z)(function*(e,t,n,r){e.Ko=(t,n,r)=>{return(i=(0,Fe.Z)(function*(e,t,n,r){let i=t.view.Io(n);i.Ln&&(i=yield Pl(e.localStore,t.query,!1).then(({documents:e})=>t.view.Io(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Xd(e,t.targetId,o.vo),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield Pl(e.localStore,t,!0),s=new kd(t,i.Gn),o=s.Io(i.documents),a=Ga.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=s.applyChanges(o,e.isPrimaryClient,a);Xd(e,n,u.vo);const c=new xd(t,n,s);return e.xo.set(t,c),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),u.snapshot}),Ld.apply(this,arguments)}function Md(e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,Fe.Z)(function*(e,t){const n=cs(e),r=n.xo.get(t),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter(e=>!zo(e,t))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ah(n.remoteStore,r.targetId),Yd(n,r.targetId)}).catch(Qc))):(Yd(n,r.targetId),yield Rl(n.localStore,r.targetId,!0))}),Fd.apply(this,arguments)}function Vd(){return Vd=(0,Fe.Z)(function*(e,t,n){const r=Ef(e);try{const e=yield function(e,t){const n=cs(e),r=Ss.now(),i=t.reduce((e,t)=>e.add(t.key),Ba());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=ma(e,s.get(e.key));null!=t&&o.push(new wa(e.key,t,uo(t.value.mapValue),ha.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new Oa(Is)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield nf(r,e.changes),yield Bh(r.remoteStore)}catch(i){const e=ud(i,"Failed to persist write");n.reject(e)}}),Vd.apply(this,arguments)}function Ud(e,t){return jd.apply(this,arguments)}function jd(){return jd=(0,Fe.Z)(function*(e,t){const n=cs(e);try{const e=yield kl(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fo.get(t);r&&(us(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?us(r.Co):e.removedDocuments.size>0&&(us(r.Co),r.Co=!1))}),yield nf(n,e,t)}catch(r){yield Qc(r)}}),jd.apply(this,arguments)}function qd(e,t,n){const r=cs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach((n,r)=>{const i=r.view.eo(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=cs(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.eo(t)&&(r=!0)}),r&&wd(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function zd(e,t,n){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,Fe.Z)(function*(e,t,n){const r=cs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fo.get(t),s=i&&i.key;if(s){let e=new Oa($s.comparator);e=e.insert(s,co.newNoDocument(s,Cs.min()));const n=Ba().add(s),i=new $a(Cs.min(),new Map,new Pa(Is),e,n);yield Ud(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(t),tf(r)}else yield Rl(r.localStore,t,!1).then(()=>Yd(r,t,n)).catch(Qc)}),Bd.apply(this,arguments)}function Hd(e,t){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,Fe.Z)(function*(e,t){const n=cs(e),r=t.batch.batchId;try{const e=yield Cl(n.localStore,t);Qd(n,r,null),Kd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield nf(n,e)}catch(i){yield Qc(i)}}),Zd.apply(this,arguments)}function $d(e,t,n){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,Fe.Z)(function*(e,t,n){const r=cs(e);try{const e=yield function(e,t){const n=cs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(us(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);Qd(r,t,n),Kd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield nf(r,e)}catch(i){yield Qc(i)}}),Gd.apply(this,arguments)}function Wd(){return Wd=(0,Fe.Z)(function*(e,t){const n=cs(e);Rh(n.remoteStore)||rs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=cs(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(r){const e=ud(r,"Initialization of waitForPendingWrites() operation failed");t.reject(e)}}),Wd.apply(this,arguments)}function Kd(e,t){(e.Bo.get(t)||[]).forEach(e=>{e.resolve()}),e.Bo.delete(t)}function Qd(e,t,n){const r=cs(e);let i=r.Lo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function Yd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(t=>{e.Mo.containsKey(t)||Jd(e,t)})}function Jd(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(Ah(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),tf(e))}function Xd(e,t,n){for(const r of n)r instanceof Cd?(e.Mo.addReference(r.key,t),ef(e,r)):r instanceof Ad?(rs("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||Jd(e,r.key)):as()}function ef(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(rs("SyncEngine","New document in limbo: "+n),e.$o.add(r),tf(e))}function tf(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new $s(Os.fromString(t)),r=e.Uo.next();e.Fo.set(r,new Nd(n)),e.Oo=e.Oo.insert(n,r),Ch(e.remoteStore,new yc(jo(Do(n.path)),r,2,_s.T))}}function nf(e,t,n){return rf.apply(this,arguments)}function rf(){return rf=(0,Fe.Z)(function*(e,t,n){const r=cs(e),i=[],s=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((e,a)=>{o.push(r.Ko(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=wl.kn(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.No.Tr(i),yield(a=(0,Fe.Z)(function*(e,t){const n=cs(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>rc.forEach(t,t=>rc.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>rc.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!uc(r))throw r;rs("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))}),rf.apply(this,arguments)}function sf(e,t){return of.apply(this,arguments)}function of(){return of=(0,Fe.Z)(function*(e,t){const n=cs(e);if(!n.currentUser.isEqual(t)){rs("SyncEngine","User change. New user:",t.toKey());const e=yield El(n.localStore,t);n.currentUser=t,(r=n).Bo.forEach(e=>{e.forEach(e=>{e.reject(new hs(ls.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Bo.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield nf(n,e.Wn)}var r}),of.apply(this,arguments)}function af(e,t){const n=cs(e),r=n.Fo.get(t);if(r&&r.Co)return Ba().add(r.key);{let e=Ba();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}function uf(e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,Fe.Z)(function*(e,t){const n=cs(e),r=yield Pl(n.localStore,t.query,!0),i=t.view.So(r);return n.isPrimaryClient&&Xd(n,t.targetId,i.vo),i}),cf.apply(this,arguments)}function lf(e){return hf.apply(this,arguments)}function hf(){return hf=(0,Fe.Z)(function*(e){const t=cs(e);return Ml(t.localStore).then(e=>nf(t,e))}),hf.apply(this,arguments)}function df(e,t,n,r){return ff.apply(this,arguments)}function ff(){return ff=(0,Fe.Z)(function*(e,t,n,r){const i=cs(e),s=yield function(e,t){const n=cs(e),r=cs(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):rc.resolve(null)))}(i.localStore,t);var o;null!==s?("pending"===n?yield Bh(i.remoteStore):"acknowledged"===n||"rejected"===n?(Qd(i,t,r||null),Kd(i,t),o=t,cs(cs(i.localStore).In).te(o)):as(),yield nf(i,s)):rs("SyncEngine","Cannot apply mutation batch with id: "+t)}),ff.apply(this,arguments)}function pf(){return pf=(0,Fe.Z)(function*(e,t){const n=cs(e);if(Tf(n),Ef(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield gf(n,e.toArray());n.qo=!0,yield rd(n.remoteStore,!0);for(const r of t)Ch(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Yd(n,i),Rl(n.localStore,i,!0))),Ah(n.remoteStore,i)}),yield t,yield gf(n,e),function(e){const t=cs(e);t.Fo.forEach((e,n)=>{Ah(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new Oa($s.comparator)}(n),n.qo=!1,yield rd(n.remoteStore,!1)}}),pf.apply(this,arguments)}function gf(e,t,n){return mf.apply(this,arguments)}function mf(){return mf=(0,Fe.Z)(function*(e,t,n){const r=cs(e),i=[],s=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=yield Ol(r.localStore,jo(t[0]));for(const e of t){const t=r.xo.get(e),n=yield uf(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield Ll(r.localStore,o);e=yield Ol(r.localStore,t),yield Pd(r,yf(t),o,!1)}i.push(e)}return r.No.Tr(s),i}),mf.apply(this,arguments)}function yf(e){return Ro(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function vf(e){const t=cs(e);return cs(cs(t.localStore).persistence).pn()}function _f(e,t,n,r){return wf.apply(this,arguments)}function wf(){return wf=(0,Fe.Z)(function*(e,t,n,r){const i=cs(e);if(i.qo)rs("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(t))switch(n){case"current":case"not-current":{const e=yield Ml(i.localStore),r=$a.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield nf(i,e,r);break}case"rejected":yield Rl(i.localStore,t,!0),Yd(i,t,r);break;default:as()}}),wf.apply(this,arguments)}function bf(e,t,n){return If.apply(this,arguments)}function If(){return If=(0,Fe.Z)(function*(e,t,n){const r=Tf(e);if(r.qo){for(const e of t){if(r.ko.has(e)){rs("SyncEngine","Adding an already active target "+e);continue}const t=yield Ll(r.localStore,e),n=yield Ol(r.localStore,t);yield Pd(r,yf(t),n.targetId,!1),Ch(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&(yield Rl(r.localStore,e,!1).then(()=>{Ah(r.remoteStore,e),Yd(r,e)}).catch(Qc))}}),If.apply(this,arguments)}function Tf(e){const t=cs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ud.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zd.bind(null,t),t.No.Tr=vd.bind(null,t.eventManager),t.No.jo=_d.bind(null,t.eventManager),t}function Ef(e){const t=cs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$d.bind(null,t),t}class Sf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Fe.Z)(function*(){t.N=ph(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return Tl(this.persistence,new bl,e.initialUser,this.N)}Go(e){return new Wl(Ql.Ns,this.N)}Wo(e){return new oh}terminate(){var e=this;return(0,Fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Cf extends Sf{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,Fe.Z)(function*(){yield t().call(n,e),yield function(e){return Fl.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,e),yield Ef(n.Jo.syncEngine),yield Bh(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(e){return Tl(this.persistence,new bl,e.initialUser,this.N)}zo(e){return new el(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=yl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fc.withCacheSize(this.cacheSizeBytes):Fc.DEFAULT;return new pl(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dh(),fh(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new oh}}class Af extends Cf{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,Fe.Z)(function*(){yield t().call(n,e);const r=n.Jo.syncEngine;n.sharedClientState instanceof sh&&(n.sharedClientState.syncEngine={_i:df.bind(null,r),mi:_f.bind(null,r),gi:bf.bind(null,r),pn:vf.bind(null,r),wi:lf.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,Fe.Z)(function*(e){yield function(e,t){return pf.apply(this,arguments)}(n.Jo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Wo(e){const t=dh();if(!sh.bt(t))throw new hs(ls.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=yl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class kf{initialize(e,t){var n=this;return(0,Fe.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>qd(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=sf.bind(null,n.syncEngine),yield rd(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fd}createDatastore(e){const t=ph(e.databaseInfo.databaseId),n=new hh(e.databaseInfo);return new _h(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>qd(this.syncEngine,e,0),s=uh.bt()?new uh:new ah,new bh(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Od(e,t,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Fe.Z)(function*(e){const t=cs(e);rs("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),yield Eh(t),t.Qr.shutdown(),t.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xf(e,t=10240){let n=0;return{read:()=>(0,Fe.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,Fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Nf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Of{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new ds,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,Fe.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,Fe.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,Fe.Z)(function*(){const t=yield e.na();if(null===t)return null;const n=e.ta.decode(t),r=Number(n);isNaN(r)&&e.sa(`length string (${n}) is not valid number`);const i=yield e.ia(r);return new Id(JSON.parse(i),t.length+r)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,Fe.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ia(e){var t=this;return(0,Fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const n=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,Fe.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class Rf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new hs(ls.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,Fe.Z)(function*(e,t){const n=cs(e),r=pu(n.N)+"/documents",i={documents:t.map(e=>lu(n.N,e))},s=yield n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){us(!!t.found);const n=hu(e,t.found.name),r=au(t.found.updateTime),i=new ao({mapValue:{fields:t.found.fields}});return co.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){us(!!t.missing),us(!!t.readTime);const n=hu(e,t.missing),r=au(t.readTime);return co.newNoDocument(n,r)}(e,t):as()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());us(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ea(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=$s.fromPath(n);e.mutations.push(new Sa(r,e.precondition(r)))}),yield(n=(0,Fe.Z)(function*(e,t){const n=cs(e),r=pu(n.N)+"/documents",i={writes:t.map(e=>vu(n.N,e))};yield n.Li("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw as();t=Cs.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new hs(ls.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ha.updateTime(t):ha.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Cs.min()))throw new hs(ls.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ha.updateTime(t)}return ha.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Df{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new gh(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,Fe.Z)(function*(){const t=new Rf(e.datastore),n=e.ua(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.ha(t)}))}).catch(t=>{e.ha(t)})}))}ua(e){try{const t=this.updateFunction(e);return!Bs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!xa(t)}return!1}}class Pf{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Xi.UNAUTHENTICATED,this.clientId=bs.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,Fe.Z)(function*(e){rs("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,Fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hs(ls.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=ud(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function Lf(e,t){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,Fe.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),rs("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,Fe.Z)(function*(e){r.isEqual(e)||(yield El(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}),Mf.apply(this,arguments)}function Ff(e,t){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,Fe.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield Uf(e);rs("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,Fe.Z)(function*(e,t){const n=cs(e);n.asyncQueue.verifyOperationInProgress(),rs("RemoteStore","RemoteStore received new credentials");const r=Rh(n);n.Kr.add(3),yield Eh(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),yield Ih(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t}),Vf.apply(this,arguments)}function Uf(e){return jf.apply(this,arguments)}function jf(){return jf=(0,Fe.Z)(function*(e){return e.offlineComponents||(rs("FirestoreClient","Using default OfflineComponentProvider"),yield Lf(e,new Sf)),e.offlineComponents}),jf.apply(this,arguments)}function qf(e){return zf.apply(this,arguments)}function zf(){return zf=(0,Fe.Z)(function*(e){return e.onlineComponents||(rs("FirestoreClient","Using default OnlineComponentProvider"),yield Ff(e,new kf)),e.onlineComponents}),zf.apply(this,arguments)}function Bf(e){return Uf(e).then(e=>e.persistence)}function Hf(e){return Uf(e).then(e=>e.localStore)}function Zf(e){return qf(e).then(e=>e.remoteStore)}function $f(e){return qf(e).then(e=>e.syncEngine)}function Gf(e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Fe.Z)(function*(e){const t=yield qf(e),n=t.eventManager;return n.onListen=Rd.bind(null,t.syncEngine),n.onUnlisten=Md.bind(null,t.syncEngine),n}),Wf.apply(this,arguments)}function Kf(e,t,n={}){const r=new ds;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(e,t,n,r,i){const s=new Nf({next:s=>{t.enqueueAndForget(()=>md(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new hs(ls.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new hs(ls.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new bd(Do(n.path),s,{includeMetadataChanges:!0,uo:!0});return pd(e,o)}(yield Gf(e),e.asyncQueue,t,n,r)})),r.promise}function Qf(e,t,n={}){const r=new ds;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(e,t,n,r,i){const s=new Nf({next:n=>{t.enqueueAndForget(()=>md(e,o)),n.fromCache&&"server"===r.source?i.reject(new hs(ls.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new bd(n,s,{includeMetadataChanges:!0,uo:!0});return pd(e,o)}(yield Gf(e),e.asyncQueue,t,n,r)})),r.promise}class Yf{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Jf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jf&&e.projectId===this.projectId&&e.database===this.database}}const Xf=new Map;function ep(e,t,n){if(!n)throw new hs(ls.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function tp(e,t,n,r){if(!0===t&&!0===r)throw new hs(ls.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function np(e){if(!$s.isDocumentKey(e))throw new hs(ls.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function rp(e){if($s.isDocumentKey(e))throw new hs(ls.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ip(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":as()}function sp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hs(ls.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ip(e);throw new hs(ls.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function op(e,t){if(t<=0)throw new hs(ls.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class ap{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new hs(ls.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hs(ls.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,tp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class up{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ap({}),this._settingsFrozen=!1,e instanceof Jf?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hs(ls.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jf(e.options.projectId)}(e))}get app(){if(!this._app)throw new hs(ls.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hs(ls.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ap(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new ps;switch(e.type){case"gapi":const t=e.client;return us(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new vs(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new hs(ls.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Xf.get(e);t&&(rs("ComponentProvider","Removing Datastore"),Xf.delete(e),t.terminate())}(this),Promise.resolve()}}class cp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cp(this.firestore,e,this._key)}}class lp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lp(this.firestore,e,this._query)}}class hp extends lp{constructor(e,t,n){super(e,t,Do(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cp(this.firestore,null,new $s(e))}withConverter(e){return new hp(this.firestore,e,this._path)}}function dp(e,t,...n){if(e=(0,qe.m9)(e),ep("collection","path",t),e instanceof up){const r=Os.fromString(t,...n);return rp(r),new hp(e,null,r)}{if(!(e instanceof cp||e instanceof hp))throw new hs(ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Os.fromString(t,...n));return rp(r),new hp(e.firestore,null,r)}}function fp(e,t,...n){if(e=(0,qe.m9)(e),1===arguments.length&&(t=bs.I()),ep("doc","path",t),e instanceof up){const r=Os.fromString(t,...n);return np(r),new cp(e,null,new $s(r))}{if(!(e instanceof cp||e instanceof hp))throw new hs(ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Os.fromString(t,...n));return np(r),new cp(e.firestore,e instanceof hp?e.converter:null,new $s(r))}}function pp(e,t){return e=(0,qe.m9)(e),t=(0,qe.m9)(t),(e instanceof cp||e instanceof hp)&&(t instanceof cp||t instanceof hp)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gp(e,t){return e=(0,qe.m9)(e),t=(0,qe.m9)(t),e instanceof lp&&t instanceof lp&&e.firestore===t.firestore&&zo(e._query,t._query)&&e.converter===t.converter}class mp{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new gh(this,"async_queue_retry"),this.Ea=()=>{const e=fh();e&&rs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=fh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=fh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise(()=>{});const t=new ds;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,Fe.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!uc(t))throw t;rs("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(e=>{throw this.ma=e,this.ga=!1,is("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.ga=!1,e))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=ad.createAndSchedule(this,e,t,n,e=>this.Ra(e));return this._a.push(r),r}Ta(){this.ma&&as()}verifyOperationInProgress(){}ba(){var e=this;return(0,Fe.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function yp(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class vp{constructor(){this._progressObserver={},this._taskCompletionResolver=new ds,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _p extends up{constructor(e,t){super(e,t),this.type="firestore",this._queue=new mp,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||bp(this),this._firestoreClient.terminate()}}function wp(e){return e._firestoreClient||bp(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bp(e){var t;const n=e._freezeSettings(),r=(i=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new Yf(e._databaseId,i,e._persistenceKey,(s=n).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));var i,s;e._firestoreClient=new Pf(e._credentials,e._queue,r)}function Ip(e,t,n){const r=new ds;return e.asyncQueue.enqueue((0,Fe.Z)(function*(){try{yield Lf(e,n),yield Ff(e,t),r.resolve()}catch(s){if(!("FirebaseError"===(i=s).name?i.code===ls.FAILED_PRECONDITION||i.code===ls.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var i})).then(()=>r.promise)}function Tp(e){if(e._initialized||e._terminated)throw new hs(ls.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ep{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new hs(ls.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ds(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sp(Ls.fromBase64String(e))}catch(t){throw new hs(ls.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sp(Ls.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cp{constructor(e){this._methodName=e}}class Ap{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hs(ls.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hs(ls.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Is(this._lat,e._lat)||Is(this._long,e._long)}}const kp=/^__.*__$/;class xp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new _a(e,this.data,t,this.fieldTransforms)}}class Np{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Op(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw as()}}class Rp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new Rp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Jp(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(Op(this.Da)&&kp.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class Dp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||ph(e)}Ba(e,t,n,r=!1){return new Rp({Da:e,methodName:t,La:n,path:Ds.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Pp(e){const t=e._freezeSettings(),n=ph(e._databaseId);return new Dp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lp(e,t,n,r,i,s={}){const o=e.Ba(s.merge||s.mergeFields?2:0,t,n,i);Wp("Data must be an object, but it was:",o,r);const a=$p(r,o);let u,c;if(s.merge)u=new Ps(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Kp(t,r,n);if(!o.contains(i))throw new hs(ls.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Xp(e,i)||e.push(i)}u=new Ps(e),c=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,c=o.fieldTransforms;return new xp(new ao(a),u,c)}class Mp extends Cp{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mp}}function Fp(e,t,n){return new Rp({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class Vp extends Cp{_toFieldTransform(e){return new ca(e.path,new ta)}isEqual(e){return e instanceof Vp}}class Up extends Cp{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=Fp(this,e,!0),n=this.Ua.map(e=>Zp(e,t)),r=new na(n);return new ca(e.path,r)}isEqual(e){return this===e}}class jp extends Cp{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=Fp(this,e,!0),n=this.Ua.map(e=>Zp(e,t)),r=new ia(n);return new ca(e.path,r)}isEqual(e){return this===e}}class qp extends Cp{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new oa(e.N,Qo(e.N,this.qa));return new ca(e.path,t)}isEqual(e){return this===e}}function zp(e,t,n,r){const i=e.Ba(1,t,n);Wp("Data must be an object, but it was:",i,r);const s=[],o=ao.empty();ks(r,(e,r)=>{const a=Yp(t,e,n);r=(0,qe.m9)(r);const u=i.$a(a);if(r instanceof Mp)s.push(a);else{const e=Zp(r,u);null!=e&&(s.push(a),o.set(a,e))}});const a=new Ps(s);return new Np(o,a,i.fieldTransforms)}function Bp(e,t,n,r,i,s){const o=e.Ba(1,t,n),a=[Kp(t,r,n)],u=[i];if(s.length%2!=0)throw new hs(ls.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Kp(t,s[d])),u.push(s[d+1]);const c=[],l=ao.empty();for(let d=a.length-1;d>=0;--d)if(!Xp(c,a[d])){const e=a[d];let t=u[d];t=(0,qe.m9)(t);const n=o.$a(e);if(t instanceof Mp)c.push(e);else{const r=Zp(t,n);null!=r&&(c.push(e),l.set(e,r))}}const h=new Ps(c);return new Np(l,h,o.fieldTransforms)}function Hp(e,t,n,r=!1){return Zp(n,e.Ba(r?4:3,t))}function Zp(e,t){if(Gp(e=(0,qe.m9)(e)))return Wp("Unsupported field value:",t,e),$p(e,t);if(e instanceof Cp)return function(e,t){if(!Op(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Zp(i,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,qe.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qo(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ss.fromDate(e);return{timestampValue:iu(t.N,n)}}if(e instanceof Ss){const n=new Ss(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:iu(t.N,n)}}if(e instanceof Ap)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sp)return{bytesValue:su(t.N,e._byteString)};if(e instanceof cp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:uu(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${ip(e)}`)}(e,t)}function $p(e,t){const n={};return xs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ks(e,(e,r)=>{const i=Zp(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Gp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ss||e instanceof Ap||e instanceof Sp||e instanceof cp||e instanceof Cp)}function Wp(e,t,n){if(!Gp(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ip(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}var r}function Kp(e,t,n){if((t=(0,qe.m9)(t))instanceof Ep)return t._internalPath;if("string"==typeof t)return Yp(e,t);throw Jp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Qp=new RegExp("[~\\*/\\[\\]]");function Yp(e,t,n){if(t.search(Qp)>=0)throw Jp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ep(...t.split("."))._internalPath}catch(r){throw Jp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Jp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new hs(ls.INVALID_ARGUMENT,a+e+u)}function Xp(e,t){return e.some(e=>e.isEqual(t))}class eg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tg extends eg{data(){return super.data()}}function ng(e,t){return"string"==typeof t?Yp(e,t):t instanceof Ep?t._internalPath:t._delegate._internalPath}class rg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ig extends eg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new sg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class sg extends ig{data(e={}){return super.data(e)}}class og{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new sg(this._firestore,this._userDataWriter,n.key,n,new rg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new hs(ls.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new sg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new sg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ag(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ag(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return as()}}function ug(e,t){return e instanceof ig&&t instanceof ig?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof og&&t instanceof og&&e._firestore===t._firestore&&gp(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function cg(e){if(Lo(e)&&0===e.explicitOrderBy.length)throw new hs(ls.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lg{}function hg(e,...t){for(const n of t)e=n._apply(e);return e}class dg extends lg{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=Pp(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new hs(ls.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){_g(o,s);const t=[];for(const n of o)t.push(vg(r,e,n));a={arrayValue:{values:t}}}else a=vg(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||_g(o,s),a=Hp(n,"where",o,"in"===s||"not-in"===s);const u=mo.create(i,s,a);return function(e,t){if(t.v()){const n=Fo(e);if(null!==n&&!n.isEqual(t.field))throw new hs(ls.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Mo(e);null!==r&&wg(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new hs(ls.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new lp(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Oo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class fg extends lg{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new hs(ls.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new hs(ls.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ao(t,n);return function(e,t){if(null===Mo(e)){const n=Fo(e);null!==n&&wg(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new lp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Oo(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class pg extends lg{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new lp(e.firestore,e.converter,qo(e._query,this.Ga,this.za))}}class gg extends lg{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=yg(e,this.type,this.Ha,this.Ja);return new lp(e.firestore,e.converter,(r=t,new Oo((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,r,n.endAt)));var n,r}}class mg extends lg{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=yg(e,this.type,this.Ha,this.Ja);return new lp(e.firestore,e.converter,(r=t,new Oo((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,r)));var n,r}}function yg(e,t,n,r){if(n[0]=(0,qe.m9)(n[0]),n[0]instanceof eg)return function(e,t,n,r,i){if(!r)throw new hs(ls.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of Uo(e))if(o.field.isKeyField())s.push(eo(t,r.key));else{const e=r.data.field(o.field);if(js(e))throw new hs(ls.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new hs(ls.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new So(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Pp(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new hs(ls.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new hs(ls.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Vo(e)&&-1!==s.indexOf("/"))throw new hs(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Os.fromString(s));if(!$s.isDocumentKey(n))throw new hs(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new $s(n);a.push(eo(t,i))}else{const e=Hp(n,r,s);a.push(e)}}return new So(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function vg(e,t,n){if("string"==typeof(n=(0,qe.m9)(n))){if(""===n)throw new hs(ls.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vo(t)&&-1!==n.indexOf("/"))throw new hs(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Os.fromString(n));if(!$s.isDocumentKey(r))throw new hs(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eo(e,new $s(r))}if(n instanceof cp)return eo(e,n._key);throw new hs(ls.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(n)}.`)}function _g(e,t){if(!Array.isArray(e)||0===e.length)throw new hs(ls.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new hs(ls.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function wg(e,t,n){if(!n.isEqual(t))throw new hs(ls.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class bg{convertValue(e,t="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw as()}}convertObject(e,t){const n={};return ks(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Ap(Vs(e.latitude),Vs(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=qs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zs(e));default:return null}}convertTimestamp(e){const t=Fs(e);return new Ss(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Os.fromString(e);us(Du(n));const r=new Jf(n.get(1),n.get(3)),i=new $s(n.popFirst(5));return r.isEqual(t)||is(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Ig(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Tg extends bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cp(this.firestore,null,t)}}class Eg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pp(e)}set(e,t,n){this._verifyNotCommitted();const r=Sg(e,this._firestore),i=Ig(r.converter,t,n),s=Lp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,ha.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=Sg(e,this._firestore);let s;return s="string"==typeof(t=(0,qe.m9)(t))||t instanceof Ep?Bp(this._dataReader,"WriteBatch.update",i._key,t,n,r):zp(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,ha.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sg(e,this._firestore);return this._mutations=this._mutations.concat(new Ea(t._key,ha.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new hs(ls.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sg(e,t){if((e=(0,qe.m9)(e)).firestore!==t)throw new hs(ls.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Cg extends bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cp(this.firestore,null,t)}}function Ag(e){e=sp(e,lp);const t=sp(e.firestore,_p),n=wp(t),r=new Cg(t);return cg(e._query),Qf(n,e._query).then(n=>new og(t,r,e,n))}function kg(e,t,n){e=sp(e,cp);const r=sp(e.firestore,_p),i=Ig(e.converter,t,n);return Og(r,[Lp(Pp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ha.none())])}function xg(e,t,n,...r){e=sp(e,cp);const i=sp(e.firestore,_p),s=Pp(i);let o;return o="string"==typeof(t=(0,qe.m9)(t))||t instanceof Ep?Bp(s,"updateDoc",e._key,t,n,r):zp(s,"updateDoc",e._key,t),Og(i,[o.toMutation(e._key,ha.exists(!0))])}function Ng(e,...t){var n,r,i;e=(0,qe.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||yp(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(yp(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,c,l;if(e instanceof cp)c=sp(e.firestore,_p),l=Do(e._key.path),u={next:n=>{t[o]&&t[o](Rg(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=sp(e,lp);c=sp(n.firestore,_p),l=n._query;const r=new Cg(c);u={next:e=>{t[o]&&t[o](new og(c,r,n,e))},error:t[o+1],complete:t[o+2]},cg(e._query)}return function(e,t,n,r){const i=new Nf(r),s=new bd(t,i,n);return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return pd(yield Gf(e),s)})),()=>{i.Xo(),e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return md(yield Gf(e),s)}))}}(wp(c),l,a,u)}function Og(e,t){return function(e,t){const n=new ds;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(e,t,n){return Vd.apply(this,arguments)}(yield $f(e),t,n)})),n.promise}(wp(e),t)}function Rg(e,t,n){const r=n.docs.get(t._key),i=new Cg(e);return new ig(e,i,t._key,r,new rg(n.hasPendingWrites,n.fromCache),t.converter)}class Dg extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pp(e)}get(e){const t=Sg(e,this._firestore),n=new Tg(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return as();const r=e[0];if(r.isFoundDocument())return new eg(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new eg(this._firestore,n,t._key,null,t.converter);throw as()})}set(e,t,n){const r=Sg(e,this._firestore),i=Ig(r.converter,t,n),s=Lp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=Sg(e,this._firestore);let s;return s="string"==typeof(t=(0,qe.m9)(t))||t instanceof Ep?Bp(this._dataReader,"Transaction.update",i._key,t,n,r):zp(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=Sg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sg(e,this._firestore),n=new Cg(this._firestore);return super.get(e).then(e=>new ig(this._firestore,n,t._key,e._document,new rg(!1,!1),t.converter))}}function Pg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new hs("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Lg(){if("undefined"==typeof Uint8Array)throw new hs("unimplemented","Uint8Arrays are not available in this environment.")}function Mg(){if("undefined"==typeof atob)throw new hs("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(e){es=e})(Ve.SDK_VERSION),(0,Ve._registerComponent)(new Ue.wA("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new _p(n,new ms(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r},"PUBLIC")),(0,Ve.registerVersion)("@firebase/firestore","3.0.2",void 0);class Fg{constructor(e){this._delegate=e}static fromBase64String(e){return Mg(),new Fg(Sp.fromBase64String(e))}static fromUint8Array(e){return Lg(),new Fg(Sp.fromUint8Array(e))}toBase64(){return Mg(),this._delegate.toBase64()}toUint8Array(){return Lg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Vg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Ug{enableIndexedDbPersistence(e,t){return function(e,t){Tp(e=sp(e,_p));const n=wp(e),r=e._freezeSettings(),i=new kf;return Ip(n,i,new Cf(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Tp(e=sp(e,_p));const t=wp(e),n=e._freezeSettings(),r=new kf;return Ip(t,r,new Af(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new hs(ls.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ds;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Fe.Z)(function*(){try{yield(n=(0,Fe.Z)(function*(e){if(!sc.bt())return Promise.resolve();const t=e+"main";yield sc.delete(t)}),function(e){return n.apply(this,arguments)})(yl(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}var n})),t.promise}(e._delegate)}}class jg{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ss("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=sp(e,up))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&ss("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Xi.MOCK_USER;else{t=(0,qe.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new hs(ls.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Xi(s)}e._credentials=new gs(new fs(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Fe.Z)(function*(){const t=yield Bf(e),n=yield Zf(e);return t.setNetworkEnabled(!0),function(e){const t=cs(e);return t.Kr.delete(0),Ih(t)}(n)}))}(wp(e=sp(e,_p)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Fe.Z)(function*(){const t=yield Bf(e),n=yield Zf(e);return t.setNetworkEnabled(!1),(r=(0,Fe.Z)(function*(e){const t=cs(e);t.Kr.add(0),yield Eh(t),t.Wr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(wp(e=sp(e,_p)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,tp("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new ds;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return function(e,t){return Wd.apply(this,arguments)}(yield $f(e),t)})),t.promise}(wp(e=sp(e,_p)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new Nf(t);return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return t=yield Gf(e),r=n,cs(t).Zr.add(r),void r.next();var t,r})),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return t=yield Gf(e),r=n,void cs(t).Zr.delete(r);var t,r}))}}(wp(e=sp(e,_p)),yp(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new hs("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new em(this,dp(this._delegate,e))}catch(t){throw $g(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zg(this,fp(this._delegate,e))}catch(t){throw $g(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yg(this,function(e,t){if(e=sp(e,up),ep("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new hs(ls.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lp(e,null,(n=t,new Oo(Os.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw $g(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new ds;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){const r=yield(i=e,qf(i).then(e=>e.datastore));var i;new Df(e.asyncQueue,r,t,n).run()})),n.promise}(wp(e),n=>t(new Dg(e,n)))}(this._delegate,t=>e(new zg(this,t)))}batch(){return wp(this._delegate),new Bg(new Eg(this._delegate,e=>Og(this._delegate,e)))}loadBundle(e){return function(e,t){const n=wp(e=sp(e,_p)),r=new vp;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,r=function(e,t){if(e instanceof Uint8Array)return xf(e,t);if(e instanceof ArrayBuffer)return xf(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),new Of(r,t);var r}(n,ph(t));e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){!function(e,t,n){const r=cs(e);var i;(i=(0,Fe.Z)(function*(e,t,n){try{const i=yield t.getMetadata();if(yield function(e,t){const n=cs(e),r=au(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,i))return yield t.close(),void n._completeWith((r=i,{taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}));n._updateProgress(Sd(i));const s=new Ed(i,e.localStore,t.N);let o=yield t.Qo();for(;o;){const e=yield s.fo(o);e&&n._updateProgress(e),o=yield t.Qo()}const a=yield s.complete();yield nf(e,a.Tn,void 0),yield function(e,t){const n=cs(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,i),n._completeWith(a.progress)}catch(i){ss("SyncEngine",`Loading bundle failed with ${i}`),n._failWith(i)}var r}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield $f(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Fe.Z)(function*(){return function(e,t){const n=cs(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield Hf(e),t)}))}(wp(e=sp(e,_p)),t).then(t=>t?new lp(e,null,t.query):null)}(this._delegate,e).then(e=>e?new Yg(this,e):null)}}class qg extends bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fg(new Sp(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zg.forKey(t,this.firestore,null)}}class zg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qg(e)}get(e){const t=tm(e);return this._delegate.get(t).then(e=>new Kg(this._firestore,new ig(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=tm(e);return n?(Pg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=tm(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=tm(e);return this._delegate.delete(t),this}}class Bg{constructor(e){this._delegate=e}set(e,t,n){const r=tm(e);return n?(Pg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=tm(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=tm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hg{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new sg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qg(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Hg.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Hg(e,new qg(e),t),r.set(t,i)),i}}Hg.INSTANCES=new WeakMap;class Zg{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qg(e)}static forPath(e,t,n){if(e.length%2!=0)throw new hs("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zg(t,new cp(t._delegate,n,new $s(e)))}static forKey(e,t,n){return new Zg(t,new cp(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new em(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new em(this.firestore,dp(this._delegate,e))}catch(t){throw $g(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qe.m9)(e))instanceof cp&&pp(this._delegate,e)}set(e,t){t=Pg("DocumentReference.set",t);try{return t?kg(this._delegate,e,t):kg(this._delegate,e)}catch(n){throw $g(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?xg(this._delegate,e):xg(this._delegate,e,t,...n)}catch(r){throw $g(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return Og(sp(e.firestore,_p),[new Ea(e._key,ha.none())])}(this._delegate)}onSnapshot(...e){const t=Gg(e),n=Wg(e,e=>new Kg(this.firestore,new ig(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return Ng(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=sp(e,cp);const t=sp(e.firestore,_p),n=wp(t),r=new Cg(t);return function(e,t){const n=new ds;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return(r=(0,Fe.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=cs(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new hs(ls.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(r){const e=ud(r,`Failed to get document '${t} from cache`);n.reject(e)}}),function(e,t,n){return r.apply(this,arguments)})(yield Hf(e),t,n);var r})),n.promise}(n,e._key).then(n=>new ig(t,r,e._key,n,new rg(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=sp(e,cp);const t=sp(e.firestore,_p);return Kf(wp(t),e._key,{source:"server"}).then(n=>Rg(t,e,n))}(this._delegate):function(e){e=sp(e,cp);const t=sp(e.firestore,_p);return Kf(wp(t),e._key).then(n=>Rg(t,e,n))}(this._delegate),t.then(e=>new Kg(this.firestore,new ig(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new Zg(this.firestore,this._delegate.withConverter(e?Hg.getInstance(this.firestore,e):null))}}function $g(e,t,n){return e.message=e.message.replace(t,n),e}function Gg(e){for(const t of e)if("object"==typeof t&&!Vg(t))return t;return{}}function Wg(e,t){var n,r;let i;return i=Vg(e[0])?e[0]:Vg(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Kg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zg(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ug(this._delegate,e._delegate)}}class Qg extends Kg{data(e){const t=this._delegate.data(e);return function(e,t){e||as()}(void 0!==t),t}}class Yg{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qg(e)}where(e,t,n){try{return new Yg(this.firestore,hg(this._delegate,function(e,t,n){const r=t,i=ng("where",e);return new dg(i,r,n)}(e,t,n)))}catch(r){throw $g(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yg(this.firestore,hg(this._delegate,function(e,t="asc"){const n=t,r=ng("orderBy",e);return new fg(r,n)}(e,t)))}catch(n){throw $g(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yg(this.firestore,hg(this._delegate,function(e){return op("limit",e),new pg("limit",e,"F")}(e)))}catch(t){throw $g(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yg(this.firestore,hg(this._delegate,function(e){return op("limitToLast",e),new pg("limitToLast",e,"L")}(e)))}catch(t){throw $g(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yg(this.firestore,hg(this._delegate,function(...e){return new gg("startAt",e,!0)}(...e)))}catch(t){throw $g(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yg(this.firestore,hg(this._delegate,function(...e){return new gg("startAfter",e,!1)}(...e)))}catch(t){throw $g(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yg(this.firestore,hg(this._delegate,function(...e){return new mg("endBefore",e,!0)}(...e)))}catch(t){throw $g(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yg(this.firestore,hg(this._delegate,function(...e){return new mg("endAt",e,!1)}(...e)))}catch(t){throw $g(t,"endAt()","Query.endAt()")}}isEqual(e){return gp(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=sp(e,lp);const t=sp(e.firestore,_p),n=wp(t),r=new Cg(t);return function(e,t){const n=new ds;return e.asyncQueue.enqueueAndForget((0,Fe.Z)(function*(){return(r=(0,Fe.Z)(function*(e,t,n){try{const r=yield Pl(e,t,!0),i=new kd(t,r.Gn),s=i.Io(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(r){const e=ud(r,`Failed to execute query '${t} against cache`);n.reject(e)}}),function(e,t,n){return r.apply(this,arguments)})(yield Hf(e),t,n);var r})),n.promise}(n,e._query).then(n=>new og(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=sp(e,lp);const t=sp(e.firestore,_p),n=wp(t),r=new Cg(t);return Qf(n,e._query,{source:"server"}).then(n=>new og(t,r,e,n))}(this._delegate):Ag(this._delegate),t.then(e=>new Xg(this.firestore,new og(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=Gg(e),n=Wg(e,e=>new Xg(this.firestore,new og(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return Ng(this._delegate,t,n)}withConverter(e){return new Yg(this.firestore,this._delegate.withConverter(e?Hg.getInstance(this.firestore,e):null))}}class Jg{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Xg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yg(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Qg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new Jg(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Qg(this._firestore,n))})}isEqual(e){return ug(this._delegate,e._delegate)}}class em extends Yg{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zg(this.firestore,e):null}doc(e){try{return new Zg(this.firestore,void 0===e?fp(this._delegate):fp(this._delegate,e))}catch(t){throw $g(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=sp(e.firestore,_p),r=fp(e),i=Ig(e.converter,t);return Og(n,[Lp(Pp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ha.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new Zg(this.firestore,e))}isEqual(e){return pp(this._delegate,e._delegate)}withConverter(e){return new em(this.firestore,this._delegate.withConverter(e?Hg.getInstance(this.firestore,e):null))}}function tm(e){return sp(e,cp)}class nm{constructor(...e){this._delegate=new Ep(...e)}static documentId(){return new nm(Ds.keyField().canonicalString())}isEqual(e){return(e=(0,qe.m9)(e))instanceof Ep&&this._delegate._internalPath.isEqual(e._internalPath)}}class rm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Vp("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new rm(e)}static delete(){const e=new Mp("deleteField");return e._methodName="FieldValue.delete",new rm(e)}static arrayUnion(...e){const t=function(...e){return new Up("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new rm(t)}static arrayRemove(...e){const t=function(...e){return new jp("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new rm(t)}static increment(e){const t=function(e){return new qp("increment",e)}(e);return t._methodName="FieldValue.increment",new rm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const im={Firestore:jg,GeoPoint:Ap,Timestamp:Ss,Blob:Fg,Transaction:zg,WriteBatch:Bg,DocumentReference:Zg,DocumentSnapshot:Kg,Query:Yg,QueryDocumentSnapshot:Qg,QuerySnapshot:Xg,CollectionReference:em,FieldPath:nm,FieldValue:rm,setLogLevel:function(e){!function(e){ts.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){(function(e,t){e.INTERNAL.registerComponent(new Ue.wA("firestore-compat",e=>((e,t)=>new jg(e,t,new Ug))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},im)))})(e),e.registerVersion("@firebase/firestore-compat","0.1.2")}(Me.Z);var sm=n(9765),om=n(6682),am=n(309),um=n(5345);function cm(e,t){return"function"==typeof t?n=>n.pipe(cm((n,r)=>(0,me.D)(e(n,r)).pipe((0,Ae.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new lm(e))}class lm{constructor(e){this.project=e}call(e,t){return t.subscribe(new hm(e,this.project))}}class hm extends um.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new um.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,um.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var dm=n(7771),fm=n(5319),pm=n(7971),gm=n(8858);class mm extends sm.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new ym(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new pm.N;if(this.isStopped||this.hasError?s=fm.w.EMPTY:(this.observers.push(e),s=new gm.W(this,e)),r&&e.add(e=new am.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||dm.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class ym{constructor(e,t){this.time=e,this.value=t}}function vm(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new mm(e,t,r),l=i.subscribe(this),s=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}const _m=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),wm=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();var bm=n(9193);function Im(e){return t=>0===e?(0,bm.c)():t.lift(new Tm(e))}class Tm{constructor(e){if(this.total=e,this.total<0)throw new wm}call(e,t){return t.subscribe(new Em(e,this.total))}}class Em extends Te.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function Sm(e=null){return t=>t.lift(new Cm(e))}class Cm{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Am(e,this.defaultValue))}}class Am extends Te.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function km(e=Om){return t=>t.lift(new xm(e))}class xm{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Nm(e,this.errorFactory))}}class Nm extends Te.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Om(){return new _m}var Rm=n(4487);function Dm(e,t){const n=arguments.length>=2;return r=>r.pipe(e?De((t,n)=>e(t,n,r)):Rm.y,Im(1),n?Sm(t):km(()=>new _m))}function Pm(e,t){return t?cm(()=>e,t):cm(()=>e)}var Lm=n(3101),Mm=n(7841);const Fm=new r.OlP("angularfire2.auth.use-emulator"),Vm=new r.OlP("angularfire2.auth.settings"),Um=new r.OlP("angularfire2.auth.tenant-id"),jm=new r.OlP("angularfire2.auth.langugage-code"),qm=new r.OlP("angularfire2.auth.use-device-language"),zm=new r.OlP("angularfire.auth.persistence"),Bm=(e,t,n,r,i,s,o,a)=>(0,ve.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const u=t.runOutsideAngular(()=>e.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))u.settings[e]=t;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let Hm=(()=>{class e{constructor(e,t,r,i,s,o,a,u,c,l,h){const d=new sm.xQ,f=(0,ye.of)(void 0).pipe((0,am.QV)(s.outsideAngular),cm(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,6780)))),(0,Ae.U)(()=>(0,fe.on)(e,i,t)),(0,Ae.U)(e=>Bm(e,i,o,u,c,l,a,h)),vm({bufferSize:1,refCount:!1}));if(D(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ye.of)(null);else{f.pipe(Dm()).subscribe();const e=f.pipe(cm(e=>e.getRedirectResult().then(e=>e,()=>null)),ve.iC,vm({bufferSize:1,refCount:!1})),t=f.pipe(cm(e=>new ge.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=f.pipe(cm(e=>new ge.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(Pm(t),(0,Lm.R)(s.outsideAngular),(0,am.QV)(s.insideAngular)),this.user=e.pipe(Pm(n),(0,Lm.R)(s.outsideAngular),(0,am.QV)(s.insideAngular)),this.idToken=this.user.pipe(cm(e=>e?(0,me.D)(e.getIdToken()):(0,ye.of)(null))),this.idTokenResult=this.user.pipe(cm(e=>e?(0,me.D)(e.getIdTokenResult()):(0,ye.of)(null))),this.credential=(0,om.T)(e,d,this.authState.pipe(De(e=>!e))).pipe((0,Ae.U)(e=>(null==e?void 0:e.user)?e:null),(0,Lm.R)(s.outsideAngular),(0,am.QV)(s.insideAngular))}return(0,fe.pX)(this,f,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>d.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(fe.Dh),r.LFG(fe.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ve.HU),r.LFG(Fm,8),r.LFG(Vm,8),r.LFG(Um,8),r.LFG(jm,8),r.LFG(qm,8),r.LFG(zm,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();function Zm(e,t){return function(e,t=pe.z){return new ge.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function $m(e,t){return Zm(e,t).pipe((0,Ae.U)(e=>({payload:e,type:"query"})))}function Gm(e,t){return $m(e,t).pipe(Ie(void 0),Ee(),(0,Ae.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function Wm(e,t,n){return Gm(e,n).pipe(ke((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return Km(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return Km(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Km(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),e=>e.lift(new Oe(void 0,void 0)),(0,Ae.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function Km(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function Qm(e){return(!e||0===e.length)&&(e=["added","removed","modified"]),e}class Ym{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=Gm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ae.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(Ie(void 0),Ee(),De(([e,t])=>t.length>0||!e),(0,Ae.U)(([e,t])=>t),ve.iC)}auditTrail(e){return this.stateChanges(e).pipe(ke((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Qm(e);return Wm(this.query,t,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return $m(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ae.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),ve.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ve.iC)}add(e){return this.ref.add(e)}doc(e){return new Jm(this.ref.doc(e),this.afs)}}class Jm{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=iy(n,t);return new Ym(r,i,this.afs)}snapshotChanges(){return function(e,t){return Zm(e,t).pipe(Ie(void 0),Ee(),(0,Ae.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ae.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,me.D)(this.ref.get(e)).pipe(ve.iC)}}class Xm{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Gm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ae.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),De(e=>e.length>0),ve.iC):Gm(this.query,this.afs.schedulers.outsideAngular).pipe(ve.iC)}auditTrail(e){return this.stateChanges(e).pipe(ke((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=Qm(e);return Wm(this.query,t,this.afs.schedulers.outsideAngular).pipe(ve.iC)}valueChanges(e={}){return $m(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ae.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),ve.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ve.iC)}}const ey=new r.OlP("angularfire2.enableFirestorePersistence"),ty=new r.OlP("angularfire2.firestore.persistenceSettings"),ny=new r.OlP("angularfire2.firestore.settings"),ry=new r.OlP("angularfire2.firestore.use-emulator");function iy(e,t=(e=>e)){return{query:t(e),ref:e}}let sy=(()=>{class e{constructor(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,g){this.schedulers=o;const m=(0,fe.on)(e,s,t),y=u;c&&Bm(m,s,l,d,f,p,h,g),[this.firestore,this.persistenceEnabled$]=(0,ve.cc)(`${m.name}.firestore`,"AngularFirestore",m.name,()=>{const e=s.runOutsideAngular(()=>m.firestore());if(r&&e.settings(r),y&&e.useEmulator(...y),n&&!D(i)){const t=()=>{try{return(0,me.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,ye.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,ye.of)(!1)]},[r,y,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=iy(n,t),s=this.schedulers.ngZone.run(()=>r);return new Ym(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new Xm(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new Jm(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(fe.Dh),r.LFG(fe.xv,8),r.LFG(ey,8),r.LFG(ny,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ve.HU),r.LFG(ty,8),r.LFG(ry,8),r.LFG(Hm,8),r.LFG(Fm,8),r.LFG(Vm,8),r.LFG(Um,8),r.LFG(jm,8),r.LFG(qm,8),r.LFG(zm,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),oy=(()=>{class e{constructor(){Mm.Z.registerVersion("angularfire",ve.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:ey,useValue:!0},{provide:ty,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[sy]}),e})();class ay extends sm.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new pm.N;return this._value}next(e){super.next(this._value=e)}}var uy=n(9796);class cy extends Te.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class ly extends Te.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var hy=n(7444);function dy(e,t,n,r,i=new ly(e,n,r)){if(!i.closed)return t instanceof ge.y?t.subscribe(i):(0,hy.s)(t)(i)}var fy=n(6693);const py={};class gy{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new my(e,this.resultSelector))}}class my extends cy{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(py),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(dy(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===py?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}function yy(e){return new ge.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,me.D)(n):(0,bm.c)()).subscribe(t)})}var vy=n(2441);function _y(e){return function(t){const n=new wy(e),r=t.lift(n);return n.caught=r}}class wy{constructor(e){this.selector=e}call(e,t){return t.subscribe(new by(e,this.selector,this.caught))}}class by extends um.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new um.IY(this);this.add(r);const i=(0,um.ft)(n,r);i!==r&&this.add(i)}}}var Iy=n(9773);function Ty(e,t){return(0,Iy.zg)(e,t,1)}function Ey(e){return function(t){return 0===e?(0,bm.c)():t.lift(new Sy(e))}}class Sy{constructor(e){if(this.total=e,this.total<0)throw new wm}call(e,t){return t.subscribe(new Cy(e,this.total))}}class Cy extends Te.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}var Ay=n(3342),ky=n(1307);class xy{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Ny(e,this.callback))}}class Ny extends Te.L{constructor(e,t){super(e),this.add(new fm.w(t))}}class Oy{constructor(e,t){this.id=e,this.url=t}}class Ry extends Oy{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dy extends Oy{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Py extends Oy{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ly extends Oy{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class My extends Oy{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fy extends Oy{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vy extends Oy{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uy extends Oy{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jy extends Oy{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qy{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zy{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class By{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hy{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zy{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $y{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gy{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wy="primary";class Ky{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qy(e){return new Ky(e)}const Yy="ngNavigationCancelingError";function Jy(e){const t=Error("NavigationCancelingError: "+e);return t[Yy]=!0,t}function Xy(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function ev(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!tv(e[i],t[i]))return!1;return!0}function tv(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function nv(e){return Array.prototype.concat.apply([],e)}function rv(e){return e.length>0?e[e.length-1]:null}function iv(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function sv(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,me.D)(Promise.resolve(e)):(0,ye.of)(e)}const ov={exact:function e(t,n,r){if(!gv(t.segments,n.segments)||!hv(t.segments,n.segments,r)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!e(t.children[i],n.children[i],r))return!1;return!0},subset:cv},av={exact:function(e,t){return ev(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>tv(e[n],t[n]))},ignored:()=>!0};function uv(e,t,n){return ov[n.paths](e.root,t.root,n.matrixParams)&&av[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function cv(e,t,n){return lv(e,t,t.segments,n)}function lv(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!gv(i,n)||t.hasChildren()||!hv(i,n,r))}if(e.segments.length===n.length){if(!gv(e.segments,n)||!hv(e.segments,n,r))return!1;for(const n in t.children)if(!e.children[n]||!cv(e.children[n],t.children[n],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(gv(e.segments,i)&&hv(e.segments,i,r)&&e.children[Wy])&&lv(e.children[Wy],t,s,r)}}function hv(e,t,n){return t.every((t,r)=>av[n](e[r].parameters,t.parameters))}class dv{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qy(this.queryParams)),this._queryParamMap}toString(){return vv.serialize(this)}}class fv{constructor(e,t){this.segments=e,this.children=t,this.parent=null,iv(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _v(this)}}class pv{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qy(this.parameters)),this._parameterMap}toString(){return Cv(this)}}function gv(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class mv{}class yv{parse(e){const t=new Ov(e);return new dv(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${wv(e.root,!0)}`,n=function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${Iv(t)}=${Iv(e)}`).join("&"):`${Iv(t)}=${Iv(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams),r="string"==typeof e.fragment?`#${function(e){return encodeURI(e)}(e.fragment)}`:"";return`${t}${n}${r}`}}const vv=new yv;function _v(e){return e.segments.map(e=>Cv(e)).join("/")}function wv(e,t){if(!e.hasChildren())return _v(e);if(t){const t=e.children[Wy]?wv(e.children[Wy],!1):"",n=[];return iv(e.children,(e,t)=>{t!==Wy&&n.push(`${t}:${wv(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return iv(e.children,(e,r)=>{r===Wy&&(n=n.concat(t(e,r)))}),iv(e.children,(e,r)=>{r!==Wy&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===Wy?[wv(e.children[Wy],!1)]:[`${n}:${wv(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Wy]?`${_v(e)}/${t[0]}`:`${_v(e)}/(${t.join("//")})`}}function bv(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Iv(e){return bv(e).replace(/%3B/gi,";")}function Tv(e){return bv(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ev(e){return decodeURIComponent(e)}function Sv(e){return Ev(e.replace(/\+/g,"%20"))}function Cv(e){return`${Tv(e.path)}${function(e){return Object.keys(e).map(t=>`;${Tv(t)}=${Tv(e[t])}`).join("")}(e.parameters)}`}const Av=/^[^\/()?;=#]+/;function kv(e){const t=e.match(Av);return t?t[0]:""}const xv=/^[^=?&#]+/,Nv=/^[^?&#]+/;class Ov{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fv([],{}):new fv([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Wy]=new fv(e,t)),n}parseSegment(){const e=kv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new pv(Ev(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=kv(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=kv(this.remaining);e&&(n=e,this.capture(n))}e[Ev(t)]=Ev(n)}parseQueryParam(e){const t=function(e){const t=e.match(xv);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Nv);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=Sv(t),i=Sv(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=kv(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Wy);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[Wy]:new fv([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Rv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Dv(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Dv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Pv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Pv(e,this._root).map(e=>e.value)}}function Dv(e,t){if(e===t.value)return t;for(const n of t.children){const t=Dv(e,n);if(t)return t}return null}function Pv(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Pv(e,n);if(r.length)return r.unshift(t),r}return[]}class Lv{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mv(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Fv extends Rv{constructor(e,t){super(e),this.snapshot=t,Bv(this,e)}toString(){return this.snapshot.toString()}}function Vv(e,t){const n=function(e,t){const n=new qv([],{},{},"",{},Wy,t,null,e.root,-1,{});return new zv("",new Lv(n,[]))}(e,t),r=new ay([new pv("",{})]),i=new ay({}),s=new ay({}),o=new ay({}),a=new ay(""),u=new Uv(r,i,o,a,s,Wy,t,n.root);return u.snapshot=n.root,new Fv(new Lv(u,[]),n)}class Uv{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ae.U)(e=>Qy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ae.U)(e=>Qy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jv(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class qv{constructor(e,t,n,r,i,s,o,a,u,c,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zv extends Rv{constructor(e,t){super(t),this.url=e,Bv(this,t)}toString(){return Hv(this._root)}}function Bv(e,t){t.value._routerState=e,t.children.forEach(t=>Bv(e,t))}function Hv(e){const t=e.children.length>0?` { ${e.children.map(Hv).join(", ")} } `:"";return`${e.value}${t}`}function Zv(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ev(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),ev(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ev(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),ev(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function $v(e,t){const n=ev(e.params,t.params)&&function(e,t){return gv(e,t)&&e.every((e,n)=>ev(e.parameters,t[n].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||$v(e.parent,t.parent))}function Gv(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return Gv(e,t,r);return Gv(e,t)})}(e,t,n);return new Lv(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return Wv(t,e),e}}const n=function(e){return new Uv(new ay(e.url),new ay(e.params),new ay(e.queryParams),new ay(e.fragment),new ay(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(t=>Gv(e,t));return new Lv(n,r)}}function Wv(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)Wv(e.children[n],t.children[n])}function Kv(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Qv(e){return"object"==typeof e&&null!=e&&e.outlets}function Yv(e,t,n,r,i){let s={};return r&&iv(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new dv(n.root===e?t:Jv(n.root,e,t),s,i)}function Jv(e,t,n){const r={};return iv(e.children,(e,i)=>{r[i]=e===t?n:Jv(e,t,n)}),new fv(e.segments,r)}class Xv{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Kv(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Qv);if(r&&r!==rv(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class e_{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function t_(e,t,n){if(e||(e=new fv([],{})),0===e.segments.length&&e.hasChildren())return n_(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(Qv(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!o_(a,u,t))return s;r+=2}else{if(!o_(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new fv(e.segments.slice(0,r.pathIndex),{});return t.children[Wy]=new fv(e.segments.slice(r.pathIndex),e.children),n_(t,0,i)}return r.match&&0===i.length?new fv(e.segments,{}):r.match&&!e.hasChildren()?r_(e,t,n):r.match?n_(e,0,i):r_(e,t,n)}function n_(e,t,n){if(0===n.length)return new fv(e.segments,{});{const r=function(e){return Qv(e[0])?e[0].outlets:{[Wy]:e}}(n),i={};return iv(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=t_(e.children[r],t,n))}),iv(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new fv(e.segments,i)}}function r_(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(Qv(s)){const e=i_(s.outlets);return new fv(r,e)}if(0===i&&Kv(n[0])){r.push(new pv(e.segments[t].path,s_(n[0]))),i++;continue}const o=Qv(s)?s.outlets[Wy]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Kv(a)?(r.push(new pv(o,s_(a))),i+=2):(r.push(new pv(o,{})),i++)}return new fv(r,{})}function i_(e){const t={};return iv(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=r_(new fv([],{}),0,e))}),t}function s_(e){const t={};return iv(e,(e,n)=>t[n]=`${e}`),t}function o_(e,t,n){return e==n.path&&ev(t,n.parameters)}class a_{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Zv(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Mv(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),iv(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Mv(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Mv(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new $y(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Hy(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Zv(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),u_(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function u_(e){Zv(e.value),e.children.forEach(u_)}class c_{constructor(e,t){this.routes=e,this.module=t}}function l_(e){return"function"==typeof e}function h_(e){return e instanceof dv}const d_=Symbol("INITIAL_VALUE");function f_(){return cm(e=>function(...e){let t,n;return(0,be.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,uy.k)(e[0])&&(e=e[0]),(0,fy.n)(e,n).lift(new gy(t))}(e.map(e=>e.pipe(Im(1),Ie(d_)))).pipe(ke((e,t)=>{let n=!1;return t.reduce((e,r,i)=>e!==d_?e:(r===d_&&(n=!0),n||!1!==r&&i!==t.length-1&&!h_(r)?e:r),e)},d_),De(e=>e!==d_),(0,Ae.U)(e=>h_(e)?e:!0===e),Im(1)))}let p_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[hw]},encapsulation:2}),e})();function g_(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];m_(r,y_(t,r))}}function m_(e,t){e.children&&g_(e.children,t)}function y_(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function v_(e){const t=e.children&&e.children.map(v_),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Wy&&(n.component=p_),n}function __(e){return e.outlet||Wy}function w_(e,t){const n=e.filter(e=>__(e)===t);return n.push(...e.filter(e=>__(e)!==t)),n}const b_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function I_(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},b_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||Xy)(n,e,t);if(!i)return Object.assign({},b_);const s={};iv(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function T_(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>E_(e,t,n)&&__(n)!==Wy)}(e,n,r)){const i=new fv(t,function(e,t,n,r){const i={};i[Wy]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&__(s)!==Wy){const n=new fv([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[__(s)]=n}return i}(e,t,r,new fv(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>E_(e,t,n))}(e,n,r)){const s=new fv(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(E_(e,n,a)&&!i[__(a)]){const n=new fv([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[__(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new fv(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function E_(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function S_(e,t,n,r){return!!(__(e)===r||r!==Wy&&E_(t,n,e))&&("**"===e.path||I_(t,e,n).matched)}function C_(e,t,n){return 0===t.length&&!e.children[n]}class A_{constructor(e){this.segmentGroup=e||null}}class k_{constructor(e){this.urlTree=e}}function x_(e){return new ge.y(t=>t.error(new A_(e)))}function N_(e){return new ge.y(t=>t.error(new k_(e)))}function O_(e){return new ge.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class R_{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=T_(this.urlTree.root,[],[],this.config).segmentGroup,t=new fv(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Wy).pipe((0,Ae.U)(e=>this.createUrlTree(D_(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_y(e=>{if(e instanceof k_)return this.allowRedirects=!1,this.match(e.urlTree);throw e instanceof A_?this.noMatchError(e):e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Wy).pipe((0,Ae.U)(t=>this.createUrlTree(D_(t),e.queryParams,e.fragment))).pipe(_y(e=>{throw e instanceof A_?this.noMatchError(e):e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new fv([],{[Wy]:e}):e;return new dv(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Ae.U)(e=>new fv([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,me.D)(r).pipe(Ty(r=>{const i=n.children[r],s=w_(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,Ae.U)(e=>({segment:e,outlet:r})))}),ke((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?De((t,n)=>e(t,n,r)):Rm.y,Ey(1),n?Sm(t):km(()=>new _m))}())}expandSegment(e,t,n,r,i,s){return(0,me.D)(n).pipe(Ty(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(_y(e=>{if(e instanceof A_)return(0,ye.of)(null);throw e}))),Dm(e=>!!e),_y((e,n)=>{if(e instanceof _m||"EmptyError"===e.name){if(C_(t,r,i))return(0,ye.of)(new fv([],{}));throw new A_(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return S_(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):x_(t):x_(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?N_(i):this.lineralizeSegments(n,i).pipe((0,Iy.zg)(n=>{const i=new fv(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=I_(t,r,i);if(!o)return x_(t);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?N_(l):this.lineralizeSegments(r,l).pipe((0,Iy.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,ye.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Ae.U)(e=>(n._loadedConfig=e,new fv(r,{})))):(0,ye.of)(new fv(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=I_(t,n,r);if(!s)return x_(t);const u=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,Iy.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:c}=T_(t,o,u,s),l=new fv(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Ae.U)(e=>new fv(o,e)));if(0===s.length&&0===c.length)return(0,ye.of)(new fv(o,{}));const h=__(n)===i;return this.expandSegment(r,l,s,c,h?Wy:i,!0).pipe((0,Ae.U)(e=>new fv(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,ye.of)(new c_(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ye.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Iy.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,Ae.U)(e=>(t._loadedConfig=e,e))):function(e){return new ge.y(t=>t.error(Jy(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,ye.of)(new c_([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,ye.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&l_(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!l_(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return sv(s)});return(0,ye.of)(i).pipe(f_(),(0,Ay.b)(e=>{if(!h_(e))return;const t=Jy(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,Ae.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,ye.of)(n);if(r.numberOfChildren>1||!r.children[Wy])return O_(e.redirectTo);r=r.children[Wy]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new dv(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return iv(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return iv(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new fv(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function D_(e){const t={};for(const n of Object.keys(e.children)){const r=D_(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children[Wy]){const t=e.children[Wy];return new fv(e.segments.concat(t.segments),t.children)}return e}(new fv(e.segments,t))}class P_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class L_{constructor(e,t){this.component=e,this.route=t}}function M_(e,t,n){const r=e._root;return V_(r,t?t._root:null,n,[r.value])}function F_(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function V_(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mv(t);return e.children.forEach(e=>{(function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!gv(e.url,t.url);case"pathParamsOrQueryParamsChange":return!gv(e.url,t.url)||!ev(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$v(e,t)||!ev(e.queryParams,t.queryParams);default:return!$v(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new P_(r)):(s.data=o.data,s._resolvedData=o._resolvedData),V_(e,t,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new L_(a.outlet.component,o))}else o&&U_(t,a,i),i.canActivateChecks.push(new P_(r)),V_(e,null,s.component?a?a.children:null:n,r,i)})(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),iv(s,(e,t)=>U_(e,n.getContext(t),i)),i}function U_(e,t,n){const r=Mv(e),i=e.value;iv(r,(e,r)=>{U_(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new L_(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class j_{}function q_(e){return new ge.y(t=>t.error(e))}class z_{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=T_(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Wy);if(null===t)return null;const n=new qv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wy,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Lv(n,t),i=new zv(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=jv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=w_(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=H_(n);return function(e){e.sort((e,t)=>e.value.outlet===Wy?-1:t.value.outlet===Wy?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return C_(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!S_(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?rv(n).parameters:{};i=new qv(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,G_(e),__(e),e.component,e,Z_(t),$_(t)+n.length,W_(e))}else{const r=I_(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new qv(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,G_(e),__(e),e.component,e,Z_(t),$_(t)+s.length,W_(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:u,slicedSegments:c}=T_(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const e=this.processChildren(a,u);return null===e?null:[new Lv(i,e)]}if(0===a.length&&0===c.length)return[new Lv(i,[])];const l=__(e)===r,h=this.processSegment(a,u,c,l?Wy:r);return null===h?null:[new Lv(i,h)]}}function B_(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function H_(e){const t=[],n=new Set;for(const r of e){if(!B_(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=H_(r.children);t.push(new Lv(r.value,e))}return t.filter(e=>!n.has(e))}function Z_(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function $_(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function G_(e){return e.data||{}}function W_(e){return e.resolve||{}}function K_(e){return cm(t=>{const n=e(t);return n?(0,me.D)(n).pipe((0,Ae.U)(()=>t)):(0,ye.of)(t)})}class Q_ extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Y_=new r.OlP("ROUTES");class J_{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,Ae.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new c_(nv(i.injector.get(Y_,void 0,r.XFs.Self|r.XFs.Optional)).map(v_),i)}),_y(e=>{throw t._loader$=void 0,e}));return t._loader$=new vy.c(n,()=>new sm.xQ).pipe((0,ky.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,me.D)(this.loader.load(e)):sv(e()).pipe((0,Iy.zg)(e=>e instanceof r.YKP?(0,ye.of)(e):(0,me.D)(this.compiler.compileModuleAsync(e))))}}class X_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ew,this.attachRef=null}}class ew{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new X_,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class tw{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function nw(e){throw e}function rw(e,t,n){return t.parse("/")}function iw(e,t){return(0,ye.of)(null)}const sw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ow={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let aw=(()=>{class e{constructor(e,t,n,i,s,o,a,u){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new sm.xQ,this.errorHandler=nw,this.malformedUriErrorHandler=rw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:iw,afterPreactivation:iw},this.urlHandlingStrategy=new tw,this.routeReuseStrategy=new Q_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const c=s.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new dv(new fv([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new J_(o,a,e=>this.triggerEvent(new qy(e)),e=>this.triggerEvent(new zy(e))),this.routerState=Vv(this.currentUrlTree,this.rootComponentType),this.transitions=new ay({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe(De(e=>0!==e.id),(0,Ae.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),cm(e=>{let n=!1,r=!1;return(0,ye.of)(e).pipe((0,Ay.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),cm(e=>{const n=this.browserUrlTree.toString(),i=!this.navigated||e.extractedUrl.toString()!==n||n!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||i)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return uw(e.source)&&(this.browserUrlTree=e.extractedUrl),(0,ye.of)(e).pipe(cm(e=>{const n=this.transitions.getValue();return t.next(new Ry(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?bm.E:Promise.resolve(e)}),function(e,t,n,r){return cm(i=>function(e,t,n,r,i){return new R_(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe((0,Ae.U)(e=>Object.assign(Object.assign({},i),{urlAfterRedirects:e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ay.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,i,s){return(0,Iy.zg)(o=>function(e,t,n,i,s="emptyOnly",o="legacy"){try{const r=new z_(e,t,n,i,s,o).recognize();return null===r?q_(new j_):(0,ye.of)(r)}catch(r){return q_(r)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),i,s).pipe((0,Ae.U)(e=>Object.assign(Object.assign({},o),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ay.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new My(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(i&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new Ry(n,this.serializeUrl(r),i,s);t.next(a);const u=Vv(r,this.rootComponentType).snapshot;return(0,ye.of)(Object.assign(Object.assign({},e),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),bm.E}),K_(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Ay.b)(e=>{const t=new Fy(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,Ae.U)(e=>Object.assign(Object.assign({},e),{guards:M_(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,Iy.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,ye.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,me.D)(e).pipe((0,Iy.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,ye.of)(!0);const o=s.map(s=>{const o=F_(s,t,i);let a;if(function(e){return e&&l_(e.canDeactivate)}(o))a=sv(o.canDeactivate(e,t,n,r));else{if(!l_(o))throw new Error("Invalid CanDeactivate guard");a=sv(o(e,t,n,r))}return a.pipe(Dm())});return(0,ye.of)(o).pipe(f_())}(e.component,e.route,n,t,r)),Dm(e=>!0!==e,!0))}(o,r,i,e).pipe((0,Iy.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,me.D)(t).pipe(Ty(t=>we(function(e,t){return null!==e&&t&&t(new By(e)),(0,ye.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Zy(e)),(0,ye.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>yy(()=>{const i=t.guards.map(i=>{const s=F_(i,t.node,n);let o;if(function(e){return e&&l_(e.canActivateChild)}(s))o=sv(s.canActivateChild(r,e));else{if(!l_(s))throw new Error("Invalid CanActivateChild guard");o=sv(s(r,e))}return o.pipe(Dm())});return(0,ye.of)(i).pipe(f_())}));return(0,ye.of)(i).pipe(f_())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ye.of)(!0);const i=r.map(r=>yy(()=>{const i=F_(r,t,n);let s;if(function(e){return e&&l_(e.canActivate)}(i))s=sv(i.canActivate(t,e));else{if(!l_(i))throw new Error("Invalid CanActivate guard");s=sv(i(t,e))}return s.pipe(Dm())}));return(0,ye.of)(i).pipe(f_())}(e,t.route,n))),Dm(e=>!0!==e,!0))}(r,s,e,t):(0,ye.of)(n)),(0,Ae.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,Ay.b)(e=>{if(h_(e.guardsResult)){const t=Jy(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new Vy(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),De(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),K_(e=>{if(e.guards.canActivateChecks.length)return(0,ye.of)(e).pipe((0,Ay.b)(e=>{const t=new Uy(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),cm(e=>{let t=!1;return(0,ye.of)(e).pipe(function(e,t){return(0,Iy.zg)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return(0,ye.of)(n);let s=0;return(0,me.D)(i).pipe(Ty(n=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,ye.of)({});const s={};return(0,me.D)(i).pipe((0,Iy.zg)(i=>function(e,t,n,r){const i=F_(e,t,r);return sv(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Ay.b)(e=>{s[i]=e}))),Ey(1),(0,Iy.zg)(()=>Object.keys(s).length===i.length?(0,ye.of)(s):bm.E))}(e._resolve,e,t,r).pipe((0,Ae.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),jv(e,n).resolve),null)))}(n.route,r,e,t)),(0,Ay.b)(()=>s++),Ey(1),(0,Iy.zg)(e=>s===i.length?(0,ye.of)(n):bm.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ay.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,Ay.b)(e=>{const t=new jy(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),K_(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Ae.U)(e=>{const t=function(e,t,n){const r=Gv(e,t._root,n?n._root:void 0);return new Fv(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,Ay.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(e.urlAfterRedirects,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),((e,t,n)=>(0,Ae.U)(r=>(new a_(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),(0,Ay.b)({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new xy(e))}(()=>{var t;if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}(null===(t=this.currentNavigation)||void 0===t?void 0:t.id)===e.id&&(this.currentNavigation=null)}),_y(n=>{if(r=!0,function(e){return e&&e[Yy]}(n)){const r=h_(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new Py(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree),r={skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uw(e.source)};this.scheduleNavigation(t,"imperative",null,r,{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new Ly(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}return bm.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return t.transitionId!==e.transitionId||!n||!("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){g_(e),this.config=e.map(v_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(e,t,n,r,i){if(0===n.length)return Yv(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Xv(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return iv(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Xv(n,t,r)}(n);if(s.toRoot())return Yv(t.root,new fv([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new e_(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new e_(e,e===t.root,0)}const r=Kv(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new e_(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?n_(o.segmentGroup,o.index,s.commands):t_(o.segmentGroup,o.index,s.commands);return Yv(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,c,null!=u?u:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=h_(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},sw):!1===t?Object.assign({},ow):t,h_(e))return uv(this.currentUrlTree,e,n);const r=this.parseUrl(e);return uv(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Dy(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u=uw(t)&&a&&!uw(a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{l=e,h=t});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new Py(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(mv),r.LFG(ew),r.LFG(b),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function uw(e){return"imperative"!==e}let cw=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new sm.xQ,this.subscription=e.events.subscribe(e=>{e instanceof Dy&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,i){if(0!==e||t||n||r||i||"string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:lw(this.skipLocationChange),replaceUrl:lw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lw(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(aw),r.Y36(Uv),r.Y36(m))},e.\u0275dir=r.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(r.Ikx("href",t.href,r.LSH),r.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),e})();function lw(e){return""===e||!!e}let hw=(()=>{class e{constructor(e,t,n,i,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Wy,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new dw(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(ew),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class dw{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Uv?this.route:e===ew?this.childContexts:this.parent.get(e,t)}}class fw{}class pw{preload(e,t){return(0,ye.of)(null)}}let gw=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new J_(t,n,t=>e.triggerEvent(new qy(t)),t=>e.triggerEvent(new zy(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(De(e=>e instanceof Dy),Ty(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,me.D)(n).pipe((0,_e.J)(),(0,Ae.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,ye.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,Iy.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(aw),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(fw))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),mw=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ry?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Dy&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Gy&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Gy(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(aw),r.LFG(P),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const yw=new r.OlP("ROUTER_CONFIGURATION"),vw=new r.OlP("ROUTER_FORROOT_GUARD"),_w=[b,{provide:mv,useClass:yv},{provide:aw,useFactory:function(e,t,n,r,i,s,o,a={},u,c){const l=new aw(null,e,t,n,r,i,s,nv(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[mv,ew,b,r.zs3,r.v3s,r.Sil,Y_,yw,[class{},new r.FiY],[class{},new r.FiY]]},ew,{provide:Uv,useFactory:function(e){return e.routerState.root},deps:[aw]},{provide:r.v3s,useClass:r.EAV},gw,pw,class{preload(e,t){return t().pipe(_y(()=>(0,ye.of)(null)))}},{provide:yw,useValue:{enableTracing:!1}}];function ww(){return new r.PXZ("Router",aw)}let bw=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[_w,Sw(t),{provide:vw,useFactory:Ew,deps:[[aw,new r.FiY,new r.tp0]]},{provide:yw,useValue:n||{}},{provide:m,useFactory:Tw,deps:[a,[new r.tBr(v),new r.FiY],yw]},{provide:mw,useFactory:Iw,deps:[aw,P,yw]},{provide:fw,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:pw},{provide:r.PXZ,multi:!0,useFactory:ww},[Cw,{provide:r.ip1,multi:!0,useFactory:Aw,deps:[Cw]},{provide:xw,useFactory:kw,deps:[Cw]},{provide:r.tb,multi:!0,useExisting:xw}]]}}static forChild(t){return{ngModule:e,providers:[Sw(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(vw,8),r.LFG(aw,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function Iw(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new mw(e,t,n)}function Tw(e,t,n={}){return n.useHash?new w(e,t):new _(e,t)}function Ew(e){return"guarded"}function Sw(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:Y_,multi:!0,useValue:e}]}let Cw=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new sm.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(aw),r=this.injector.get(yw);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,ye.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(yw),n=this.injector.get(gw),i=this.injector.get(mw),s=this.injector.get(aw),o=this.injector.get(r.z2F);e===o.components[0]&&(("enabledNonBlocking"===t.initialNavigation||void 0===t.initialNavigation)&&s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function Aw(e){return e.appInitializer.bind(e)}function kw(e){return e.bootstrapListener.bind(e)}const xw=new r.OlP("Router Initializer");var Nw=n(2329);const Ow={production:!0,firebaseConfig:{apiKey:"AIzaSyABsHJGksz2GQ6lRjQDgVamsa0Uzj9K6os",authDomain:"prenotazione-bd921.firebaseapp.com",projectId:"prenotazione-bd921",storageBucket:"prenotazione-bd921.appspot.com",messagingSenderId:"444714964774",appId:"1:444714964774:web:2cf44f687108be56bcd3e7",measurementId:"G-F5SFSZBWS3"}};let Rw=(()=>{class e{constructor(e){this.store=e,this.title="matrimonio-gian";const t=(0,Nw.ZF)(Ow.firebaseConfig);this.db=function(e=(0,Ve.getApp)()){return(0,Ve._getProvider)(e,"firestore").getImmediate()}(t)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(sy))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[["routerLink","/invitati"]],template:function(e,t){1&e&&(r.TgZ(0,"a",0),r._uU(1,"Vai alla scelta"),r.qZA(),r._UZ(2,"router-outlet"))},directives:[cw,hw],styles:[""]}),e})();const Dw=function(e,t){return{red:e,green:t}};function Pw(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"tr"),r.TgZ(2,"td"),r._uU(3),r.qZA(),r.TgZ(4,"td"),r._uU(5),r.qZA(),r.TgZ(6,"td"),r._UZ(7,"div",2),r.qZA(),r.qZA(),r.BQk()),2&e){const e=t.$implicit;r.xp6(3),r.Oqu(e.nome),r.xp6(2),r.Oqu(e.cognome),r.xp6(2),r.Q6J("ngClass",r.WLB(3,Dw,"no"==e.isPresent,"si"==e.isPresent))}}let Lw=(()=>{class e extends Rw{constructor(){super(),this.partecipanti=[],this.presenti=0,this.assenti=0,this.dubbio=0}ngOnInit(){this.partecipanti=[],Ag(dp(this.db,"partecipanti")).then(e=>{var t,n,r;e.forEach(e=>{this.partecipanti.push(e.data())}),this.presenti=null===(t=this.partecipanti.filter(e=>"si"==e.isPresent))||void 0===t?void 0:t.length,this.assenti=null===(n=this.partecipanti.filter(e=>"no"==e.isPresent))||void 0===n?void 0:n.length,this.dubbio=null===(r=this.partecipanti.filter(e=>"forse"==e.isPresent))||void 0===r?void 0:r.length})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["admin"]],features:[r.qOj],decls:17,vars:4,consts:[["id","partecipants"],[4,"ngFor","ngForOf"],[1,"dot",3,"ngClass"]],template:function(e,t){1&e&&(r.TgZ(0,"h1"),r._uU(1,"Lista Partecipanti"),r.qZA(),r.TgZ(2,"h3"),r._uU(3),r.qZA(),r.TgZ(4,"h3"),r._uU(5),r.qZA(),r.TgZ(6,"h3"),r._uU(7),r.qZA(),r.TgZ(8,"table",0),r.TgZ(9,"tr"),r.TgZ(10,"th"),r._uU(11,"Nome"),r.qZA(),r.TgZ(12,"th"),r._uU(13,"Cognome"),r.qZA(),r.TgZ(14,"th"),r._uU(15,"Presente"),r.qZA(),r.qZA(),r.YNc(16,Pw,8,6,"ng-container",1),r.qZA()),2&e&&(r.xp6(3),r.hij("Totale presenti: ",t.presenti,""),r.xp6(2),r.hij("Totale assenti: ",t.assenti,""),r.xp6(2),r.hij("Totale in dubbio: ",t.dubbio,""),r.xp6(9),r.Q6J("ngForOf",t.partecipanti))},directives:[N,k],styles:["#partecipants[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;border-collapse:collapse;width:80%;margin:0 auto}#partecipants[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #partecipants[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}#partecipants[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}#partecipants[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#partecipants[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:left;background-color:#04aa6d;color:#fff}#partecipants[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3){text-align:center}.dot[_ngcontent-%COMP%]{height:25px;width:25px;background-color:orange;border-radius:50%;display:inline-block}.red[_ngcontent-%COMP%]{background-color:red}.green[_ngcontent-%COMP%]{background-color:green}"]}),e})();var Mw=n(1555);function Fw(e,t){return new ge.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,me.D)(e[a]);let c=!1;n.add(u.subscribe({next:e=>{c||(c=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,(s===r||!c)&&(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let Vw=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),Uw=(()=>{class e extends Vw{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const jw=new r.OlP("NgValueAccessor"),qw={provide:jw,useExisting:(0,r.Gpc)(()=>Bw),multi:!0},zw=new r.OlP("CompositionEventMode");let Bw=(()=>{class e extends Vw{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=s()?s().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(zw,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([qw]),r.qOj]}),e})();function Hw(e){return null==e||0===e.length}function Zw(e){return null!=e&&"number"==typeof e.length}const $w=new r.OlP("NgValidators"),Gw=new r.OlP("NgAsyncValidators"),Ww=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Kw{static min(e){return function(e){return t=>{if(Hw(t.value)||Hw(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}static max(e){return function(e){return t=>{if(Hw(t.value)||Hw(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}static required(e){return function(e){return Hw(e.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(e){return!0===e.value?null:{required:!0}}(e)}static email(e){return function(e){return Hw(e.value)||Ww.test(e.value)?null:{email:!0}}(e)}static minLength(e){return function(e){return t=>Hw(t.value)||!Zw(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static maxLength(e){return function(e){return t=>Zw(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static pattern(e){return function(e){if(!e)return Qw;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(Hw(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return nb(e)}static composeAsync(e){return ib(e)}}function Qw(e){return null}function Yw(e){return null!=e}function Jw(e){const t=(0,r.QGY)(e)?(0,me.D)(e):e;return(0,r.CqO)(t),t}function Xw(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function eb(e,t){return t.map(t=>t(e))}function tb(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function nb(e){if(!e)return null;const t=e.filter(Yw);return 0==t.length?null:function(e){return Xw(eb(e,t))}}function rb(e){return null!=e?nb(tb(e)):null}function ib(e){if(!e)return null;const t=e.filter(Yw);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,uy.k)(t))return Fw(t,null);if((0,Mw.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Fw(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Fw(e=1===e.length&&(0,uy.k)(e[0])?e[0]:e,null).pipe((0,Ae.U)(e=>t(...e)))}return Fw(e,null)}(eb(e,t).map(Jw)).pipe((0,Ae.U)(Xw))}}function sb(e){return null!=e?ib(tb(e)):null}function ob(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function ab(e){return e._rawValidators}function ub(e){return e._rawAsyncValidators}function cb(e){return e?Array.isArray(e)?e:[e]:[]}function lb(e,t){return Array.isArray(e)?e.includes(t):e===t}function hb(e,t){const n=cb(t);return cb(e).forEach(e=>{lb(n,e)||n.push(e)}),n}function db(e,t){return cb(t).filter(t=>!lb(e,t))}let fb=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),pb=(()=>{class e extends fb{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class gb extends fb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mb{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}let yb=(()=>{class e extends mb{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(gb,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})(),vb=(()=>{class e extends mb{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(pb,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[r.qOj]}),e})();function _b(e,t){Ib(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Eb(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Eb(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function wb(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Tb(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function bb(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Ib(e,t){const n=ab(e);null!==t.validator?e.setValidators(ob(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=ub(e);null!==t.asyncValidator?e.setAsyncValidators(ob(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();bb(t._rawValidators,i),bb(t._rawAsyncValidators,i)}function Tb(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=ab(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.validator);i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){const r=ub(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.asyncValidator);i.length!==r.length&&(n=!0,e.setAsyncValidators(i))}}}const r=()=>{};return bb(t._rawValidators,r),bb(t._rawAsyncValidators,r),n}function Eb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Sb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Cb="VALID",Ab="INVALID",kb="PENDING",xb="DISABLED";function Nb(e){return(Pb(e)?e.validators:e)||null}function Ob(e){return Array.isArray(e)?rb(e):e||null}function Rb(e,t){return(Pb(t)?t.asyncValidators:e)||null}function Db(e){return Array.isArray(e)?sb(e):e||null}function Pb(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Lb{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ob(this._rawValidators),this._composedAsyncValidatorFn=Db(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cb}get invalid(){return this.status===Ab}get pending(){return this.status==kb}get disabled(){return this.status===xb}get enabled(){return this.status!==xb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ob(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Db(e)}addValidators(e){this.setValidators(hb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(db(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(db(e,this._rawAsyncValidators))}hasValidator(e){return lb(this._rawValidators,e)}hasAsyncValidator(e){return lb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=kb,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xb,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cb,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cb||this.status===kb)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xb:Cb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=kb,this._hasOwnPendingAsyncValidator=!0;const t=Jw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=e;return t.forEach(e=>{r=r instanceof Fb?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Vb&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?xb:this.errors?Ab:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kb)?kb:this._anyControlsHaveStatus(Ab)?Ab:Cb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Mb extends Lb{constructor(e=null,t,n){super(Nb(t),Rb(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Sb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Sb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Fb extends Lb{constructor(e,t,n){super(Nb(t),Rb(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Mb?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Vb extends Lb{constructor(e,t,n){super(Nb(t),Rb(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Mb?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Ub=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),jb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const qb=new r.OlP("NgModelWithFormControlWarning"),zb={provide:pb,useExisting:(0,r.Gpc)(()=>Bb)};let Bb=(()=>{class e extends pb{constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Tb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return _b(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){wb(e.control||null,e,!1),Sb(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,function(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=e.control,n=this.form.get(e.path);t!==n&&(wb(t||null,e),n instanceof Mb&&(_b(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);(function(e,t){Ib(e,t)})(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return Tb(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ib(this.form,this),this._oldForm&&Tb(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(r.Y36($w,10),r.Y36(Gw,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([zb]),r.qOj,r.TTD]}),e})();const Hb={provide:gb,useExisting:(0,r.Gpc)(()=>Zb)};let Zb=(()=>{class e extends gb{constructor(e,t,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===Bw?n=e:function(e){return Object.getPrototypeOf(e.constructor)===Uw}(e)?r=e:i=e}),i||r||n||null}(0,i)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(e,t){return[...t.path,e]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(pb,13),r.Y36($w,10),r.Y36(Gw,10),r.Y36(jw,10),r.Y36(qb,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([Hb]),r.qOj,r.TTD]}),e._ngModelWarningSentOnce=!1,e})();const $b={provide:jw,useExisting:(0,r.Gpc)(()=>Wb),multi:!0};function Gb(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Wb=(()=>{class e extends Uw{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this.setProperty("selectedIndex",-1);const n=Gb(t,e);this.setProperty("value",n)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target.value)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([$b]),r.qOj]}),e})(),Kb=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Gb(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Wb,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Qb={provide:jw,useExisting:(0,r.Gpc)(()=>Jb),multi:!0};function Yb(e,t){return null==e?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}let Jb=(()=>{class e extends Uw{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const n=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(n.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const n=[];if(void 0!==t.selectedOptions){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const r=e.item(t),i=this._getOptionValue(r.value);n.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const r=e.item(t);if(r.selected){const e=this._getOptionValue(r.value);n.push(e)}}}this.value=n,e(n)}}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&r.NdJ("change",function(e){return t.onChange(e.target)})("blur",function(){return t.onTouched()})},inputs:{compareWith:"compareWith"},features:[r._Bn([Qb]),r.qOj]}),e})(),Xb=(()=>{class e{constructor(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(Yb(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Yb(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(Jb,9))},e.\u0275dir=r.lG2({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),eI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[jb]]}),e})(),tI=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:qb,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[eI]}),e})();const nI=[{path:"",children:[{path:"admin",component:Lw},{path:"invitati",component:(()=>{class e{constructor(e){this.store=e,this.form=new Fb({firstname:new Mb("",Kw.required),lastname:new Mb("",Kw.required),choice:new Mb("",Kw.required)})}onConfirm(){var e,t,n,r;this.form.valid&&(null===(e=this.store)||void 0===e||e.collection("partecipanti").add({nome:null===(t=this.form.get("firstname"))||void 0===t?void 0:t.value,cognome:null===(n=this.form.get("lastname"))||void 0===n?void 0:n.value,isPresent:null===(r=this.form.get("choice"))||void 0===r?void 0:r.value}).then(e=>{alert("Scelta salvata con successo"),this.form.reset()}).catch(e=>{alert("Riprova!")}))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(sy))},e.\u0275cmp=r.Xpm({type:e,selectors:[["invitati"]],decls:20,vars:2,consts:[[3,"formGroup","ngSubmit"],["formControlName","firstname","type","text","id","fname","name","firstname","placeholder","Inserisci nome.."],["formControlName","lastname","type","text","id","lname","name","lastname","placeholder","Inserisci cognome.."],["for","scelta"],["formControlName","choice","id","scelta","name","scelta"],["value","si"],["value","no"],["value","forse"],["type","submit","value","Conferma scelta",3,"disabled"]],template:function(e,t){1&e&&(r.TgZ(0,"h1"),r._uU(1,"Parteciperai al matrimonio?"),r.qZA(),r.TgZ(2,"div"),r.TgZ(3,"form",0),r.NdJ("ngSubmit",function(){return t.onConfirm()}),r.TgZ(4,"label"),r._uU(5,"Nome"),r.qZA(),r._UZ(6,"input",1),r.TgZ(7,"label"),r._uU(8,"Cognome"),r.qZA(),r._UZ(9,"input",2),r.TgZ(10,"label",3),r._uU(11,"Partecipo"),r.qZA(),r.TgZ(12,"select",4),r.TgZ(13,"option",5),r._uU(14,"S\xec"),r.qZA(),r.TgZ(15,"option",6),r._uU(16,"No"),r.qZA(),r.TgZ(17,"option",7),r._uU(18,"Ancora in dubbio"),r.qZA(),r.qZA(),r._UZ(19,"input",8),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Q6J("formGroup",t.form),r.xp6(16),r.Q6J("disabled",!t.form.valid))},directives:[Ub,vb,Bb,Bw,yb,Zb,Wb,Kb,Xb],styles:["h1[_ngcontent-%COMP%]{text-align:center;width:80%;margin:20px auto 0}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}input[type=submit][_ngcontent-%COMP%]{width:100%;background-color:#4caf50;color:#fff;padding:14px 20px;margin:8px 0;border:none;border-radius:4px;cursor:pointer}.disab[_ngcontent-%COMP%]{background-color:#ccc}div[_ngcontent-%COMP%]{border-radius:5px;background-color:#f2f2f2;padding:20px;width:80%;margin:2rem auto}"]}),e})()}]}];let rI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[bw.forRoot(nI)],bw]}),e})(),iI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[Rw]}),e.\u0275inj=r.cJS({providers:[{provide:fe.Dh,useValue:Ow.firebaseConfig}],imports:[[de,rI,fe.hO,oy,tI]]}),e})();Ow.production&&(0,r.G48)(),le().bootstrapModule(iI).catch(e=>console.error(e))},4762:function(e,t,n){"use strict";n.d(t,{ZT:function(){return i},pi:function(){return s},_T:function(){return o},mG:function(){return a},Jh:function(){return u},XA:function(){return c},CR:function(){return l},ev:function(){return h}});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,a)}u((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}},8239:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,u,"next",e)}function u(e){r(o,i,s,a,u,"throw",e)}a(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e(e.s=7906)}]);